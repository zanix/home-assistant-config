---
# InfluxDB allows querying a longer history with ease. An external database is
# used for this, combined with Grafana for graphs.
#
# https://www.home-assistant.io/integrations/influxdb/
#
influxdb:
  host: !secret influxdb_host
  port: 8086
  ssl: false
  api_version: 2
  token: !secret influxdb_token
  organization: !secret influxdb_organization
  bucket: Home Assistant
  precision: s

  default_measurement: units

  tags:
    source: hass

  # The list of attribute names which should be reported as tags
  # and not fields to InfluxDB.
  tags_attributes:
    - "device_class"
    - "node_id"
    - "friendly_name"

  # Authentication credentials (not currently used)
  # username: !secret influxdb_username
  # password: !secret influxdb_password

  # Max number of retries in case of a failure
  max_retries: 3

  # Filters for domains and entities to exclude from influxdb.
  # exclude: !include_dir_merge_named ../entities/influxdb
  exclude:
    domains:
      - automation
      - camera
      - group
      - device_tracker
      - input_boolean
      - input_datetime
      - input_number
      - input_select
      - input_text
      - persistent_notification
      - remote
      - script
      - select
      - update
      - zone
      - zwave
    entity_globs:
      - sensor.*_power_kw

    entities:
      - sensor.date
      - sensor.date_time
      - sensor.date_time_iso
      - sensor.last_boot
      - sensor.time

      - sensor.sunset
      - sensor.sunrise
