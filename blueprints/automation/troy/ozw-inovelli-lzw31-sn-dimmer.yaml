blueprint:
  name: Inovelli Red Series LZW31-SN Dimmer
  description: Create automations for the Inovelli Red Series LZW31-SN Dimmer using
    the OZW integration.
  domain: automation
  input:
    inovelli_switch:
      name: Inovelli Dimmer
      description: List of available inovelli LZW31-SN dimmers. This list is only
        a reference. At this time, it is not possible to obtain the node's id using
        the device selector.
      selector:
        device:
          integration: ozw
          manufacturer: Inovelli
          model: LZW31-SN Dimmer Red Series
    ozw_node_id:
      name: Node ID
      description: Enter the node id for an available LZW31-SN dimmer you wish to
        configure. For now, this field is required. At this time, it is not possible
        to obtain the node's id when using the device selector.
    config_button:
      name: Button C - Config press 1x
      description: Action to run, when the config button is pressed one time.
      default: []
      selector:
        action: {}
    button_a:
      name: Button A - Up/On press 1x
      description: Action to run, when the button is pressed one time. Typically,
        you will only set this if you have disabled the relay.
      default: []
      selector:
        action: {}
    button_b:
      name: Button B - Down/Off press 1x
      description: Action to run, when the button is pressed one time. Typically,
        you will only set this if you have disabled the relay.
      default: []
      selector:
        action: {}
    button_a_held:
      name: Button A - Up/On held down
      description: Action to run, when the button is held down. Typically, you will
        only set this if you have disabled the relay.
      default: []
      selector:
        action: {}
    button_b_held:
      name: Button B - Down/Off held down
      description: Action to run, when the button is held down. Typically, you will
        only set this if you have disabled the relay.
      default: []
      selector:
        action: {}
    button_a2:
      name: Button A - Up/On press 2x
      description: Action to run, when the button is pressed two times.
      default: []
      selector:
        action: {}
    button_b2:
      name: Button B - Down/Off press 2x
      description: Action to run, when the button is pressed two times.
      default: []
      selector:
        action: {}
    button_a3:
      name: Button A - Up/On press 3x
      description: Action to run, when the button is pressed three times.
      default: []
      selector:
        action: {}
    button_b3:
      name: Button B - Down/Off press 3x
      description: Action to run, when the button is pressed three times.
      default: []
      selector:
        action: {}
    button_a4:
      name: Button A - Up/On press 4x
      description: Action to run, when the button is pressed four times.
      default: []
      selector:
        action: {}
    button_b4:
      name: Button B - Down/Off press 4x
      description: Action to run, when the button is pressed four times.
      default: []
      selector:
        action: {}
    button_a5:
      name: Button A - Up/On press 5x
      description: Action to run, when the button is pressed five times.
      default: []
      selector:
        action: {}
    button_b5:
      name: Button B - Down/Off press 5x
      description: Action to run, when the button is pressed five times.
      default: []
      selector:
        action: {}
  source_url: https://community.home-assistant.io/t/ozw-inovelli-lzw31-sn-dimmer/256030
mode: single
max_exceeded: silent
variables:
  device_id: !input 'inovelli_switch'
  ozw_node_id: !input 'ozw_node_id'
trigger:
- platform: event
  event_type: ozw.scene_activated
action:
- variables:
    node_id: '{{ trigger.event.data.node_id }}'
    scene_id: '{{ trigger.event.data.scene_id }}'
    scene_value_id: '{{ trigger.event.data.scene_value_id }}'
- choose:
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 3 }}'
    - '{{ scene_value_id == 1 }}'
    sequence: !input 'config_button'
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 2 }}'
    - '{{ scene_value_id == 1 }}'
    sequence: !input 'button_a'
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 1 }}'
    - '{{ scene_value_id == 1 }}'
    sequence: !input 'button_b'
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 2 }}'
    - '{{ scene_value_id == 3 }}'
    sequence: !input 'button_a_held'
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 1 }}'
    - '{{ scene_value_id == 3 }}'
    sequence: !input 'button_b_held'
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 2 }}'
    - '{{ scene_value_id == 4 }}'
    sequence: !input 'button_a2'
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 1 }}'
    - '{{ scene_value_id == 4 }}'
    sequence: !input 'button_b2'
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 2 }}'
    - '{{ scene_value_id == 5 }}'
    sequence: !input 'button_a3'
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 1 }}'
    - '{{ scene_value_id == 5 }}'
    sequence: !input 'button_b3'
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 2 }}'
    - '{{ scene_value_id == 6 }}'
    sequence: !input 'button_a4'
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 1 }}'
    - '{{ scene_value_id == 6 }}'
    sequence: !input 'button_b4'
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 2 }}'
    - '{{ scene_value_id == 7 }}'
    sequence: !input 'button_a5'
  - conditions:
    - '{{ node_id == ( ozw_node_id | int ) }}'
    - '{{ scene_id == 1 }}'
    - '{{ scene_value_id == 7 }}'
    sequence: !input 'button_b5'
