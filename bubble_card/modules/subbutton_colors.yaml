subbutton_colors:
  name: Subbutton Colors
  version: v1.0
  creator: HenryJIII
  description: This module adds the ability to customize background colors for subbuttons conditionally.
  unsupported:
    - horizontal-buttons-stack
    - pop-up
    - empty-column
  code: |
    ${(() => {
      const config = this.config.subbutton_colors || {};

      const hasColor = (subbuttonConfig) => {
          return !!subbuttonConfig?.color;
      };

      const applyColor = (containerSelector, subbuttonConfig) => {
        if (!hasColor(subbuttonConfig)) {
          return;
        }

        const subbutton = card.querySelector(containerSelector);
        if (!subbutton) return;

        if (!subbuttonConfig?.condition || (subbuttonConfig?.condition && checkConditionsMet([].concat(subbuttonConfig.condition), hass))) {
          subbutton.style.backgroundColor = `var(--${subbuttonConfig.color}-color)`;
        } else {
          subbutton.style.backgroundColor = "";
        }
      };

      Object.values(config).forEach((c, index) => {
        let subbuttonNumber = Number(Object.keys(config)[index].replace("subbutton", ""));
        applyColor(`.bubble-sub-button-${subbuttonNumber}`, c);
      });
      })()}
  editor:
    - type: expandable
      name: subbutton1
      title: Subbutton 1
      icon: mdi:list-box-outline
      schema:
        - name: color
          label: Background Color
          selector:
            ui_color:
              include_none: true
        - name: condition
          label: Color is always applied if no condition is defined. Otherwise, it will be shown when ALL below conditions are fulfilled.
          selector:
            condition: {}
    - type: expandable
      name: subbutton2
      title: Subbutton 2
      icon: mdi:list-box-outline
      schema:
        - name: color
          label: Background Color
          selector:
            ui_color:
              include_none: true
        - name: condition
          label: Color is always applied if no condition is defined. Otherwise, it will be shown when ALL below conditions are fulfilled.
          selector:
            condition: {}
    - type: expandable
      name: subbutton3
      title: Subbutton 3
      icon: mdi:list-box-outline
      schema:
        - name: color
          label: Background Color
          selector:
            ui_color:
              include_none: true
        - name: condition
          label: Color is always applied if no condition is defined. Otherwise, it will be shown when ALL below conditions are fulfilled.
          selector:
            condition: {}
    - type: expandable
      name: subbutton4
      title: Subbutton 4
      icon: mdi:list-box-outline
      schema:
        - name: color
          label: Background Color
          selector:
            ui_color:
              include_none: true
        - name: condition
          label: Color is always applied if no condition is defined. Otherwise, it will be shown when ALL below conditions are fulfilled.
          selector:
            condition: {}
    - type: expandable
      name: subbutton5
      title: Subbutton 5
      icon: mdi:list-box-outline
      schema:
        - name: color
          label: Background Color
          selector:
            ui_color:
              include_none: true
        - name: condition
          label: Color is always applied if no condition is defined. Otherwise, it will be shown when ALL below conditions are fulfilled.
          selector:
            condition: {}
    - type: expandable
      name: subbutton6
      title: Subbutton 6
      icon: mdi:list-box-outline
      schema:
        - name: color
          label: Background Color
          selector:
            ui_color:
              include_none: true
        - name: condition
          label: Color is always applied if no condition is defined. Otherwise, it will be shown when ALL below conditions are fulfilled.
          selector:
            condition: {}
  link: https://github.com/Clooos/Bubble-Card/discussions/1311
