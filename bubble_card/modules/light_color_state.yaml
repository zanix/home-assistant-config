light_color_state:
  name: Light Color State
  version: '1.0'
  creator: zanix
  description: Adds light color as the secondary info line.
  supported:
    - button
  code: |-
    ${(() => {
      const element = card.querySelector('.bubble-state');

      const entity = hass.states[this.config.entity];
      if (!entity) {
        return;
      }

      if (!["off", "unknown"].includes(entity.state)) {
        let values = [];
        values.push(hass.formatEntityAttributeValue(hass.states[this.config.entity], "brightness") || "");

        if (hass.states[this.config.entity].attributes.color_mode === "color_temp" ) {
          values.push(hass.formatEntityAttributeValue(hass.states[this.config.entity], "color_temp_kelvin") || "");
        }
        if (["rgb", "xy"].includes(hass.states[this.config.entity].attributes.color_mode) ) {
          values.push(hass.formatEntityAttributeValue(hass.states[this.config.entity], "rgb_color") || "");
        }

        element.innerHTML = values
          .filter(n => n && !["Unknown","Unavailable"].includes(n))
          .join(" â¸± ");
      }
    })()}
  editor: ''
