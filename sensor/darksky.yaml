###########################################################
# Sensor: Darksky
###########################################################

- platform: darksky
  name: Weather
  api_key: !secret darksky_api_key
  monitored_conditions:
    # - summary
    - precip_type
    - precip_intensity
    # - precip_probability
    - temperature
    # - apparent_temperature
    # - dew_point
    - wind_speed
    # - wind_bearing
    - cloud_cover
    - humidity
    # - pressure
    # - visibility
    # - ozone
    - minutely_summary
    # - hourly_summary
    # - daily_summary
    # - temperature_max
    # - temperature_min
    # - apparent_temperature_max
    # - apparent_temperature_min
    - precip_intensity_max
    # - nearest_storm_distance
    - icon

- platform: template
  sensors:
    weather_summary_icon:
      friendly_name: Weather Summary
      entity_id: sensor.weather_minutely_summary
      value_template: "{{ states('sensor.weather_minutely_summary') }}"
      icon_template: >
        {% if is_state('sensor.weather_icon', 'clear-day') %}
          mdi:weather-sunny
        {% elif is_state('sensor.weather_icon', 'clear-night') %}
          mdi:weather-night
        {% elif is_state('sensor.weather_icon', 'rain') %}
          mdi:weather-rainy
        {% elif is_state('sensor.weather_icon', 'snow') %}
          mdi:weather-snowy
        {% elif is_state('sensor.weather_icon', 'sleet') %}
          mdi:weather-snowy-rainy
        {% elif is_state('sensor.weather_icon', 'wind') %}
          mdi:weather-windy
        {% elif is_state('sensor.weather_icon', 'fog') %}
          mdi:weather-fog
        {% elif is_state('sensor.weather_icon', 'cloudy') %}
          mdi:weather-cloudy
        {% elif is_state('sensor.weather_icon', 'partly-cloudy-day') or is_state('sensor.weather_icon', 'partly-cloudy-night') %}
          mdi:weather-partlycloudy
        {% elif is_state('sensor.weather_icon', 'hail') %}
          mdi:weather-hail
        {% elif is_state('sensor.weather_icon', 'thunderstorm') %}
          mdi:weather-lightning
        {% else %}
          mdi:help-circle
        {% endif %}
