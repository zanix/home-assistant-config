---
id: shield_family_room_sound_mode
alias: '[Shield] Family Room Sound Mode'
description: 'Changes the Yamaha reciever sound modes'

trigger:
  platform: state
  entity_id: media_player.family_room_shield
  attribute: source

variables:
  sound_mode: >-
    {%- if trigger.to_state.attributes.source == "Spotify" -%}
      7ch Stereo
    {%- elif trigger.to_state.attributes.source == "YouTube" -%}
      Surround Decoder
    {%- else -%}
      Straight
    {%- endif -%}

action:
  - service: media_player.select_sound_mode
    target:
      entity_id: media_player.yamaha_receiver
    data:
      sound_mode: '{{ sound_mode }}'
