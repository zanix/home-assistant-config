---
id: led_garage_door_and_light_status
alias: '[LED] Garage Door and Light Status'
description: 'Set Garage light switch LED when Garage Door and light status'
mode: restart

trigger:
  - platform: state
    entity_id: cover.garage_door
  - platform: state
    entity_id: switch.garage_light

action:
  - choose:
      - conditions:  # Light off / Garage closed
          - condition: state
            entity_id: cover.garage_door
            state: 'closed'
          - condition: state
            entity_id: switch.garage_light
            state: 'off'
        sequence:
          - service: script.inovelli_led
            data:
              entity_id:
                - switch.garage_light
              effect: 'Off'

      - conditions:  # Light on / Garage closed
          - condition: state
            entity_id: cover.garage_door
            state: 'closed'
          - condition: state
            entity_id: switch.garage_light
            state: 'on'
        sequence:
          - service: script.inovelli_led
            data:
              entity_id:
                - switch.garage_light
              effect: 'Off'

      - conditions:  # Light off / Garage open
          - condition: state
            entity_id: cover.garage_door
            state: 'open'
          - condition: state
            entity_id: switch.garage_light
            state: 'off'
        sequence:
          - service: script.inovelli_led
            data:
              entity_id:
                - switch.garage_light
              color: Red
              effect: Pulse
              level: 10

      - conditions:  # Light on / Garage open
          - condition: state
            entity_id: cover.garage_door
            state: 'open'
          - condition: state
            entity_id: switch.garage_light
            state: 'on'
        sequence:
          - service: script.inovelli_led
            data:
              entity_id:
                - switch.garage_light
              color: Purple
              effect: Pulse
              level: 10
