---
id: dishwasher_done
alias: '[Notify] Dishwasher is Done'
description: 'Sends notification when the dishwasher is done'

trigger:
  - platform: numeric_state
    entity_id: sensor.dishwasher_disposal_2_1min
    for:
      minutes: 5
    above: 10

action:
  - wait_for_trigger:
      - platform: numeric_state
        entity_id: sensor.dishwasher_disposal_2_1min
        below: 10
        for:
          minutes: 5

  - service: script.notify_mobile
    data:
      who: 'parents'
      title: 'Dishwasher'
      message: 'The dishwasher is done!'
      icon: '/local/icons/washing-machine.png'
      tag: 'dishwasher'

  - service: script.notify_join
    data:
      who: 'shield_all'
      title: 'Dishwasher'
      message: 'The dishwasher is done!'
      icon: 'local/icons/dishwasher.png'
