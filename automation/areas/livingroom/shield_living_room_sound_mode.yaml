---
id: shield_living_room_sound_mode
alias: '[Shield] Living Room Sound Mode'
description: 'Changes the Onkyo reciever sound modes'

trigger:
  platform: state
  entity_id: media_player.living_room_shield
  attribute: source

variables:
  sound_mode: >-
    {%- if trigger.to_state.attributes.source == "Spotify" -%}
      Extended Stereo
    {%- else  -%}
      Dolby Digital
    {%- endif -%}

condition:
  - condition: template
    value_template: >-
      {{ trigger.to_state.attributes.source == "Spotify" or trigger.from_state.attributes.source == "Spotify" }}

action:
  - service: media_player.select_sound_mode
    target:
      entity_id: media_player.onkyo_receiver
    data:
      sound_mode: '{{ sound_mode }}'
