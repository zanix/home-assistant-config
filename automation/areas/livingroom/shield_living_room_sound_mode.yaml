---
id: shield_living_room_sound_mode
alias: '[Shield] Living Room Sound Mode'
description: 'Changes the Onkyo reciever sound modes'

trigger:
  platform: state
  entity_id: media_player.living_room_shield
  attribute: source

variables:
  sound_mode: >-
    {%- if trigger.to_state.attributes.source == "Spotify" -%}
      Extended Stereo
    {%- elif trigger.to_state.attributes.source in ["Youtube","YouTube Kids","PBS Kids","Hulu"] -%}
      Auto Surround
    {%- else  -%}
      Dolby Digital
    {%- endif -%}

action:
  - service: media_player.select_sound_mode
    target:
      entity_id: media_player.onkyo_receiver
    data:
      sound_mode: '{{ sound_mode }}'
