---
id: washer_done
alias: '[Notify] Washer is Done'
description: 'Sends notification when the washer is done'

trigger:
  - platform: numeric_state
    entity_id: sensor.washer_5_1min
    for:
      minutes: 5
    above: 10

action:
  - wait_for_trigger:
      - platform: numeric_state
        entity_id: sensor.washer_5_1min
        below: 10
        for:
          minutes: 2

  - service: script.notify_mobile
    data:
      who: 'parents'
      title: 'Laundry'
      message: 'The washer is done! Forward the clothes to the dryer.'
      icon: '/local/icons/washing-machine.png'
      group: 'laundry'
      tag: 'laundry-washer'

  - service: script.notify_join
    data:
      who: 'shield_all'
      title: 'Laundry'
      message: 'The washer is done!'
      icon: 'local/icons/washing-machine.png'
