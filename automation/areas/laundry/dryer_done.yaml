---
id: dryer_done
alias: '[Notify] Dryer is Done'
description: 'Sends notification when the dryer is done'

trigger:
  - platform: numeric_state
    entity_id: sensor.dryer_10_1min
    for:
      minutes: 5
    above: 10

action:
  - wait_for_trigger:
      - platform: numeric_state
        entity_id: sensor.dryer_10_1min
        below: 10
        for:
          minutes: 2

  - service: script.notify_mobile
    data:
      who: 'parents'
      title: 'Laundry'
      message: 'The dryer is done! Take the clothes out of the dryer.'
      icon: '/local/icons/washing-machine.png'
      group: 'laundry'
      tag: 'laundry-dryer'

  - service: script.notify_join
    data:
      who: 'shield_all'
      title: 'Laundry'
      message: 'The dryer is done!'
      icon: 'local/icons/washing-machine.png'
