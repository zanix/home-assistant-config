---
id: actionable_garbage_collection
alias: '[Actionable] Garbage Collection'
description: 'Confirm collection can is on the curb'

trigger:
  - platform: event
    event_type: mobile_app_notification_action
    event_data:
      action: garbage_collection
  - platform: event
    event_type: mobile_app_notification_action
    event_data:
      action: recycling_collection

action:
  - service: input_boolean.turn_on
    target:
      entity_id: 'input_boolean.{{ trigger.event.data.title|lower }}_collection'

  - service: script.notify_mobile
    data:
      who: 'parents'
      title: ''
      message: 'clear_notification'
      tag: '{{ trigger.event.data.tag }}'

  - service: script.notify_mobile
    data:
      who: 'parents'
      title: '{{ trigger.event.data.title }}'
      message: 'The {{ trigger.event.data.title }} can is at the curb'
      icon: '{{ trigger.event.data.icon_url }}'
      group: '{{ trigger.event.data.group }}'
      tag: '{{ trigger.event.data.tag }}-out'
