---
# The template platform supports sensors which get their values from other
# entities.
#
# https://www.home-assistant.io/integrations/template/
#
platform: template
sensors:
  door_garage_side:
    friendly_name: Garage Outside Door
    availability_template: "{{ true if not is_state('sensor.door_garage_side_alarm_level', 'unavailable') else false }}"
    value_template: >-
      {%- if is_state("sensor.door_garage_side_alarm_level", "255") -%}
        {%- if is_state("sensor.door_garage_side_burglar", "3") -%}
          Tampered
        {%- else -%}
          Open
        {%- endif %}
      {%- else -%}
        Closed
      {%- endif %}
    icon_template: >-
      {%- if is_state("sensor.door_garage_side_alarm_level", "255") -%}
        {%- if is_state("sensor.door_garage_side_burglar", "3") -%}
          mdi:alert
        {%- else -%}
          mdi:door-open
        {%- endif %}
      {%- else -%}
        mdi:door
      {%- endif %}
