---
# The template platform supports sensors which get their values from other
# entities.
#
# https://www.home-assistant.io/integrations/template/
#
platform: template
sensors:
  occupancy_garage:
    friendly_name: Garage Occupancy
    entity_id:
      - sensor.multisensor_garage_alarm_level
      - sensor.multisensor_garage_burglar
    availability_template: "{{ true if not is_state('sensor.multisensor_garage_alarm_level', 'unavailable') else false }}"
    value_template: >-
      {% if is_state("sensor.multisensor_garage_alarm_level", "255") %}
        {% if is_state("sensor.multisensor_garage_burglar", "3") %}
          Tampered
        {% else %}
          Occupied
        {% endif %}
      {% else %}
        Clear
      {% endif %}
    icon_template: >-
      {% if is_state("sensor.multisensor_garage_alarm_level", "255") %}
        {% if is_state("sensor.multisensor_garage_burglar", "3") %}
          mdi:alert
        {% else %}
          mdi:account
        {% endif %}
      {% else %}
        mdi:account-off
      {% endif %}
