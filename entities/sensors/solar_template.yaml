---
# The template platform supports sensors which get their values from other
# entities.
#
# https://www.home-assistant.io/integrations/template/
#
platform: template
sensors:
  solar_current:
    friendly_name: "Current Generation"
    availability_template: "{{ not is_state('sensor.solaredge_current_power', 'unavailable') }}"
    value_template: "{{ states('sensor.solaredge_current_power') | round(1) }}"
    unit_of_measurement: "Wh"
    icon_template: mdi:solar-power

  solar_today:
    friendly_name: "Generated Today"
    availability_template: "{{ not is_state('sensor.solaredge_energy_today', 'unavailable') }}"
    value_template: "{{ (states('sensor.solaredge_energy_today') | float / 1000) | round(2) }}"
    unit_of_measurement: "kWh"
    icon_template: mdi:calendar-today

  solar_this_month:
    friendly_name: "Generated this Month"
    availability_template: "{{ not is_state('sensor.solaredge_energy_this_month', 'unavailable') }}"
    value_template: "{{ (states('sensor.solaredge_energy_this_month') | float / 1000) | round(2) }}"
    unit_of_measurement: "kWh"
    icon_template: mdi:calendar-blank

  solar_this_year:
    friendly_name: "Generated this Year"
    availability_template: "{{ not is_state('sensor.solaredge_energy_this_year', 'unavailable') }}"
    value_template: "{{ (states('sensor.solaredge_energy_this_year') | float / 1000) | round(2) }}"
    unit_of_measurement: "kWh"
    icon_template: mdi:calendar-multiple

  solar_lifetime:
    friendly_name: "Lifetime Generation"
    availability_template: "{{ not is_state('sensor.solaredge_lifetime_energy', 'unavailable') }}"
    value_template: "{{ (states('sensor.solaredge_lifetime_energy') | float / 1000000) | round(2) }}"
    unit_of_measurement: "MWh"
    icon_template: mdi:calendar-clock
