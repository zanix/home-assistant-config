---
# The template integration allows creating entities which derive their values
# from other data. This is done by specifying templates for properties of an
# entity, like the name or the state.
#
# https://www.home-assistant.io/integrations/template/
#
sensor:
  name: "Tariff Price"
  unit_of_measurement: "USD/kWh"
  icon: mdi:currency-usd
  availability: "{{ not is_state('utility_meter.monthly_energy', 'unavailable') }}"
  state: >
    {%- if is_state('utility_meter.monthly_energy', 'summer_offpeak') -%}
      {{ states('input_text.tariff_summer_offpeak')|float }}
    {%- elif is_state('utility_meter.monthly_energy', 'summer_peak') -%}
      {{ states('input_text.tariff_summer_peak')|float }}
    {%- elif is_state('utility_meter.monthly_energy', 'winter_offpeak') -%}
      {{ states('input_text.tariff_winter_offpeak')|float }}
    {%- elif is_state('utility_meter.monthly_energy', 'winter_peak') -%}
      {{ states('input_text.tariff_winter_peak')|float }}
    {%- endif -%}
