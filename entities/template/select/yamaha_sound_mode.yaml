---
# The template integration allows creating entities which derive their values
# from other data. This is done by specifying templates for properties of an
# entity, like the name or the state.
#
# https://www.home-assistant.io/integrations/template/
#
select:
  - name: "Yamaha Sound Mode"
    availability: '{{ has_value("media_player.yamaha_rx_v679") }}'
    state: |-
      {%- set sound_mode = state_attr('media_player.yamaha_rx_v679', 'sound_mode') | default('off', true) -%}
      {{ {
        "2ch_stereo": "2Ch Stereo",
        "7ch_stereo": "MCh Stereo",
        "action_game": "Action Game",
        "adventure": "Adventure",
        "bottom_line": "Bottom Line",
        "cellar_club": "Cellar Club",
        "chamber": "Chamber",
        "drama": "Drama",
        "mono_movie": "Mono Movie",
        "munich": "Munich",
        "music_video": "Music Video",
        "roleplaying_game": "Roleplaying Game",
        "roxy_theatre": "Roxy Theatre",
        "sci-fi": "Sci-Fi",
        "spectacle": "Spectacle",
        "sports": "Sports",
        "standard": "Standard",
        "straight": "Straight",
        "surr_decoder": "Surround",
        "vienna": "Vienna",
        "off": "Off"
      }[sound_mode] }}
    options: |-
      {{ ["2Ch Stereo", "MCh Stereo", "Action Game", "Adventure", "Bottom Line",
      "Cellar Club", "Chamber", "Drama", "Mono Movie", "Munich", "Music Video",
      "Roleplaying Game", "Roxy Theatre", "Sci-Fi", "Spectacle", "Sports",
      "Standard", "Straight", "Surround", "Vienna", "Off"] }}
    select_option:
      - service: media_player.select_sound_mode
        target:
          entity_id: media_player.yamaha_rx_v679
        data:
          sound_mode: |-
            {{ {
              "2Ch Stereo": "2ch_stereo",
              "MCh Stereo": "7ch_stereo",
              "Action Game": "action_game",
              "Adventure": "adventure",
              "Bottom Line": "bottom_line",
              "Cellar Club": "cellar_club",
              "Chamber": "chamber",
              "Drama": "drama",
              "Mono Movie": "mono_movie",
              "Munich": "munich",
              "Music Video": "music_video",
              "Roleplaying Game": "roleplaying_game",
              "Roxy Theatre": "roxy_theatre",
              "Sci-Fi": "sci-fi",
              "Spectacle": "spectacle",
              "Sports": "sports",
              "Standard": "standard",
              "Straight": "straight",
              "Surround": "surr_decoder",
              "Vienna": "vienna",
              "Off": "off"
            }[option] }}
