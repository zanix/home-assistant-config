---
# The template integration allows creating entities which derive their values
# from other data. This is done by specifying templates for properties of an
# entity, like the name or the state.
#
# https://www.home-assistant.io/integrations/template/
#
sensor:
  name: Minute Power Cost
  unit_of_measurement: "USD"
  icon: mdi:currency-usd
  availability: "{{ not is_state('sensor.home_123_1min', 'unavailable') }}"
  state: >
    {%- set power = states('sensor.home_123_1min') | float -%}
    {%- set cost = states('sensor.tariff_price') | float -%}
    {{ ((power / 1000) * cost)|round(2) }}
