---
# The template integration allows creating entities which derive their values
# from other data. This is done by specifying templates for properties of an
# entity, like the name or the state.
#
# https://www.home-assistant.io/integrations/template/
#
sensor:
  - name: Day Power Cost
    unit_of_measurement: "USD"
    icon: mdi:currency-usd
    availability: "{{ not states('sensor.grid_net_daily') in ['unknown', 'unavailable'] and not states('sensor.tariff_price') in ['unknown', 'unavailable'] }}"
    state: >-
      {% set energy = states('sensor.grid_net_daily') | float(default=0) %}
      {% set cost = states('sensor.tariff_price') | float(default=0) %}
      {{ (energy * cost) | round(2) }}
