---
# The template integration allows creating entities which derive their values
# from other data. This is done by specifying templates for properties of an
# entity, like the name or the state.
#
# https://www.home-assistant.io/integrations/template/
#
sensor:
  - name: Solar 1D
    unit_of_measurement: "kWh"
    icon: mdi:flash
    device_class: energy
    availability: "{{ not is_state('sensor.solar_a_15_1d', 'unavailable') and  not is_state('sensor.solar_b_16_1d', 'unavailable') }}"
    state: >
      {%- set solar_a = states('sensor.solar_a_15_1d') | float(default=0) -%}
      {%- set solar_b = states('sensor.solar_b_16_1d') | float(default=0) -%}
      {{ (solar_a + solar_b)|round(2) }}
