---
# The template integration allows creating entities which derive their values
# from other data. This is done by specifying templates for properties of an
# entity, like the name or the state.
#
# https://www.home-assistant.io/integrations/template/
#
sensor:
  - name: "UniFi Status WAN CPU"
    availability: '{{ has_value("sensor.unifi_status_wan") }}'
    icon: mdi:cpu-64-bit
    unit_of_measurement: "%"
    state: '{{ state_attr("sensor.unifi_status_wan", "gw_system-stats")["cpu"] }}'
  - name: "UniFi Status WAN Memory"
    availability: '{{ has_value("sensor.unifi_status_wan") }}'
    icon: mdi:memory
    unit_of_measurement: "%"
    state: '{{ state_attr("sensor.unifi_status_wan", "gw_system-stats")["mem"] }}'
  - name: "UniFi Status WAN Download"
    availability: '{{ has_value("sensor.unifi_status_wan") }}'
    icon: mdi:progress-download
    unit_of_measurement: Kbps
    state: '{{ (state_attr("sensor.unifi_status_wan", "rx_bytes-r") / 1024) | int }}'
  - name: "UniFi Status WAN Upload"
    availability: '{{ has_value("sensor.unifi_status_wan") }}'
    icon: mdi:progress-upload
    unit_of_measurement: Kbps
    state: '{{ (state_attr("sensor.unifi_status_wan", "tx_bytes-r") / 1024) | int }}'
