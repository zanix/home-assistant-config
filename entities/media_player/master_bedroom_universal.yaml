---
# Universal Media Players combine multiple existing entities in Home Assistant
# into one media player entity. This is used for creating a single entity that
# controls an entire media center.
#
# https://www.home-assistant.io/integrations/universal/
#
platform: universal
unique_id: master_bedroom_universal
name: Master Bedroom Universal
device_class: tv
children:
  - media_player.plex_master_bedroom
  - media_player.cast_master_bedroom
  - media_player.master_bedroom_shield
state_template: >-
  {% if not states('media_player.plex_master_bedroom') in ['standby', 'off', 'unknown', 'unavailable'] %}
    {{ states("media_player.plex_master_bedroom") }}
  {% else %}
    {{ states('media_player.master_bedroom_shield') }}
  {% endif %}
attributes:
  source_list: media_player.master_bedroom_shield|source_list
  source: media_player.master_bedroom_shield|app_id
commands:
  turn_on:
    service: remote.turn_on
    target:
      entity_id: remote.master_bedroom
    data:
      activity: 'Shield TV'
  turn_off:
    service: remote.turn_off
    target:
      entity_id: remote.master_bedroom
  media_play:
    service: media_player.media_play
    target:
      entity_id: media_player.master_bedroom_shield
  media_play_pause:
    service: media_player.media_play_pause
    target:
      entity_id: media_player.master_bedroom_shield
  media_pause:
    service: media_player.media_pause
    target:
      entity_id: media_player.master_bedroom_shield
  media_previous_track:
    service: media_player.media_previous_track
    target:
      entity_id: media_player.master_bedroom_shield
  media_next_track:
    service: media_player.media_next_track
    target:
      entity_id: media_player.master_bedroom_shield
  volume_up:
    service: remote.send_command
    target:
      entity_id: remote.master_bedroom
    data:
      device: "Vizio Amp"
      command: VolumeUp
  volume_down:
    service: remote.send_command
    target:
      entity_id: remote.master_bedroom
    data:
      device: "Vizio Amp"
      command: VolumeDown
  volume_mute:
    service: remote.send_command
    target:
      entity_id: remote.master_bedroom
    data:
      device: "Vizio Amp"
      command: Mute
  select_source:
    service: media_player.select_source
    target:
      entity_id: media_player.master_bedroom_shield
    data:
      source: '{{ source }}'
