---
# The SQL sensor gets values from a SQL database supported by the sqlalchemy
# library, to populate a sensor state (and attributes).
#
# https://www.home-assistant.io/integrations/influxdb/
#
platform: influxdb
api_version: 1
host: !secret influxdb_host
port: 8086
scan_interval: 3600
queries:
  - name: InfluxDB Database Size
    unit_of_measurement: MB
    value_template: "{{ (value | float(0) / 1024 /1024) | round(1) }}"
    group_function: sum
    measurement: '"monitor"."shard"'
    database: _internal
    where: '"database"=''home_assistant'' AND time > now() - 5m'
    field: diskBytes
