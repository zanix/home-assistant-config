title: Mechanix
kiosk_mode:
  mobile_settings:
    ignore_entity_settings: true
  user_settings:
    - users:
        - Ethan
        - Emma
      hide_search: true
      hide_assistant: true
      hide_sidebar: false
      hide_dialog_history_show_more: true
      hide_dialog_logbook: true
      hide_dialog_attributes: true
button_card_templates:
  badge:
    show_label: true
    variables:
      color: var(--grey-color)
    styles:
      grid:
        - grid-template-areas: '"i n" "i l"'
        - grid-template-columns: min-content min-content
        - grid-template-rows: min-content
      card:
        - padding: 0px 8px
        - height: 36px
        - border-radius: var(--ha-badge-border-radius, calc(var(--ha-badge-size, 36px)
            / 2))
        - --mdc-ripple-color: '[[[ return variables.color ]]]'
      img_cell:
        - justify-content: start
        - width: 26px
        - height: 26px
        - border-radius: 100%
      icon:
        - position: relative
        - width: 18px
        - height: 18px
        - color: '[[[ return variables.color ]]]'
      name:
        - justify-self: start
        - align-self: start
        - margin-left: 4px
        - margin-top: 3px
        - padding-right: 4px
        - font-size: 10px
        - font-weight: 500
        - letter-spacing: 0.1px;
        - color: var(--secondary-text-color)
      label:
        - justify-self: start
        - align-self: start
        - margin-left: 4px
        - padding-right: 4px
        - font-size: 12px
        - font-weight: 500
        - letter-spacing: 0.1px;
        - color: var(--primary-text-color)
  button:
    variables:
      color: var(--grey-color)
    styles:
      grid:
        - grid-template-areas: '"i n"'
        - grid-template-columns: min-content min-content
      card:
        - padding: 5px 8px
        - height: 42px
        - border-radius: 12px
        - --mdc-ripple-color: '[[[ return variables.color ]]]'
        - width: auto
        - margin: auto 0
        - background: "[[[\n  return `color-mix(in srgb, ${variables.color}, transparent\
            \ 85%)`;\n]]]\n"
      img_cell:
        - justify-content: start
        - width: 26px
        - height: 26px
        - border-radius: 100%
      icon:
        - position: relative
        - width: 18px
        - height: 18px
        - color: '[[[ return variables.color ]]]'
      name:
        - justify-self: start
        - margin-left: 4px
        - padding-right: 4px
        - font-size: 16px
        - font-weight: 500
        - letter-spacing: 0.1px;
        - color: var(--primary-text-color)
  button_label:
    template: button
    show_label: true
    styles:
      grid:
        - grid-template-areas: '"i n" "i l"'
        - grid-template-columns: min-content min-content
        - grid-template-rows: min-content
      card:
        - padding: 5px 8px
      label:
        - justify-self: start
        - align-self: start
        - margin-left: 4px
        - padding-right: 4px
        - font-size: 10px
        - font-weight: 500
        - letter-spacing: 0.1px;
        - color: var(--secondary-text-color)
  bambu_spool:
    show_icon: false
    show_name: false
    variables:
      slotnum: "[[[\n  const tray = entity.entity_id.split('_').pop();\n  if (tray\
        \ === undefined || isNaN(parseInt(tray))) {\n    return null;\n  } else {\n\
        \    return parseInt(tray);\n  }\n]]]\n"
    custom_fields:
      type: "[[[\n  return entity.attributes.type || '&nbsp;'\n]]]\n"
      sub_type: "[[[\n  return entity.attributes.name || '&nbsp;';\n]]]\n"
      bar: "[[[\n  let color = entity.attributes.type\n    ? entity.attributes.color\n\
        \    : 'none';\n  let remain = entity.attributes.remain;\n  return `\n   \
        \ <div style=\"position: relative; background-color: ${color}; width: 100%;\
        \ height: 100%; top: ${99 - remain}%; border-top: 2px solid black;\"></div>\n\
        \  `;\n]]]\n"
      value: "[[[\n  if (entity.attributes.remain) {\n    return entity.attributes.remain\
        \ + ' %';\n  } else {\n    return '&nbsp;';\n  }\n]]]\n"
      slotnum: "[[[\n  if (variables.slotnum) {\n    return `<ha-icon icon=\"mdi:numeric-${variables.slotnum}-box\"\
        ></ha-icon>`;\n  }\n  return `<ha-icon icon=\"mdi:alpha-e-box\"></ha-icon>`;\n\
        ]]]\n"
    styles:
      card:
        - border-radius: 24px
        - background-color: transparent
        - font-size: 1rem
        - border: none
        - box-shadow: none
      grid:
        - grid-template-areas: '"type type"

            "sub_type sub_type"

            "bar bar"

            "value value"

            "slotnum slotnum"

            '
        - grid-template-columns: auto
        - grid-template-rows: auto
        - gap: 5px
      custom_fields:
        bar:
          - position: relative
          - width: 50%
          - left: 25%
          - height: 150px
          - background-color: var(--secondary-background-color)
          - overflow: hidden
          - border-radius: 24px
        type:
          - font-size: 14px
        sub_type:
          - font-size: 12px
        value:
          - color: var(--primary-text-color)
        slotnum:
          - color: "[[[\n  if (entity.attributes.active === true) {\n    return 'var(--green-color)'\n\
              \  } else {\n    return 'var(--grey-color)'\n  }\n]]]\n"
          - width: 25px
          - position: relative
          - left: 50%
          - transform: translateX(-50%)
  computer_tile:
    show_state: true
    custom_fields:
      stat1: "[[[\n  return `<ha-icon icon=\"mdi:motion-play-outline\" style=\"width:\
        \ 24px; height: 24px; color: var(--green-color);\"></ha-icon>\n    <span>\
        \ Media: <span style=\"color: var(--text-color-sensor);\">${states[variables.media]?.state\
        \ !== 'unavailable' ? helpers.localize(states[variables.media]) : '-'}</span></span>`\n\
        ]]]"
      stat2: "[[[\n  return `<ha-icon icon=\"mdi:cpu-64-bit\" style=\"width: 24px;\
        \ height: 24px; color: var(--green-color);\"></ha-icon>\n    <span> CPU: <span\
        \ style=\"color: var(--text-color-sensor);\">${!['unavailable',undefined].includes(states[variables.cpu]?.state)\
        \ ? helpers.localize(states[variables.cpu], undefined, 0) : '-'}</span></span>`\n\
        ]]]"
      stat3: "[[[\n  return `<ha-icon icon=\"mdi:memory\" style=\"width: 24px; height:\
        \ 24px; color: var(--green-color);\"></ha-icon>\n    <span> RAM: <span style=\"\
        color: var(--text-color-sensor);\">${!['unavailable',undefined].includes(states[variables.ram]?.state)\
        \ ? helpers.localize(states[variables.ram], undefined, 0) : '-'}</span></span>`\n\
        ]]]"
      stat4: "[[[\n  return `<ha-icon icon=\"mdi:expansion-card\" style=\"width: 24px;\
        \ height: 24px; color: var(--green-color);\"></ha-icon>\n    <span> GPU: <span\
        \ style=\"color: var(--text-color-sensor);\">${!['unavailable',undefined].includes(states[variables.gpu]?.state)\
        \ ? helpers.localize(states[variables.gpu], undefined, 0) : '-'}</span></span>`\n\
        ]]]"
      info: ''
      chips: ''
    styles:
      grid:
        - grid-template-columns: 1fr min-content
        - grid-template-rows: min-content min-content min-content min-content min-content
            min-content min-content;
        - grid-template-areas: '"n i" "s chips" "info chips" "stat1 chips" "stat2
            chips" "stat3 chips" "stat4 chips"'
      card:
        - padding: 22px 8px 22px 22px
      img_cell:
        - justify-content: start
        - align-self: start
        - position: absolute
        - width: 100px
        - height: 100px
        - right: -20px
        - top: -20px
        - border-radius: 50%
        - background: '[[[ if (states[variables.connected].state == ''on'') return
            ''var(--green-color)''; else return ''var(--red-color)'' ]]]'
      icon:
        - width: 60px
        - color: rgba(0, 0, 0, 0.6)
      name:
        - justify-self: start
        - align-self: start
        - font-size: 20px
        - font-weight: 500
        - color: var(--primary-text-color)
      state:
        - min-height: 30px
        - justify-self: start
        - align-self: start
        - font-size: 14px
        - opacity: '0.7'
      custom_fields:
        stat1:
          - padding-bottom: 2px
          - align-self: start
          - justify-self: start
          - font-size: 14px
          - --text-color-sensor: '[[[ if ([''idle'',''paused''].includes(states[variables.media]?.state))
              return ''var(--yellow-color)''; ]]]'
        stat2:
          - padding-bottom: 2px
          - align-self: start
          - justify-self: start
          - font-size: 14px
          - --text-color-sensor: '[[[ if (states[variables.cpu]?.state > 80) return
              ''var(--red-color)''; ]]]'
        stat3:
          - padding-bottom: 2px
          - align-self: start
          - justify-self: start
          - font-size: 14px
          - --text-color-sensor: '[[[ if (states[variables.ram]?.state > 80) return
              ''var(--red-color)''; ]]]'
        stat4:
          - align-self: start
          - justify-self: start
          - font-size: 14px
          - --text-color-sensor: '[[[ if (states[variables.gpu]?.state > 80) return
              ''var(--red-color)''; ]]]'
        info:
          - align-self: end
          - justify-self: start
          - text-align: left
        chips:
          - justify-content: end
          - align-self: end
  remote_button_base:
    show_name: false
    styles:
      grid:
        - grid-template-columns: 1fr
        - grid-template-rows: 1fr
        - grid-template-areas: '"i" "n"'
      card:
        - padding: 20px 8px 20px 8px
        - min-height: 102px
        - max-height: 125px
        - max-width: 130px
        - background-color: var(--secondary-background-color)
      img_cell:
        - justify-content: start
        - align-self: start
      icon:
        - --mdc-icon-size: 50px
        - width: 100%
        - color: var(--primary-text-color)
  remote_button_command:
    template: remote_button_base
    variables:
      - command
    tap_action:
      action: call-service
      service: remote.send_command
      target:
        entity_id: '[[[ return entity.entity_id ]]]'
      data:
        command: '[[[ return variables.command ]]]'
  remote_button_media:
    styles:
      grid:
        - grid-template-columns: 1fr
        - grid-template-rows: min-content
        - grid-template-areas: '"i" "n"'
        - align-content: center
      card:
        - padding: 12px 8px 12px 8px
        - height: 90px
        - max-height: 90px
        - max-width: 160px
        - background-color: var(--secondary-background-color)
      img_cell:
        - justify-content: start
        - align-self: start
        - height: 40px
        - width: 40px
        - place-self: start
      icon:
        - width: 100%
        - color: var(--primary-text-color)
      name:
        - margin-top: 8px
        - justify-self: start
        - align-self: start
        - font-size: 14px
        - font-weight: 500
        - color: var(--primary-text-color)
  remote_button_status:
    styles:
      grid:
        - grid-template-columns: 1fr min-content
        - grid-template-rows: min-content 1fr
        - grid-template-areas: '"i status" "n n"'
      card:
        - padding: 26px 8px 20px 8px
        - min-height: 145px
        - max-height: 145px
        - background-color: var(--secondary-background-color)
      img_cell:
        - justify-content: start
        - align-self: start
      icon:
        - --mdc-icon-size: 60px
        - width: 100%
        - color: var(--primary-text-color)
      name:
        - margin-top: 8px
        - justify-self: start
        - align-self: start
        - font-size: 16px
        - font-weight: 500
        - color: var(--primary-text-color)
      custom_fields:
        status:
          - position: absolute
          - right: calc(var(--ha-card-border-radius, 12px) / 2)
          - top: 10px
          - align-self: start
          - justify-self: start
  remote_source:
    template: remote_button_status
    variables:
      - source
      - badge_icon_color
    tap_action:
      action: call-service
      service: media_player.select_source
      target:
        entity_id: '[[[ return entity.entity_id ]]]'
      data:
        source: '[[[ return variables.source ]]]'
    custom_fields:
      status: "[[[\n  if (entity.attributes.source === variables.source)\n    return\
        \ `<ha-icon icon=\"mdi:circle\" style=\"width: 20px; height: 20px; color:\
        \ ${variables.badge_icon_color || 'var(--white-color)'};\"></ha-icon>`;\n\
        ]]]"
  remote_harmony_source:
    template: remote_button_status
    variables:
      - activity
      - badge_icon_color
    tap_action:
      action: call-service
      service: remote.turn_on
      target:
        entity_id: '[[[ return entity.entity_id ]]]'
      data:
        activity: '[[[ return variables.activity ]]]'
    custom_fields:
      status: "[[[\n  if (entity.attributes.current_activity === variables.activity)\n\
        \    return `<ha-icon icon=\"mdi:circle\" style=\"width: 20px; height: 20px;\
        \ color: ${variables.badge_icon_color || 'var(--cyan-color)'};\"></ha-icon>`;\n\
        ]]]"
  remote_sound_mode:
    template: remote_button_status
    variables:
      - sound_mode
      - badge_icon_color
    tap_action:
      action: call-service
      service: media_player.select_sound_mode
      target:
        entity_id: '[[[ return entity.entity_id ]]]'
      data:
        sound_mode: '[[[ return variables.sound_mode ]]]'
    custom_fields:
      status: "[[[\n  if (entity.attributes.sound_mode === variables.sound_mode)\n\
        \    return `<ha-icon icon=\"mdi:circle\" style=\"width: 20px; height: 20px;\
        \ color: ${variables.badge_icon_color || 'var(--cyan-color)'};\"></ha-icon>`;\n\
        ]]]"
  person:
    template: room
    show_entity_picture: true
    variables:
      - icon_color
    custom_fields:
      stat: "[[[\n  if (entity.state) return helpers.localize(entity)\n]]]\n"
    state:
      - value: not_home
        styles:
          card:
            - background-color: rgba(244, 67, 54, 0.2)
      - value: "[[[\n  if (['unknown', 'unavailable'].includes(entity.state)) return\
          \ true; else return false\n]]]\n"
        styles:
          card:
            - background-color: rgba(189, 189, 189, 0.2)
      - value: home
        operator: '!='
        styles:
          card:
            - background-color: rgba(33, 150, 243, 0.2)
    styles:
      img_cell:
        - top: 1px
        - left: 1px
        - width: 65px
        - height: 65px
      icon:
        - position: relative
        - width: 65px
        - height: 65px
  room:
    variables:
      - icon_color
    custom_fields:
      stat: "[[[\n  if (variables.temperature) return helpers.localize(states[variables.temperature],\
        \ undefined, 0, true)\n]]]\n"
      chips-top:
        card:
          type: custom:mushroom-chips-card
          alignment: end
          card_mod:
            style: "ha-card {\n  --chip-icon-size: 0.6em;\n  --chip-border-width:\
              \ 0;\n  --chip-box-shadow: none;\n  --chip-background: none;\n  --chip-border:\
              \ none;\n  --chip-spacing: none;\n}\n"
          chips: '[[[ return variables.chips_top ]]]'
      chips:
        card:
          type: custom:mushroom-chips-card
          alignment: end
          card_mod:
            style: "ha-card {\n  --chip-icon-size: 0.6em;\n  --chip-border-width:\
              \ 0;\n  --chip-box-shadow: none;\n  --chip-background: none;\n  --chip-border:\
              \ none;\n  --chip-spacing: none;\n}\n"
          chips: '[[[ return variables.chips ]]]'
    state:
      - value: 'on'
        styles:
          card:
            - background-color: "[[[\n  return 'rgba(' + variables.icon_color + ',\
                \ 0.2)'\n]]]\n"
    styles:
      grid:
        - grid-template-areas: '"i n chips-top" "i stat stat" "chips chips chips"'
        - grid-template-columns: 65px min-content min-content
        - grid-template-rows: min-content min-content min-content
      card:
        - padding: 10px 0 36px 0
        - height: 100px
      img_cell:
        - justify-content: start
        - position: absolute
        - width: 100px
        - height: 100px
        - left: -20px
        - top: -20px
        - background: "[[[\n  return 'rgba(' + variables.icon_color + ', 0.2)';\n\
            ]]]\n"
        - border-radius: 50%
      icon:
        - position: relative
        - width: 50px
        - height: 50px
        - color: "[[[\n  return 'rgb(' + variables.icon_color + ')';\n]]]\n"
      name:
        - justify-self: start
        - align-self: start
        - font-size: 16px
        - font-weight: 500
        - color: var(--primary-text-color)
        - z-index: 1
      custom_fields:
        stat:
          - justify-self: start
          - font-size: 12px
          - color: var(--primary-text-color)
          - z-index: 1
        chips-top:
          - justify-content: end
          - align-self: start
          - position: absolute
          - top: 2px
          - right: calc(var(--ha-card-border-radius, 12px) / 2)
          - z-index: 1
        chips:
          - background: color-mix(in srgb, var(--ha-card-background), transparent
              80%);
          - width: 100%
          - justify-content: end
          - align-self: start
          - position: absolute
          - bottom: 0
          - right: 0
          - padding-right: calc(var(--ha-card-border-radius, 12px) / 2)
          - padding-top: 1px
          - padding-bottom: 1px
  vehicle:
    template: room
    show_entity_picture: true
    variables:
      - icon_color
    tap_action:
      action: navigate
      navigation_path: '[[[ return variables?.path ]]]'
    custom_fields:
      stat: "[[[\n  if (variables.odometer) return helpers.localize(states[variables.odometer],\
        \ undefined, 0, true)\n]]]\n"
      timer:
        card:
          type: custom:timer-bar-card
          entity: '[[[ return variables.timer ]]]'
          layout: full_row
          text_width: 0px
          filter: true
          invert: true
          state_color: true
          bar_height: 4px
          bar_direction: rtl
          bar_foreground: var(--lime-color)
          bar_background: var(--disabled-color)
          compressed: true
          tap_action:
            action: navigate
            navigation_path: '[[[ return variables?.path ]]]'
          modifications:
            - remaining: 00:03:00
              bar_foreground: var(--amber-color)
            - remaining: 00:02:00
              bar_foreground: var(--orange-color)
            - remaining: 00:01:00
              bar_foreground: var(--red-color)
    state:
      - value: not_home
        styles:
          card:
            - background-color: rgba(244, 67, 54, 0.2)
      - value: "[[[\n  if (['unknown', 'unavailable'].includes(entity.state)) return\
          \ true; else return false\n]]]\n"
        styles:
          card:
            - background-color: rgba(189, 189, 189, 0.2)
      - value: home
        operator: '!='
        styles:
          card:
            - background-color: rgba(33, 150, 243, 0.2)
    styles:
      grid:
        - grid-template-areas: '"i n chips-top" "i stat stat" "chips chips chips"
            "timer timer timer"'
        - grid-template-columns: 90px min-content min-content
        - grid-template-rows: min-content min-content min-content min-content
      img_cell:
        - top: 1px
        - left: 1px
        - width: 65px
        - height: 65px
        - background: none
      icon:
        - width: 65px
        - height: 65px
      custom_fields:
        timer:
          - justify-content: start
          - align-self: start
          - position: absolute
          - bottom: 20px
          - width: 100%
streamline_templates:
  remote:
    default:
      - sources: []
      - harmony_sources: []
      - sound_buttons: []
    card:
      type: vertical-stack
      cards:
        - type: custom:bubble-card
          card_type: media-player
          entity: '[[media]]'
          cover_background: true
          card_layout: large
          hide:
            volume_button: true
            previous_button: true
            power_button: true
            next_button: true
          sub_button:
            - entity: '[[media]]'
              show_attribute: true
              attribute: volume_level
              icon: mdi:volume-high
              show_background: false
              visibility:
                - condition: state
                  entity: '[[media]]'
                  state_not: 'off'
          modules:
            - default
          styles: "${card.querySelector('.bubble-name').innerText = [\n    (hass.states[entity]?.attributes.media_title\
            \ || \"\"),\n    (hass.states[entity]?.attributes.media_artist || \"\"\
            ),\n    (typeof(hass.states[entity]?.attributes.media_season) !== \"undefined\"\
            \ ? \"S\" + hass.states[entity]?.attributes.media_season : \"\") +\n \
            \   (typeof(hass.states[entity]?.attributes.media_episode) !== \"undefined\"\
            \ ? \"E\" + hass.states[entity]?.attributes.media_episode : \"\"),\n \
            \   (hass.states[entity]?.attributes.media_series_title || \"\")\n  ].filter(n\
            \ => n).join(\" ⸱ \")\n} ${card.querySelector('.bubble-state').innerText\
            \ = [\n    (hass.formatEntityState(hass.states[entity]) || \"\"),\n  \
            \  (hass.states[entity]?.attributes.source || \"\")\n  ].filter(n => n).join(\"\
            \ ⸱ \")\n}"
        - type: custom:tabbed-card
          styles:
            --mdc-theme-primary: var(--state-active-color)
            --mdc-tab-color-default: var(--secondary-text-color)
            --mdc-tab-text-label-color-default: var(--secondary-text-color)
          attributes:
            minWidth: true
          tabs:
            - attributes:
                icon: mdi:gamepad
              card:
                type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 1fr 1fr 1fr
                  grid-gap: 4px
                  grid-row-gap: 2px
                  margin: 8px 0 0
                  padding: 0
                cards:
                  - type: custom:button-card
                    entity: '[[remote]]'
                    template: remote_button_command
                    icon: '[[[ if(entity.state === "on") return "mdi:power"; else
                      return "mdi:power-off"; ]]]

                      '
                    variables:
                      command: POWER
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background-color: var(--red-color)
                          icon:
                            - color: var(--black-color)
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:chevron-up
                    variables:
                      command: DPAD_UP
                    styles:
                      icon:
                        - --mdc-icon-size: 60px
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:home
                    variables:
                      command: HOME
                    styles:
                      card:
                        - background: var(--blue-color)
                      icon:
                        - color: var(--black-color)
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:chevron-left
                    variables:
                      command: DPAD_LEFT
                    styles:
                      icon:
                        - --mdc-icon-size: 60px
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:circle-slice-8
                    variables:
                      command: DPAD_CENTER
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:chevron-right
                    variables:
                      command: DPAD_RIGHT
                    styles:
                      icon:
                        - --mdc-icon-size: 60px
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:undo-variant
                    variables:
                      command: BACK
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:chevron-down
                    variables:
                      command: DPAD_DOWN
                    styles:
                      icon:
                        - --mdc-icon-size: 60px
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:menu
                    variables:
                      command: MENU
                  - type: custom:button-card
                    template: remote_button_base
                    entity: '[[remote]]'
                    icon: mdi:volume-mute
                    tap_action:
                      action: call-service
                      service: media_player.volume_mute
                      target:
                        entity_id: '[[media]]'
                  - type: custom:button-card
                    template: remote_button_base
                    entity: '[[media]]'
                    icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: media_player.volume_down
                      target:
                        entity_id: '[[media]]'
                  - type: custom:button-card
                    template: remote_button_base
                    entity: '[[media]]'
                    icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: media_player.volume_up
                      target:
                        entity_id: '[[media]]'
            - attributes:
                icon: mdi:play-circle-outline
              card:
                type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: auto auto
                  grid-gap: 20px
                  grid-row-gap: 2px
                  margin: 8px 0 0
                  padding: 0
                cards:
                  - type: custom:button-card
                    template: remote_button_media
                    entity: '[[media]]'
                    name: Volume Down
                    icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: media_player.volume_down
                      target:
                        entity_id: '[[media]]'
                  - type: custom:button-card
                    template: remote_button_media
                    entity: '[[media]]'
                    name: Volume Up
                    icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: media_player.volume_up
                      target:
                        entity_id: '[[media]]'
                  - type: custom:button-card
                    template: remote_button_media
                    entity: '[[media]]'
                    name: "[[[\n  if (entity.state === \"playing\")\n    return \"\
                      Pause\";\n  else if (entity.state === \"paused\")\n    return\
                      \ \"Play\";\n  else\n    return \"Play/Pause\";\n]]]"
                    icon: "[[[\n  if (entity.state === \"playing\")\n    return \"\
                      mdi:pause\";\n  else if (entity.state === \"paused\")\n    return\
                      \ \"mdi:play\";\n  else\n    return \"mdi:play-pause\";\n]]]"
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      target:
                        entity_id: '[[remote]]'
                      data:
                        command: MEDIA_PLAY_PAUSE
                    styles:
                      card:
                        - height: 180px
                        - max-height: 180px
                    state:
                      - value: playing
                        styles:
                          card:
                            - background-color: var(--green-color)
                          icon:
                            - color: var(--black-color)
                          name:
                            - color: var(--black-color)
                      - value: paused
                        styles:
                          card:
                            - background-color: var(--yellow-color)
                          icon:
                            - color: var(--black-color)
                          name:
                            - color: var(--black-color)
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        template: remote_button_media
                        entity: '[[media]]'
                        name: Channel Up
                        icon: mdi:arrow-up-drop-circle-outline
                        tap_action:
                          action: call-service
                          service: remote.send_command
                          target:
                            entity_id: '[[remote]]'
                          data:
                            command: CHANNEL_UP
                      - type: custom:button-card
                        template: remote_button_media
                        entity: '[[media]]'
                        name: Channel Down
                        icon: mdi:arrow-down-drop-circle-outline
                        tap_action:
                          action: call-service
                          service: remote.send_command
                          target:
                            entity_id: '[[remote]]'
                          data:
                            command: CHANNEL_DOWN
                  - type: custom:button-card
                    template: remote_button_media
                    entity: '[[media]]'
                    name: Previous
                    icon: mdi:skip-previous
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      target:
                        entity_id: '[[remote]]'
                      data:
                        command: MEDIA_PREVIOUS
                    hold_action:
                      action: call-service
                      service: remote.send_command
                      target:
                        entity_id: '[[remote]]'
                      data:
                        num_repeats: 1
                        command: MEDIA_REWIND
                  - type: custom:button-card
                    template: remote_button_media
                    entity: '[[media]]'
                    name: Next
                    icon: mdi:skip-next
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      target:
                        entity_id: '[[remote]]'
                      data:
                        command: MEDIA_NEXT
                    hold_action:
                      action: call-service
                      service: remote.send_command
                      target:
                        entity_id: '[[remote]]'
                      data:
                        num_repeats: 1
                        command: MEDIA_FAST_FORWARD
            - attributes:
                icon: mdi:dialpad
              card:
                type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 1fr 1fr 1fr
                  grid-gap: 4px
                  grid-row-gap: 2px
                  margin: 8px 0 0
                  padding: 0
                cards:
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:numeric-1
                    variables:
                      command: '1'
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:numeric-2
                    variables:
                      command: '2'
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:numeric-3
                    variables:
                      command: '3'
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:numeric-4
                    variables:
                      command: '4'
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:numeric-5
                    variables:
                      command: '5'
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:numeric-6
                    variables:
                      command: '6'
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:numeric-7
                    variables:
                      command: '7'
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:numeric-8
                    variables:
                      command: '8'
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:numeric-9
                    variables:
                      command: '9'
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:information-slab-symbol
                    variables:
                      command: INFO
                    styles:
                      icon:
                        - --mdc-icon-size: 60px
                  - type: custom:button-card
                    template: remote_button_command
                    entity: '[[remote]]'
                    icon: mdi:numeric-0
                    variables:
                      command: '0'
                  - type: custom:button-card
                    template: remote_button_command
                    icon: mdi:keyboard-return
                    entity: '[[remote]]'
                    variables:
                      command: ENTER
                    styles:
                      icon:
                        - --mdc-icon-size: 40px
            - attributes:
                icon: mdi:star
              card:
                type: vertical-stack
                cards:
                  - type: custom:layout-card
                    layout_type: custom:grid-layout
                    layout:
                      grid-template-columns: 1fr 1fr 1fr
                      grid-gap: 4px
                      grid-row-gap: 2px
                      margin: 8px 0 2px 0
                      padding: 0
                    cards: '[[harmony_sources]]'
                  - type: custom:layout-card
                    layout_type: custom:grid-layout
                    layout:
                      grid-template-columns: 1fr 1fr 1fr
                      grid-gap: 4px
                      grid-row-gap: 2px
                      margin: 8px 0 2px 0
                      padding: 0
                    cards: '[[sources]]'
                  - type: custom:button-card
                    template: remote_source
                    entity: '[[media]]'
                    name: Home
                    icon: mdi:apps
                    variables:
                      source: Home
            - attributes:
                icon: mdi:volume-high
              card:
                type: vertical-stack
                cards:
                  - type: custom:layout-card
                    layout_type: custom:grid-layout
                    layout:
                      grid-template-columns: 1fr 1fr 1fr
                      grid-gap: 4px
                      grid-row-gap: 2px
                      margin: 8px 0 2px 0
                      padding: 0
                    cards: '[[sound_buttons]]'
  remote_living:
    card:
      type: custom:streamline-card
      template: remote
      variables:
        - remote: remote.androidtv_living_room
        - media: media_player.universal_living_room
        - sources:
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_living_room
              name: Plex
              icon: mdi:plex
              variables:
                source: Plex
                badge_icon_color: var(--black-color)
              styles:
                card:
                  - background: '#d5a004'
                icon:
                  - color: var(--black-color)
                name:
                  - color: var(--black-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_living_room
              name: Prime Video
              icon: fapro:prime-video
              variables:
                source: Prime Video
              styles:
                card:
                  - background: '#202d3c'
                icon:
                  - color: var(--white-color)
                name:
                  - color: var(--white-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_living_room
              name: SmartTube
              icon: fapro:smarttube
              variables:
                source: SmartTube
              styles:
                card:
                  - background: '#bd2424'
                icon:
                  - color: var(--white-color)
                name:
                  - color: var(--white-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_living_room
              name: Crunchyroll
              icon: fapro:crunchyroll
              variables:
                source: Crunchyroll
                badge_icon_color: var(--black-color)
              styles:
                card:
                  - background: '#f47521'
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_living_room
              name: Spotify
              icon: mdi:spotify
              variables:
                source: Spotify
              styles:
                card:
                  - background: '#1db954'
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_living_room
              name: Cartoon Network
              icon: fapro:cartoon-network
              variables:
                source: Cartoon Network
              styles:
                card:
                  - background: '#000000'
                icon:
                  - color: var(--white-color)
                name:
                  - color: var(--white-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_living_room
              name: YouTube Kids
              icon: fapro:youtube-kids
              variables:
                source: YouTube Kids
              styles:
                card:
                  - background: '#bd2424'
                icon:
                  - color: var(--white-color)
                name:
                  - color: var(--white-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_living_room
              name: PBS Kids
              icon: fapro:pbs-kids
              variables:
                source: PBS Kids
              styles:
                card:
                  - background: '#2838c2'
                icon:
                  - color: var(--white-color)
                name:
                  - color: var(--white-color)
        - sound_buttons:
            - type: custom:button-card
              template: remote_sound_mode
              entity: media_player.universal_living_room
              name: Surround
              icon: mdi:surround-sound
              variables:
                sound_mode: Surround
            - type: custom:button-card
              template: remote_sound_mode
              entity: media_player.universal_living_room
              name: Gaming
              icon: mdi:gamepad-variant
              variables:
                sound_mode: Gaming
            - type: custom:button-card
              template: remote_sound_mode
              entity: media_player.universal_living_room
              name: Adaptive
              icon: mdi:home-sound-in-outline
              variables:
                sound_mode: Adaptive Sound
            - type: custom:button-card
              template: remote_sound_mode
              entity: media_player.universal_living_room
              name: Standard
              icon: mdi:soundbar
              variables:
                sound_mode: Standard
            - type: custom:button-card
              template: remote_button_status
              entity: input_boolean.samsung_soundbar_night_mode
              name: Night Mode
              icon: mdi:weather-night
              custom_fields:
                status: "[[[\n  if (entity.state === \"on\")\n    return `<ha-icon\
                  \ icon=\"mdi:circle\" style=\"width: 20px; height: 20px; color:\
                  \ ${variables.badge_icon_color || 'var(--cyan-color)'};\"></ha-icon>`;\n\
                  ]]]"
              tap_action:
                action: call-service
                service: input_boolean.toggle
                target:
                  entity_id: '[[[ return entity.entity_id ]]]'
            - type: custom:button-card
              template: remote_button_status
              entity: input_boolean.samsung_soundbar_voice_enhancer
              name: Voice Enhancer
              icon: mdi:account-voice
              custom_fields:
                status: "[[[\n  if (entity.state === \"on\")\n    return `<ha-icon\
                  \ icon=\"mdi:circle\" style=\"width: 20px; height: 20px; color:\
                  \ ${variables.badge_icon_color || 'var(--cyan-color)'};\"></ha-icon>`;\n\
                  ]]]"
              tap_action:
                action: call-service
                service: input_boolean.toggle
                target:
                  entity_id: '[[[ return entity.entity_id ]]]'
  remote_family:
    card:
      type: custom:streamline-card
      template: remote
      variables:
        - remote: remote.androidtv_family_room
        - media: media_player.universal_family_room
        - sources:
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_family_room
              name: Plex
              icon: mdi:plex
              variables:
                source: Plex
                badge_icon_color: var(--black-color)
              styles:
                card:
                  - background: '#d5a004'
                icon:
                  - color: var(--black-color)
                name:
                  - color: var(--black-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_family_room
              name: Prime Video
              icon: fapro:prime-video
              variables:
                source: Prime Video
              styles:
                card:
                  - background: '#202d3c'
                icon:
                  - color: var(--white-color)
                name:
                  - color: var(--white-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_family_room
              name: SmartTube
              icon: fapro:smarttube
              variables:
                source: SmartTube
              styles:
                card:
                  - background: '#bd2424'
                icon:
                  - color: var(--white-color)
                name:
                  - color: var(--white-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_family_room
              name: Crunchyroll
              icon: fapro:crunchyroll
              variables:
                source: Crunchyroll
                badge_icon_color: var(--black-color)
              styles:
                card:
                  - background: '#f47521'
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_family_room
              name: Spotify
              icon: mdi:spotify
              variables:
                source: Spotify
              styles:
                card:
                  - background: '#1db954'
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_family_room
              name: Cartoon Network
              icon: fapro:cartoon-network
              variables:
                source: Cartoon Network
              styles:
                card:
                  - background: '#000000'
                icon:
                  - color: var(--white-color)
                name:
                  - color: var(--white-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_family_room
              name: YouTube Kids
              icon: fapro:youtube-kids
              variables:
                source: YouTube Kids
              styles:
                card:
                  - background: '#bd2424'
                icon:
                  - color: var(--white-color)
                name:
                  - color: var(--white-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_family_room
              name: PBS Kids
              icon: fapro:pbs-kids
              variables:
                source: PBS Kids
              styles:
                card:
                  - background: '#2838c2'
                icon:
                  - color: var(--white-color)
                name:
                  - color: var(--white-color)
        - harmony_sources:
            - type: custom:button-card
              template: remote_harmony_source
              entity: remote.harmony_family_room
              name: Shield
              icon: mdi:motion-play-outline
              variables:
                activity: Shield TV
            - type: custom:button-card
              template: remote_harmony_source
              entity: remote.harmony_family_room
              name: PC
              icon: mdi:desktop-tower
              variables:
                activity: Computer
            - type: custom:button-card
              template: remote_harmony_source
              entity: remote.harmony_family_room
              name: PS4
              icon: fapro:ps4
              variables:
                activity: PS4
            - type: custom:button-card
              template: remote_harmony_source
              entity: remote.harmony_family_room
              name: PS3
              icon: fapro:ps3
              variables:
                activity: PS3
            - type: custom:button-card
              template: remote_harmony_source
              entity: remote.harmony_family_room
              name: XBox
              icon: mdi:microsoft-xbox
              variables:
                activity: XBox
            - type: custom:button-card
              template: remote_harmony_source
              entity: remote.harmony_family_room
              name: Switch
              icon: mdi:nintendo-switch
              variables:
                activity: Switch
        - sound_buttons:
            - type: custom:button-card
              template: remote_sound_mode
              entity: media_player.universal_family_room
              name: Direct
              icon: mdi:surround-sound-5-1
              variables:
                sound_mode: Direct
            - type: custom:button-card
              template: remote_sound_mode
              entity: media_player.universal_family_room
              name: Surround
              icon: mdi:surround-sound-2-0
              variables:
                sound_mode: Dolby Digital
            - type: custom:button-card
              template: remote_sound_mode
              entity: media_player.universal_family_room
              name: DTS Surround
              icon: mdi:surround-sound-2-1
              variables:
                sound_mode: DTS Surround
            - type: custom:button-card
              template: remote_sound_mode
              entity: media_player.universal_family_room
              name: Multi-Channel
              icon: mdi:surround-sound
              variables:
                sound_mode: MCh Stereo
  remote_main:
    card:
      type: custom:streamline-card
      template: remote
      variables:
        - remote: remote.androidtv_main_bedroom
        - media: media_player.universal_main_bedroom
        - sources:
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_main_bedroom
              name: Plex
              icon: mdi:plex
              variables:
                source: Plex
                badge_icon_color: var(--black-color)
              styles:
                card:
                  - background: '#d5a004'
                icon:
                  - color: var(--black-color)
                name:
                  - color: var(--black-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_main_bedroom
              name: Prime Video
              icon: fapro:prime-video
              variables:
                source: Prime Video
              styles:
                card:
                  - background: '#202d3c'
                icon:
                  - color: var(--white-color)
                name:
                  - color: var(--white-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_main_bedroom
              name: SmartTube
              icon: fapro:smarttube
              variables:
                source: SmartTube
              styles:
                card:
                  - background: '#bd2424'
                icon:
                  - color: var(--white-color)
                name:
                  - color: var(--white-color)
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_main_bedroom
              name: Crunchyroll
              icon: fapro:crunchyroll
              variables:
                source: Crunchyroll
                badge_icon_color: var(--black-color)
              styles:
                card:
                  - background: '#f47521'
            - type: custom:button-card
              template: remote_source
              entity: media_player.universal_main_bedroom
              name: Spotify
              icon: mdi:spotify
              variables:
                source: Spotify
              styles:
                card:
                  - background: '#1db954'
  camera_popup:
    default:
      - ptz: 'off'
    card:
      type: custom:advanced-camera-card
      cameras:
        - camera_entity: '[[camera]]'
          live_provider: go2rtc
          go2rtc:
            modes:
              - webrtc
              - mse
            stream: '[[stream]]'
      menu:
        style: outside
        buttons:
          iris:
            enabled: false
          cameras:
            enabled: false
          media_player:
            enabled: false
          download:
            enabled: false
          microphone:
            enabled: true
            type: toggle
            alignment: opposing
          mute:
            enabled: true
            alignment: opposing
          play:
            enabled: true
            alignment: opposing
            priority: 45
          fullscreen:
            alignment: opposing
            priority: 40
      live:
        draggable: false
        preload: true
        controls:
          builtin: false
          ptz:
            mode: '[[ptz]]'
            orientation: vertical
            hide_zoom: true
        lazy_load: false
      media_viewer:
        transition_effect: slide
      timeline:
        controls:
          thumbnails:
            mode: below
      dimensions:
        aspect_ratio_mode: dynamic
      performance:
        features:
          media_chunk_size: 20
          max_simultaneous_engine_requests: 10
      view: {}
  computer_apps:
    card:
      type: custom:vertical-stack-in-card
      horizontal: true
      card_mod:
        style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow: none;\n\
          }\n"
      cards:
        - type: conditional
          conditions:
            - condition: state
              entity: sensor.[[computer]]_app_bigbox
              state_not: unavailable
            - condition: state
              entity: sensor.[[computer]]_app_bigbox
              state_not: unknown
          card:
            type: custom:mushroom-template-card
            entity: sensor.[[computer]]_app_bigbox
            layout: vertical
            icon: fapro:bigbox
            icon_color: '{{ iif(int(states(entity), 0) > 0, "green", "grey") }}'
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: script.hass_agent_launch
              data:
                entity:
                  - media_player.[[computer]]
                command: '"C:\Users\PC\AppData\Local\Programs\LaunchBox\Core\BigBox.exe"'
        - type: conditional
          conditions:
            - condition: state
              entity: sensor.[[computer]]_app_steam
              state_not: unavailable
            - condition: state
              entity: sensor.[[computer]]_app_steam
              state_not: unknown
          card:
            type: custom:mushroom-template-card
            entity: sensor.[[computer]]_app_steam
            layout: vertical
            icon: mdi:steam
            icon_color: '{{ iif(int(states(entity), 0) > 0, "green", "grey") }}'
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: script.hass_agent_launch
              data:
                entity:
                  - media_player.[[computer]]
                command: '"C:\Program Files (x86)\Steam\Steam.exe"'
        - type: conditional
          conditions:
            - condition: state
              entity: sensor.[[computer]]_app_eadesktop
              state_not: unavailable
            - condition: state
              entity: sensor.[[computer]]_app_eadesktop
              state_not: unknown
          card:
            type: custom:mushroom-template-card
            entity: sensor.[[computer]]_app_eadesktop
            layout: vertical
            icon: mdi:origin
            icon_color: '{{ iif(int(states(entity), 0) > 0, "green", "grey") }}'
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: script.hass_agent_launch
              data:
                entity:
                  - media_player.[[computer]]
                command: '"C:\Program Files\Electronic Arts\EA Desktop\EA Desktop\EALauncher.exe"'
        - type: conditional
          conditions:
            - condition: state
              entity: sensor.[[computer]]_app_epicgames
              state_not: unavailable
            - condition: state
              entity: sensor.[[computer]]_app_epicgames
              state_not: unknown
          card:
            type: custom:mushroom-template-card
            entity: sensor.[[computer]]_app_epicgames
            layout: vertical
            icon: fapro:epic-games
            icon_color: '{{ iif(int(states(entity), 0) > 0, "green", "grey") }}'
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: script.hass_agent_launch
              data:
                entity:
                  - media_player.[[computer]]
                command: '"C:\Program Files (x86)\Epic Games\Launcher\Portal\Binaries\Win32\EpicGamesLauncher.exe"'
        - type: conditional
          conditions:
            - condition: state
              entity: sensor.[[computer]]_app_chrome
              state_not: unavailable
            - condition: state
              entity: sensor.[[computer]]_app_chrome
              state_not: unknown
          card:
            type: custom:mushroom-template-card
            entity: sensor.[[computer]]_app_chrome
            layout: vertical
            icon: mdi:google-chrome
            icon_color: '{{ iif(int(states(entity), 0) > 0, "green", "grey") }}'
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: script.hass_agent_launch
              data:
                entity:
                  - media_player.[[computer]]
                command: '"C:\Program Files\Google\Chrome\Application\chrome.exe"'
  computer_power:
    card:
      type: custom:vertical-stack-in-card
      horizontal: true
      card_mod:
        style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow: none;\n\
          }\n"
      cards:
        - type: custom:mushroom-template-card
          entity: switch.[[computer]]
          primary: "{% if not is_state(\"binary_sensor.[[computer]]_connected\", \"\
            on\") %}\n  Power\n{% endif %}"
          icon: "{% if is_state(\"binary_sensor.[[computer]]_connected\", \"on\")\
            \ %}\n  mdi:power\n{% else %}\n  mdi:power-off\n{% endif %}"
          icon_color: "{% if is_state(\"binary_sensor.[[computer]]_connected\", \"\
            on\") %}\n  green\n{% else %}\n  red\n{% endif %}"
          tap_action:
            action: none
          hold_action:
            action: call-service
            service: switch.toggle
            target:
              entity_id: switch.[[computer]]
          card_mod:
            style: "{% if is_state(\"binary_sensor.[[computer]]_connected\", \"on\"\
              ) %}\nha-card {\n  margin-left: auto;\n  margin-right: auto;\n}\n{%\
              \ endif %}\n"
        - type: conditional
          conditions:
            - entity: binary_sensor.[[computer]]_connected
              state: 'on'
          card:
            type: custom:mushroom-template-card
            entity: button.[[computer]]_lock
            layout: vertical
            icon: "{% if is_state(\"sensor.[[computer]]_session_state\", \"Locked\"\
              ) %}\n  mdi:lock\n{% else %}\n  mdi:lock-open\n{% endif %}"
            icon_color: "{% if is_state(\"sensor.[[computer]]_session_state\", \"\
              Locked\") %}\n  red\n{% elif is_state(\"sensor.[[computer]]_session_state\"\
              , \"Unlocked\") %}\n  green\n{% else %}\n  grey\n{% endif %}"
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: button.press
              target:
                entity_id: button.[[computer]]_lock
            card_mod:
              style: "ha-card {\n  margin-left: auto;\n  margin-right: auto;\n}\n"
        - type: conditional
          conditions:
            - entity: binary_sensor.[[computer]]_connected
              state: 'on'
          card:
            type: custom:mushroom-template-card
            entity: button.[[computer]]_logoff
            layout: vertical
            icon: mdi:logout
            icon_color: grey
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: button.press
              target:
                entity_id: button.[[computer]]_logoff
            card_mod:
              style: "ha-card {\n  margin-left: auto;\n  margin-right: auto;\n}\n"
        - type: conditional
          conditions:
            - entity: binary_sensor.[[computer]]_connected
              state: 'on'
          card:
            type: custom:mushroom-template-card
            entity: button.[[computer]]_sleep
            layout: vertical
            icon: mdi:sleep
            icon_color: '{{ is_state(entity, "on") | iif("green", "grey") }}'
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: button.press
              target:
                entity_id: button.[[computer]]_sleep
            card_mod:
              style: "ha-card {\n  margin-left: auto;\n  margin-right: auto;\n}\n"
        - type: conditional
          conditions:
            - entity: binary_sensor.[[computer]]_connected
              state: 'on'
          card:
            type: custom:mushroom-template-card
            entity: button.[[computer]]_restart
            layout: vertical
            icon: mdi:reload
            icon_color: '{{ is_state(entity, "on") | iif("green", "grey") }}'
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: button.press
              target:
                entity_id: button.[[computer]]_restart
            card_mod:
              style: "ha-card {\n  margin-left: auto;\n  margin-right: auto;\n}\n"
  door_card:
    card:
      type: custom:mushroom-template-card
      entity: '[[entity]]'
      primary: '[[name]]'
      secondary: '{% from "util.jinja" import nominal_change_history %} {{ state_translated(entity)
        }} ⸱ {{ nominal_change_history(entity) }}'
      icon: '[[icon]]{{ "-open" if is_state(entity, "on") }}'
      icon_color: '{{ iif(is_state(entity, "on"), "red", "green") }}'
      tap_action:
        action: more-info
      hold_action:
        action: fire-dom-event
        browser_mod:
          service: browser_mod.more_info
          data:
            entity: '[[battery_entity]]'
      card_mod:
        style:
          mushroom-shape-icon$: "{% if int(states(\"[[battery_entity]]\"), 0) <= 60\
            \ %}\n{% from \"util.jinja\" import battery_color %}\n.shape {\n  /* Radial\
            \ progress bar */\n  background:\n    radial-gradient(var(--card-background-color)\
            \ 60%, transparent calc(60% + 1px)),\n    conic-gradient(var(--{{ battery_color(\"\
            [[battery_entity]]\") }}-color) {{ states(\"[[battery_entity]]\") }}%\
            \ 0%, var(--card-background-color) 0% 100%\n  );\n}\n.shape:after {\n\
            \  /* Add back icon shape */\n  content: \"\";\n  height: 100%;\n  width:\
            \ 100%;\n  position: absolute;\n  border-radius: var(--icon-border-radius);\n\
            \  background: var(--shape-color);\n}\n{% endif %}\n"
  fan_group:
    default:
      - style: '--ha-card-background: none;'
    card:
      type: custom:vertical-stack-in-card
      card_mod:
        style: "ha-card {\n  [[style]]\n  --ha-card-border-width: 0;\n}\n"
      cards:
        - type: custom:mushroom-fan-card
          entity: '[[entity]]'
          secondary_info: none
          icon_animation: true
          tap_action:
            action: toggle
          card_mod:
            style: "ha-card {\n  {% if is_state(config.entity, \"on\") %}\n  background:\
              \ rgba(var(--rgb-state-fan), 0.2);\n  {% endif %}\n}\n"
        - type: custom:auto-entities
          card:
            type: custom:layout-card
            cards: []
            layout_type: masonry
          sort:
            method: friendly_name
          filter:
            include:
              - group: '[[entity]]'
                options:
                  type: tile
                  hide_state: true
                  features_position: inline
                  features:
                    - type: fan-speed
                  card_mod:
                    style:
                      .: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                        \ none;\n}\nha-tile-icon {\n  {% if is_state(config.entity,\
                        \ 'on') %}\n    {% set speed = state_attr(config.entity, 'percentage')\
                        \ %}\n    {% set color = {\n      33: \"green\",\n      66:\
                        \ \"orange\",\n      100: \"red\"\n    }[speed] %}\n  {% else\
                        \ %}\n    {% set color = \"grey\" %}\n  {% endif %}\n  --tile-color:\
                        \ var(--{{ color }}-color);\n}\nha-state-icon {\n  {% if is_state(config.entity,\
                        \ 'on') %}\n    {% set speed = state_attr(config.entity, 'percentage')\
                        \ %}\n    animation: {{ (2 - (speed / 100)) | round(2) }}s\
                        \ rotation linear infinite;\n  {% endif %}\n}\n@keyframes\
                        \ rotation {\n  0% {transform: rotate(0deg);}\n  100% {transform:\
                        \ rotate(360deg);}\n}\n"
  mini_graph:
    card:
      type: custom:mini-graph-card
      name: '[[name]]'
      icon: '[[icon]]'
      show:
        labels: false
        labels_secondary: false
      entities: '[[entities]]'
      line_width: 8
      font_size: 75
      hours_to_show: 1
      points_per_hour: 30
      animate: true
  light_group:
    default:
      - style: '--ha-card-background: none;'
    card:
      type: custom:vertical-stack-in-card
      card_mod:
        style: "ha-card {\n  [[style]]\n  --ha-card-border-width: 0;\n}\n"
      cards:
        - type: custom:mushroom-light-card
          entity: '[[entity]]'
          secondary_info: none
          tap_action:
            action: toggle
          card_mod:
            style: "ha-card {\n  {% if is_state(config.entity, \"on\") %}\n  background:\
              \ rgba(var(--rgb-state-light), 0.2);\n  {% endif %}\n}\n"
        - type: custom:auto-entities
          card:
            type: grid
            columns: 1
            square: false
          card_param: cards
          sort:
            attribute: friendly_name
          filter:
            include:
              - group: '[[entity]]'
                options:
                  type: custom:mushroom-light-card
                  show_brightness_control: true
                  show_color_temp_control: true
                  show_color_control: true
                  layout: horizontal
                  card_mod:
                    style: "ha-card {\n  transition: all 0s;\n  padding: 4px 12px\
                      \ !important;\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                      \ none;\n}\n"
  media_card:
    default:
      - expanded: false
      - buttons: []
    card:
      type: custom:vertical-stack-in-card
      cards:
        - type: custom:expander-card
          expanded: '[[expanded]]'
          gap: 0em
          padding: 0em
          child-padding: 0.5em
          title-card-padding: 0em
          title-card-button-overlay: true
          expander-card-background: none
          overlay-margin: 0
          title-card:
            type: grid
            columns: 2
            square: false
            cards:
              - type: conditional
                conditions:
                  - entity: '[[entity]]'
                    state_not: unavailable
                  - entity: '[[entity]]'
                    state_not: unknown
                card:
                  type: custom:mushroom-media-player-card
                  entity: '[[entity]]'
                  primary_info: none
                  secondary_info: none
                  icon_type: none
                  use_media_info: false
                  use_media_artwork: false
                  show_volume_level: false
                  fill_container: false
                  card_mod:
                    style: "ha-card:before {\n  transform: translate3d(0,0,0);\n \
                      \ -webkit-transform: translate3d(0,0,0);\n  content: \"\";\n\
                      \n  {%- set app_name = state_attr(\"[[entity]]\", \"source\"\
                      ) | lower -%}\n  {%- set app_list = [\n    \"cartoon network\"\
                      ,\n    \"crunchyroll\",\n    \"happykids\",\n    \"netflix\"\
                      ,\n    \"pbs kids\",\n    \"prime video\",\n    \"smarttube\"\
                      ,\n    \"spotify\",\n    \"youtube\",\n    \"youtube kids\"\n\
                      \  ] %}\n\n  background:\n  {%- if app_name in app_list -%}\n\
                      \    url('/local/logos/{{ app_name | lower | replace(\" \",\
                      \ \"-\") }}.png') center no-repeat\n  {%- elif not states(config.entity)\
                      \ in [\"off\", \"unknown\", \"unavailable\", \"idle\"] and state_attr(config.entity,\
                      \ \"entity_picture\") -%}\n    url('{{ state_attr(config.entity,\
                      \ \"entity_picture\") }}') center no-repeat\n  {%- elif \"spotify\"\
                      \ in config.entity -%}\n    url('/local/logos/spotify.png')\
                      \ center no-repeat\n  {%- else -%}\n    url('/local/logos/idle-media-player.png')\
                      \ center no-repeat\n  {%- endif -%};\n  background-size: contain;\n\
                      \n  border-radius: var(--control-border-radius);\n  {% set media_type\
                      \ = state_attr(config.entity, 'media_content_type') %}\n  {%\
                      \ if media_type in ['tvshow'] %}\n    aspect-ratio: 16 / 9;\n\
                      \    margin: 0px 0px 0px -45px;\n    margin-top: 1px;\n  {%\
                      \ elif media_type == 'movie' %}\n    aspect-ratio: 2 / 3;\n\
                      \  {% else %}\n    aspect-ratio: 1 / 1;\n    width: 99%;\n \
                      \ {% endif %}\n}\nha-card {\n  transform: translate3d(0,0,0);\n\
                      \  -webkit-transform: translate3d(0,0,0);\n  border-radius:\
                      \ 30px;\n  overflow: visible !important;\n  box-shadow: none\
                      \ !important;\n  background-color: transparent;\n  border: none\
                      \ !important;\n}\n"
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-title-card
                    alignment: center
                    title: "{% set entity = \"[[entity]]\" %} {% if states(entity)\
                      \ in [\"playing\", \"paused\", \"standby\"] %}\n  {{ state_translated(entity)\
                      \ }}\n{% endif %}"
                    card_mod:
                      style:
                        .: "ha-card {\n  --ha-card-box-shadow: none;\n}\nh1 {\n  text-shadow:\
                          \ 0 0 5px rgba(17,35,52,1);\n}\nh2 {\n  color: var(--primary-text-color)\
                          \ !important;\n  text-shadow: 0 0 5px rgba(17,35,52,1);\n\
                          }\n"
                  - type: conditional
                    conditions:
                      - entity: '[[entity]]'
                        state_not: unavailable
                      - entity: '[[entity]]'
                        state_not: 'off'
                      - entity: '[[entity]]'
                        state_not: standby
                    card:
                      type: custom:mushroom-chips-card
                      alignment: center
                      chips:
                        - type: template
                          icon: mdi:skip-backward
                          entity: '[[entity]]'
                          tap_action:
                            action: call-service
                            service: media_player.media_previous_track
                            target:
                              entity_id: '[[entity]]'
                        - type: template
                          entity: '[[entity]]'
                          icon: '{{ is_state(entity, "playing") | iif("mdi:pause",
                            "mdi:play") }}'
                          tap_action:
                            action: call-service
                            service: media_player.media_play_pause
                            target:
                              entity_id: '[[entity]]'
                        - type: template
                          entity: '[[entity]]'
                          icon: mdi:skip-forward
                          tap_action:
                            action: call-service
                            service: media_player.media_next_track
                            target:
                              entity_id: '[[entity]]'
                      card_mod:
                        style:
                          .: "ha-card {\n  --chip-background: rgba(var(--rgb-disabled-color),\
                            \ 0.25);\n  --ha-card-box-shadow: none;\n  --chip-box-shadow:\
                            \ 0 0 13px -4px rgba(17,35,52,1);\n  --chip-border-radius:\
                            \ 12px;\n  --chip-height: 35px;\n  --chip-padding: 10px;\n\
                            \  --chip-spacing: 18px;\n}\n.chip-container * {\n  margin-bottom:\
                            \ var(--chip-spacing) !important;\n}\n"
                  - type: conditional
                    conditions:
                      - entity: '[[entity]]'
                        state_not: unavailable
                      - entity: '[[entity]]'
                        state_not: idle
                    card:
                      type: custom:mushroom-title-card
                      alignment: center
                      subtitle: "{%- set episode = \"\" -%}\n{%- if state_attr(\"\
                        [[entity]]\", \"media_season\")\n  and state_attr(\"[[entity]]\"\
                        , \"media_episode\") -%}\n  {%- set episode =  \"S\" ~ state_attr(\"\
                        [[entity]]\", \"media_season\") | default(\"\", true)\n  \
                        \  ~ \"E\" ~ state_attr(\"[[entity]]\", \"media_episode\"\
                        ) | default(\"\", true) -%}\n{%- endif -%}\n{{ [\n  state_attr(\"\
                        [[entity]]\", \"media_title\") | default(\"\", true) | trim,\n\
                        \  state_attr(\"[[entity]]\", \"media_artist\") | default(\"\
                        \", true) | trim,\n  episode,\n  state_attr(\"[[entity]]\"\
                        , \"media_series_title\") | default(\"\", true) | trim\n \
                        \ ] | reject(\"==\", \"\") | list | join(\" - \")\n}}"
                      card_mod:
                        style:
                          .: "ha-card {\n  --ha-card-box-shadow: none;\n}\nh1 {\n\
                            \  text-shadow: 0 0 5px rgba(17,35,52,1);\n}\nh2 {\n \
                            \ color: var(--primary-text-color) !important;\n  text-shadow:\
                            \ 0 0 5px rgba(17,35,52,1);\n}\n"
          cards:
            - type: conditional
              conditions:
                - entity: '[[entity]]'
                  state_not: unavailable
                - entity: '[[entity]]'
                  state_not: unknown
                - entity: '[[entity]]'
                  state_not: 'off'
              card:
                type: custom:mushroom-media-player-card
                entity: '[[entity]]'
                primary_info: none
                secondary_info: none
                icon_type: none
                volume_controls:
                  - volume_set
                  - volume_mute
                  - volume_buttons
                card_mod:
                  style:
                    .: ":host {\n  --mush-rgb-state-media-player: var(--rgb-accent-color);\n\
                      }\nha-card {\n  transform: translate3d(0,0,0);\n  -webkit-transform:\
                      \ translate3d(0,0,0);\n  background: transparent;\n  box-shadow:\
                      \ none;\n  border: none !important;\n}\n"
                    mushroom-media-player-volume-control$:
                      mushroom-button$: ".button {\n  background: rgba(var(--rgb-disabled-color),\
                        \ 0.25) !important;\n  box-shadow: 0 0 13px -4px rgba(17,35,52,1)\
                        \ !important;\n  border-radius: 12px !important;\n}\n"
            - type: conditional
              conditions:
                - entity: '[[entity]]'
                  state_not: unavailable
                - entity: '[[entity]]'
                  state_not: unknown
              card:
                type: custom:mini-media-player
                entity: '[[entity]]'
                card_mod:
                  style:
                    mmp-shortcuts$: ".mmp-shortcuts__button {\n  --mmp-button-color:\
                      \ rgba(var(--rgb-disabled-color), 0.25);\n  box-shadow: 0 0\
                      \ 13px -4px rgba(17,35,52,1);\n  border-radius: 12px;\n}\n"
                artwork: none
                group: true
                hide:
                  controls: true
                  icon: true
                  info: true
                  name: true
                  power: true
                  progress: true
                  source: true
                  volume: true
                shortcuts:
                  columns: 3
                  attribute: source
                  buttons: '[[buttons]]'
          card_mod:
            style: "ha_card {\n  --ha-card-border-width: 0;\n}\n"
        - type: custom:mini-media-player
          entity: '[[entity]]'
          group: true
          hide:
            controls: true
            icon: true
            info: true
            name: true
            power: true
            source: true
            state_label: true
            volume: true
          card_mod:
            style:
              .: "ha-card {\n  --mmp-accent-color: rgb(var(--rgb-accent-color));\n\
                \  --mmp-progress-height: 12px !important;\n  --paper-progress-container-color:\
                \ transparent;\n  --ha-card-border-width: 0;\n  height: var(--mmp-progress-height);\n\
                }\n"
      card_mod:
        style:
          .: "ha-card {\n  background: none;\n  transform: translate3d(0,0,0);\n \
            \ -webkit-transform: translate3d(0,0,0);\n}\nha-card:before {\n  transform:\
            \ translate3d(0,0,0);\n  -webkit-transform: translate3d(0,0,0);\n  content:\
            \ \"\";\n  position: absolute;\n  height: 100%;\n  width: 100%;\n\n  animation:\
            \ gradient 40s ease infinite;\n\n  {%- if not states(\"[[entity]]\") in\
            \ [\"off\", \"unknown\", \"unavailable\", \"idle\"] and state_attr(\"\
            [[entity]]\", \"entity_picture\") -%}\n    background: url( '{{ state_attr('[[entity]]',\
            \ \"entity_picture\") }}') center no-repeat;\n    background-size: 500%\
            \ 500%;\n    filter: blur(100px) saturate(200%);\n  {%- elif not states('[[entity]]')\
            \ in [\"off\", \"unknown\", \"unavailable\"] -%}\n    background: url('/local/backgrounds/waveform2.jpg')\
            \ center no-repeat;\n    background-size: 500% 500%;\n    filter: blur(100px)\
            \ saturate(200%);\n  {%- else -%}\n    background: var(--ha-card-background,\
            \ var(--card-background-color, #fff))\n  {%- endif -%}\n}\n@keyframes\
            \ gradient {\n  0% { background-position: 0% 50%; }\n  25% { background-position:\
            \ 50% 0%; }\n  50% { background-position: 100% 50%; }\n  75% { background-position:\
            \ 50% 100%; }\n  100% { background-position: 0% 50%; }\n"
          expander-card$: "ha-card {\n  --ha-card-border-width: 0;\n  box-shadow:\
            \ none;\n}\n.ripple {\n  border-radius: var(--ha-dialog-border-radius);\n\
            }\n"
  motion_card:
    default:
      - entity_motion: []
    card:
      type: custom:mushroom-template-card
      entity: '[[entity]]'
      primary: '[[name]]'
      secondary: "{%- if is_state(\"[[entity_motion]]\", \"on\") -%}\n  Motion\n{%-\
        \ elif is_state(entity, \"on\") -%}\n  Detected\n{%- else -%}\n  Clear\n{%-\
        \ endif -%}"
      icon: "{%- if is_state(\"[[entity_motion]]\", \"on\") -%}\n  mdi:motion-sensor\n\
        {%- elif is_state(entity, \"on\") -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n\
        {%- endif -%}"
      icon_color: "{%- if is_state(\"[[entity_motion]]\", \"on\") -%}\n  orange\n\
        {%- elif is_state(entity, \"on\") -%}\n  light-green\n{%- else -%}\n  disabled\n\
        {%- endif -%}"
      tap_action:
        action: more-info
  package_delivery:
    card:
      type: custom:mushroom-template-badge
      entity: '[[entity]]'
      label: '[[name]]'
      content: '{{ states(entity) }} {{ iif(int(states(entity), 0) == 1, "package",
        "packages") }}'
      icon: '[[icon]]'
      color: '[[icon_color]]'
      tap_action:
        action: fire-dom-event
        browser_mod:
          service: browser_mod.popup
          data:
            title: '[[name]] Tracking'
            content:
              type: custom:vertical-stack-in-card
              card_mod:
                style: "ha-card {\n  --ha-card-background: none;\n  --ha-card-box-shadow:\
                  \ none;\n  --ha-card-border-width: 0;\n}\n"
              cards:
                - type: custom:mushroom-template-card
                  entity: '[[entity]]'
                  primary: '[[name]]'
                  secondary: '{{ states(entity) }} {{ iif(int(states(entity), 0) ==
                    1, "package", "packages") }}'
                  icon: '[[icon]]'
                  icon_color: '[[icon_color]]'
                  tap_action:
                    action: more-info
                - type: custom:mushroom-title-card
                  subtitle: Tracking Numbers
                - type: markdown
                  content: "{%- set orders = state_attr(\"[[entity]]\", \"tracking_#\"\
                    ) -%} {%- if state_attr(\"[[entity]]\", \"order\") -%}\n  {%-\
                    \ set orders = state_attr(\"[[entity]]\", \"order\") -%}\n{%-\
                    \ endif -%} {% for number in orders -%}\n  <ha-icon icon=\"mdi:package-variant-closed\"\
                    ></ha-icon> [{{ number }}]({{ \"[[url]]\" | replace(\"##TRACK_ID##\"\
                    , number) }})\n{% endfor %}"
  person_card:
    default:
      - phone_base: pixel_8
    card:
      type: custom:button-card
      template: person
      name: '[[name]]'
      entity: person.[[person]]
      tap_action:
        action: navigate
        navigation_path: '#person-[[person]]'
      variables:
        chips_top:
          - type: template
            entity: sensor.[[phone_base]]_[[person]]_network_type
            icon_color: blue
            icon: '{% from "util.jinja" import wifi_icon %} {{ wifi_icon("sensor.[[phone_base]]_[[person]]_wifi_signal_strength",
              "sensor.[[phone_base]]_[[person]]_wifi_connection") }}'
            tap_action:
              action: more-info
          - type: template
            entity: sensor.[[phone_base]]_[[person]]_battery_level
            icon: '{% from "util.jinja" import cell_battery_icon %}

              {{ cell_battery_icon(entity, "sensor.[[phone_base]]_[[person]]_battery_state",
              "sensor.[[phone_base]]_[[person]]_charger_type") }}'
            icon_color: "{% from \"util.jinja\" import battery_color %} {% if is_state(\"\
              sensor.[[phone_base]]_[[person]]_battery_state\", \"charging\") %}\n\
              \  light-blue\n{% else %}\n  {{ battery_color(entity) }}\n{% endif %}"
            tap_action:
              action: more-info
        chips:
          - type: conditional
            conditions:
              - entity: sensor.[[phone_base]]_[[person]]_do_not_disturb_sensor
                state_not: unavailable
              - entity: sensor.[[phone_base]]_[[person]]_do_not_disturb_sensor
                state_not: unknown
              - entity: sensor.[[phone_base]]_[[person]]_do_not_disturb_sensor
                state_not: 'off'
            chip:
              type: template
              entity: sensor.[[phone_base]]_[[person]]_do_not_disturb_sensor
              icon: mdi:minus-circle
              icon_color: amber
              tap_action:
                action: none
          - type: conditional
            conditions:
              - entity: person.[[person]]
                state_not: home
              - entity: person.[[person]]
                state_not: unavailable
              - entity: person.[[person]]
                state_not: unknown
            chip:
              type: template
              entity: sensor.home_[[person]]_direction_of_travel
              icon: "{% if int(states(\"sensor.home_[[person]]_distance\"), 0) >=\
                \ 400 %}\n  {% if is_state(entity, \"towards\") %}\n    mdi:map-marker-left\n\
                \  {% elif is_state(entity, \"away_from\") %}\n    mdi:map-marker-right\n\
                \  {% else %}\n    mdi:map-marker-distance\n  {% endif %}\n{% endif\
                \ %}"
              icon_color: "{% if is_state(entity, \"towards\") %}\n  green\n{% elif\
                \ is_state(entity, \"away_from\") %}\n  orange\n{% else %}\n  grey\n\
                {% endif %}"
              layout: vertical
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style:
                  .: "{% if int(states(\"sensor.home_[[person]]_distance\"), 0) >=\
                    \ 400 %}\n  {% set color = \"grey\" %}\n  {% if is_state(config.entity,\
                    \ \"towards\") %}\n    {% set color = \"green\" %}\n  {% elif\
                    \ is_state(config.entity, \"away_from\") %}\n    {% set color\
                    \ = \"orange\" %}\n  {% endif %}\nha-card:after {\n  content:\
                    \ \"{{ ((states(\"sensor.home_[[person]]_distance\") | float)\
                    \ / 5280) | round(1) }}\";\n  position: absolute;\n  color: var(--{{\
                    \ color }}-color);\n  font-weight: bolder;\n  top: -2px;\n  right:\
                    \ 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
          - type: conditional
            conditions:
              - entity: media_player.spotify_[[person]]
                state_not: unavailable
              - entity: media_player.spotify_[[person]]
                state_not: unknown
            chip:
              type: template
              entity: media_player.spotify_[[person]]
              icon_color: "{% set state = states(entity) %}\n{% if state == \"playing\"\
                \ %}\n  green\n{% elif state == \"paused\" %}\n  amber\n{% elif state\
                \ == \"idle\" %}\n  light-blue\n{% elif state in [\"standby\", \"\
                on\"] %}\n  blue-grey\n{% else %}\n  disabled\n{% endif %}"
              icon: mdi:spotify
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    title: Spotify ([[name]])
                    content:
                      type: custom:streamline-card
                      template: media_card
                      variables:
                        - entity: media_player.spotify_[[person]]
                        - buttons: []
  person_card_simple:
    card:
      type: custom:button-card
      template: person
      name: '[[name]]'
      entity: person.[[person]]
      tap_action:
        action: none
      variables:
        chips:
          - type: conditional
            conditions:
              - entity: person.[[person]]
                state_not: home
              - entity: person.[[person]]
                state_not: unavailable
              - entity: person.[[person]]
                state_not: unknown
            chip:
              type: template
              entity: sensor.home_[[person]]_direction_of_travel
              icon: "{% if int(states(\"sensor.home_[[person]]_distance\"), 0) >=\
                \ 400 %}\n  {% if is_state(entity, \"towards\") %}\n    mdi:map-marker-left\n\
                \  {% elif is_state(entity, \"away_from\") %}\n    mdi:map-marker-right\n\
                \  {% else %}\n    mdi:map-marker-distance\n  {% endif %}\n{% endif\
                \ %}"
              icon_color: "{% if is_state(entity, \"towards\") %}\n  green\n{% elif\
                \ is_state(entity, \"away_from\") %}\n  orange\n{% else %}\n  grey\n\
                {% endif %}"
              layout: vertical
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style:
                  .: "{% if int(states(\"sensor.home_[[person]]_distance\"), 0) >=\
                    \ 400 %}\n  {% set color = \"grey\" %}\n  {% if is_state(config.entity,\
                    \ \"towards\") %}\n    {% set color = \"green\" %}\n  {% elif\
                    \ is_state(config.entity, \"away_from\") %}\n    {% set color\
                    \ = \"orange\" %}\n  {% endif %}\nha-card:after {\n  content:\
                    \ \"{{ ((states(\"sensor.home_[[person]]_distance\") | float)\
                    \ / 5280) | round(1) }}\";\n  position: absolute;\n  color: var(--{{\
                    \ color }}-color);\n  font-weight: bolder;\n  top: -2px;\n  right:\
                    \ 2px;\n  font-size: 12px;\n} {% endif %}\n"
  person_popup:
    default:
      - phone_base: pixel_8
      - watch_base: pixel_watch
    card:
      type: vertical-stack
      cards:
        - type: history-graph
          hours_to_show: 48
          show_names: false
          entities:
            - entity: person.[[person]]
        - type: horizontal-stack
          cards:
            - type: custom:mushroom-template-card
              entity: sensor.home_[[person]]_direction_of_travel
              primary: "{% if is_state(\"person.[[person]]\", \"home\") %}\n  Home\n\
                {% elif is_state(\"person.[[person]]\", \"not_home\") %}\n  Away\n\
                {% else %}\n  {{ states(\"person.[[person]]\") }}\n{% endif %}"
              secondary: '{{ ((states("sensor.home_[[person]]_distance") | float)
                / 5280) | round(1) }} mi'
              icon: "{% if is_state(entity, \"towards\") %}\n  mdi:map-marker-left\n\
                {% elif is_state(entity, \"away_from\") %}\n  mdi:map-marker-right\n\
                {% else %}\n  mdi:map-marker-path\n{% endif %}"
              icon_color: "{% if is_state(entity, \"towards\") %}\n  green\n{% elif\
                \ is_state(entity, \"away_from\") %}\n  orange\n{% else %}\n  grey\n\
                {% endif %}"
              layout: vertical
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style:
                  .: "ha-card {\n  /* Remove default card styling */\n  --ha-card-background:\
                    \ none;\n  --ha-card-box-shadow: none;\n  --ha-card-border-width:\
                    \ 0;\n\n  /* Center card on row */\n  width: fit-content;\n  margin:\
                    \ auto;\n\n  /* Make card non-responsive to select and pointer\
                    \ */\n  user-select: none;\n  pointer-events: none;\n}\n"
            - type: custom:mushroom-template-card
              entity: sensor.[[phone_base]]_[[person]]_battery_level
              layout: vertical
              primary: '{{ states(entity) }}%'
              secondary: '{{ states("sensor.[[phone_base]]_[[person]]_battery_state")
                | replace(''_'', '' '') | title }}

                '
              icon: '{% from "util.jinja" import battery_icon %} {{ battery_icon(entity)
                }}'
              icon_color: "{% from \"util.jinja\" import battery_color %} {% if is_state(\"\
                sensor.[[phone_base]]_[[person]]_battery_state\", \"charging\") %}\n\
                \  light-blue\n{% else %}\n  {{ battery_color(entity) }}\n{% endif\
                \ %}"
              badge_icon: "{% set charge = \"sensor.[[phone_base]]_[[person]]_battery_state\"\
                \ %} {% set type = \"sensor.[[phone_base]]_[[person]]_charger_type\"\
                \ %} {% if is_state(charge, \"charging\") and is_state(type, \"wireless\"\
                ) %}\n  mdi:access-point\n{% elif is_state(charge, \"charging\") %}\n\
                \  mdi:lightning-bolt\n{% elif int(states(entity), 0) < 10 %}\n  mdi:exclamation-thick\n\
                {% endif %}"
              badge_color: '{{ ''red'' if int(states(entity), 0) < 10 else ''light-blue''
                }}'
              tap_action:
                action: more-info
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style:
                  .: "ha-card {\n  /* Remove default card styling */\n  --ha-card-background:\
                    \ none;\n  --ha-card-box-shadow: none;\n  --ha-card-border-width:\
                    \ 0;\n\n  /* Center card on row */\n  width: fit-content;\n  margin:\
                    \ auto;\n}\nha-state-icon {\n  /* Icon charging animation */\n\
                    \  {{ 'animation: charge 3s linear infinite;' if is_state(\"sensor.[[phone_base]]_[[person]]_battery_state\"\
                    , \"charging\") }}\n}\n@keyframes charge {\n  0%, 80% { clip-path:\
                    \ inset(0 0 0 0); }\n  10% { clip-path: polygon(0% 0%, 0% 100%,\
                    \ 34% 100%, 34% 26%, 67% 26%, 67% 84%, 34% 84%, 34% 100%, 100%\
                    \ 100%, 100% 0%); }\n  20% { clip-path: polygon(0% 0%, 0% 100%,\
                    \ 34% 100%, 34% 26%, 67% 26%, 67% 74%, 34% 74%, 34% 100%, 100%\
                    \ 100%, 100% 0%); }\n  30% { clip-path: polygon(0% 0%, 0% 100%,\
                    \ 34% 100%, 34% 26%, 67% 26%, 67% 64%, 34% 64%, 34% 100%, 100%\
                    \ 100%, 100% 0%); }\n  40% { clip-path: polygon(0% 0%, 0% 100%,\
                    \ 34% 100%, 34% 26%, 67% 26%, 67% 54%, 34% 54%, 34% 100%, 100%\
                    \ 100%, 100% 0%); }\n  50% { clip-path: polygon(0% 0%, 0% 100%,\
                    \ 34% 100%, 34% 26%, 67% 26%, 67% 44%, 34% 44%, 34% 100%, 100%\
                    \ 100%, 100% 0%); }\n  60% { clip-path: polygon(0% 0%, 0% 100%,\
                    \ 34% 100%, 34% 26%, 67% 26%, 67% 34%, 34% 34%, 34% 100%, 100%\
                    \ 100%, 100% 0%); }\n  70% { clip-path: polygon(0% 0%, 0% 100%,\
                    \ 34% 100%, 34% 26%, 67% 26%, 67% 24%, 34% 24%, 34% 100%, 100%\
                    \ 100%, 100% 0%); }\n}\n"
                  mushroom-shape-icon$: ".shape {\n  /* Radial progress bar */\n \
                    \ background:\n    radial-gradient(var(--card-background-color)\
                    \ 60%, transparent calc(60% + 1px)),\n    conic-gradient(var(--icon-color)\
                    \ {{ states(config.entity) }}% 0%, var(--card-background-color)\
                    \ 0% 100%\n  );\n}\n.shape:after {\n  /* Add back icon shape */\n\
                    \  content: \"\";\n  height: 100%;\n  width: 100%;\n  position:\
                    \ absolute;\n  border-radius: var(--icon-border-radius);\n  background:\
                    \ var(--shape-color);\n}\n"
            - type: custom:mushroom-template-card
              entity: sensor.[[watch_base]]_[[person]]_battery_level
              layout: vertical
              primary: '{{ states(entity) }}%'
              secondary: '{{ states("sensor.[[watch_base]]_[[person]]_battery_state")
                | replace(''_'', '' '') | title }}

                '
              icon: mdi:watch
              icon_color: "{% from \"util.jinja\" import battery_color %} {% if is_state(\"\
                sensor.[[watch_base]]_[[person]]_battery_state\", \"charging\") %}\n\
                \  light-blue\n{% else %}\n  {{ battery_color(entity) }}\n{% endif\
                \ %}"
              badge_icon: "{% set charge = \"sensor.[[watch_base]]_[[person]]_battery_state\"\
                \ %} {% set type = \"sensor.[[watch_base]]_[[person]]_charger_type\"\
                \ %} {% if is_state(charge, \"charging\") and is_state(type, \"wireless\"\
                ) %}\n  mdi:access-point\n{% elif int(states(entity), 0) < 10 %}\n\
                \  mdi:exclamation-thick\n{% endif %}"
              badge_color: '{{ ''red'' if int(states(entity), 0) < 10 else ''light-blue''
                }}'
              tap_action:
                action: more-info
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style:
                  .: "ha-card {\n  /* Remove default card styling */\n  --ha-card-background:\
                    \ none;\n  --ha-card-box-shadow: none;\n  --ha-card-border-width:\
                    \ 0;\n\n  /* Center card on row */\n  width: fit-content;\n  margin:\
                    \ auto;\n}\n"
                  mushroom-shape-icon$: ".shape {\n  /* Radial progress bar */\n \
                    \ background:\n    radial-gradient(var(--card-background-color)\
                    \ 60%, transparent calc(60% + 1px)),\n    conic-gradient(var(--icon-color)\
                    \ {{ states(config.entity) }}% 0%, var(--card-background-color)\
                    \ 0% 100%\n  );\n}\n.shape:after {\n  /* Add back icon shape */\n\
                    \  content: \"\";\n  height: 100%;\n  width: 100%;\n  position:\
                    \ absolute;\n  border-radius: var(--icon-border-radius);\n  background:\
                    \ var(--shape-color);\n}\n"
            - type: custom:mushroom-template-card
              entity: sensor.[[phone_base]]_[[person]]_network_type
              layout: vertical
              primary: "{%- if is_state(entity, \"cellular\") -%}\n  Cellular\n{%-\
                \ elif not is_state(\"sensor.[[phone_base]]_[[person]]_wifi_connection\"\
                , \"<not connected>\") -%}\n  {{ states(\"sensor.[[phone_base]]_[[person]]_wifi_connection\"\
                ) | truncate(16) }}\n{%- else -%}\n  Not Connected\n{%- endif -%}"
              secondary: "{% set signal_level = int(states(\"sensor.[[phone_base]]_[[person]]_wifi_signal_strength\"\
                ), 0) %} {% if signal_level != -1 %}\n  {{ signal_level }} dBm\n{%\
                \ endif %}"
              icon: '{% from "util.jinja" import wifi_icon %} {{ wifi_icon("sensor.[[phone_base]]_[[person]]_wifi_signal_strength",
                "sensor.[[phone_base]]_[[person]]_wifi_connection") }}'
              icon_color: cyan
              tap_action:
                action: more-info
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style: "ha-card {\n  /* Remove default card styling */\n  --ha-card-background:\
                  \ none;\n  --ha-card-box-shadow: none;\n  --ha-card-border-width:\
                  \ 0;\n\n  /* Center card on row */\n  width: fit-content;\n  margin:\
                  \ auto;\n}\n"
        - type: horizontal-stack
          cards:
            - type: custom:mushroom-template-card
              entity: sensor.[[watch_base]]_[[person]]_activity_state
              layout: vertical
              primary: Activity
              secondary: '{{ states(entity) | title }}'
              icon: mdi:account-reactivate
              icon_color: pink
              tap_action:
                action: more-info
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style: "ha-card {\n  /* Remove default card styling */\n  --ha-card-background:\
                  \ none;\n  --ha-card-box-shadow: none;\n  --ha-card-border-width:\
                  \ 0;\n\n  /* Center card on row */\n  width: fit-content;\n  margin:\
                  \ auto;\n}\n"
            - type: custom:mushroom-template-card
              entity: sensor.[[watch_base]]_[[person]]_daily_steps
              layout: vertical
              primary: Steps
              secondary: '{{ states(entity, with_unit=True) }}'
              icon: mdi:walk
              icon_color: lime
              tap_action:
                action: more-info
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style: "ha-card {\n  /* Remove default card styling */\n  --ha-card-background:\
                  \ none;\n  --ha-card-box-shadow: none;\n  --ha-card-border-width:\
                  \ 0;\n\n  /* Center card on row */\n  width: fit-content;\n  margin:\
                  \ auto;\n}\n"
            - type: custom:mushroom-template-card
              entity: sensor.[[watch_base]]_[[person]]_daily_calories
              layout: vertical
              primary: Calories
              secondary: '{{ states(entity, with_unit=True) }}'
              icon: mdi:food
              icon_color: brown
              tap_action:
                action: more-info
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style: "ha-card {\n  /* Remove default card styling */\n  --ha-card-background:\
                  \ none;\n  --ha-card-box-shadow: none;\n  --ha-card-border-width:\
                  \ 0;\n\n  /* Center card on row */\n  width: fit-content;\n  margin:\
                  \ auto;\n}\n"
        - type: custom:mod-card
          style:
            hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap: wrap;\n\
              \  justify-content: space-around;\n}\n"
          card:
            type: grid
            square: false
            cards:
              - type: custom:button-card
                template: button_label
                name: Find Phone
                label: Press and Hold to Cancel
                icon: mdi:target
                variables:
                  color: var(--red-color)
                tap_action:
                  action: call-service
                  service: script.notify_mobile
                  confirmation:
                    text: Are you sure you want to ring this device?
                  data:
                    send_to: '{{ ''[[person]]'' }}'
                    title: Find Phone
                    message: Ringing phone...
                    channel: alarm_stream
                    tag: find-phone
                    importance: high
                  target: {}
                hold_action:
                  action: call-service
                  service: script.notify_mobile
                  confirmation:
                    text: Cancel find phone?
                  data:
                    send_to: '{{ ''[[person]]'' }}'
                    notification_type: clear_notification
                    tag: find-phone
                extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                  \ {\n      background: color-mix(in srgb, ${variables.color}, transparent\
                  \ 80%) !important;\n    }\n  }\n  `\n]]]\n"
        - type: custom:mushroom-entity-card
          entity: sensor.[[phone_base]]_[[person]]_geocoded_location
          name: Location
          hold_action:
            action: none
          double_tap_action:
            action: none
          tap_action:
            action: none
          card_mod:
            style: "ha-card {\n  /* Remove default card styling */\n  --ha-card-background:\
              \ none;\n  --ha-card-box-shadow: none;\n  --ha-card-border-width: 0;\n\
              \n  /* Make card non-responsive to select and pointer */\n  user-select:\
              \ none;\n  pointer-events: none;\n}\n"
        - type: map
          entities:
            - entity: person.[[person]]
          aspect_ratio: '16:9'
          hours_to_show: 1
          auto_fit: true
          card_mod:
            style:
              .: ":host {\n  /* Define Person State colors. Can be added to theme\
                \ */\n  --state-person-home: var(--green-color);\n  --state-person-not-home:\
                \ var(--red-color);\n  --state-person-zone: var(--blue-color);\n \
                \ --state-person-unknown: var(--grey-color);\n\n  /* Set person state\
                \ color */\n  --state-person:\n  {% if is_state(config.entities[0].entity,\
                \ ['home', 'not_home', 'unknown']) %}\n    var(--state-person-{{ states(config.entities[0].entity)\
                \ | replace('_', '-') }})\n  {% else %}\n    var(--state-person-zone)\n\
                \  {% endif %};\n}\nha-card {\n  /* Remove default card styling without\
                \ affecting child elements */\n  box-shadow: none;\n  border-width:\
                \ 0;\n  transition: all 0s;\n}\n#buttons {\n  margin: 15px 0 0 3px;\n\
                }\n"
              ha-map $ ha-entity-marker $: ".marker {\n  /* Style person marker &\
                \ adjust position to avoid blocking waypoints */\n  border: 3px solid\
                \ var(--state-person) !important;\n  border-radius: 50% 50% 50% 0px\
                \ !important;\n  transform: rotate(-45deg) translate(50%, -50%);\n\
                \  overflow: visible !important;\n  background: var(--state-person)\
                \ !important;\n}\n.entity-picture {\n  /* Correct orientation of person\
                \ avatar */\n  transform: rotate(45deg);\n  border-radius: 50%;\n\
                }\n"
              ha-map $: "path:first-child {\n  /* Style accuracy radius */\n  fill:\
                \ color-mix(in srgb, var(--state-person) 50%, transparent);\n  stroke-width:\
                \ 0px;\n}\npath:nth-child(even) {\n  /* Styling for waypoints */\n\
                \  stroke: var(--primary-color);\n  fill: var(--primary-color);\n\
                \  stroke-width: 4px;\n}\npath:nth-child(odd):not(:first-child) {\n\
                \  /* Styling for lines */\n  stroke: var(--primary-color);\n  stroke-width:\
                \ 4px;\n}\n.leaflet-control-attribution {\n  /* Style attribution\
                \ text */\n  display: none !important;\n  background: rgba(var(--rgb-card-background-color),\
                \ 0.2) !important;\n  font-size: 8px;\n}\n.leaflet-container a {\n\
                \  /* Set color of zoom icons & attribution text */\n  color: var(--secondary-text-color);\n\
                }\n.leaflet-control-zoom-in,\n.leaflet-control-zoom-out {\n  /* Style\
                \ zoom buttons like Chips */\n  border-radius: var(--mush-chip-border-radius,\
                \ 19px) !important;\n  padding: 3px;\n  background: rgb(var(--rgb-secondary-text-color),\
                \ 0.2) !important;\n  margin: 8px 12px 0px;\n  border: var(--ha-card-border-width,\
                \ 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0))\
                \ !important;\n}\n.leaflet-control-zoom {\n  /* Remove extra margin\
                \ */\n  margin: 0px !important;\n\n  /* Remove zoom control border\
                \ */\n  border: none !important;\n}\n"
  uptime_card:
    default:
      - name: Uptime
      - icon: mdi:cloud-arrow-up-outline
      - ko_icon: mdi:exclamation-thick
      - ok: 'on'
      - ko: 'off'
      - hours: 72
      - amount: 72
      - alias_ok: Online
      - alias_ko: Offline
    card:
      type: custom:uptime-card
      entity: '[[entity]]'
      title_template: '[[name]]'
      icon: '[[icon]]'
      ko_icon: '[[ko_icon]]'
      ok: '[[ok]]'
      ko: '[[ko]]'
      hours_to_show: '[[hours]]'
      update_interval: 30
      init:
        animation: raise
      alias:
        ok: '[[alias_ok]]'
        ko: '[[alias_ko]]'
      icon_adaptive_color: true
      title_adaptive_color: true
      color:
        ok: var(--green-color)
        ko: var(--dark-grey-color)
        half: var(--light-green-color)
        none: var(--black-color)
      bar:
        spacing: 1
        height: 20
        round: 0
        amount: '[[amount]]'
      show:
        average: true
        status: true
        title: true
        header: true
        icon: true
        timeline: true
        footer: true
      alignment:
        status: spaced
        header: left
        icon_first: true
      tap_action:
        action: more-info
      tooltip:
        animation: true
        hour24: false
  linux_updates_list:
    card:
      type: markdown
      card_mod:
        style:
          .: "ha-card {\n  --ha-card-background: none;\n  --ha-card-border-width:\
            \ 0;\n  --ha-card-box-shadow: none;\n}\n"
          ha-markdown $: "td {\n  overflow-wrap: break-word;\n  word-break: break-all;\n\
            }\n"
      content: "### {{ state_attr(\"[[entity]]\", \"friendly_name\") }}: {{ states(\"\
        [[entity]]\") }}\n<table markdown=\"1\"> {% for update in state_attr(\"[[entity]]\"\
        , \"updates\") %}\n  {%- set parts = update.split(\" \") -%}\n  {%- set name\
        \ = parts[0] -%}\n  {%- set previous_version = parts[1] -%}\n  {%- set update_version\
        \ = parts[3] -%}\n<tr><td><strong><a href=\"https://archlinux.org/packages/?q={{\
        \ name }}\">{{ name }}</a></strong></td><td>{{ previous_version }} -> {{ update_version\
        \ }}</td></tr> {% endfor %} </table>"
  windows_updates_list:
    card:
      type: markdown
      card_mod:
        style: "ha-card {\n  --ha-card-background: none;\n  --ha-card-border-width:\
          \ 0;\n  --ha-card-box-shadow: none;\n}\n"
      content: '### {{ state_attr("[[entity]]", "friendly_name") }}: {{states("[[entity]]")
        }}

        {% for item in state_attr("[[entity]]", "WindowsUpdates") %} __{{ item.Title
        }}__ <blockquote> {{ item.Description }}<br> <a href="{{ item.SupportUrl }}">Support
        Link</a>{% if item.KbArticleIDs %} | <a href="https://catalog.update.microsoft.com/Search.aspx?q={{
        item.KbArticleIDs[0] }}">KB Article</a>{% endif %} </blockquote> {% endfor
        %}'
views:
  - title: Main
    type: sections
    path: main
    max_columns: 1
    icon: mdi:home-assistant
    sections:
      - type: grid
        cards:
          - type: custom:mod-card
            style:
              hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                \ wrap;\n  justify-content: space-between;\n}\nmushroom-template-badge,\
                \ hui-conditional-card {\n  flex: 0 0 auto !important;\n}\n"
            card:
              type: grid
              square: false
              columns: 4
              cards:
                - type: custom:mushroom-template-badge
                  entity: weather.openweathermap
                  label: Weather
                  icon: '{% from "util.jinja" import weather_icon %} {{ weather_icon(entity)
                    }}'
                  content: '{{ state_translated(entity) | truncate(16) }} / {{ states("sensor.ecowitt_outdoor_temperature")
                    | round() }} {{ state_attr("sensor.ecowitt_outdoor_temperature",
                    "unit_of_measurement") }}'
                  tap_action:
                    action: navigate
                    navigation_path: weather
                - type: custom:mushroom-template-badge
                  entity: sensor.ecobee_mode
                  label: Climate
                  content: '{{ states("sensor.ecobee_current_temperature") | round(0)
                    }} {{ state_attr("sensor.ecobee_current_temperature", "unit_of_measurement")
                    }}'
                  icon: mdi:thermostat
                  color: "{% if is_state(entity, \"Heating\") %}\n  red\n{% elif is_state(entity,\
                    \ \"Cooling\") %}\n  light-blue\n{% elif is_state(entity, \"Fan\"\
                    ) %}\n  amber\n{% elif is_state(entity, \"Off\") %}\n  grey\n\
                    {% else %}\n  blue-grey\n{% endif %}"
                  tap_action:
                    action: navigate
                    navigation_path: climate
                - type: custom:mushroom-template-badge
                  entity: sensor.airgradient_kitchen_pm_2_5_aqi
                  label: AQI
                  content: '{{ states(entity) | int(default="?") }} / {{ states("sensor.airnow_air_quality_index")
                    | int(default="?") }}'
                  icon: '{{ iif(has_value(entity), "mdi:blur", "mdi:blur-off") }}'
                  color: "{% if has_value(entity) %}\n  {% set level = states(entity)\
                    \ | float(default=0) %}\n  {% if level >= 300 %}\n    red\n  {%\
                    \ elif level >= 200 %}\n    purple\n  {% elif level >= 150 %}\n\
                    \    pink\n  {% elif level >= 100 %}\n    orange\n  {% elif level\
                    \ >= 50 %}\n    yellow\n  {% elif level >= 0 %}\n    green\n \
                    \ {% endif %}\n{% else %}\n  grey\n{% endif %}"
                  tap_action:
                    action: navigate
                    navigation_path: '#air-quality'
                - type: custom:mushroom-template-badge
                  entity: sensor.allergy_index_today
                  label: Allergy
                  content: '{{ states(entity) | float(default=0) }}'
                  icon: mdi:flower-pollen
                  color: "{% set level = states(entity) | float(default=0) %}\n{%\
                    \ if level >= 9.7 %}\n  red\n{% elif level >= 7.3 %}\n  orange\n\
                    {% elif level >= 4.9 %}\n  yellow\n{% elif level >= 2.5 %}\n \
                    \ lime\n{% else %}\n  green\n{% endif %}"
                  tap_action:
                    action: navigate
                    navigation_path: '#allergy'
                - type: custom:mushroom-template-badge
                  entity: sensor.garbage_collection
                  label: Garbage
                  content: "{% if is_state(\"input_boolean.garbage_collection\", \"\
                    on\") %}\n  At Curb\n{% elif is_state(entity, \"0\") %}\n  Today\n\
                    {% elif is_state(entity, \"1\") %}\n  Tomorrow\n{% else %}\n \
                    \ {{ state_attr(entity, \"days\") }} days\n{% endif %}"
                  icon: mdi:trash-can
                  color: "{% if is_state(\"input_boolean.garbage_collection\", \"\
                    on\") %}\n  green\n{% elif is_state(entity, \"0\") %}\n  red\n\
                    {% elif is_state(entity, \"1\") %}\n  yellow\n{% else %}\n  grey\n\
                    {% endif %}"
                  tap_action:
                    action: more-info
                  hold_action:
                    action: perform-action
                    perform_action: script.collection_at_curb
                    target: {}
                    data:
                      entity: sensor.garbage_collection
                - type: custom:mushroom-template-badge
                  entity: sensor.recycle_collection
                  label: Recycling
                  content: "{% if is_state(\"input_boolean.recycle_collection\", \"\
                    on\") %}\n  At Curb\n{% elif is_state(entity, \"0\") %}\n  Today\n\
                    {% elif is_state(entity, \"1\") %}\n  Tomorrow\n{% else %}\n \
                    \ {{ state_attr(entity, \"days\") }} days\n{% endif %}"
                  icon: mdi:recycle
                  color: "{% if is_state(\"input_boolean.recycle_collection\", \"\
                    on\") %}\n  green\n{% elif is_state(entity, \"0\") %}\n  red\n\
                    {% elif is_state(entity, \"1\") %}\n  yellow\n{% else %}\n  grey\n\
                    {% endif %}"
                  tap_action:
                    action: more-info
                  hold_action:
                    action: perform-action
                    perform_action: script.collection_at_curb
                    target: {}
                    data:
                      entity: sensor.recycle_collection
                - type: custom:button-card
                  template: badge
                  entity: vacuum.r2dee2
                  name: R2Dee2
                  icon: mdi:robot-vacuum
                  label: "[[[\n  if (entity.state === 'returning') return 'Returning';\n\
                    \  else return helpers.localize(entity);\n]]]\n"
                  tap_action:
                    action: navigate
                    navigation_path: r2dee2
                  variables:
                    color: "[[[\n  if (entity.state === 'cleaning') return 'var(--cyan-color)';\n\
                      \  else if (entity.state === 'charging') return 'var(--orange-color)';\n\
                      \  else if (entity.state === 'paused') return 'var(--yellow-color)';\n\
                      \  else if (entity.state === 'returning') return 'var(--purple-color)';\n\
                      \  else if (entity.state === 'docked') return 'var(--blue-grey-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: cleaning
                      icon: mdi:robot-vacuum
                      styles:
                        icon:
                          - animation: cleaning 10s linear infinite
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  @keyframes\
                    \ cleaning {\n    0% { transform: translate(0px, 5px) rotate(0deg);\
                    \ }\n    2% { transform: translate(0px, 5px) rotate(-45deg); }\n\
                    \n    10% { transform: translate(-5px, 0px) rotate(-45deg); }\n\
                    \    12% { transform: translate(-5px, 0px) rotate(45deg); }\n\n\
                    \    20% { transform: translate(0px, -5px) rotate(45deg); }\n\
                    \    22% { transform: translate(0px, -5px) rotate(135deg); }\n\
                    \n    30% { transform: translate(5px, 0px) rotate(135deg); }\n\
                    \    32% { transform: translate(5px, 0px) rotate(225deg); }\n\n\
                    \    40% { transform: translate(0px, 5px) rotate(225deg); }\n\
                    \    42% { transform: translate(0px, 5px) rotate(45deg); }\n \
                    \   \n    50% { transform: translate(5px, 0px) rotate(45deg);\
                    \ }\n    52% { transform: translate(5px, 0px) rotate(-45deg);\
                    \ }\n\n    60% { transform: translate(0px, -5px) rotate(-45deg);\
                    \ }\n    62% { transform: translate(0px, -5px) rotate(-135deg);\
                    \ }\n\n    70% { transform: translate(-5px, 0px) rotate(-135deg);\
                    \ }\n    72% { transform: translate(-5px, 0px) rotate(-225deg);\
                    \ }\n\n    80% { transform: translate(0px, 5px) rotate(-225deg);\
                    \ }\n    82% { transform: translate(0px, 5px) rotate(-180deg);\
                    \ }\n\n    90% { transform: translate(0px, 5px) rotate(0deg);\
                    \ }\n    100% { transform: translate(0px, 5px) rotate(0deg); }\n\
                    \  }\n  `\n  ]]]\n"
                - type: custom:button-card
                  template: badge
                  entity: vacuum.dustin_mopman
                  name: D. Mopman
                  icon: mdi:robot-vacuum
                  label: "[[[\n  if (entity.state === 'returning') return 'Returning';\n\
                    \  else return helpers.localize(entity);\n]]]\n"
                  tap_action:
                    action: navigate
                    navigation_path: dustin-mopman
                  variables:
                    color: "[[[\n  if (entity.state === 'cleaning') return 'var(--cyan-color)';\n\
                      \  else if (entity.state === 'charging') return 'var(--orange-color)';\n\
                      \  else if (entity.state === 'paused') return 'var(--yellow-color)';\n\
                      \  else if (entity.state === 'returning') return 'var(--purple-color)';\n\
                      \  else if (entity.state === 'docked') return 'var(--blue-grey-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: cleaning
                      icon: mdi:robot-vacuum
                      styles:
                        icon:
                          - animation: cleaning 10s linear infinite
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  @keyframes\
                    \ cleaning {\n    0% { transform: translate(0px, 5px) rotate(0deg);\
                    \ }\n    2% { transform: translate(0px, 5px) rotate(-45deg); }\n\
                    \n    10% { transform: translate(-5px, 0px) rotate(-45deg); }\n\
                    \    12% { transform: translate(-5px, 0px) rotate(45deg); }\n\n\
                    \    20% { transform: translate(0px, -5px) rotate(45deg); }\n\
                    \    22% { transform: translate(0px, -5px) rotate(135deg); }\n\
                    \n    30% { transform: translate(5px, 0px) rotate(135deg); }\n\
                    \    32% { transform: translate(5px, 0px) rotate(225deg); }\n\n\
                    \    40% { transform: translate(0px, 5px) rotate(225deg); }\n\
                    \    42% { transform: translate(0px, 5px) rotate(45deg); }\n \
                    \   \n    50% { transform: translate(5px, 0px) rotate(45deg);\
                    \ }\n    52% { transform: translate(5px, 0px) rotate(-45deg);\
                    \ }\n\n    60% { transform: translate(0px, -5px) rotate(-45deg);\
                    \ }\n    62% { transform: translate(0px, -5px) rotate(-135deg);\
                    \ }\n\n    70% { transform: translate(-5px, 0px) rotate(-135deg);\
                    \ }\n    72% { transform: translate(-5px, 0px) rotate(-225deg);\
                    \ }\n\n    80% { transform: translate(0px, 5px) rotate(-225deg);\
                    \ }\n    82% { transform: translate(0px, 5px) rotate(-180deg);\
                    \ }\n\n    90% { transform: translate(0px, 5px) rotate(0deg);\
                    \ }\n    100% { transform: translate(0px, 5px) rotate(0deg); }\n\
                    \  }\n  `\n  ]]]\n"
                - type: custom:button-card
                  template: badge
                  entity: sensor.ge_dishwasher_cycle_state
                  triggers_update:
                    - binary_sensor.ge_dishwasher_is_clean
                    - sensor.ge_dishwasher_duration
                    - sensor.ge_dishwasher_time_remaining
                  name: Dishwasher
                  icon: mdi:dishwasher-off
                  label: "[[[\n  if (states['binary_sensor.ge_dishwasher_is_clean'].state\
                    \ === 'on') return 'Clean';\n  else if (entity.state === 'N/A')\
                    \ return 'Off';\n  else return helpers.localize(entity);\n]]]\n"
                  tap_action:
                    action: navigate
                    navigation_path: '#dishwasher'
                  variables:
                    color: "[[[\n  if (states['binary_sensor.ge_dishwasher_is_clean'].state\
                      \ === 'on') return 'var(--green-color)';\n  else if (entity.state\
                      \ === 'Pre Wash') return 'var(--purple-color)';\n  else if (entity.state\
                      \ === 'Main Wash') return 'var(--cyan-color)';\n  else if (entity.state\
                      \ === 'Rinsing') return 'var(--blue-color)';\n  else if (entity.state\
                      \ === 'Sanitizing') return 'var(--light-blue-color)';\n  else\
                      \ if (entity.state === 'Drying') return 'var(--orange-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: "[[[\n  if (entity.state === 'N/A' && states['binary_sensor.ge_dishwasher_is_clean'].state\
                        \ === 'on') return true;\n  return false;\n]]]\n"
                      operator: template
                      icon: mdi:dishwasher
                    - value: unavailable
                    - value: N/A
                      operator: '!='
                      icon: mdi:dishwasher
                      styles:
                        icon:
                          - animation: bounce 1.5s ease-in-out infinite, wash 1s ease-in-out
                              infinite
                          - transform-origin: 50% 75%
                  styles:
                    img_cell:
                      - background: "[[[\n  let entity_remain = \"sensor.ge_dishwasher_time_remaining\"\
                          ;\n  let entity_duration = \"sensor.ge_dishwasher_duration\"\
                          ;\n\n  if (entity.state !== \"Off\"\n    && states[entity_remain].state\n\
                          \    && states[entity_duration].state\n    && states[entity_duration].state\
                          \ !== \"Off\"\n  ) {\n    let remaining = states[entity_remain].state.split(\"\
                          :\");\n    remaining = parseInt(remaining[0] * 60) + parseInt(remaining[1]);\n\
                          \    let duration = states[entity_duration].state.split(\"\
                          :\");\n    duration = parseInt(duration[0] * 60) + parseInt(duration[1]);\n\
                          \n    return `radial-gradient(var(--card-background-color)\
                          \ 60%, transparent calc(60% + 1px)), conic-gradient(${variables.color}\
                          \ ${Math.round((remaining / duration) * 100, 0)}% 0%, var(--card-background-color)\
                          \ 0% 100%)`;\n  } else {\n    return 'inherit';\n  }\n]]]\n"
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  @keyframes\
                    \ bounce {\n    0%, 20%, 50%, 80%, 100% {transform: translateY(0);\
                    \ }\n    40% { transform: translateY(-1.2px) rotate(5deg); }\n\
                    \    60% { transform: translateY(-1.1px) rotate(-4deg); }\n  }\n\
                    \  @keyframes wash {\n    50% { clip-path: polygon(0 0, 0 100%,\
                    \ 35% 100%, 36% 74%, 31% 43%, 61% 40%, 71% 69%, 62% 78%, 36% 73%,\
                    \ 35% 100%, 100% 100%, 100% 0); }\n  }\n  `\n]]]\n"
                - type: custom:button-card
                  template: badge
                  entity: sensor.ge_oven_current_state
                  triggers_update:
                    - sensor.ge_oven_kitchen_timer
                    - sensor.ge_oven_kitchen_timer_duration
                    - sensor.ge_oven_cook_time_remaining
                    - sensor.ge_oven_cook_time_duration
                  name: Oven
                  icon: '[[[ return variables.icon ]]]'
                  label: "[[[\n  if (entity.state !== 'Off') {\n    return helpers.localize(entity);\n\
                    \  }\n  else if (states['sensor.ge_oven_cook_time_remaining'].state\
                    \ !== 'Off') {\n    return \"Cook Time\";\n  }\n  else if (states['sensor.ge_oven_kitchen_timer'].state\
                    \ !== 'Off') {\n    return \"Timer\";\n  }\n  else {\n    return\
                    \ helpers.localize(entity);\n  }\n]]]\n"
                  tap_action:
                    action: navigate
                    navigation_path: '#oven'
                  variables:
                    icon: "[[[\n  if (!['Off', 'unknown', 'unavailable'].includes(states['sensor.ge_oven_cook_time_remaining'].state))\
                      \ return 'mdi:timer-play';\n  else if (!['Off', 'unknown', 'unavailable'].includes(states['sensor.ge_oven_kitchen_timer'].state))\
                      \ return 'mdi:timer';\n  else return \"mdi:stove\";\n]]]\n"
                    color: "[[[\n if (entity.state === 'Preheat') return 'var(--yellow-color)';\n\
                      \ else if (entity.state === 'Bake') return 'var(--red-color)';\n\
                      \ else if (entity.state === 'Air Fry') return 'var(--orange-color)';\n\
                      \ else if (entity.state === 'Convection') return 'var(--amber-color)';\n\
                      \ else if (!['Off', 'unknown', 'unavailable'].includes(states['sensor.ge_oven_cook_time_remaining'].state))\
                      \ return 'var(--cyan-color)';\n else if (!['Off', 'unknown',\
                      \ 'unavailable'].includes(states['sensor.ge_oven_kitchen_timer'].state))\
                      \ return 'var(--purple-color)';\n else return 'var(--grey-color)';\n\
                      ]]]\n"
                  styles:
                    img_cell:
                      - background: "[[[\n  let cook_time_remain = \"sensor.ge_oven_cook_time_remaining\"\
                          ;\n  let cook_time_duration = \"sensor.ge_oven_cook_time_duration\"\
                          ;\n\n  let timer_remain = \"sensor.ge_oven_kitchen_timer\"\
                          ;\n  let timer_duration = \"sensor.ge_oven_kitchen_timer_duration\"\
                          ;\n\n  let remaining = \"\";\n  let duration = \"\";\n \
                          \ if (states[cook_time_remain]?.state\n    && states[cook_time_duration]?.state\
                          \ !== \"Off\"\n  ) {\n    remaining = states[cook_time_remain].state.split(\"\
                          :\");\n    remaining = parseInt(remaining[0] * 60) + parseInt(remaining[1]);\n\
                          \    duration = states[cook_time_duration].state.split(\"\
                          :\");\n    duration = parseInt(duration[0] * 60) + parseInt(duration[1]);\n\
                          \n    return `radial-gradient(var(--card-background-color)\
                          \ 60%, transparent calc(60% + 1px)), conic-gradient(${variables.color}\
                          \ ${Math.round((remaining / duration) * 100, 0)}% 0%, var(--card-background-color)\
                          \ 0% 100%)`;\n  }\n  else if (states[timer_remain]?.state\n\
                          \    && states[timer_duration]?.state !== \"Off\"\n  ) {\n\
                          \    remaining = states[timer_remain].state.split(\":\"\
                          );\n    remaining = parseInt(remaining[0] * 60) + parseInt(remaining[1]);\n\
                          \    duration = states[timer_duration].state.split(\":\"\
                          );\n    duration = parseInt(duration[0] * 60) + parseInt(duration[1]);\n\
                          \n    return `radial-gradient(var(--card-background-color)\
                          \ 60%, transparent calc(60% + 1px)), conic-gradient(${variables.color}\
                          \ ${Math.round((remaining / duration) * 100, 0)}% 0%, var(--card-background-color)\
                          \ 0% 100%)`;\n  }\n]]]\n"
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
                - type: conditional
                  conditions:
                    - condition: state
                      entity: input_boolean.washer_status
                      state: 'on'
                  card:
                    type: custom:button-card
                    template: badge
                    entity: input_boolean.washer_status
                    name: Washer
                    icon: mdi:washing-machine-off
                    label: "[[[\n  if (entity.state === 'on') return 'Running';\n\
                      \  else return 'Off';\n]]]\n"
                    tap_action:
                      action: more-info
                    variables:
                      color: "[[[\n  if (entity.state === 'on') return 'var(--blue-color)';\n\
                        \  else return 'var(--grey-color)';\n]]]\n"
                    state:
                      - value: 'on'
                        icon: mdi:washing-machine
                        styles:
                          icon:
                            - animation: shake 400ms ease-in-out infinite, drum 2s
                                ease infinite
                            - transform-origin: 50% 110%
                    extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n  \
                      \  ha-card:hover {\n      background: color-mix(in srgb, ${variables.color}\
                      \ 4%, var(--card-background-color) 100%);\n    }\n  }\n  @keyframes\
                      \ shake {\n    0%, 100% { transform: translate(0, 0) rotate(0);\
                      \ }\n    20%  { transform: translate(0.4px, -0.4px) rotate(-4deg);\
                      \ }\n    40%  { transform: translate(-0.4px, 0.4px) rotate(4deg);\
                      \ }\n    60%  { transform: translate(0.4px, 0.4px) rotate(-4deg);\
                      \ }\n    80%  { transform: translate(-0.4px, -0.4px) rotate(4deg);\
                      \ }\n  }\n  @keyframes drum {\n    50%  { clip-path: polygon(0\
                      \ 0, 0 100%, 35% 100%, 34% 68%, 60% 41%, 71% 56%, 65% 74%, 47%\
                      \ 79%, 34% 68%, 35% 100%, 100% 100%, 100% 0); }\n  }\n  `\n\
                      \  ]]]\n"
                - type: conditional
                  conditions:
                    - condition: state
                      entity: input_boolean.dryer_status
                      state: 'on'
                  card:
                    type: custom:button-card
                    template: badge
                    entity: input_boolean.dryer_status
                    name: Dryer
                    icon: mdi:tumble-dryer-off
                    label: "[[[\n  if (entity.state === 'on') return 'Running';\n\
                      \  else return 'Off';\n]]]\n"
                    tap_action:
                      action: more-info
                    variables:
                      color: "[[[\n  if (entity.state === 'on') return 'var(--orange-color)';\n\
                        \  else return 'var(--grey-color)';\n]]]\n"
                    state:
                      - value: 'on'
                        icon: mdi:tumble-dryer
                        styles:
                          icon:
                            - animation: shake 400ms ease-in-out infinite, drum 1s
                                infinite
                            - transform-origin: 50% 65%
                    extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n  \
                      \  ha-card:hover {\n      background: color-mix(in srgb, ${variables.color}\
                      \ 4%, var(--card-background-color) 100%);\n    }\n  }\n  @keyframes\
                      \ shake {\n    0%, 100% { transform: rotate(4deg); }\n    50%\
                      \  { transform: rotate(-4deg); }\n  }\n  @keyframes drum {\n\
                      \    50%  { clip-path: polygon(0 0, 0 100%, 35% 100%, 36% 74%,\
                      \ 31% 43%, 61% 40%, 71% 69%, 62% 78%, 36% 73%, 35% 100%, 100%\
                      \ 100%, 100% 0); }\n  }\n  `\n  ]]]\n"
                - type: conditional
                  conditions:
                    - condition: or
                      conditions:
                        - condition: numeric_state
                          entity: sensor.mail_usps_mail
                          above: 0
                        - condition: state
                          entity: binary_sensor.usps_mail_delivered
                          state: 'on'
                  card:
                    type: custom:mushroom-template-badge
                    entity: sensor.mail_usps_mail
                    label: Mail
                    content: "{% if is_state(\"binary_sensor.usps_mail_delivered\"\
                      , \"on\") %}\n  Delivered\n{% else %}\n  {{ states(entity) }}\
                      \ {{ iif(is_state(entity, \"1\"), \"piece\", \"pieces\") }}\n\
                      {% endif %}"
                    icon: '{{ iif(is_state("binary_sensor.usps_mail_delivered", "on"),
                      "mdi:mailbox-up", "mdi:mail") }}'
                    color: '{{ iif(is_state("binary_sensor.usps_mail_delivered", "on"),
                      "cyan", "blue") }}'
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: Mail
                          size: fullscreen
                          content:
                            type: picture-entity
                            entity: camera.mail_usps_camera
                            camera_image: camera.mail_usps_camera
                            show_name: false
                            show_state: false
                            card_mod:
                              style: "ha-card {\n  --ha-card-background: none;\n"
                - type: conditional
                  conditions:
                    - condition: numeric_state
                      entity: sensor.mail_packages_delivered
                      above: 0
                  card:
                    type: custom:mushroom-template-badge
                    entity: sensor.mail_packages_delivered
                    label: '{{ iif(is_state(entity, "1"), "Package", "Packages") }}

                      '
                    content: '{{ states(entity) }} Delivered

                      '
                    icon: mdi:package-variant
                    color: orange
                - type: conditional
                  conditions:
                    - condition: numeric_state
                      entity: sensor.mail_usps_delivering
                      above: 0
                    - condition: state
                      entity: sensor.mail_usps_delivering
                      state_not: unavailable
                    - condition: state
                      entity: sensor.mail_usps_delivering
                      state_not: unknown
                  card:
                    type: custom:streamline-card
                    template: package_delivery
                    variables:
                      - entity: sensor.mail_usps_delivering
                      - name: USPS
                      - icon: fab:usps
                      - icon_color: blue
                      - url: https://tools.usps.com/go/TrackConfirmAction?tLabels=##TRACK_ID##
                - type: conditional
                  conditions:
                    - condition: numeric_state
                      entity: sensor.mail_ups_delivering
                      above: 0
                    - condition: state
                      entity: sensor.mail_ups_delivering
                      state_not: unavailable
                    - condition: state
                      entity: sensor.mail_ups_delivering
                      state_not: unknown
                  card:
                    type: custom:streamline-card
                    template: package_delivery
                    variables:
                      - entity: sensor.mail_ups_delivering
                      - name: UPS
                      - icon: fab:ups
                      - icon_color: brown
                      - url: https://www.ups.com/track?loc=en_US&tracknum=##TRACK_ID##
                - type: conditional
                  conditions:
                    - condition: numeric_state
                      entity: sensor.mail_fedex_delivering
                      above: 0
                    - condition: state
                      entity: sensor.mail_fedex_delivering
                      state_not: unavailable
                    - condition: state
                      entity: sensor.mail_fedex_delivering
                      state_not: unknown
                  card:
                    type: custom:streamline-card
                    template: package_delivery
                    variables:
                      - entity: sensor.mail_fedex_delivering
                      - name: FedEx
                      - icon: fab:fedex
                      - icon_color: purple
                      - url: https://www.fedex.com/fedextrack/?trknbr=##TRACK_ID##
                - type: conditional
                  conditions:
                    - condition: numeric_state
                      entity: sensor.mail_amazon_packages
                      above: 0
                    - condition: state
                      entity: sensor.mail_amazon_packages
                      state_not: unavailable
                    - condition: state
                      entity: sensor.mail_amazon_packages
                      state_not: unknown
                  card:
                    type: custom:streamline-card
                    template: package_delivery
                    variables:
                      - entity: sensor.mail_amazon_packages
                      - name: Amazon
                      - icon: fab:amazon
                      - icon_color: yellow
                      - url: https://www.amazon.com/gp/your-account/order-details?orderID=##TRACK_ID##
      - type: grid
        cards:
          - type: custom:streamline-card
            layout_options:
              grid_columns: 2
            template: person_card
            variables:
              - person: joshua
              - name: Joshua
          - type: custom:streamline-card
            layout_options:
              grid_columns: 2
            template: person_card
            variables:
              - person: amy
              - name: Amy
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: room
            entity: light.living_room_lights
            name: Living Room
            icon: mdi:sofa-single
            tap_action:
              action: navigate
              navigation_path: living
            hold_action:
              action: toggle
            variables:
              temperature: sensor.ecobee_current_temperature
              icon_color: 255, 152, 0
              chips_top:
                - type: template
                  entity: camera.livingroom
                  icon: mdi:cctv
                  icon_color: '{{ iif(has_value(entity), "cyan", "red") }}'
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Living Room
                        size: fullscreen
                        content:
                          type: custom:streamline-card
                          template: camera_popup
                          variables:
                            - camera: camera.livingroom
                            - stream: livingroom
              chips:
                - type: template
                  entity: media_player.universal_living_room
                  icon_color: "{% set state = states(entity) %}\n{% if state == \"\
                    playing\" %}\n  green\n{% elif state == \"paused\" %}\n  amber\n\
                    {% elif state == \"idle\" %}\n  light-blue\n{% elif state in [\"\
                    standby\", \"on\"] %}\n  blue-grey\n{% else %}\n  disabled\n{%\
                    \ endif %}"
                  icon: '{% from "util.jinja" import media_icon %} {{ media_icon(entity)
                    }}'
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Living Room Media
                        content:
                          type: custom:vertical-stack-in-card
                          card_mod:
                            style: "ha-card {\n  --ha-card-background: none;\n  --ha-card-border-width:\
                              \ 0;\n}\n"
                          cards:
                            - type: custom:streamline-card
                              template: remote_living
                - type: template
                  entity: fan.living_room_ceiling
                  icon: mdi:fan
                  icon_color: "{% if is_state(entity, 'on') %}\n  {% set speed = state_attr(entity,\
                    \ 'percentage') %}\n  {{ {\n    33: \"green\",\n    66: \"orange\"\
                    ,\n    100: \"red\"\n  }[speed] }}\n{% else %}\n  disabled\n{%\
                    \ endif %}"
                  card_mod:
                    style: ".content {\n  {% if is_state(config.entity, 'on') %}\n\
                      \    {% set speed = state_attr(config.entity, 'percentage')\
                      \ %}\n    animation: {{ (2 - (speed / 100)) | round(2) }}s rotation\
                      \ linear infinite;\n  {% endif %}\n}\n@keyframes rotation {\n\
                      \  100% {\n    transform: rotate(360deg);\n  }\n}\n"
                  tap_action:
                    action: more-info
                - type: template
                  entity: light.living_room_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Living Room Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.living_room_lights
                - type: template
                  entity: binary_sensor.ecobee_occupancy
                  icon: "{%- if is_state(\"binary_sensor.ecobee_motion\", \"on\")\
                    \ -%}\n  mdi:motion-sensor\n{%- elif is_state(entity, \"on\")\
                    \ -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n{%-\
                    \ endif -%}"
                  icon_color: "{%- if is_state(\"binary_sensor.ecobee_motion\", \"\
                    on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n \
                    \ light-green\n{%- else -%}\n  disabled\n{%- endif -%}"
                  tap_action:
                    action: none
                  hold_action:
                    action: none
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: room
            entity: light.kitchen_lights
            name: Kitchen
            icon: mdi:fridge-variant
            tap_action:
              action: navigate
              navigation_path: kitchen
            hold_action:
              action: toggle
            variables:
              temperature: sensor.kitchen_temperature
              icon_color: 0, 188, 212
              chips:
                - type: conditional
                  conditions:
                    - entity: light.magicmirror_monitor
                      state: 'on'
                  chip:
                    type: template
                    entity: light.magicmirror_monitor
                    icon_color: blue
                    icon: mdi:apps-box
                    tap_action:
                      action: more-info
                - type: template
                  entity: light.kitchen_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Kitchen Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.kitchen_lights
                - type: template
                  entity: binary_sensor.kitchen_occupancy
                  icon: "{%- if is_state(\"binary_sensor.kitchen_motion\", \"on\"\
                    ) -%}\n  mdi:motion-sensor\n{%- elif is_state(entity, \"on\")\
                    \ -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n{%-\
                    \ endif -%}"
                  icon_color: "{%- if is_state(\"binary_sensor.kitchen_motion\", \"\
                    on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n \
                    \ light-green\n{%- else -%}\n  disabled\n{%- endif -%}"
                  tap_action:
                    action: none
                  hold_action:
                    action: none
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: room
            entity: light.family_room_lights
            name: Family Room
            icon: mdi:gamepad-circle
            tap_action:
              action: navigate
              navigation_path: family
            hold_action:
              action: toggle
            variables:
              temperature: sensor.family_room_temperature
              icon_color: 255, 235, 59
              chips_top:
                - type: template
                  entity: camera.familyroom
                  icon: mdi:cctv
                  icon_color: '{{ iif(has_value(entity), "cyan", "red") }}'
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Family Room
                        size: fullscreen
                        content:
                          type: custom:streamline-card
                          template: camera_popup
                          variables:
                            - camera: camera.familyroom
                            - stream: familyroom
              chips:
                - type: conditional
                  conditions:
                    - entity: binary_sensor.athos_connected
                      state: 'on'
                  chip:
                    type: template
                    entity: binary_sensor.athos_connected
                    icon_color: lime
                    icon: mdi:desktop-tower
                    tap_action:
                      action: none
                - type: conditional
                  conditions:
                    - entity: binary_sensor.quest_interactive
                      state: 'on'
                  chip:
                    type: template
                    entity: binary_sensor.quest_interactive
                    icon_color: blue
                    icon: fapro:meta
                    tap_action:
                      action: none
                - type: template
                  entity: select.harmony_family_room_activities
                  icon_color: "{% set state = states(entity) %}\n{% if state == \"\
                    Computer\" %}\n  teal\n{% elif state == \"PS3\" %}\n  cyan\n{%\
                    \ elif state == \"PS4\" %}\n  blue\n{% elif state == \"Switch\"\
                    \ %}\n  red\n{% elif state == \"XBox\" %}\n  green\n{% else %}\n\
                    \  disabled\n{% endif %}"
                  icon: "{% set state = states(entity) %}\n{% if state == \"Computer\"\
                    \ %}\n  mdi:desktop-tower\n{% elif state == \"PS3\" %}\n  fapro:ps3\n\
                    {% elif state == \"PS4\" %}\n  fapro:ps4\n{% elif state == \"\
                    Switch\" %}\n  mdi:nintendo-switch\n{% elif state == \"XBox\"\
                    \ %}\n  mdi:microsoft-xbox\n{% else %}\n  mdi:gamepad-variant-outline\n\
                    {% endif %}"
                  tap_action:
                    action: none
                - type: template
                  entity: media_player.universal_family_room
                  icon_color: "{% set state = states(entity) %}\n{% if state == \"\
                    playing\" %}\n  green\n{% elif state == \"paused\" %}\n  amber\n\
                    {% elif state == \"idle\" %}\n  light-blue\n{% elif state in [\"\
                    standby\", \"on\"] %}\n  blue-grey\n{% else %}\n  disabled\n{%\
                    \ endif %}"
                  icon: '{% from "util.jinja" import media_icon %} {{ media_icon(entity)
                    }}'
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Family Room Media
                        content:
                          type: custom:vertical-stack-in-card
                          card_mod:
                            style: "ha-card {\n  --ha-card-background: none;\n  --ha-card-border-width:\
                              \ 0;\n}\n"
                          cards:
                            - type: custom:streamline-card
                              template: remote_family
                - type: template
                  entity: light.family_room_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Family Room Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.family_room_lights
                - type: template
                  entity: binary_sensor.family_room_occupancy
                  icon: "{%- if is_state(\"binary_sensor.family_room_motion\", \"\
                    on\") -%}\n  mdi:motion-sensor\n{%- elif is_state(entity, \"on\"\
                    ) -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n{%-\
                    \ endif -%}"
                  icon_color: "{%- if is_state(\"binary_sensor.family_room_motion\"\
                    , \"on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n\
                    \  light-green\n{%- else -%}\n  disabled\n{%- endif -%}"
                  tap_action:
                    action: none
                  hold_action:
                    action: none
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: room
            entity: light.theater_room
            name: Theater Room
            icon: mdi:projector
            tap_action:
              action: navigate
              navigation_path: theater
            variables:
              temperature: sensor.family_room_temperature
              icon_color: 255, 193, 7
              chips:
                - type: template
                  entity: light.theater_room
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  tap_action:
                    action: none
                - type: template
                  entity: binary_sensor.theater_room_occupancy
                  icon: "{%- if is_state(\"binary_sensor.theater_room_motion\", \"\
                    on\") -%}\n  mdi:motion-sensor\n{%- elif is_state(entity, \"on\"\
                    ) -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n{%-\
                    \ endif -%}"
                  icon_color: "{%- if is_state(\"binary_sensor.theater_room_motion\"\
                    , \"on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n\
                    \  light-green\n{%- else -%}\n  disabled\n{%- endif -%}"
                  tap_action:
                    action: none
                  hold_action:
                    action: none
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: room
            entity: light.joshua_office_lights
            name: Josh's Office
            icon: mdi:chair-rolling
            tap_action:
              action: navigate
              navigation_path: josh-office
            hold_action:
              action: toggle
            variables:
              temperature: sensor.joshua_office_temperature
              icon_color: 33, 150, 243
              chips:
                - type: conditional
                  conditions:
                    - entity: binary_sensor.cartago_connected
                      state: 'on'
                  chip:
                    type: template
                    entity: binary_sensor.cartago_connected
                    icon_color: blue
                    icon: mdi:laptop
                    tap_action:
                      action: none
                - type: conditional
                  conditions:
                    - entity: binary_sensor.erebus_connected
                      state: 'on'
                  chip:
                    type: template
                    entity: binary_sensor.erebus_connected
                    icon_color: blue
                    icon: mdi:desktop-tower
                    tap_action:
                      action: none
                - type: template
                  entity: light.joshua_office_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Joshua Office Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.joshua_office_lights
                - type: template
                  entity: binary_sensor.apollo_msr_1_office_radar_target
                  icon: "{%- if is_state(\"binary_sensor.apollo_msr_1_office_radar_moving_target\"\
                    , \"on\") -%}\n  mdi:motion-sensor\n{%- elif is_state(entity,\
                    \ \"on\") -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n\
                    {%- endif -%}"
                  icon_color: "{%- if is_state(\"binary_sensor.apollo_msr_1_office_radar_moving_target\"\
                    , \"on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n\
                    \  light-green\n{%- else -%}\n  disabled\n{%- endif -%}"
                  tap_action:
                    action: none
                  hold_action:
                    action: none
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: room
            entity: light.amy_office_lights
            name: Amy's Office
            icon: mdi:skull
            tap_action:
              action: navigate
              navigation_path: amy-office
            hold_action:
              action: toggle
            variables:
              temperature: sensor.amy_office_temperature
              icon_color: 244, 67, 54
              chips:
                - type: conditional
                  conditions:
                    - entity: binary_sensor.nasya_connected
                      state: 'on'
                  chip:
                    type: template
                    entity: binary_sensor.nasya_connected
                    icon_color: blue
                    icon: mdi:laptop
                    tap_action:
                      action: none
                - type: template
                  entity: light.amy_office_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Amy Office Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.amy_office_lights
                - type: template
                  entity: binary_sensor.amy_office_occupancy
                  icon: "{%- if is_state(\"binary_sensor.amy_office_motion\", \"on\"\
                    ) -%}\n  mdi:motion-sensor\n{%- elif is_state(entity, \"on\")\
                    \ -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n{%-\
                    \ endif -%}"
                  icon_color: "{%- if is_state(\"binary_sensor.amy_office_motion\"\
                    , \"on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n\
                    \  light-green\n{%- else -%}\n  disabled\n{%- endif -%}"
                  tap_action:
                    action: none
                  hold_action:
                    action: none
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: room
            entity: light.ethan_bedroom_lights
            name: Ethan
            icon: mdi:toy-brick
            tap_action:
              action: navigate
              navigation_path: ethan
            hold_action:
              action: toggle
            variables:
              temperature: sensor.ethan_bedroom_temperature
              icon_color: 76, 175, 80
              chips:
                - type: conditional
                  conditions:
                    - entity: switch.nebula_projector_ethan_main_switch
                      state: 'on'
                  chip:
                    type: template
                    entity: switch.nebula_projector_ethan_main_switch
                    icon_color: pink
                    icon: mdi:crystal-ball
                    tap_action:
                      action: more-info
                - type: template
                  entity: light.ethan_bedroom_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Ethan's Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.ethan_bedroom_lights
                - type: template
                  entity: binary_sensor.ethan_bedroom_occupancy
                  icon: "{%- if is_state(\"binary_sensor.ethan_bedroom_motion\", \"\
                    on\") -%}\n  mdi:motion-sensor\n{%- elif is_state(entity, \"on\"\
                    ) -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n{%-\
                    \ endif -%}"
                  icon_color: "{%- if is_state(\"binary_sensor.ethan_bedroom_motion\"\
                    , \"on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n\
                    \  light-green\n{%- else -%}\n  disabled\n{%- endif -%}"
                  tap_action:
                    action: none
                  hold_action:
                    action: none
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: room
            entity: light.emma_bedroom_lights
            name: Emma
            icon: mdi:cat
            tap_action:
              action: navigate
              navigation_path: emma
            hold_action:
              action: toggle
            variables:
              temperature: sensor.emma_bedroom_temperature
              icon_color: 156, 39, 176
              chips:
                - type: conditional
                  conditions:
                    - entity: switch.nebula_projector_emma_main_switch
                      state: 'on'
                  chip:
                    type: template
                    entity: switch.nebula_projector_emma_main_switch
                    icon_color: pink
                    icon: mdi:crystal-ball
                    tap_action:
                      action: more-info
                - type: template
                  entity: light.emma_bedroom_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Emma's Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.emma_bedroom_lights
                - type: template
                  entity: binary_sensor.emma_bedroom_occupancy
                  icon: "{%- if is_state(\"binary_sensor.emma_bedroom_motion\", \"\
                    on\") -%}\n  mdi:motion-sensor\n{%- elif is_state(entity, \"on\"\
                    ) -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n{%-\
                    \ endif -%}"
                  icon_color: "{%- if is_state(\"binary_sensor.emma_bedroom_motion\"\
                    , \"on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n\
                    \  light-green\n{%- else -%}\n  disabled\n{%- endif -%}"
                  tap_action:
                    action: none
                  hold_action:
                    action: none
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: room
            entity: light.main_bedroom_lights
            name: Main Bedroom
            icon: mdi:bed-king
            tap_action:
              action: navigate
              navigation_path: main-bed
            hold_action:
              action: toggle
            variables:
              temperature: sensor.main_bedroom_temperature
              icon_color: 103, 58, 183
              chips:
                - type: template
                  entity: media_player.universal_main_bedroom
                  icon_color: "{% set state = states(entity) %}\n{% if state == \"\
                    playing\" %}\n  green\n{% elif state == \"paused\" %}\n  amber\n\
                    {% elif state == \"idle\" %}\n  light-blue\n{% elif state in [\"\
                    standby\", \"on\"] %}\n  blue-grey\n{% else %}\n  disabled\n{%\
                    \ endif %}"
                  icon: '{% from "util.jinja" import media_icon %} {{ media_icon(entity)
                    }}'
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Main Bedroom Media
                        content:
                          type: custom:vertical-stack-in-card
                          card_mod:
                            style: "ha-card {\n  --ha-card-background: none;\n  --ha-card-border-width:\
                              \ 0;\n}\n"
                          cards:
                            - type: custom:streamline-card
                              template: remote_main
                - type: template
                  entity: fan.main_bedroom_ceiling
                  icon: mdi:fan
                  icon_color: "{% if is_state(entity, 'on') %}\n  {% set speed = state_attr(entity,\
                    \ 'percentage') %}\n  {{ {\n    33: \"green\",\n    66: \"orange\"\
                    ,\n    100: \"red\"\n  }[speed] }}\n{% else %}\n  disabled\n{%\
                    \ endif %}"
                  card_mod:
                    style: ".content {\n  {% if is_state(config.entity, 'on') %}\n\
                      \    {% set speed = state_attr(config.entity, 'percentage')\
                      \ %}\n    animation: {{ (2 - (speed / 100)) | round(2) }}s rotation\
                      \ linear infinite;\n  {% endif %}\n}\n@keyframes rotation {\n\
                      \  100% {\n    transform: rotate(360deg);\n  }\n}\n"
                  tap_action:
                    action: more-info
                - type: template
                  entity: light.main_bedroom_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Main Bedroom Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.main_bedroom_lights
                - type: template
                  entity: binary_sensor.main_bedroom_occupancy
                  icon: "{%- if is_state(\"binary_sensor.main_bedroom_motion\", \"\
                    on\") -%}\n  mdi:motion-sensor\n{%- elif is_state(entity, \"on\"\
                    ) -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n{%-\
                    \ endif -%}"
                  icon_color: "{%- if is_state(\"binary_sensor.main_bedroom_motion\"\
                    , \"on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n\
                    \  light-green\n{%- else -%}\n  disabled\n{%- endif -%}"
                  tap_action:
                    action: none
                  hold_action:
                    action: none
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: room
            name: Utility
            icon: mdi:progress-wrench
            tap_action:
              action: navigate
              navigation_path: utility
            variables:
              temperature: sensor.ecowitt_indoor_temperature
              icon_color: 121, 85, 72
              chips:
                - type: conditional
                  conditions:
                    - entity: binary_sensor.water_leak_detected
                      state_not: 'off'
                  chip:
                    type: template
                    entity: binary_sensor.water_leak_detected
                    icon_color: '{{ iif(is_state(entity, "on"), "red", "white") }}'
                    icon: mdi:water-alert
                    tap_action:
                      action: none
                    card_mod:
                      style: "@keyframes phase {\n  50% {opacity: 0;}\n}\n{% if is_state(config.entity,\
                        \ \"on\") %}\n.content {\n  animation: phase 1.5s ease-out\
                        \ infinite;\n}\n{% endif %}\n"
                - type: template
                  entity: light.utility_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Utility Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.utility_lights
                - type: template
                  entity: valve.water_main_valve
                  icon_color: "{% if not has_value(entity) %}\n  disabled\n{% elif(is_state(entity,\
                    \ \"open\")) %}\n  green\n{% else %}\n  red\n{% endif %}"
                  icon: "{% if not has_value(entity) %}\n  mdi:valve\n{% elif(is_state(entity,\
                    \ \"open\")) %}\n  mdi:valve-open\n{% else %}\n  mdi:valve-closed\n\
                    {% endif %}"
                  tap_action:
                    action: none
                  card_mod:
                    style: "@keyframes phase {\n  50% {opacity: 0;}\n}\n{% if is_state(config.entity,\
                      \ \"closed\") %}\n.content {\n  animation: phase 1.5s ease-out\
                      \ infinite;\n}\n{% endif %}\n"
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: room
            entity: light.outside_lights
            name: Outside
            icon: mdi:spa
            tap_action:
              action: navigate
              navigation_path: outside
            hold_action:
              action: toggle
            variables:
              temperature: sensor.ecowitt_outdoor_temperature
              icon_color: 139, 195, 74
              chips_top:
                - type: template
                  entity: camera.doorbell
                  icon: mdi:doorbell-video
                  icon_color: '{{ iif(has_value(entity), "cyan", "red") }}'
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Doorbell
                        size: fullscreen
                        content:
                          type: custom:streamline-card
                          template: camera_popup
                          variables:
                            - camera: camera.doorbell
                            - stream: doorbell
              chips:
                - type: template
                  entity: binary_sensor.sprinkler_zones
                  icon_color: "{% set zones = expand(entity)\n  | selectattr(\"state\"\
                    , \"==\", \"on\")\n  | map(attribute=\"entity_id\")\n  | list\n\
                    \  | count\n%} {% if is_state(\"binary_sensor.opensprinkler_paused\"\
                    , \"on\") %}\n  yellow\n{% elif zones > 0 %}\n  light-blue\n{%\
                    \ else %}\n  disabled\n{% endif %}"
                  icon: mdi:sprinkler
                  tap_action:
                    action: none
                  card_mod:
                    style:
                      .: "{%- set zones = expand(config.entity)\n  | selectattr(\"\
                        state\", \"==\", \"on\")\n  | map(attribute=\"entity_id\"\
                        )\n  | list\n-%}\n{%- if zones[0] is defined -%}\nha-card:after\
                        \ {\n  content: \"{{ int(state_attr(zones[0], 'index')) +\
                        \ 1 }}\";\n  position: absolute;\n  color: var(--light-blue-color);\n\
                        \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n  font-size:\
                        \ 12px;\n}\n{%- endif -%}\n"
                - type: template
                  entity: light.outside_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Outside Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.outside_lights
                - type: template
                  entity: binary_sensor.doorbell_all_occupancy
                  icon: "{%- if is_state(\"binary_sensor.doorbell_camera_motion\"\
                    , \"on\") -%}\n  mdi:motion-sensor\n{%- elif is_state(entity,\
                    \ \"on\") -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n\
                    {%- endif -%}"
                  icon_color: "{%- if is_state(\"binary_sensor.doorbell_camera_motion\"\
                    , \"on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n\
                    \  light-green\n{%- else -%}\n  disabled\n{%- endif -%}"
                  tap_action:
                    action: none
                  hold_action:
                    action: none
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: room
            entity: light.garage_lights
            name: Garage
            icon: "[[[\n  if (states[\"cover.garage_door\"].state == \"open\") return\
              \ \"mdi:garage-open-variant\";\n  else if (['opening', 'closing'].includes(states[\"\
              cover.garage_door\"].state)) return \"mdi:garage-alert-variant\";\n\
              \  else return \"mdi:garage-variant\";\n]]]\n"
            tap_action:
              action: navigate
              navigation_path: garage
            hold_action:
              action: toggle
            variables:
              temperature: sensor.garage_multisensor_air_temperature
              icon_color: 96, 125, 139
              chips_top:
                - type: template
                  entity: camera.garage
                  icon: mdi:cctv
                  icon_color: '{{ iif(has_value(entity), "cyan", "red") }}'
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Garage
                        size: fullscreen
                        content:
                          type: custom:streamline-card
                          template: camera_popup
                          variables:
                            - camera: camera.garage
                            - stream: garage
              chips:
                - type: conditional
                  conditions:
                    - entity: binary_sensor.garage_door_obstruction
                      state: 'on'
                    - entity: binary_sensor.garage_door_obstruction
                      state_not: unavailable
                    - entity: binary_sensor.garage_door_obstruction
                      state_not: unknown
                  chip:
                    type: template
                    entity: binary_sensor.garage_door_obstruction
                    icon: mdi:alert-circle
                    icon_color: red
                    tap_action:
                      action: none
                    card_mod:
                      style: "@keyframes phase {\n  50% {opacity: 0;}\n}\n.content\
                        \ {\n  animation: phase 1.5s ease-out infinite;\n}"
                - type: conditional
                  conditions:
                    - entity: cover.garage_door
                      state_not: closed
                    - entity: cover.garage_door
                      state_not: unavailable
                    - entity: cover.garage_door
                      state_not: unknown
                  chip:
                    type: template
                    entity: cover.garage_door
                    icon: "{%- if is_state(entity, \"open\") -%}\n  mdi:garage-open-variant\n\
                      {%- elif states(entity) in [\"opening\", \"closing\"] -%}\n\
                      \  mdi:garage-alert-variant\n{%- endif -%}"
                    icon_color: "{% if is_state(entity, \"open\") %}\n  red\n{% elif\
                      \ states(entity) in [\"opening\", \"closing\"]  %}\n  orange\n\
                      {% endif %}"
                    tap_action:
                      action: none
                    card_mod:
                      style: "@keyframes phase {\n  50% {opacity: 0;}\n}\n.content\
                        \ {\n  animation: phase 1.5s ease-out infinite;\n}"
                - type: template
                  entity: light.garage_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Garage Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.garage_lights
                - type: template
                  entity: binary_sensor.garage_multisensor_motion_detection
                  icon: '{{ iif(is_state(entity, "on"), "mdi:motion-sensor", "mdi:motion-sensor-off")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "orange", "disabled")
                    }}'
                  tap_action:
                    action: more-info
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: vehicle
            name: Ascent
            entity: device_tracker.ascent
            triggers_update:
              - timer.ascent_remote_start
            variables:
              timer: timer.ascent_remote_start
              odometer: sensor.ascent_odometer
              path: '#ascent'
              chips_top:
                - type: conditional
                  conditions:
                    - entity: binary_sensor.ascent_trouble
                      state: 'on'
                    - entity: binary_sensor.ascent_trouble
                      state_not: unavailable
                    - entity: binary_sensor.ascent_trouble
                      state_not: unknown
                  chip:
                    type: template
                    entity: binary_sensor.ascent_trouble
                    icon: mdi:alert
                    icon_color: red
                    tap_action: none
              chips:
                - type: template
                  entity: sensor.ascent_fuel_level
                  content: "{% if has_value(entity) %}\n  {{ states(entity) | round(0)\
                    \ }}%\n{% endif %}"
                  icon: mdi:gas-station
                  icon_color: '{% from "util.jinja" import battery_color %}

                    {{ battery_color(entity) }}'
                  tap_action:
                    action: more-info
                - type: template
                  entity: sensor.ascent_avg_fuel_consumption
                  icon: mdi:leaf
                  icon_color: green
                  content: "{% if has_value(entity) %}\n  {{ states(entity) | round(1)\
                    \ }}mpg\n{% endif %}"
                  tap_action:
                    action: more-info
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: vehicle
            name: Kona
            entity: device_tracker.kona_location
            triggers_update:
              - timer.kona_remote_start
            variables:
              timer: timer.kona_remote_start
              odometer: sensor.kona_odometer
              path: '#kona'
              chips_top:
                - type: conditional
                  conditions:
                    - entity: binary_sensor.kona_problems
                      state: 'on'
                    - entity: binary_sensor.kona_problems
                      state_not: unavailable
                    - entity: binary_sensor.kona_problems
                      state_not: unknown
                  chip:
                    type: template
                    entity: binary_sensor.kona_problems
                    icon: mdi:alert
                    icon_color: red
                    tap_action: none
              chips:
                - type: template
                  entity: sensor.kona_fuel_level
                  content: "{% if has_value(entity) %}\n  {{ states(entity) | round(0)\
                    \ }}%\n{% endif %}"
                  icon: mdi:gas-station
                  icon_color: '{% from "util.jinja" import battery_color %}

                    {{ battery_color(entity) }}'
                  tap_action:
                    action: more-info
      - type: grid
        cards:
          - type: heading
            icon: mdi:pine-tree
            heading: XMas
            heading_style: subtitle
          - type: grid
            columns: 3
            square: false
            cards:
              - type: tile
                entity: light.xmas_tree
                name: Tree
                icon: mdi:pine-tree
                features:
                  - type: light-brightness
              - type: tile
                entity: light.wled_mario_star_main
                name: Star
                icon: mdi:star-face
                features:
                  - type: light-brightness
              - type: tile
                entity: light.eve
                name: Outside
                icon: mdi:string-lights
                vertical: true
        visibility:
          - condition: state
            entity: binary_sensor.is_xmas
            state: 'on'
        column_span: 1
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#person-joshua'
                button_type: state
                entity: person.joshua
                show_last_changed: true
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                  - location_icon_background_color
              - type: custom:streamline-card
                template: person_popup
                variables:
                  - person: joshua
                  - name: Joshua
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#person-amy'
                button_type: state
                entity: person.amy
                show_last_changed: true
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                  - location_icon_background_color
              - type: custom:streamline-card
                template: person_popup
                variables:
                  - person: amy
                  - name: Amy
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#ascent'
                button_type: state
                entity: device_tracker.ascent
                force_icon: true
                icon: fapro:subaru
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                styles: ".bubble-sub-button-1 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}"
                sub_button:
                  - entity: binary_sensor.ascent_trouble
                    name: Trouble
                    show_background: false
                    icon: mdi:alert
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: Trouble Codes
                          content:
                            type: markdown
                            card_mod:
                              style: "ha-card {\n  --ha-card-background: none\n}\n"
                            content: "{%- set codes = {\n  \"ABS_MIL\": \"Anti-lock\
                              \ Brake System\",\n  \"AHBL_MIL\": \"Automatic Headlight\
                              \ Beam Leveller\",\n  \"ATF_MIL\": \"ATF\",\n  \"AWD_MIL\"\
                              : \"AWD\",\n  \"BSDRCT_MIL\": \"Blind Spot Detection/Rear\
                              \ Cross Traffic Alert\",\n  \"CEL_MIL\": \"Check Engine\
                              \ Light\",\n  \"EBD_MIL\": \"Electronic Brake-force\
                              \ Distribution\",\n  \"EOL_MIL\": \"EOL\",\n  \"EPAS_MIL\"\
                              : \"Electric Power Assisted Steering\",\n  \"EPB_MIL\"\
                              : \"Electronic Parking Brake\",\n  \"ESS_MIL\": \"Engine\
                              \ Start-Stop\",\n  \"HEVCM_MIL\": \"HEVCM\",\n  \"HEV_MIL\"\
                              : \"HEV\",\n  \"OPL_MIL\": \"OPL\",\n  \"RAB_MIL\":\
                              \ \"Reverse Automatic Braking\",\n  \"SRS_MIL\": \"\
                              Airbag System\",\n  \"TEL_MIL\": \"Telematics\",\n \
                              \ \"TPMS_MIL\": \"Tire Preassure Monitoring\",\n  \"\
                              VDC_MIL\": \"Multi-mode Vehicle Dynamics Control\",\n\
                              \  \"WASH_MIL\": \"Washer Fluid\"\n} -%}\n{%- set entity_id\
                              \ = \"binary_sensor.ascent_trouble\" -%}\n{%- for attribute,\
                              \ value in states[entity_id].attributes.items() -%}\n\
                              {%- if attribute in codes -%}\n- {{ codes[attribute]\
                              \ }} ({{ attribute }})\n{% endif -%}\n{%- endfor -%}"
                    visibility:
                      - condition: state
                        entity: binary_sensor.ascent_trouble
                        state: 'on'
                  - entity: sensor.ascent_avg_fuel_consumption
                    name: Fuel Consumption
                    show_state: true
                    show_background: false
                modules:
                  - default
                  - location_icon_background_color
              - type: custom:expander-card
                gap: 0em
                padding: 0em
                child-padding: 0.5em
                title-card-padding: 0em
                title-card-button-overlay: true
                overlay-margin: calc(var(--ha-card-border-radius, 12px) / 2) auto
                title-card:
                  type: vertical-stack
                  cards:
                    - type: custom:mushroom-template-card
                      primary: Remote Start
                      secondary: "{%- if is_state(\"device_tracker.ascent\", \"home\"\
                        ) -%}\n  Press and Hold to Open the Garage and Start\n{%-\
                        \ else -%}\n  Press and Hold to Start\n{%- endif -%}"
                      icon: mdi:key-wireless
                      entity: script.ascent_remote_start
                      icon_color: amber
                      tap_action:
                        action: none
                      hold_action:
                        action: call-service
                        service: script.turn_on
                        target:
                          entity_id: script.ascent_remote_start
                      card_mod:
                        style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                          \ none;\n}\n"
                    - type: custom:timer-bar-card
                      filter: true
                      invert: true
                      state_color: true
                      bar_height: 12px
                      bar_radius: var(--ha-card-border-radius, 12px)
                      bar_direction: rtl
                      bar_foreground: var(--lime-color)
                      bar_background: var(--disabled-color)
                      compressed: true
                      modifications:
                        - remaining: 00:03:00
                          bar_foreground: var(--amber-color)
                        - remaining: 00:02:00
                          bar_foreground: var(--orange-color)
                        - remaining: 00:01:00
                          bar_foreground: var(--red-color)
                      entities:
                        - entity: timer.ascent_remote_start
                          name: Timer
                cards:
                  - type: custom:mushroom-chips-card
                    card_mod:
                      style: "ha-card {\n  --chip-background: var(--secondary-background-color);\n\
                        }\n.chip-container {\n  display: grid !important;\n  grid-template-columns:\
                        \ 1fr 1fr 1fr 1fr;\n}\n"
                    chips:
                      - type: entity
                        entity: lock.ascent_door_locks
                        name: Lock
                        icon: mdi:lock
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: lock.lock
                          target:
                            entity_id: lock.ascent_door_locks
                        card_mod:
                          style: "ha-card:hover {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                      - type: entity
                        entity: button.ascent_remote_start
                        name: Remote Start
                        icon: mdi:key-wireless
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: button.press
                          target:
                            entity_id: button.ascent_remote_start
                        card_mod:
                          style: "ha-card:hover {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                      - type: entity
                        entity: button.ascent_lights_start
                        name: Flash Lights
                        icon: mdi:lightbulb-on
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: button.press
                          target:
                            entity_id: button.ascent_lights_start
                        card_mod:
                          style: "ha-card:hover {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                      - type: entity
                        entity: button.ascent_horn_start
                        name: Sound Horn
                        icon: mdi:volume-high
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: button.press
                          target:
                            entity_id: button.ascent_horn_start
                        card_mod:
                          style: "ha-card:hover {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                      - type: entity
                        entity: lock.ascent_door_locks
                        name: Unlock
                        icon: mdi:lock-open
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: lock.unlock
                          target:
                            entity_id: lock.ascent_door_locks
                        card_mod:
                          style: "ha-card:hover {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                      - type: entity
                        entity: button.ascent_remote_stop
                        name: Remote Stop
                        icon: mdi:stop-circle-outline
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: button.press
                          target:
                            entity_id: button.ascent_remote_stop
                        card_mod:
                          style: "ha-card:hover {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                      - type: entity
                        entity: button.ascent_lights_stop
                        name: Stop Flash Lights
                        icon: mdi:lightbulb-off
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: button.press
                          target:
                            entity_id: button.ascent_lights_stop
                        card_mod:
                          style: "ha-card:hover {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                      - type: entity
                        entity: button.ascent_horn_stop
                        name: Stop Horn
                        icon: mdi:volume-off
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: button.press
                          target:
                            entity_id: button.ascent_horn_stop
                        card_mod:
                          style: "ha-card:hover {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                  - type: custom:mushroom-chips-card
                    card_mod:
                      style: "ha-card {\n  --chip-background: var(--secondary-background-color);\n\
                        }\n.chip-container {\n  display: grid !important;\n  grid-template-columns:\
                        \ max-content max-content;\n  margin-top: 15px;\n  place-content:\
                        \ space-around !important;\n}\n"
                    chips:
                      - type: entity
                        entity: button.ascent_refresh
                        name: Update from Server
                        icon: mdi:refresh
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: button.press
                          target:
                            entity_id: button.ascent_refresh
                        card_mod:
                          style: "ha-card {\n  justify-content: center;\n}\nha-card:hover\
                            \ {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                      - type: entity
                        entity: button.ascent_poll_vehicle
                        name: Update from Car
                        icon: mdi:car-connected
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: button.press
                          target:
                            entity_id: button.ascent_poll_vehicle
                        card_mod:
                          style: "ha-card {\n  justify-content: center;\n}\nha-card:hover\
                            \ {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                  - type: tile
                    entity: select.ascent_climate_preset
                    features_position: inline
                    name: Climate Preset
                    color: pink
                    hide_state: true
                    features:
                      - type: select-options
                    card_mod:
                      style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                        \ none;\n}\n"
              - vehicle_image_type: url
                status_image_type: none
                layout_type: single
                formatted_entities: true
                show_location: true
                show_mileage: true
                show_car_state: false
                show_info_icons: true
                help_highlight: true
                sections_order:
                  - title
                  - info_row_jt0o77g
                  - image
                  - info
                  - icon_row_yl7u49j
                  - bar_0
                bars:
                  - left_title: Fuel
                    left_entity: sensor.ascent_fuel_level
                    right_title: Range
                    right_entity: sensor.ascent_range
                    bar_color: 'var(--primary-color, #3498db)'
                    background_color: 'var(--primary-background-color, #121212)'
                    border_color: 'var(--primary-background-color, #555555)'
                    left_title_color: 'var(--secondary-text-color, #999999)'
                    left_text_color: 'var(--primary-text-color, #ffffff)'
                    right_title_color: 'var(--secondary-text-color, #999999)'
                    right_text_color: 'var(--primary-text-color, #ffffff)'
                    limit_indicator_color: 'var(--error-color, #ff0000)'
                    left_title_size: 14
                    left_text_size: 14
                    right_title_size: 14
                    right_text_size: 14
                    bar_size: thick
                    bar_radius: rounded-square
                    show_left: true
                    show_right: true
                    alignment: space-between
                    width: '100'
                    use_gradient: true
                    gradient_display_mode: value_based
                    gradient_stops:
                      - id: '1'
                        position: 0
                        color: '#ff0000'
                      - id: '2'
                        position: 100
                        color: '#00ff00'
                    animation_entity: binary_sensor.ascent_ignition
                    animation_state: 'on'
                    animation_type: charging-lines
                    action_animation_entity: ''
                    action_animation_state: ''
                    action_animation: none
                    entity: sensor.ascent_fuel_level
                    right_condition:
                      type: none
                      entity: ''
                      state: ''
                icon_rows:
                  - id: yl7u49j
                    width: '100'
                    alignment: center
                    spacing: small
                    icons:
                      - entity: binary_sensor.ascent_trouble
                        icon_inactive: mdi:alert
                        icon_active: mdi:alert
                        color_inactive: var(--secondary-text-color)
                        color_active: var(--primary-color)
                        name_color_inactive: var(--primary-text-color)
                        name_color_active: var(--primary-text-color)
                        state_color_inactive: var(--secondary-text-color)
                        state_color_active: var(--red-color)
                        inactive_state: 'off'
                        active_state: 'on'
                        inactive_template_mode: false
                        active_template_mode: false
                        inactive_template: ''
                        active_template: ''
                        active_state_text: ''
                        inactive_state_text: ''
                        show_state: false
                        show_name: false
                        show_units: true
                        show_icon_active: true
                        show_icon_inactive: false
                        name: ''
                        on_click_action: more-info
                        text_position: bottom
                        vertical_alignment: center
                        text_alignment: center
                        icon_size: 24
                        text_size: 14
                        icon_background: none
                        icon_background_color: var(--secondary-background-color)
                        container_background: none
                        container_background_color: var(--secondary-background-color)
                        draggable: true
                      - entity: binary_sensor.ascent_doors
                        icon_inactive: mdi:car-door
                        icon_active: mdi:car-door
                        color_inactive: var(--secondary-text-color)
                        color_active: var(--primary-color)
                        name_color_inactive: var(--primary-text-color)
                        name_color_active: var(--primary-text-color)
                        state_color_inactive: var(--secondary-text-color)
                        state_color_active: var(--red-color)
                        inactive_state: 'off'
                        active_state: 'on'
                        inactive_template_mode: false
                        active_template_mode: false
                        inactive_template: ''
                        active_template: ''
                        active_state_text: ''
                        inactive_state_text: ''
                        show_state: false
                        show_name: false
                        show_units: true
                        show_icon_active: true
                        show_icon_inactive: true
                        name: ''
                        on_click_action: more-info
                        text_position: bottom
                        vertical_alignment: center
                        text_alignment: center
                        icon_size: 24
                        text_size: 14
                        icon_background: none
                        icon_background_color: var(--secondary-background-color)
                        container_background: none
                        container_background_color: var(--secondary-background-color)
                        draggable: true
                      - entity: binary_sensor.ascent_windows
                        icon_inactive: mdi:window-closed
                        icon_active: mdi:window-open
                        color_inactive: var(--secondary-text-color)
                        color_active: var(--primary-color)
                        name_color_inactive: var(--primary-text-color)
                        name_color_active: var(--primary-text-color)
                        state_color_inactive: var(--secondary-text-color)
                        state_color_active: var(--red-color)
                        inactive_state: 'off'
                        active_state: 'on'
                        inactive_template_mode: false
                        active_template_mode: false
                        inactive_template: ''
                        active_template: ''
                        active_state_text: ''
                        inactive_state_text: ''
                        show_state: false
                        show_name: false
                        show_units: true
                        show_icon_active: true
                        show_icon_inactive: true
                        name: ''
                        on_click_action: more-info
                        text_position: bottom
                        vertical_alignment: center
                        text_alignment: center
                        icon_size: 24
                        text_size: 14
                        icon_background: none
                        icon_background_color: var(--secondary-background-color)
                        container_background: none
                        container_background_color: var(--secondary-background-color)
                        draggable: true
                type: custom:ultra-vehicle-card
                title_alignment: center
                title_size: 24
                vehicle_image_width: 100
                action_image_width: 100
                show_units: true
                action_image_type: none
                location_entity: device_tracker.ascent
                mileage_entity: sensor.ascent_odometer
                vehicle_image: /local/logos/ascent.png
                vehicle_image_crop:
                  top: -80
                  right: 0
                  bottom: -80
                  left: 0
                info_rows:
                  - id: jt0o77g
                    info_entities:
                      - id: h9w7cos
                        entity: device_tracker.ascent
                        name: ''
                        show_icon: true
                        icon: mdi:map-marker-outline
                        text_color: ''
                        show_name: false
                      - id: 8dcswf7
                        entity: sensor.ascent_odometer
                        name: ''
                        show_icon: true
                        icon: mdi:counter
                        text_color: ''
                        show_name: false
                    alignment: center
                    spacing: medium
                    row_name: ''
                    vertical_alignment: center
                    allow_wrap: false
              - type: custom:expander-card
                gap: 0em
                padding: 0em
                child-padding: 0.5em
                title-card-padding: 0em
                title-card-button-overlay: true
                overlay-margin: calc(var(--ha-card-border-radius, 12px) / 2) auto
                title-card:
                  type: vertical-stack
                  cards:
                    - type: heading
                      icon: mdi:gas-station
                      heading: Gas Prices
                      heading_style: title
                    - type: markdown
                      card_mod:
                        style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                          \ none;\n}\n"
                      content: "{%- set level = states('sensor.ascent_fuel_level')\
                        \ | float(100) -%} {%- set capacity = 19.3 -%} {%- set gal_remain\
                        \ = (100 - level) / 100 * capacity -%} {% set stations = {\n\
                        \  \"Costco\": states('sensor.costco_regular_gas') | float(3),\n\
                        \  \"Maverik\": (states('sensor.maverik_regular_gas') | float(3))\
                        \ - 0.1\n} %} {%- for name, price in stations.items() -%}\n\
                        \  {{ name }}: {{ \"${:.2f}\".format(price) }} ⸱ {{ \"${:.2f}\"\
                        .format(gal_remain * price) }}\n{% endfor %}"
                cards:
                  - type: custom:auto-entities
                    filter:
                      include:
                        - integration: gasbuddy
                          options:
                            type: entity
                      exclude:
                        - name: '* Updated'
                        - entity_id: '*mid*'
                        - state: unavailable
                        - state: unknown
                    sort:
                      method: state
                    card:
                      type: custom:layout-card
                      cards: []
                      layout_type: masonry
              - type: map
                entities:
                  - entity: device_tracker.ascent
                aspect_ratio: '16:9'
                hours_to_show: 24
                default_zoom: 12
                theme_mode: auto
                card_mod:
                  style:
                    .: ":host {\n  /* Define Person State colors. Can be added to\
                      \ theme */\n  --state-person-home: var(--green-color);\n  --state-person-not-home:\
                      \ var(--red-color);\n  --state-person-zone: var(--blue-color);\n\
                      \  --state-person-unknown: var(--grey-color);\n\n  /* Set person\
                      \ state color */\n  --state-person:\n  {% if is_state(config.entities[0].entity,\
                      \ ['home', 'not_home', 'unknown']) %}\n    var(--state-person-{{\
                      \ states(config.entities[0].entity) | replace('_', '-') }})\n\
                      \  {% else %}\n    var(--state-person-zone)\n  {% endif %};\n\
                      }\nha-card {\n  /* Remove default card styling without affecting\
                      \ child elements */\n  box-shadow: none;\n  border-width: 0;\n\
                      \  transition: all 0s;\n}\n#buttons {\n  margin: 15px 0 0 3px;\n\
                      }\n"
                    ha-map $ ha-entity-marker $: ".marker {\n  /* Style person marker\
                      \ & adjust position to avoid blocking waypoints */\n  border:\
                      \ 3px solid var(--state-person) !important;\n  border-radius:\
                      \ 50% 50% 50% 0px !important;\n  transform: rotate(-45deg) translate(50%,\
                      \ -50%);\n  overflow: visible !important;\n  background: var(--state-person)\
                      \ !important;\n}\n.entity-picture {\n  /* Correct orientation\
                      \ of person avatar */\n  transform: rotate(45deg);\n  border-radius:\
                      \ 50%;\n}\n"
                    ha-map $: "path:first-child {\n  /* Style accuracy radius */\n\
                      \  fill: color-mix(in srgb, var(--state-person) 50%, transparent);\n\
                      \  stroke-width: 0px;\n}\npath:nth-child(even) {\n  /* Styling\
                      \ for waypoints */\n  stroke: var(--primary-color);\n  fill:\
                      \ var(--primary-color);\n  stroke-width: 4px;\n}\npath:nth-child(odd):not(:first-child)\
                      \ {\n  /* Styling for lines */\n  stroke: var(--primary-color);\n\
                      \  stroke-width: 4px;\n}\n.leaflet-control-attribution {\n \
                      \ /* Style attribution text */\n  display: none !important;\n\
                      \  background: rgba(var(--rgb-card-background-color), 0.2) !important;\n\
                      \  font-size: 8px;\n}\n.leaflet-container a {\n  /* Set color\
                      \ of zoom icons & attribution text */\n  color: var(--secondary-text-color);\n\
                      }\n.leaflet-control-zoom-in,\n.leaflet-control-zoom-out {\n\
                      \  /* Style zoom buttons like Chips */\n  border-radius: var(--mush-chip-border-radius,\
                      \ 19px) !important;\n  padding: 3px;\n  background: rgb(var(--rgb-secondary-text-color),\
                      \ 0.2) !important;\n  margin: 8px 12px 0px;\n  border: var(--ha-card-border-width,\
                      \ 1px) solid var(--ha-card-border-color, var(--divider-color,\
                      \ #e0e0e0)) !important;\n}\n.leaflet-control-zoom {\n  /* Remove\
                      \ extra margin */\n  margin: 0px !important;\n\n  /* Remove\
                      \ zoom control border */\n  border: none !important;\n}\n"
                layout_options:
                  grid_columns: full
                  grid_rows: 7
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#kona'
                button_type: state
                entity: device_tracker.kona_location
                force_icon: true
                icon: fapro:hyundai
                name: Kona
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                styles: ".bubble-sub-button-1 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}"
                sub_button:
                  - entity: binary_sensor.kona_problems
                    name: Problems
                    show_background: false
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: Trouble Codes
                          content:
                            type: custom:auto-entities
                            card:
                              type: custom:layout-card
                              cards: []
                              layout_type: masonry
                            sort:
                              attribute: friendly_name
                            filter:
                              include:
                                - group: binary_sensor.kona_problems
                                  options:
                                    type: tile
                              exclude:
                                - state: 'off'
                                - state: unavailable
                                - state: unknown
                    visibility:
                      - condition: state
                        entity: binary_sensor.kona_problems
                        state: 'on'
                  - entity: sensor.kona_car_battery_level
                    name: Battery Level
                    show_background: false
                    show_state: true
                  - entity: sensor.kona_lease_tracker
                    name: Lease Tracker
                    show_state: true
                    show_background: false
                modules:
                  - default
                  - location_icon_background_color
              - type: custom:expander-card
                gap: 0em
                padding: 0em
                child-padding: 0.5em
                title-card-padding: 0em
                title-card-button-overlay: true
                overlay-margin: calc(var(--ha-card-border-radius, 12px) / 2) auto
                title-card:
                  type: vertical-stack
                  cards:
                    - type: custom:mushroom-template-card
                      primary: Remote Start
                      secondary: "{%- if is_state(\"device_tracker.kona_location\"\
                        , \"home\") -%}\n  Press and Hold to Open the Garage and Start\n\
                        {%- else -%}\n  Press and Hold to Start\n{%- endif -%}"
                      icon: mdi:key-wireless
                      entity: script.kona_remote_start
                      icon_color: amber
                      tap_action:
                        action: none
                      hold_action:
                        action: call-service
                        service: script.turn_on
                        target:
                          entity_id: script.kona_remote_start
                      card_mod:
                        style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                          \ none;\n}\n"
                    - type: custom:timer-bar-card
                      filter: true
                      invert: true
                      state_color: true
                      bar_height: 12px
                      bar_radius: var(--ha-card-border-radius, 12px)
                      bar_direction: rtl
                      bar_foreground: var(--lime-color)
                      bar_background: var(--disabled-color)
                      compressed: true
                      modifications:
                        - remaining: 00:03:00
                          bar_foreground: var(--amber-color)
                        - remaining: 00:02:00
                          bar_foreground: var(--orange-color)
                        - remaining: 00:01:00
                          bar_foreground: var(--red-color)
                      entities:
                        - entity: timer.kona_remote_start
                          name: Timer
                cards:
                  - type: custom:mushroom-chips-card
                    card_mod:
                      style: "ha-card {\n  --chip-background: var(--secondary-background-color);\n\
                        }\n.chip-container {\n  display: grid !important;\n  grid-template-columns:\
                        \ 1fr 1fr 1fr 1fr;\n}\n"
                    chips:
                      - type: entity
                        entity: device_tracker.kona_location
                        name: Remote Start
                        icon: mdi:key-wireless
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: kia_uvo.start_climate
                          device_id: f27d2038fd3fe30bc627505de54ddea8
                          duration: 10
                          climate: '{{ is_state(''input_boolean.kona_hvac'', ''on'')
                            }}'
                          temperature: '{{ states(''input_number.kona_temperature_set'')
                            | int }}'
                          heating: '0'
                          defrost: '{{ is_state(''input_boolean.kona_defroster'',
                            ''on'') }}'
                          flseat: '{{ iif(is_state(''input_boolean.kona_seat_heat'',
                            ''on''), 8, 0) }}'
                          frseat: '{{ iif(is_state(''input_boolean.kona_seat_heat'',
                            ''on''), 8, 0) }}'
                          rlseat: '0'
                          rrseat: '0'
                        card_mod:
                          style: "ha-card:hover {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                      - type: entity
                        entity: device_tracker.kona_location
                        name: Remote Stop
                        icon: mdi:stop-circle-outline
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: kia_uvo.stop_climate
                          data:
                            device_id: f27d2038fd3fe30bc627505de54ddea8
                        card_mod:
                          style: "ha-card:hover {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                      - type: entity
                        entity: lock.kona_door_lock
                        name: Lock
                        icon: mdi:lock
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: lock.lock
                          target:
                            entity_id: lock.kona_door_lock
                        card_mod:
                          style: "ha-card:hover {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                      - type: entity
                        entity: lock.kona_door_lock
                        name: Unlock
                        icon: mdi:lock-open
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: lock.unlock
                          target:
                            entity_id: lock.kona_door_lock
                        card_mod:
                          style: "ha-card:hover {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                  - type: custom:mushroom-chips-card
                    card_mod:
                      style: "ha-card {\n  --chip-background: var(--secondary-background-color);\n\
                        }\n.chip-container {\n  display: grid !important;\n  grid-template-columns:\
                        \ max-content max-content;\n  margin-top: 15px;\n  place-content:\
                        \ space-around !important;\n}\n"
                    chips:
                      - type: entity
                        entity: device_tracker.kona_location
                        name: Update
                        icon: mdi:refresh
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: kia_uvo.update
                          data:
                            device_id: f27d2038fd3fe30bc627505de54ddea8
                        card_mod:
                          style: "ha-card {\n  justify-content: center;\n}\nha-card:hover\
                            \ {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                      - type: entity
                        entity: device_tracker.kona_location
                        name: Force Update
                        icon: mdi:car-connected
                        content_info: name
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: kia_uvo.force_update
                          data:
                            device_id: f27d2038fd3fe30bc627505de54ddea8
                        card_mod:
                          style: "ha-card {\n  justify-content: center;\n}\nha-card:hover\
                            \ {\n  --chip-background: rgb(var(--rgb-disabled));\n\
                            }\n"
                  - type: tile
                    entity: input_boolean.kona_hvac
                    name: HVAC
                    color: pink
                    features_position: inline
                    features:
                      - type: toggle
                    hide_state: true
                    card_mod:
                      style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                        \ none;\n}\n"
                  - type: tile
                    entity: input_number.kona_temperature_set
                    name: Temperature
                    features_position: inline
                    features:
                      - style: buttons
                        type: numeric-input
                    hide_state: true
                    card_mod:
                      style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                        \ none;\n}\n"
                  - type: grid
                    columns: 2
                    square: false
                    cards:
                      - type: tile
                        entity: input_boolean.kona_defroster
                        name: Defroster
                        features:
                          - type: toggle
                        card_mod:
                          style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                            \ none;\n}\n"
                      - type: tile
                        entity: input_boolean.kona_seat_heat
                        name: Heated Seats
                        color: deep-orange
                        features:
                          - type: toggle
                        card_mod:
                          style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                            \ none;\n}\n"
              - vehicle_image_type: url
                status_image_type: none
                layout_type: single
                formatted_entities: true
                show_location: true
                show_mileage: true
                show_car_state: false
                show_info_icons: true
                help_highlight: true
                sections_order:
                  - title
                  - info_row_curam50
                  - image
                  - info
                  - icon_row_b3tqh8a
                  - bar_0
                bars:
                  - left_title: Fuel
                    left_entity: sensor.kona_fuel_level
                    right_title: Range
                    right_entity: sensor.kona_total_driving_range
                    bar_color: 'var(--primary-color, #3498db)'
                    background_color: 'var(--primary-background-color, #121212)'
                    border_color: 'var(--primary-background-color, #555555)'
                    left_title_color: 'var(--secondary-text-color, #999999)'
                    left_text_color: 'var(--primary-text-color, #ffffff)'
                    right_title_color: 'var(--secondary-text-color, #999999)'
                    right_text_color: 'var(--primary-text-color, #ffffff)'
                    limit_indicator_color: 'var(--error-color, #ff0000)'
                    left_title_size: 14
                    left_text_size: 14
                    right_title_size: 14
                    right_text_size: 14
                    bar_size: thick
                    bar_radius: rounded-square
                    show_left: true
                    show_right: true
                    alignment: space-between
                    width: '100'
                    use_gradient: true
                    gradient_display_mode: value_based
                    gradient_stops:
                      - id: '1'
                        position: 0
                        color: '#ff0000'
                      - id: '2'
                        position: 100
                        color: '#00ff00'
                    animation_entity: binary_sensor.kona_engine
                    animation_state: 'on'
                    animation_type: charging-lines
                    action_animation_entity: ''
                    action_animation_state: ''
                    action_animation: none
                    entity: sensor.kona_fuel_level
                icon_rows:
                  - id: b3tqh8a
                    width: '100'
                    alignment: center
                    spacing: small
                    icons:
                      - entity: binary_sensor.kona_problems
                        icon_inactive: mdi:alert
                        icon_active: mdi:alert
                        color_inactive: var(--secondary-text-color)
                        color_active: var(--primary-color)
                        name_color_inactive: var(--primary-text-color)
                        name_color_active: var(--primary-text-color)
                        state_color_inactive: var(--secondary-text-color)
                        state_color_active: var(--red-color)
                        inactive_state: 'off'
                        active_state: 'on'
                        inactive_template_mode: false
                        active_template_mode: false
                        inactive_template: ''
                        active_template: ''
                        active_state_text: ''
                        inactive_state_text: ''
                        show_state: false
                        show_name: false
                        show_units: true
                        show_icon_active: true
                        show_icon_inactive: false
                        name: ''
                        on_click_action: more-info
                        text_position: bottom
                        vertical_alignment: center
                        text_alignment: center
                        icon_size: 24
                        text_size: 14
                        icon_background: none
                        icon_background_color: var(--secondary-background-color)
                        container_background: none
                        container_background_color: var(--secondary-background-color)
                        draggable: true
                      - entity: binary_sensor.kona_doors
                        icon_inactive: mdi:car-door
                        icon_active: mdi:car-door
                        color_inactive: var(--secondary-text-color)
                        color_active: var(--primary-color)
                        name_color_inactive: var(--primary-text-color)
                        name_color_active: var(--primary-text-color)
                        state_color_inactive: var(--secondary-text-color)
                        state_color_active: var(--primary-text-color)
                        inactive_state: 'off'
                        active_state: 'on'
                        inactive_template_mode: false
                        active_template_mode: false
                        inactive_template: ''
                        active_template: ''
                        active_state_text: ''
                        inactive_state_text: ''
                        show_state: false
                        show_name: false
                        show_units: true
                        show_icon_active: true
                        show_icon_inactive: true
                        name: ''
                        on_click_action: more-info
                        text_position: bottom
                        vertical_alignment: center
                        text_alignment: center
                        icon_size: 24
                        text_size: 14
                        icon_background: none
                        icon_background_color: var(--secondary-background-color)
                        container_background: none
                        container_background_color: var(--secondary-background-color)
                        draggable: true
                      - entity: binary_sensor.kona_windows
                        icon_inactive: mdi:window-closed
                        icon_active: mdi:window-open
                        color_inactive: var(--secondary-text-color)
                        color_active: var(--primary-color)
                        name_color_inactive: var(--primary-text-color)
                        name_color_active: var(--primary-text-color)
                        state_color_inactive: var(--secondary-text-color)
                        state_color_active: var(--primary-text-color)
                        inactive_state: 'off'
                        active_state: 'on'
                        inactive_template_mode: false
                        active_template_mode: false
                        inactive_template: ''
                        active_template: ''
                        active_state_text: ''
                        inactive_state_text: ''
                        show_state: false
                        show_name: false
                        show_units: true
                        show_icon_active: true
                        show_icon_inactive: true
                        name: ''
                        on_click_action: more-info
                        text_position: bottom
                        vertical_alignment: center
                        text_alignment: center
                        icon_size: 24
                        text_size: 14
                        icon_background: none
                        icon_background_color: var(--secondary-background-color)
                        container_background: none
                        container_background_color: var(--secondary-background-color)
                        draggable: true
                      - entity: binary_sensor.kona_defrost
                        icon_inactive: mdi:car-defrost-front
                        icon_active: mdi:car-defrost-front
                        color_inactive: var(--secondary-text-color)
                        color_active: var(--primary-color)
                        name_color_inactive: var(--primary-text-color)
                        name_color_active: var(--primary-text-color)
                        state_color_inactive: var(--secondary-text-color)
                        state_color_active: var(--primary-text-color)
                        inactive_state: 'off'
                        active_state: 'on'
                        inactive_template_mode: false
                        active_template_mode: false
                        inactive_template: ''
                        active_template: ''
                        active_state_text: ''
                        inactive_state_text: ''
                        show_state: false
                        show_name: false
                        show_units: true
                        show_icon_active: true
                        show_icon_inactive: true
                        name: ''
                        on_click_action: more-info
                        text_position: bottom
                        vertical_alignment: center
                        text_alignment: center
                        icon_size: 24
                        text_size: 14
                        icon_background: none
                        icon_background_color: var(--secondary-background-color)
                        container_background: none
                        container_background_color: var(--secondary-background-color)
                        draggable: true
                      - entity: binary_sensor.kona_back_window_heater
                        icon_inactive: mdi:car-defrost-rear
                        icon_active: mdi:car-defrost-rear
                        color_inactive: var(--secondary-text-color)
                        color_active: var(--primary-color)
                        name_color_inactive: var(--primary-text-color)
                        name_color_active: var(--primary-text-color)
                        state_color_inactive: var(--secondary-text-color)
                        state_color_active: var(--primary-text-color)
                        inactive_state: 'off'
                        active_state: 'on'
                        inactive_template_mode: false
                        active_template_mode: false
                        inactive_template: ''
                        active_template: ''
                        active_state_text: ''
                        inactive_state_text: ''
                        show_state: false
                        show_name: false
                        show_units: true
                        show_icon_active: true
                        show_icon_inactive: true
                        name: ''
                        on_click_action: more-info
                        text_position: bottom
                        vertical_alignment: center
                        text_alignment: center
                        icon_size: 24
                        text_size: 14
                        icon_background: none
                        icon_background_color: var(--secondary-background-color)
                        container_background: none
                        container_background_color: var(--secondary-background-color)
                        draggable: true
                      - entity: binary_sensor.kona_air_conditioner
                        icon_inactive: mdi:air-conditioner
                        icon_active: mdi:air-conditioner
                        color_inactive: var(--secondary-text-color)
                        color_active: var(--primary-color)
                        name_color_inactive: var(--primary-text-color)
                        name_color_active: var(--primary-text-color)
                        state_color_inactive: var(--secondary-text-color)
                        state_color_active: var(--primary-text-color)
                        inactive_state: 'off'
                        active_state: 'on'
                        inactive_template_mode: false
                        active_template_mode: false
                        inactive_template: ''
                        active_template: ''
                        active_state_text: ''
                        inactive_state_text: ''
                        show_state: false
                        show_name: false
                        show_units: true
                        show_icon_active: true
                        show_icon_inactive: true
                        name: ''
                        on_click_action: more-info
                        text_position: bottom
                        vertical_alignment: center
                        text_alignment: center
                        icon_size: 24
                        text_size: 14
                        icon_background: none
                        icon_background_color: var(--secondary-background-color)
                        container_background: none
                        container_background_color: var(--secondary-background-color)
                        draggable: true
                type: custom:ultra-vehicle-card
                title_alignment: center
                title_size: 24
                vehicle_image_width: 100
                action_image_width: 100
                show_units: true
                action_image_type: none
                location_entity: device_tracker.kona_location
                mileage_entity: sensor.kona_odometer
                vehicle_image_crop:
                  top: -80
                  right: 0
                  bottom: -80
                  left: 0
                vehicle_image: /local/logos/kona.png
                info_rows:
                  - id: curam50
                    info_entities:
                      - id: azzwys4
                        entity: device_tracker.kona_location
                        name: ''
                        show_icon: true
                        icon: mdi:map-marker-outline
                        text_color: ''
                        show_name: false
                      - id: watgfuc
                        entity: sensor.kona_odometer
                        name: ''
                        show_icon: true
                        icon: mdi:counter
                        text_color: ''
                        show_name: false
                    alignment: center
                    spacing: medium
                    row_name: ''
                    vertical_alignment: center
                    allow_wrap: false
              - type: custom:expander-card
                gap: 0em
                padding: 0em
                child-padding: 0.5em
                title-card-padding: 0em
                title-card-button-overlay: true
                overlay-margin: calc(var(--ha-card-border-radius, 12px) / 2) auto
                title-card:
                  type: vertical-stack
                  cards:
                    - type: heading
                      icon: mdi:gas-station
                      heading: Gas Prices
                      heading_style: title
                    - type: markdown
                      card_mod:
                        style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                          \ none;\n}\n"
                      content: "{%- set level = states('sensor.kona_fuel_level') |\
                        \ float(100) -%} {%- set capacity = 13.2 -%} {%- set gal_remain\
                        \ = (100 - level) / 100 * capacity -%} {% set stations = {\n\
                        \  \"Costco\": states('sensor.costco_regular_gas') | float(3),\n\
                        \  \"Maverik\": (states('sensor.maverik_midgrade_gas') | float(3))\
                        \ - 0.1\n} %} {%- for name, price in stations.items() -%}\n\
                        \  {{ name }}: {{ \"${:.2f}\".format(price) }} ⸱ {{ \"${:.2f}\"\
                        .format(gal_remain * price) }}\n{% endfor %}"
                cards:
                  - type: custom:auto-entities
                    filter:
                      include:
                        - integration: gasbuddy
                          options:
                            type: entity
                      exclude:
                        - name: '* Updated'
                        - entity_id: '*maverik_regular*'
                        - state: unavailable
                        - state: unknown
                    sort:
                      method: state
                    card:
                      type: custom:layout-card
                      cards: []
                      layout_type: masonry
              - type: map
                entities:
                  - entity: device_tracker.kona_location
                aspect_ratio: '16:9'
                hours_to_show: 24
                default_zoom: 12
                theme_mode: auto
                card_mod:
                  style:
                    .: ":host {\n  /* Define Person State colors. Can be added to\
                      \ theme */\n  --state-person-home: var(--green-color);\n  --state-person-not-home:\
                      \ var(--red-color);\n  --state-person-zone: var(--blue-color);\n\
                      \  --state-person-unknown: var(--grey-color);\n\n  /* Set person\
                      \ state color */\n  --state-person:\n  {% if is_state(config.entities[0].entity,\
                      \ ['home', 'not_home', 'unknown']) %}\n    var(--state-person-{{\
                      \ states(config.entities[0].entity) | replace('_', '-') }})\n\
                      \  {% else %}\n    var(--state-person-zone)\n  {% endif %};\n\
                      }\nha-card {\n  /* Remove default card styling without affecting\
                      \ child elements */\n  box-shadow: none;\n  border-width: 0;\n\
                      \  transition: all 0s;\n}\n#buttons {\n  margin: 15px 0 0 3px;\n\
                      }\n"
                    ha-map $ ha-entity-marker $: ".marker {\n  /* Style person marker\
                      \ & adjust position to avoid blocking waypoints */\n  border:\
                      \ 3px solid var(--state-person) !important;\n  border-radius:\
                      \ 50% 50% 50% 0px !important;\n  transform: rotate(-45deg) translate(50%,\
                      \ -50%);\n  overflow: visible !important;\n  background: var(--state-person)\
                      \ !important;\n}\n.entity-picture {\n  /* Correct orientation\
                      \ of person avatar */\n  transform: rotate(45deg);\n  border-radius:\
                      \ 50%;\n}\n"
                    ha-map $: "path:first-child {\n  /* Style accuracy radius */\n\
                      \  fill: color-mix(in srgb, var(--state-person) 50%, transparent);\n\
                      \  stroke-width: 0px;\n}\npath:nth-child(even) {\n  /* Styling\
                      \ for waypoints */\n  stroke: var(--primary-color);\n  fill:\
                      \ var(--primary-color);\n  stroke-width: 4px;\n}\npath:nth-child(odd):not(:first-child)\
                      \ {\n  /* Styling for lines */\n  stroke: var(--primary-color);\n\
                      \  stroke-width: 4px;\n}\n.leaflet-control-attribution {\n \
                      \ /* Style attribution text */\n  display: none !important;\n\
                      \  background: rgba(var(--rgb-card-background-color), 0.2) !important;\n\
                      \  font-size: 8px;\n}\n.leaflet-container a {\n  /* Set color\
                      \ of zoom icons & attribution text */\n  color: var(--secondary-text-color);\n\
                      }\n.leaflet-control-zoom-in,\n.leaflet-control-zoom-out {\n\
                      \  /* Style zoom buttons like Chips */\n  border-radius: var(--mush-chip-border-radius,\
                      \ 19px) !important;\n  padding: 3px;\n  background: rgb(var(--rgb-secondary-text-color),\
                      \ 0.2) !important;\n  margin: 8px 12px 0px;\n  border: var(--ha-card-border-width,\
                      \ 1px) solid var(--ha-card-border-color, var(--divider-color,\
                      \ #e0e0e0)) !important;\n}\n.leaflet-control-zoom {\n  /* Remove\
                      \ extra margin */\n  margin: 0px !important;\n\n  /* Remove\
                      \ zoom control border */\n  border: none !important;\n}\n"
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#announce'
                button_type: name
                name: Announce
                show_icon: false
                margin_top_desktop: 25vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
              - type: heading
                icon: mdi:gamepad-circle
                heading: Family Room
                heading_style: title
              - type: grid
                columns: 2
                square: false
                cards:
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: School
                    icon: mdi:chair-school
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.family_room_speaker
                        volume: 80
                        message: Time to go to School!
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Snack
                    icon: mdi:apple
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.family_room_speaker
                        volume: 80
                        message: It's snack time!
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Lunch
                    icon: mdi:food-fork-drink
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.family_room_speaker
                        volume: 80
                        message: Hey, come get some lunch.
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Dinner
                    icon: mdi:food
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.family_room_speaker
                        volume: 80
                        message: Head up-stairs, it's time for dinner. Don't forget
                          to wash your hands!
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Breakfast
                    icon: mdi:egg-fried
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.family_room_speaker
                        volume: 80
                        message: It's time for breakfast. Wash your hands!
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Bed Time
                    icon: mdi:cookie-edit
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.family_room_speaker
                        volume: 80
                        message: It's time for bed.
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Ethan up-stairs
                    icon: mdi:robot
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.family_room_speaker
                        volume: 80
                        message: Hey Ethan, come up-stairs please.
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Emma up-stairs
                    icon: mdi:unicorn-variant
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.family_room_speaker
                        volume: 80
                        message: Hey Emma, come up-stairs please.
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Kids up-stairs
                    icon: mdi:cookie-edit
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.family_room_speaker
                        volume: 80
                        message: Hey kids, come up-stairs please.
                      target: {}
                      service: script.media_play
              - type: heading
                icon: mdi:sofa-single
                heading: Living Room
                heading_style: title
              - type: grid
                columns: 2
                square: false
                cards:
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: School
                    icon: mdi:chair-school
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.living_room_speaker
                        volume: 90
                        message: Time to go to School!
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Snack
                    icon: mdi:apple
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.living_room_speaker
                        volume: 90
                        message: It's snack time!
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Lunch
                    icon: mdi:food-fork-drink
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.living_room_speaker
                        volume: 90
                        message: Hey, come get some lunch.
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Dinner
                    icon: mdi:food
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.living_room_speaker
                        volume: 90
                        message: It's time for dinner. Don't forget to wash your hands!
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Breakfast
                    icon: mdi:egg-fried
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.living_room_speaker
                        volume: 90
                        message: It's time for breakfast. Wash your hands!
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Bed Time
                    icon: mdi:cookie-edit
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.living_room_speaker
                        volume: 90
                        message: It's time for bed.
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Ethan down-stairs
                    icon: mdi:robot
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.living_room_speaker
                        volume: 90
                        message: Hey Ethan, come down-stairs please.
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Emma down-stairs
                    icon: mdi:unicorn-variant
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.living_room_speaker
                        volume: 90
                        message: Hey Emma, come down-stairs please.
                      target: {}
                      service: script.media_play
                  - type: tile
                    entity: script.media_play
                    hide_state: true
                    name: Kids down-stairs
                    icon: mdi:cookie-edit
                    icon_tap_action:
                      action: call-service
                      data:
                        media_player: media_player.living_room_speaker
                        volume: 90
                        message: Hey kids, come down-stairs please.
                      target: {}
                      service: script.media_play
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#doors'
                button_type: name
                name: Doors
                show_icon: false
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                  - more_info_popup
              - type: custom:auto-entities
                filter:
                  include:
                    - group: binary_sensor.all_doors
                      options:
                        type: custom:mushroom-entity-card
                        layout: horizontal
                        secondary_info: last-changed
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                card:
                  type: custom:layout-card
                  cards: []
                  layout_type: masonry
                sort:
                  method: friendly_name
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#meater'
                button_type: name
                name: Meater
                show_icon: false
                margin_top_desktop: 25vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
              - type: entity
                entity: sensor.meater_probe_cook_name
                name: Cooking
                icon: mdi:food-steak
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.meater_probe_cook_time_elapsed
                    primary: '{%- from ''easy_time.jinja'' import big_time -%}

                      {{ big_time(entity, short=true) }}'
                    secondary: Elapsed Time
                    icon: mdi:clock-start
                    icon_color: grey
                    tap_action:
                      action: more-info
                    card_mod:
                      style:
                        mushroom-state-info$: ".container {\n  --card-primary-line-height:\
                          \ 1em;\n  --card-primary-font-size: 20px;\n}\n.primary {\n\
                          \  font-weight: 100 !important;\n}\n"
                  - type: custom:mushroom-template-card
                    entity: sensor.meater_probe_cook_time_remaining
                    primary: '{%- from ''easy_time.jinja'' import big_time -%}

                      {{ big_time(entity, short=true) }}'
                    secondary: Remaining Time
                    icon: mdi:clock-end
                    icon_color: grey
                    tap_action:
                      action: more-info
                    card_mod:
                      style:
                        mushroom-state-info$: ".container {\n  --card-primary-line-height:\
                          \ 1em;\n  --card-primary-font-size: 20px;\n}\n.primary {\n\
                          \  font-weight: 100 !important;\n}\n"
              - type: custom:mushroom-title-card
                subtitle: Temperature
              - type: custom:apexcharts-card
                card_mod:
                  style: "ha-card {\n  padding: 0px;\n  border: none;\n  box-shadow:\
                    \ none;\n  margin-bottom: -15px;\n}\n.apexcharts-tooltip-series-group\
                    \ {\n  padding-top: 0px !important;\n  padding-bottom: 0px !important;\n\
                    \  margin-top: 0px !important;\n  margin-bottom: 0px !important;\n\
                    \  display: none;\n  text-align: left;\n  justify-content: left;\n\
                    \  align-items: center;\n}\n"
                apex_config:
                  chart:
                    foreColor: '#7B7B7B'
                    toolbar:
                      show: false
                  grid:
                    borderColor: '#7B7B7B'
                  xaxis:
                    tooltip:
                      enabled: false
                header:
                  show: true
                  show_states: true
                  colorize_states: true
                experimental:
                  brush: true
                all_series_config:
                  extend_to: now
                  float_precision: 2
                  curve: stepline
                brush:
                  selection_span: 1h
                  apex_config:
                    chart:
                      foreColor: '#7B7B7B'
                      toolbar:
                        show: false
                    grid:
                      borderColor: '#7B7B7B'
                    xaxis:
                      tooltip:
                        enabled: false
                series:
                  - entity: sensor.meater_probe_internal
                    name: Internal
                    stroke_width: 4
                    color: rgb(33,150,243)
                    show:
                      in_brush: true
                  - entity: sensor.meater_probe_ambient
                    name: Ambient
                    stroke_width: 4
                    color: rgb(139,195,74)
                  - entity: sensor.meater_probe_cook_target_temp
                    name: Target
                    type: area
                    opacity: 0.2
                    stroke_width: 1
                    color: rgb(233,30,99)
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#bbq'
                button_type: name
                name: iBBQ
                show_icon: false
                margin_top_desktop: 13vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                styles: ".bubble-sub-button {\n  font-size: 16px !important\n} .bubble-sub-button-2\
                  \ > ha-icon {\n  color: var(--blue-color) !important;\n} .bubble-sub-button-3\
                  \ > ha-icon {\n  color: var(--red-color) !important;\n} ${subButtonIcon[4].setAttribute(\"\
                  icon\", hass.states[\"input_boolean.ibbq_grill_enabled\"]?.state\
                  \ === \"on\" ? \"mdi:bell\" : \"mdi:bell-off\")}"
                modules:
                  - default
                  - subbutton_colors
                sub_button:
                  - entity: binary_sensor.ibbq_grill_temp_alert
                    name: Target Alert
                    show_background: false
                    show_state: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.ibbq_grill_temp_alert
                        state: 'on'
                  - entity: input_number.ibbq_grill_low_temp
                    name: Low Temp
                    show_background: false
                    show_state: true
                  - entity: input_number.ibbq_grill_high_temp
                    name: High Temp
                    show_background: false
                    show_state: true
                  - entity: automation.ibbq_grill_alerts
                    name: Alerts Snoozed
                    icon: mdi:sleep
                    state_background: false
                    show_background: false
                    tap_action:
                      action: toggle
                    visibility:
                      - condition: state
                        entity: automation.ibbq_grill_alerts
                        state: 'off'
                  - entity: input_boolean.ibbq_grill_enabled
                    name: Alert
                    state_background: false
                    show_background: false
                    show_state: false
                    show_name: false
                    tap_action:
                      action: toggle
                subbutton_colors:
                  subbutton1:
                    color: red
                    condition:
                      - condition: state
                        entity_id: binary_sensor.ibbq_grill_temp_alert
                        state: 'on'
                  subbutton4:
                    color: red
                    condition:
                      - condition: state
                        entity_id: automation.ibbq_grill_alerts
                        state: 'off'
                  subbutton5:
                    color: red
                    condition:
                      - condition: state
                        entity_id: input_boolean.ibbq_grill_enabled
                        state: 'off'
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Grill
                show_icon: false
                button_action:
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Grill Details
                        content:
                          type: custom:vertical-stack-in-card
                          cards:
                            - type: tile
                              name: Target
                              entity: input_number.ibbq_grill_target_temp
                              features:
                                - type: numeric-input
                                  style: buttons
                              features_position: inline
                              hide_state: true
                            - type: tile
                              name: Low
                              entity: input_number.ibbq_grill_low_temp
                              features:
                                - type: numeric-input
                                  style: buttons
                              features_position: inline
                              hide_state: true
                            - type: tile
                              name: High
                              entity: input_number.ibbq_grill_high_temp
                              features:
                                - type: numeric-input
                                  style: buttons
                              features_position: inline
                              hide_state: true
                            - type: custom:apexcharts-card
                              card_mod:
                                style: "ha-card {\n  padding: 0px;\n  border: none;\n\
                                  \  box-shadow: none;\n  margin-bottom: -15px;\n\
                                  }\n"
                              apex_config:
                                chart:
                                  height: 350px
                                  foreColor: '#7B7B7B'
                                  toolbar:
                                    show: false
                                grid:
                                  borderColor: '#7B7B7B'
                                xaxis:
                                  tooltip:
                                    enabled: false
                              header:
                                show: true
                                show_states: false
                                colorize_states: true
                              experimental:
                                brush: true
                                hidden_by_default: true
                              all_series_config:
                                extend_to: now
                                float_precision: 2
                                stroke_width: 3
                                curve: stepline
                              brush:
                                selection_span: 1h
                                apex_config:
                                  chart:
                                    foreColor: '#7B7B7B'
                                    toolbar:
                                      show: false
                                  grid:
                                    borderColor: '#7B7B7B'
                                  xaxis:
                                    tooltip:
                                      enabled: false
                              yaxis:
                                - min: ~100
                                  max: ~300
                              series:
                                - entity: sensor.ibbq_temperature_probe_6
                                  name: Grill
                                  color: var(--amber-color)
                                  transform: 'return x <= 32 ? null : x;'
                                  show:
                                    in_brush: true
                                - entity: input_number.ibbq_grill_high_temp
                                  name: High
                                  stroke_width: 1
                                  color: var(--pink-color)
                                  transform: 'return hass.states[''sensor.ibbq_temperature_probe_6''].state
                                    <= 32 ? null : x;'
                                - entity: input_number.ibbq_grill_low_temp
                                  name: Low
                                  stroke_width: 1
                                  color: var(--indigo-color)
                                  transform: 'return hass.states[''sensor.ibbq_temperature_probe_6''].state
                                    <= 32 ? null : x;'
                                - entity: input_number.ibbq_grill_target_temp
                                  name: Grill Target
                                  stroke_width: 1
                                  color: var(--orange-color)
                                  transform: 'return hass.states[''sensor.ibbq_temperature_probe_6''].state
                                    <= 32 ? null : x;'
                sub_button:
                  - entity: binary_sensor.ibbq_grill_target_alert
                    name: Target Alert
                    show_background: false
                    show_state: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.ibbq_grill_target_alert
                        state: 'on'
                  - entity: sensor.ibbq_temperature_probe_6
                    name: Temperature
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.ibbq_temperature_probe_6
                        state_not: unavailable
                      - condition: numeric_state
                        entity: sensor.ibbq_temperature_probe_6
                        above: 35
                  - entity: input_number.ibbq_grill_target_temp
                    name: Target
                    show_background: false
                    show_state: true
                  - entity: sensor.ibbq_grill_time_to_target
                    name: Estimated Time
                    icon: mdi:clock-end
                    show_state: false
                    show_background: false
                  - entity: input_boolean.ibbq_grill_alert
                    name: Notifications
                    show_state: false
                    show_background: false
                    tap_action:
                      action: toggle
                styles: ".bubble-sub-button-2 {\n  font-size: 20px !important\n}\n\
                  ${subButtonIcon[4].setAttribute(\"icon\", hass.states[\"input_boolean.ibbq_grill_alert\"\
                  ]?.state === \"on\" ? \"mdi:bell\" : \"mdi:bell-off\")}"
                modules:
                  - default
                  - subbutton_colors
                subbutton_colors:
                  subbutton1:
                    color: red
                    condition:
                      - condition: state
                        entity_id: binary_sensor.ibbq_grill_target_alert
                        state: 'on'
                  subbutton5:
                    color: red
                    condition:
                      - condition: state
                        entity_id: input_boolean.ibbq_grill_alert
                        state: 'off'
                card_mod:
                  style: "{% set temp = states('sensor.ibbq_temperature_probe_6')\
                    \ | float(32) %} {% set target = states('input_number.ibbq_grill_target_temp')\
                    \ | float(200) %} {% if temp > 32 and target > 32 %}\n  {% set\
                    \ progress_pct = ((temp / target) * 100) if target > 0 else 0\
                    \ %}\n  {% set progress_clamped = max(0, min(100, progress_pct))\
                    \ | round(0) %}\n  {% set color_progress = max(0, min(1, progress_pct\
                    \ / 100)) %}\n  {% set r = (255 * (1 - color_progress)) | round(0)\
                    \ %}\n  {% set g = (255 * color_progress) | round(0) %}\n  {%\
                    \ set bg_color = (r, g, 0, 0.4) %}\n  .bubble-button-background::before\
                    \ {\n    content: \"\";\n    height: 100%;\n    width: {{ progress_clamped\
                    \ }}%;\n    background-color: rgba{{ bg_color }};\n    transition:\
                    \ width 0.3s ease, background-color 0.3s ease;\n  }\n  {% if has_value('sensor.ibbq_grill_time_to_target')\
                    \ %}\n    {%- from 'easy_time.jinja' import big_time -%}\n   \
                    \   .bubble-sub-button-4::before {\n      content: \"{{ big_time('sensor.ibbq_grill_time_to_target',\
                    \ short=true) }}\";\n      margin-left: 3px;\n    }\n  {% endif\
                    \ %}\n{% endif %}"
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: iBBQ Probe 1
                show_icon: false
                button_action:
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Probe 1 Details
                        content:
                          type: custom:vertical-stack-in-card
                          cards:
                            - type: entities
                              show_header_toggle: false
                              entities:
                                - entity: input_text.ibbq_probe_1_name
                                  name: Name
                            - type: tile
                              name: Target
                              entity: input_number.ibbq_probe_1_target_temp
                              features:
                                - type: numeric-input
                                  style: buttons
                              features_position: inline
                              hide_state: true
                              vertical: false
                            - type: custom:apexcharts-card
                              card_mod:
                                style: "ha-card {\n  padding: 0px;\n  border: none;\n\
                                  \  box-shadow: none;\n  margin-bottom: -15px;\n\
                                  }\n"
                              apex_config:
                                chart:
                                  height: 350px
                                  foreColor: '#7B7B7B'
                                  toolbar:
                                    show: false
                                grid:
                                  borderColor: '#7B7B7B'
                                xaxis:
                                  tooltip:
                                    enabled: false
                              header:
                                show: true
                                show_states: false
                                colorize_states: true
                              experimental:
                                brush: true
                                hidden_by_default: true
                              all_series_config:
                                extend_to: now
                                float_precision: 2
                                stroke_width: 3
                                curve: stepline
                              brush:
                                selection_span: 1h
                                apex_config:
                                  chart:
                                    foreColor: '#7B7B7B'
                                    toolbar:
                                      show: false
                                  grid:
                                    borderColor: '#7B7B7B'
                                  xaxis:
                                    tooltip:
                                      enabled: false
                              yaxis:
                                - min: ~100
                                  max: 250
                              series:
                                - entity: sensor.ibbq_temperature_probe_1
                                  name: Probe 1
                                  color: var(--lime-color)
                                  transform: 'return x <= 32 ? null : x;'
                                  show:
                                    in_brush: true
                                - entity: input_number.ibbq_probe_1_target_temp
                                  name: Target 1
                                  stroke_width: 1
                                  color: var(--green-color)
                                  transform: 'return hass.states[''sensor.ibbq_temperature_probe_1''].state
                                    <= 32 ? null : x;'
                sub_button:
                  - entity: binary_sensor.ibbq_probe_1_target_alert
                    name: Target Alert
                    show_background: false
                    show_state: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.ibbq_probe_1_target_alert
                        state: 'on'
                  - entity: sensor.ibbq_temperature_probe_1
                    name: Temperature
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.ibbq_temperature_probe_1
                        state_not: unavailable
                      - condition: numeric_state
                        entity: sensor.ibbq_temperature_probe_1
                        above: 35
                  - entity: input_number.ibbq_probe_1_target_temp
                    name: Target
                    show_background: false
                    show_state: true
                  - entity: sensor.ibbq_probe_1_time_to_target
                    name: Estimated Time
                    icon: mdi:clock-end
                    show_state: false
                    show_background: false
                  - entity: input_boolean.ibbq_probe_1_alert
                    name: Notifications
                    show_state: false
                    show_background: false
                    tap_action:
                      action: toggle
                styles: ".bubble-sub-button-2 {\n  font-size: 20px !important\n}\n\
                  ${card.querySelector('.bubble-name').innerText = hass.states[\"\
                  input_text.ibbq_probe_1_name\"]?.state}\n${subButtonIcon[4].setAttribute(\"\
                  icon\", hass.states[\"input_boolean.ibbq_probe_1_alert\"]?.state\
                  \ === \"on\" ? \"mdi:bell\" : \"mdi:bell-off\")}"
                modules:
                  - default
                  - subbutton_colors
                subbutton_colors:
                  subbutton1:
                    color: red
                    condition:
                      - condition: state
                        entity_id: binary_sensor.ibbq_probe_1_target_alert
                        state: 'on'
                  subbutton5:
                    color: red
                    condition:
                      - condition: state
                        entity_id: input_boolean.ibbq_probe_1_alert
                        state: 'off'
                card_mod:
                  style: "{% set temp = states('sensor.ibbq_temperature_probe_1')\
                    \ | float(32) %} {% set target = states('input_number.ibbq_probe_1_target_temp')\
                    \ | float(200) %} {% if temp > 32 and target > 32 %}\n  {% set\
                    \ progress_pct = ((temp / target) * 100) if target > 0 else 0\
                    \ %}\n  {% set progress_clamped = max(0, min(100, progress_pct))\
                    \ | round(0) %}\n  {% set color_progress = max(0, min(1, progress_pct\
                    \ / 100)) %}\n  {% set r = (255 * (1 - color_progress)) | round(0)\
                    \ %}\n  {% set g = (255 * color_progress) | round(0) %}\n  {%\
                    \ set bg_color = (r, g, 0, 0.4) %}\n  .bubble-button-background::before\
                    \ {\n    content: \"\";\n    height: 100%;\n    width: {{ progress_clamped\
                    \ }}%;\n    background-color: rgba{{ bg_color }};\n    transition:\
                    \ width 0.3s ease, background-color 0.3s ease;\n  }\n  {% if has_value('sensor.ibbq_probe_1_time_to_target')\
                    \ %}\n    {%- from 'easy_time.jinja' import big_time -%}\n   \
                    \   .bubble-sub-button-4::before {\n      content: \"{{ big_time('sensor.ibbq_probe_1_time_to_target',\
                    \ short=true) }}\";\n      margin-left: 3px;\n    }\n  {% endif\
                    \ %}\n{% endif %}"
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: iBBQ Probe 2
                show_icon: false
                button_action:
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Probe 2 Details
                        content:
                          type: custom:vertical-stack-in-card
                          cards:
                            - type: entities
                              show_header_toggle: false
                              entities:
                                - entity: input_text.ibbq_probe_2_name
                                  name: Name
                            - type: tile
                              name: Target
                              entity: input_number.ibbq_probe_2_target_temp
                              features:
                                - type: numeric-input
                                  style: buttons
                              features_position: inline
                              hide_state: true
                              vertical: false
                            - type: custom:apexcharts-card
                              card_mod:
                                style: "ha-card {\n  padding: 0px;\n  border: none;\n\
                                  \  box-shadow: none;\n  margin-bottom: -15px;\n\
                                  }\n"
                              apex_config:
                                chart:
                                  height: 350px
                                  foreColor: '#7B7B7B'
                                  toolbar:
                                    show: false
                                grid:
                                  borderColor: '#7B7B7B'
                                xaxis:
                                  tooltip:
                                    enabled: false
                              header:
                                show: true
                                show_states: false
                                colorize_states: true
                              experimental:
                                brush: true
                                hidden_by_default: true
                              all_series_config:
                                extend_to: now
                                float_precision: 2
                                stroke_width: 3
                                curve: stepline
                              brush:
                                selection_span: 1h
                                apex_config:
                                  chart:
                                    foreColor: '#7B7B7B'
                                    toolbar:
                                      show: false
                                  grid:
                                    borderColor: '#7B7B7B'
                                  xaxis:
                                    tooltip:
                                      enabled: false
                              yaxis:
                                - min: ~100
                                  max: 250
                              series:
                                - entity: sensor.ibbq_temperature_probe_2
                                  name: Probe 2
                                  color: var(--purple-color)
                                  transform: 'return x <= 32 ? null : x;'
                                  show:
                                    in_brush: true
                                - entity: input_number.ibbq_probe_2_target_temp
                                  name: Target 2
                                  stroke_width: 1
                                  color: var(--deep-purple-color)
                                  transform: 'return hass.states[''sensor.ibbq_temperature_probe_2''].state
                                    <= 32 ? null : x;'
                sub_button:
                  - entity: binary_sensor.ibbq_probe_2_target_alert
                    name: Target Alert
                    show_background: false
                    show_state: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.ibbq_probe_2_target_alert
                        state: 'on'
                  - entity: sensor.ibbq_temperature_probe_2
                    name: Temperature
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.ibbq_temperature_probe_2
                        state_not: unavailable
                      - condition: numeric_state
                        entity: sensor.ibbq_temperature_probe_2
                        above: 35
                  - entity: input_number.ibbq_probe_2_target_temp
                    name: Target
                    show_background: false
                    show_state: true
                  - entity: sensor.ibbq_probe_2_time_to_target
                    name: Estimated Time
                    icon: mdi:clock-end
                    show_state: false
                    show_background: false
                  - entity: input_boolean.ibbq_probe_2_alert
                    name: Notifications
                    show_state: false
                    show_background: false
                    tap_action:
                      action: toggle
                styles: ".bubble-sub-button-2 {\n  font-size: 20px !important\n}\n\
                  ${card.querySelector('.bubble-name').innerText = hass.states[\"\
                  input_text.ibbq_probe_2_name\"]?.state}\n${subButtonIcon[4].setAttribute(\"\
                  icon\", hass.states[\"input_boolean.ibbq_probe_2_alert\"]?.state\
                  \ === \"on\" ? \"mdi:bell\" : \"mdi:bell-off\")}"
                modules:
                  - default
                  - subbutton_colors
                subbutton_colors:
                  subbutton1:
                    color: red
                    condition:
                      - condition: state
                        entity_id: binary_sensor.ibbq_probe_2_target_alert
                        state: 'on'
                  subbutton5:
                    color: red
                    condition:
                      - condition: state
                        entity_id: input_boolean.ibbq_probe_2_alert
                        state: 'off'
                card_mod:
                  style: "{% set temp = states('sensor.ibbq_temperature_probe_2')\
                    \ | float(32) %} {% set target = states('input_number.ibbq_probe_2_target_temp')\
                    \ | float(200) %} {% if temp > 32 and target > 32 %}\n  {% set\
                    \ progress_pct = ((temp / target) * 100) if target > 0 else 0\
                    \ %}\n  {% set progress_clamped = max(0, min(100, progress_pct))\
                    \ | round(0) %}\n  {% set color_progress = max(0, min(1, progress_pct\
                    \ / 100)) %}\n  {% set r = (255 * (1 - color_progress)) | round(0)\
                    \ %}\n  {% set g = (255 * color_progress) | round(0) %}\n  {%\
                    \ set bg_color = (r, g, 0, 0.4) %}\n  .bubble-button-background::before\
                    \ {\n    content: \"\";\n    height: 100%;\n    width: {{ progress_clamped\
                    \ }}%;\n    background-color: rgba{{ bg_color }};\n    transition:\
                    \ width 0.3s ease, background-color 0.3s ease;\n  }\n  {% if has_value('sensor.ibbq_probe_2_time_to_target')\
                    \ %}\n    {%- from 'easy_time.jinja' import big_time -%}\n   \
                    \   .bubble-sub-button-4::before {\n      content: \"{{ big_time('sensor.ibbq_probe_2_time_to_target',\
                    \ short=true) }}\";\n      margin-left: 3px;\n    }\n  {% endif\
                    \ %}\n{% endif %}"
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: iBBQ Probe 3
                show_icon: false
                button_action:
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Probe 3 Details
                        content:
                          type: custom:vertical-stack-in-card
                          cards:
                            - type: entities
                              show_header_toggle: false
                              entities:
                                - entity: input_text.ibbq_probe_3_name
                                  name: Name
                            - type: tile
                              name: Target
                              entity: input_number.ibbq_probe_3_target_temp
                              features:
                                - type: numeric-input
                                  style: buttons
                              features_position: inline
                              hide_state: true
                              vertical: false
                            - type: custom:apexcharts-card
                              card_mod:
                                style: "ha-card {\n  padding: 0px;\n  border: none;\n\
                                  \  box-shadow: none;\n  margin-bottom: -15px;\n\
                                  }\n"
                              apex_config:
                                chart:
                                  height: 350px
                                  foreColor: '#7B7B7B'
                                  toolbar:
                                    show: false
                                grid:
                                  borderColor: '#7B7B7B'
                                xaxis:
                                  tooltip:
                                    enabled: false
                              header:
                                show: true
                                show_states: false
                                colorize_states: true
                              experimental:
                                brush: true
                                hidden_by_default: true
                              all_series_config:
                                extend_to: now
                                float_precision: 2
                                stroke_width: 3
                                curve: stepline
                              brush:
                                selection_span: 1h
                                apex_config:
                                  chart:
                                    foreColor: '#7B7B7B'
                                    toolbar:
                                      show: false
                                  grid:
                                    borderColor: '#7B7B7B'
                                  xaxis:
                                    tooltip:
                                      enabled: false
                              yaxis:
                                - min: ~100
                                  max: 250
                              series:
                                - entity: sensor.ibbq_temperature_probe_3
                                  name: Probe 3
                                  color: var(--cyan-color)
                                  transform: 'return x <= 32 ? null : x;'
                                  show:
                                    in_brush: true
                                - entity: input_number.ibbq_probe_3_target_temp
                                  name: Target 3
                                  stroke_width: 1
                                  color: var(--blue-color)
                                  transform: 'return hass.states[''sensor.ibbq_temperature_probe_3''].state
                                    <= 32 ? null : x;'
                sub_button:
                  - entity: binary_sensor.ibbq_probe_3_target_alert
                    name: Target Alert
                    show_background: false
                    show_state: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.ibbq_probe_3_target_alert
                        state: 'on'
                  - entity: sensor.ibbq_temperature_probe_3
                    name: Temperature
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.ibbq_temperature_probe_3
                        state_not: unavailable
                      - condition: numeric_state
                        entity: sensor.ibbq_temperature_probe_3
                        above: 35
                  - entity: input_number.ibbq_probe_3_target_temp
                    name: Target
                    show_background: false
                    show_state: true
                  - entity: sensor.ibbq_probe_3_time_to_target
                    name: Estimated Time
                    icon: mdi:clock-end
                    show_state: false
                    show_background: false
                  - entity: input_boolean.ibbq_probe_3_alert
                    name: Notifications
                    show_state: false
                    show_background: false
                    tap_action:
                      action: toggle
                styles: ".bubble-sub-button-2 {\n  font-size: 20px !important\n}\n\
                  ${card.querySelector('.bubble-name').innerText = hass.states[\"\
                  input_text.ibbq_probe_3_name\"]?.state}\n${subButtonIcon[4].setAttribute(\"\
                  icon\", hass.states[\"input_boolean.ibbq_probe_3_alert\"]?.state\
                  \ === \"on\" ? \"mdi:bell\" : \"mdi:bell-off\")}"
                modules:
                  - default
                  - subbutton_colors
                subbutton_colors:
                  subbutton1:
                    color: red
                    condition:
                      - condition: state
                        entity_id: binary_sensor.ibbq_probe_3_target_alert
                        state: 'on'
                  subbutton5:
                    color: red
                    condition:
                      - condition: state
                        entity_id: input_boolean.ibbq_probe_3_alert
                        state: 'off'
                card_mod:
                  style: "{% set temp = states('sensor.ibbq_temperature_probe_3')\
                    \ | float(32) %} {% set target = states('input_number.ibbq_probe_3_target_temp')\
                    \ | float(200) %} {% if temp > 32 and target > 32 %}\n  {% set\
                    \ progress_pct = ((temp / target) * 100) if target > 0 else 0\
                    \ %}\n  {% set progress_clamped = max(0, min(100, progress_pct))\
                    \ | round(0) %}\n  {% set color_progress = max(0, min(1, progress_pct\
                    \ / 100)) %}\n  {% set r = (255 * (1 - color_progress)) | round(0)\
                    \ %}\n  {% set g = (255 * color_progress) | round(0) %}\n  {%\
                    \ set bg_color = (r, g, 0, 0.4) %}\n  .bubble-button-background::before\
                    \ {\n    content: \"\";\n    height: 100%;\n    width: {{ progress_clamped\
                    \ }}%;\n    background-color: rgba{{ bg_color }};\n    transition:\
                    \ width 0.3s ease, background-color 0.3s ease;\n  }\n  {% if has_value('sensor.ibbq_probe_3_time_to_target')\
                    \ %}\n    {%- from 'easy_time.jinja' import big_time -%}\n   \
                    \   .bubble-sub-button-4::before {\n      content: \"{{ big_time('sensor.ibbq_probe_3_time_to_target',\
                    \ short=true) }}\";\n      margin-left: 3px;\n    }\n  {% endif\
                    \ %}\n{% endif %}"
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: iBBQ Probe 4
                show_icon: false
                button_action:
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Probe 4 Details
                        content:
                          type: custom:vertical-stack-in-card
                          cards:
                            - type: entities
                              show_header_toggle: false
                              entities:
                                - entity: input_text.ibbq_probe_4_name
                                  name: Name
                            - type: tile
                              name: Target
                              entity: input_number.ibbq_probe_4_target_temp
                              features:
                                - type: numeric-input
                                  style: buttons
                              features_position: inline
                              hide_state: true
                              vertical: false
                            - type: custom:apexcharts-card
                              card_mod:
                                style: "ha-card {\n  padding: 0px;\n  border: none;\n\
                                  \  box-shadow: none;\n  margin-bottom: -15px;\n\
                                  }\n"
                              apex_config:
                                chart:
                                  height: 350px
                                  foreColor: '#7B7B7B'
                                  toolbar:
                                    show: false
                                grid:
                                  borderColor: '#7B7B7B'
                                xaxis:
                                  tooltip:
                                    enabled: false
                              header:
                                show: true
                                show_states: false
                                colorize_states: true
                              experimental:
                                brush: true
                                hidden_by_default: true
                              all_series_config:
                                extend_to: now
                                float_precision: 2
                                stroke_width: 3
                                curve: stepline
                              brush:
                                selection_span: 1h
                                apex_config:
                                  chart:
                                    foreColor: '#7B7B7B'
                                    toolbar:
                                      show: false
                                  grid:
                                    borderColor: '#7B7B7B'
                                  xaxis:
                                    tooltip:
                                      enabled: false
                              yaxis:
                                - min: ~100
                                  max: 250
                              series:
                                - entity: sensor.ibbq_temperature_probe_4
                                  name: Probe 4
                                  color: var(--brown-color)
                                  transform: 'return x <= 32 ? null : x;'
                                  show:
                                    in_brush: true
                                - entity: input_number.ibbq_probe_4_target_temp
                                  name: Target 4
                                  stroke_width: 1
                                  color: var(--deep-orange-color)
                                  transform: 'return hass.states[''sensor.ibbq_temperature_probe_4''].state
                                    <= 32 ? null : x;'
                sub_button:
                  - entity: binary_sensor.ibbq_probe_4_target_alert
                    name: Target Alert
                    show_background: false
                    show_state: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.ibbq_probe_4_target_alert
                        state: 'on'
                  - entity: sensor.ibbq_temperature_probe_4
                    name: Temperature
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.ibbq_temperature_probe_4
                        state_not: unavailable
                      - condition: numeric_state
                        entity: sensor.ibbq_temperature_probe_4
                        above: 35
                  - entity: input_number.ibbq_probe_4_target_temp
                    name: Target
                    show_background: false
                    show_state: true
                  - entity: sensor.ibbq_probe_4_time_to_target
                    name: Estimated Time
                    icon: mdi:clock-end
                    show_state: false
                    show_background: false
                  - entity: input_boolean.ibbq_probe_4_alert
                    name: Notifications
                    show_state: false
                    show_background: false
                    tap_action:
                      action: toggle
                styles: ".bubble-sub-button-2 {\n  font-size: 20px !important\n}\n\
                  ${card.querySelector('.bubble-name').innerText = hass.states[\"\
                  input_text.ibbq_probe_4_name\"]?.state}\n${subButtonIcon[4].setAttribute(\"\
                  icon\", hass.states[\"input_boolean.ibbq_probe_4_alert\"]?.state\
                  \ === \"on\" ? \"mdi:bell\" : \"mdi:bell-off\")}"
                modules:
                  - default
                  - subbutton_colors
                subbutton_colors:
                  subbutton1:
                    color: red
                    condition:
                      - condition: state
                        entity_id: binary_sensor.ibbq_probe_4_target_alert
                        state: 'on'
                  subbutton5:
                    color: red
                    condition:
                      - condition: state
                        entity_id: input_boolean.ibbq_probe_4_alert
                        state: 'off'
                card_mod:
                  style: "{% set temp = states('sensor.ibbq_temperature_probe_4')\
                    \ | float(32) %} {% set target = states('input_number.ibbq_probe_4_target_temp')\
                    \ | float(200) %} {% if temp > 32 and target > 32 %}\n  {% set\
                    \ progress_pct = ((temp / target) * 100) if target > 0 else 0\
                    \ %}\n  {% set progress_clamped = max(0, min(100, progress_pct))\
                    \ | round(0) %}\n  {% set color_progress = max(0, min(1, progress_pct\
                    \ / 100)) %}\n  {% set r = (255 * (1 - color_progress)) | round(0)\
                    \ %}\n  {% set g = (255 * color_progress) | round(0) %}\n  {%\
                    \ set bg_color = (r, g, 0, 0.4) %}\n  .bubble-button-background::before\
                    \ {\n    content: \"\";\n    height: 100%;\n    width: {{ progress_clamped\
                    \ }}%;\n    background-color: rgba{{ bg_color }};\n    transition:\
                    \ width 0.3s ease, background-color 0.3s ease;\n  }\n  {% if has_value('sensor.ibbq_probe_4_time_to_target')\
                    \ %}\n    {%- from 'easy_time.jinja' import big_time -%}\n   \
                    \   .bubble-sub-button-4::before {\n      content: \"{{ big_time('sensor.ibbq_probe_4_time_to_target',\
                    \ short=true) }}\";\n      margin-left: 3px;\n    }\n  {% endif\
                    \ %}\n{% endif %}"
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: iBBQ Probe 5
                show_icon: false
                button_action:
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Probe 5 Details
                        content:
                          type: custom:vertical-stack-in-card
                          cards:
                            - type: entities
                              show_header_toggle: false
                              entities:
                                - entity: input_text.ibbq_probe_5_name
                                  name: Name
                            - type: tile
                              name: Target
                              entity: input_number.ibbq_probe_5_target_temp
                              features:
                                - type: numeric-input
                                  style: buttons
                              features_position: inline
                              hide_state: true
                              vertical: false
                            - type: custom:apexcharts-card
                              card_mod:
                                style: "ha-card {\n  padding: 0px;\n  border: none;\n\
                                  \  box-shadow: none;\n  margin-bottom: -15px;\n\
                                  }\n"
                              apex_config:
                                chart:
                                  height: 350px
                                  foreColor: '#7B7B7B'
                                  toolbar:
                                    show: false
                                grid:
                                  borderColor: '#7B7B7B'
                                xaxis:
                                  tooltip:
                                    enabled: false
                              header:
                                show: true
                                show_states: false
                                colorize_states: true
                              experimental:
                                brush: true
                                hidden_by_default: true
                              all_series_config:
                                extend_to: now
                                float_precision: 2
                                stroke_width: 3
                                curve: stepline
                              brush:
                                selection_span: 1h
                                apex_config:
                                  chart:
                                    foreColor: '#7B7B7B'
                                    toolbar:
                                      show: false
                                  grid:
                                    borderColor: '#7B7B7B'
                                  xaxis:
                                    tooltip:
                                      enabled: false
                              yaxis:
                                - min: ~100
                                  max: 250
                              series:
                                - entity: sensor.ibbq_temperature_probe_5
                                  name: Probe 5
                                  color: var(--light-grey-color)
                                  transform: 'return x <= 32 ? null : x;'
                                  show:
                                    in_brush: true
                                - entity: input_number.ibbq_probe_5_target_temp
                                  name: Target 5
                                  stroke_width: 1
                                  color: var(--dark-grey-color)
                                  transform: 'return hass.states[''sensor.ibbq_temperature_probe_5''].state
                                    <= 32 ? null : x;'
                sub_button:
                  - entity: binary_sensor.ibbq_probe_5_target_alert
                    name: Target Alert
                    show_background: false
                    show_state: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.ibbq_probe_5_target_alert
                        state: 'on'
                  - entity: sensor.ibbq_temperature_probe_5
                    name: Temperature
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.ibbq_temperature_probe_5
                        state_not: unavailable
                      - condition: numeric_state
                        entity: sensor.ibbq_temperature_probe_5
                        above: 35
                  - entity: input_number.ibbq_probe_5_target_temp
                    name: Target
                    show_background: false
                    show_state: true
                  - entity: sensor.ibbq_probe_5_time_to_target
                    name: Estimated Time
                    icon: mdi:clock-end
                    show_state: false
                    show_background: false
                  - entity: input_boolean.ibbq_probe_5_alert
                    name: Notifications
                    show_state: false
                    show_background: false
                    tap_action:
                      action: toggle
                styles: ".bubble-sub-button-2 {\n  font-size: 20px !important\n}\n\
                  ${card.querySelector('.bubble-name').innerText = hass.states[\"\
                  input_text.ibbq_probe_5_name\"]?.state}\n${subButtonIcon[4].setAttribute(\"\
                  icon\", hass.states[\"input_boolean.ibbq_probe_5_alert\"]?.state\
                  \ === 'on' ? 'mdi:bell' :  'mdi:bell-off')}"
                modules:
                  - default
                  - subbutton_colors
                subbutton_colors:
                  subbutton1:
                    color: red
                    condition:
                      - condition: state
                        entity_id: binary_sensor.ibbq_probe_5_target_alert
                        state: 'on'
                  subbutton5:
                    color: red
                    condition:
                      - condition: state
                        entity_id: input_boolean.ibbq_probe_5_alert
                        state: 'off'
                card_mod:
                  style: "{% set temp = states('sensor.ibbq_temperature_probe_5')\
                    \ | float(32) %} {% set target = states('input_number.ibbq_probe_5_target_temp')\
                    \ | float(200) %} {% if temp > 32 and target > 32 %}\n  {% set\
                    \ progress_pct = ((temp / target) * 100) if target > 0 else 0\
                    \ %}\n  {% set progress_clamped = max(0, min(100, progress_pct))\
                    \ | round(0) %}\n  {% set color_progress = max(0, min(1, progress_pct\
                    \ / 100)) %}\n  {% set r = (255 * (1 - color_progress)) | round(0)\
                    \ %}\n  {% set g = (255 * color_progress) | round(0) %}\n  {%\
                    \ set bg_color = (r, g, 0, 0.4) %}\n  .bubble-button-background::before\
                    \ {\n    content: \"\";\n    height: 100%;\n    width: {{ progress_clamped\
                    \ }}%;\n    background-color: rgba{{ bg_color }};\n    transition:\
                    \ width 0.3s ease, background-color 0.3s ease;\n  }\n  {% if has_value('sensor.ibbq_probe_5_time_to_target')\
                    \ %}\n    {%- from 'easy_time.jinja' import big_time -%}\n   \
                    \   .bubble-sub-button-4::before {\n      content: \"{{ big_time('sensor.ibbq_probe_5_time_to_target',\
                    \ short=true) }}\";\n      margin-left: 3px;\n    }\n  {% endif\
                    \ %}\n{% endif %}"
              - type: custom:mushroom-title-card
                subtitle: History
              - type: custom:apexcharts-card
                card_mod:
                  style: "ha-card {\n  padding: 0px;\n  border: none;\n  box-shadow:\
                    \ none;\n  margin-bottom: -15px;\n}\n"
                apex_config:
                  chart:
                    height: 550px
                    foreColor: '#7B7B7B'
                    toolbar:
                      show: false
                  grid:
                    borderColor: '#7B7B7B'
                  xaxis:
                    tooltip:
                      enabled: false
                header:
                  show: true
                  show_states: false
                  colorize_states: true
                experimental:
                  brush: true
                  hidden_by_default: true
                all_series_config:
                  extend_to: now
                  float_precision: 2
                  stroke_width: 3
                  curve: stepline
                brush:
                  selection_span: 1h
                  apex_config:
                    chart:
                      foreColor: '#7B7B7B'
                      toolbar:
                        show: false
                    grid:
                      borderColor: '#7B7B7B'
                    xaxis:
                      tooltip:
                        enabled: false
                yaxis:
                  - min: ~100
                    max: ~300
                series:
                  - entity: sensor.ibbq_temperature_probe_6
                    name: Grill
                    color: var(--amber-color)
                    transform: 'return x <= 32 ? null : x;'
                    show:
                      in_brush: true
                  - entity: sensor.ibbq_temperature_probe_1
                    name: Probe 1
                    color: var(--lime-color)
                    transform: 'return x <= 32 ? null : x;'
                    show:
                      in_brush: true
                  - entity: sensor.ibbq_temperature_probe_2
                    name: Probe 2
                    color: var(--purple-color)
                    transform: 'return x <= 32 ? null : x;'
                    show:
                      in_brush: true
                  - entity: sensor.ibbq_temperature_probe_3
                    name: Probe 3
                    color: var(--cyan-color)
                    transform: 'return x <= 32 ? null : x;'
                    show:
                      in_brush: true
                  - entity: sensor.ibbq_temperature_probe_4
                    name: Probe 4
                    color: var(--brown-color)
                    transform: 'return x <= 32 ? null : x;'
                    show:
                      in_brush: true
                  - entity: sensor.ibbq_temperature_probe_5
                    name: Probe 5
                    color: var(--light-grey-color)
                    transform: 'return x <= 32 ? null : x;'
                    show:
                      in_brush: true
                  - entity: input_number.ibbq_grill_high_temp
                    name: High
                    stroke_width: 1
                    color: var(--pink-color)
                    transform: 'return hass.states[''sensor.ibbq_temperature_probe_6''].state
                      <= 32 ? null : x;'
                  - entity: input_number.ibbq_grill_low_temp
                    name: Low
                    stroke_width: 1
                    color: var(--indigo-color)
                    transform: 'return hass.states[''sensor.ibbq_temperature_probe_6''].state
                      <= 32 ? null : x;'
                  - entity: input_number.ibbq_grill_target_temp
                    name: Grill Target
                    stroke_width: 1
                    color: var(--orange-color)
                    transform: 'return hass.states[''sensor.ibbq_temperature_probe_6''].state
                      <= 32 ? null : x;'
                  - entity: input_number.ibbq_probe_1_target_temp
                    name: Target 1
                    stroke_width: 1
                    color: var(--green-color)
                    transform: 'return hass.states[''sensor.ibbq_temperature_probe_1''].state
                      <= 32 ? null : x;'
                  - entity: input_number.ibbq_probe_2_target_temp
                    name: Target 2
                    stroke_width: 1
                    color: var(--deep-purple-color)
                    transform: 'return hass.states[''sensor.ibbq_temperature_probe_2''].state
                      <= 32 ? null : x;'
                  - entity: input_number.ibbq_probe_3_target_temp
                    name: Target 3
                    stroke_width: 1
                    color: var(--blue-color)
                    transform: 'return hass.states[''sensor.ibbq_temperature_probe_3''].state
                      <= 32 ? null : x;'
                  - entity: input_number.ibbq_probe_4_target_temp
                    name: Target 4
                    stroke_width: 1
                    color: var(--deep-orange-color)
                    transform: 'return hass.states[''sensor.ibbq_temperature_probe_4''].state
                      <= 32 ? null : x;'
                  - entity: input_number.ibbq_probe_5_target_temp
                    name: Target 5
                    stroke_width: 1
                    color: var(--dark-grey-color)
                    transform: 'return hass.states[''sensor.ibbq_temperature_probe_5''].state
                      <= 32 ? null : x;'
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#litter-info'
                button_type: name
                name: Neakasa M1
                show_icon: false
                margin_top_desktop: 25vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                sub_button:
                  - entity: sensor.luna_box_cat_litter_level
                    show_state: true
                    icon: mdi:waves-arrow-up
                    show_background: false
                    name: Litter Level
              - type: custom:mod-card
                style:
                  hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                    \ wrap;\n  justify-content: space-around;\n}\n"
                card:
                  type: grid
                  square: false
                  cards:
                    - type: custom:button-card
                      template: button_label
                      name: Clean
                      label: Press and Hold to Clean
                      icon: mdi:wiper-wash
                      variables:
                        color: var(--blue-color)
                      tap_action:
                        action: none
                      hold_action:
                        action: perform-action
                        perform_action: button.press
                        target:
                          entity_id: button.luna_box_clean
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
                    - type: custom:button-card
                      template: button_label
                      name: Level
                      label: Press and Hold to Level
                      icon: mdi:spirit-level
                      variables:
                        color: var(--lime-color)
                      tap_action:
                        action: none
                      hold_action:
                        action: perform-action
                        perform_action: button.press
                        target:
                          entity_id: button.luna_box_level
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
              - type: custom:button-card
                show_state: false
                show_label: false
                tap_action:
                  action: none
                variables:
                  value_font_color: grey
                custom_fields:
                  neakasa_image: "[[[\n  return `\n    <div style=\"display: flex;\
                    \ justify-content: flex-end;\">\n      <img\n        src=\"/local/logos/neakasa-m1.png\"\
                    \n        style=\"width: 100px;\"\n      />\n    </div>\n  `;\n\
                    ]]]\n"
                  bin_state: "[[[\n  let state = states['sensor.luna_box_bin_state']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <div>Bin State</div>\n     \
                    \ <span style=\"display: block; color: ${variables.value_font_color}\"\
                    >${state === 'unavailable' ? 'Unknown' : helpers.localize(states['sensor.luna_box_bin_state'])}</span>\n\
                    \    </div>\n  `;\n]]]\n"
                  litter_state: "[[[\n  let state = states['sensor.luna_box_cat_litter_state']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <div>Litter State</div>\n  \
                    \    <span style=\"display: block; color: ${variables.value_font_color}\"\
                    >${state === 'unavailable' ? 'Unknown' : helpers.localize(states['sensor.luna_box_cat_litter_state'])}</span>\n\
                    \    </div>\n  `;\n]]]\n"
                  device_status: "[[[\n  let state = states['sensor.luna_box_device_status']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <div>Device Status</div>\n \
                    \     <span style=\"display: block; color: ${variables.value_font_color}\"\
                    >${state === 'unavailable' ? 'Unknown' : helpers.localize(states['sensor.luna_box_device_status'])}</span>\n\
                    \    </div>\n  `;\n]]]\n"
                  can_full: "[[[\n  let state = states['binary_sensor.luna_box_garbage_can_full']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <div>Waste Bin Full</div>\n\
                    \      <span style=\"display: block; color: ${variables.value_font_color}\"\
                    >${state === 'unavailable' ? 'Unknown' : helpers.localize(states['binary_sensor.luna_box_garbage_can_full'])}</span>\n\
                    \    </div>\n  `;\n]]]\n"
                  last_stay_time: "[[[\n  let state = states['sensor.luna_box_last_stay_time']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <div>Last Stay Time</div>\n\
                    \      <span style=\"display: block; color: ${variables.value_font_color}\"\
                    >${state === 'unavailable' ? 'Unknown' : helpers.localize(states['sensor.luna_box_last_stay_time'])}</span>\n\
                    \    </div>\n  `;\n]]]\n"
                  cat_weight: "[[[\n  let state = states['sensor.luna_box_cat_luna_weight']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <div>Weight</div>\n      <span\
                    \ style=\"display: block; color: ${variables.value_font_color}\"\
                    >${state === 'unavailable' ? 'Unknown' : helpers.localize(states['sensor.luna_box_cat_luna_weight'])}</span>\n\
                    \    </div>\n  `;\n]]]\n"
                  last_usage: "[[[\n  let state = states['sensor.luna_box_last_usage']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <div>Last Usage</div>\n    \
                    \  <span style=\"display: block; color: ${variables.value_font_color}\"\
                    >${state === 'unavailable' ? 'Unknown' : helpers.localize(states['sensor.luna_box_last_usage'])}</span>\n\
                    \    </div>\n  `;\n]]]\n"
                  wifi_signal: "[[[\n  let state = states['sensor.luna_box_wifi_rssi']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <div>WiFi Signal</div>\n   \
                    \   <span style=\"display: block; color: ${variables.value_font_color}\"\
                    >${state === 'unavailable' ? 'Unknown' : helpers.localize(states['sensor.luna_box_wifi_rssi'])}</span>\n\
                    \    </div>\n  `;\n]]]\n"
                styles:
                  card:
                    - background-color: color-mix(in srgb, var(--disabled-color) 12%,
                        var(--card-background-color) 100%)
                    - padding-left: 10px
                    - padding-right: 10px
                  grid:
                    - grid-template-areas: '"bin_state . litter_state . neakasa_image"

                        "device_status . can_full . neakasa_image"

                        "last_stay_time . cat_weight . neakasa_image"

                        "wifi_signal . last_usage . neakasa_image"

                        '
                    - grid-template-columns: auto 1fr auto 1fr 100px
                    - grid-template-rows: auto
                    - text-align: start
                  custom_fields:
                    neakasa_image:
                      - justify-self: right
                      - width: 150px
                      - height: 150px
              - type: custom:bar-card
                card_mod:
                  style: "ha-card {\n  background: none;\n  --ha-card-border-width:\
                    \ 0;\n  --ha-card-box-shadow: none;\n}\n#states {\n  padding:\
                    \ 8px 2px;\n}\nbar-card-name,\nbar-card-value {\n  font-weight:\
                    \ 500;\n  text-shadow: 1px 1px var(--primary-background-color);\n\
                    }\nbar-card-backgroundbar {\n  background-color: var(--primary-background-color);\n\
                    }\n"
                name: Litter Level
                entities:
                  - entity: sensor.luna_box_cat_litter_level
                    icon: mdi:pail
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                  icon: inside
                height: 24px
                min: 0
                max: 100
                decimal: 0
                severity:
                  - color: var(--red-color)
                    from: 0
                    to: 40
                  - color: var(--orange-color)
                    from: 10
                    to: 50
                  - color: var(--amber-color)
                    from: 20
                    to: 60
                  - color: var(--light-green-color)
                    from: 40
                    to: 70
                  - color: var(--green-color)
                    from: 70
                    to: 100
              - type: custom:apexcharts-card
                apex_config:
                  chart:
                    foreColor: '#7B7B7B'
                    toolbar:
                      show: false
                  grid:
                    borderColor: '#7B7B7B'
                  xaxis:
                    tooltip:
                      enabled: false
                experimental:
                  color_threshold: true
                header:
                  show: false
                all_series_config:
                  extend_to: now
                  stroke_width: 2
                  type: line
                  group_by:
                    func: min
                    duration: 1hour
                  color_threshold:
                    - value: 0
                      color: '#f44336'
                    - value: 40
                      color: '#ff9800'
                    - value: 50
                      color: '#ffc107'
                    - value: 60
                      color: '#8bc34a'
                    - value: 70
                      color: '#4caf50'
                span:
                  end: minute
                graph_span: 10d
                yaxis:
                  - decimals: 0
                    min: ~0
                    max: ~100
                    apex_config:
                      tickAmount: 4
                      title:
                        text: '%'
                series:
                  - entity: sensor.luna_box_cat_litter_level
                    name: Litter Level
                    color: rgb(158,158,158)
                card_mod:
                  style: "ha-card {\n  --ha-card-border-width: 0;\n}\n"
              - type: custom:mod-card
                style:
                  hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                    \ wrap;\n  justify-content: space-between;\n}\nmushroom-template-badge,\
                    \ hui-conditional-card {\n  flex: 0 0 auto !important;\n}\n"
                card:
                  type: grid
                  square: false
                  columns: 4
                  cards:
                    - type: custom:button-card
                      template: badge
                      entity: switch.luna_box_automatic_cover
                      name: Auto Cover
                      icon: mdi:close-circle
                      label: "[[[\n  if (entity.state === 'on') return 'Enabled';\n\
                        \  else return 'Disabled';\n]]]\n"
                      tap_action:
                        action: toggle
                      variables:
                        color: "[[[\n  if (entity.state === 'on') return 'var(--green-color)';\n\
                          \  else return 'var(--grey-color)';\n]]]\n"
                      styles:
                        card:
                          - background-color: color-mix(in srgb, var(--disabled-color)
                              12%, var(--card-background-color) 100%) !important;
                      state:
                        - value: 'on'
                          icon: mdi:check-circle
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color} 4%, var(--card-background-color) 100%)\
                        \ !important;\n    }\n  }\n  `\n  ]]]\n"
                    - type: custom:button-card
                      template: badge
                      entity: switch.luna_box_automatic_leveling
                      name: Auto Level
                      icon: mdi:close-circle
                      label: "[[[\n  if (entity.state === 'on') return 'Enabled';\n\
                        \  else return 'Disabled';\n]]]\n"
                      tap_action:
                        action: toggle
                      variables:
                        color: "[[[\n  if (entity.state === 'on') return 'var(--green-color)';\n\
                          \  else return 'var(--grey-color)';\n]]]\n"
                      styles:
                        card:
                          - background-color: color-mix(in srgb, var(--disabled-color)
                              12%, var(--card-background-color) 100%) !important;
                      state:
                        - value: 'on'
                          icon: mdi:check-circle
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color} 4%, var(--card-background-color) 100%)\
                        \ !important;\n    }\n  }\n  `\n  ]]]\n"
                    - type: custom:button-card
                      template: badge
                      entity: switch.luna_box_automatic_recovery
                      name: Auto Recovery
                      icon: mdi:close-circle
                      label: "[[[\n  if (entity.state === 'on') return 'Enabled';\n\
                        \  else return 'Disabled';\n]]]\n"
                      tap_action:
                        action: toggle
                      variables:
                        color: "[[[\n  if (entity.state === 'on') return 'var(--green-color)';\n\
                          \  else return 'var(--grey-color)';\n]]]\n"
                      styles:
                        card:
                          - background-color: color-mix(in srgb, var(--disabled-color)
                              12%, var(--card-background-color) 100%) !important;
                      state:
                        - value: 'on'
                          icon: mdi:check-circle
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color} 4%, var(--card-background-color) 100%)\
                        \ !important;\n    }\n  }\n  `\n  ]]]\n"
                    - type: custom:button-card
                      template: badge
                      entity: switch.luna_box_child_lock
                      name: Lock
                      icon: mdi:close-circle
                      label: "[[[\n  if (entity.state === 'on') return 'Enabled';\n\
                        \  else return 'Disabled';\n]]]\n"
                      tap_action:
                        action: toggle
                      variables:
                        color: "[[[\n  if (entity.state === 'on') return 'var(--green-color)';\n\
                          \  else return 'var(--grey-color)';\n]]]\n"
                      styles:
                        card:
                          - background-color: color-mix(in srgb, var(--disabled-color)
                              12%, var(--card-background-color) 100%) !important;
                      state:
                        - value: 'on'
                          icon: mdi:check-circle
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color} 4%, var(--card-background-color) 100%)\
                        \ !important;\n    }\n  }\n  `\n  ]]]\n"
                    - type: custom:button-card
                      template: badge
                      entity: switch.luna_box_silent_mode
                      name: Silent Mode
                      icon: mdi:close-circle
                      label: "[[[\n  if (entity.state === 'on') return 'Enabled';\n\
                        \  else return 'Disabled';\n]]]\n"
                      tap_action:
                        action: toggle
                      variables:
                        color: "[[[\n  if (entity.state === 'on') return 'var(--green-color)';\n\
                          \  else return 'var(--grey-color)';\n]]]\n"
                      styles:
                        card:
                          - background-color: color-mix(in srgb, var(--disabled-color)
                              12%, var(--card-background-color) 100%) !important;
                      state:
                        - value: 'on'
                          icon: mdi:check-circle
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color} 4%, var(--card-background-color) 100%)\
                        \ !important;\n    }\n  }\n  `\n  ]]]\n"
                    - type: custom:button-card
                      template: badge
                      entity: switch.luna_box_unstoppable_cycle
                      name: Unstopable
                      icon: mdi:close-circle
                      label: "[[[\n  if (entity.state === 'on') return 'Enabled';\n\
                        \  else return 'Disabled';\n]]]\n"
                      tap_action:
                        action: none
                      hold_action:
                        action: toggle
                      variables:
                        color: "[[[\n  if (entity.state === 'on') return 'var(--green-color)';\n\
                          \  else return 'var(--grey-color)';\n]]]\n"
                      styles:
                        card:
                          - background-color: color-mix(in srgb, var(--disabled-color)
                              12%, var(--card-background-color) 100%) !important;
                      state:
                        - value: 'on'
                          icon: mdi:check-circle
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color} 4%, var(--card-background-color) 100%)\
                        \ !important;\n    }\n  }\n  `\n  ]]]\n"
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#feeder-info'
                button_type: name
                name: Cat Feeder
                show_icon: false
                margin_top_desktop: 25vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                sub_button:
                  - name: Food Level
                    entity: sensor.cat_feeder_food_level
                    show_background: false
                    show_state: true
              - type: custom:mod-card
                style:
                  hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                    \ wrap;\n  justify-content: space-around;\n}\n"
                card:
                  type: grid
                  square: false
                  cards:
                    - type: custom:button-card
                      template: button_label
                      name: Dispense Food
                      label: Press and Hold to Dispense
                      icon: mdi:food-drumstick
                      variables:
                        color: var(--green-color)
                      tap_action:
                        action: none
                      hold_action:
                        action: perform-action
                        perform_action: script.feeder_start
                        target: {}
                        data:
                          feeder: Cat Feeder
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
                    - type: custom:button-card
                      template: button_label
                      name: Reset Food Level
                      label: Press and Hold to Reset
                      icon: mdi:progress-upload
                      variables:
                        color: var(--yellow-color)
                      tap_action:
                        action: none
                      hold_action:
                        action: call-service
                        service: utility_meter.calibrate
                        target:
                          entity_id: sensor.cat_feeder_total_weight
                        data:
                          value: '0'
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
              - type: custom:mushroom-number-card
                entity: number.cat_feeder_serving_size
                name: Servings
                icon: mdi:location-enter
                secondary_info: none
                layout: horizontal
                display_mode: buttons
                card_mod:
                  style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                    \ none;\n}\n"
              - type: markdown
                title: Schedule
                content: "{%- if has_value(\"sensor.cat_feeder_schedule\") -%}\n{%-\
                  \ set feedings = states(\"sensor.cat_feeder_schedule\") | replace(\"\
                  '\", '\"') | from_json -%}\n{%- for feeding in feedings -%}\n  {{\
                  \ feeding.size }} portions at {{ as_timestamp(today_at(feeding.hour\
                  \ ~ \":\" ~ feeding.minute)) | timestamp_custom(\"%-I:%M %p\", True)\
                  \ }}\n{% endfor -%}\n{%- endif -%}"
                card_mod:
                  style: "ha-card {\n  --ha-card-border-width: 0;\n  --ha-card-box-shadow:\
                    \ none;\n}\n"
              - type: custom:bar-card
                card_mod:
                  style: "ha-card {\n  background: none;\n  --ha-card-border-width:\
                    \ 0;\n  --ha-card-box-shadow: none;\n}\n#states {\n  padding:\
                    \ 8px 2px;\n}\nbar-card-name,\nbar-card-value {\n  font-weight:\
                    \ 500;\n  text-shadow: 1px 1px var(--primary-background-color);\n\
                    }\nbar-card-backgroundbar {\n  background-color: var(--primary-background-color);\n\
                    }\n"
                name: Food Level
                entities:
                  - entity: sensor.cat_feeder_food_level
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                  icon: inside
                height: 24px
                min: 0
                max: 100
                decimal: 1
                severity:
                  - color: var(--red-color)
                    from: 0
                    to: 10
                  - color: var(--orange-color)
                    from: 10
                    to: 20
                  - color: var(--amber-color)
                    from: 20
                    to: 40
                  - color: var(--light-green-color)
                    from: 40
                    to: 70
                  - color: var(--green-color)
                    from: 70
                    to: 100
              - type: custom:apexcharts-card
                apex_config:
                  chart:
                    foreColor: '#7B7B7B'
                    toolbar:
                      show: false
                  grid:
                    borderColor: '#7B7B7B'
                  xaxis:
                    tooltip:
                      enabled: false
                experimental:
                  color_threshold: true
                header:
                  show: false
                all_series_config:
                  extend_to: now
                  stroke_width: 2
                  type: line
                  group_by:
                    func: min
                    duration: 1hour
                  color_threshold:
                    - value: 0
                      color: '#f44336'
                    - value: 10
                      color: '#ff9800'
                    - value: 20
                      color: '#ffc107'
                    - value: 40
                      color: '#8bc34a'
                    - value: 70
                      color: '#4caf50'
                span:
                  end: minute
                graph_span: 10d
                yaxis:
                  - decimals: 0
                    min: ~0
                    max: ~100
                    apex_config:
                      tickAmount: 4
                      title:
                        text: '%'
                series:
                  - entity: sensor.cat_feeder_food_level
                    name: Food Level
                    color: rgb(158,158,158)
                card_mod:
                  style: "ha-card {\n  --ha-card-border-width: 0;\n}\n"
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#low-battery'
                button_type: name
                name: Low Battery
                show_icon: false
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                  - more_info_popup
                sub_button:
                  - entity: sensor.low_battery_devices
                    show_state: true
                    show_background: false
                    name: Devices
              - type: custom:auto-entities
                filter:
                  include:
                    - group: sensor.low_battery_devices
                      options:
                        type: custom:mushroom-template-card
                        primary: "{{ state_attr(entity, \"friendly_name\")\n  | regex_replace(find=\"\
                          \ battery level\", replace=\"\", ignorecase=true)\n  | regex_replace(find=\"\
                          \ battery\", replace=\"\", ignorecase=true)\n}}"
                        secondary: '{{ states(entity, with_unit=true) }}'
                        icon: '{% from "util.jinja" import battery_icon %} {{ battery_icon(entity)
                          }}

                          '
                        icon_color: '{% from "util.jinja" import battery_color %}
                          {{ battery_color(entity) }}'
                        badge_color: red
                        badge_icon: "{% if int(states(entity), 0) <= 15 %}\n  mdi:exclamation-thick\n\
                          {% endif %}"
                        layout: horizontal
                        tap_action:
                          action: more-info
                  exclude: []
                card:
                  type: custom:layout-card
                  cards: []
                  layout_type: masonry
                sort:
                  method: friendly_name
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#offline-devices'
                button_type: name
                name: Offline Devices
                show_icon: false
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                  - more_info_popup
                sub_button:
                  - entity: sensor.offline_devices
                    name: Devices
                    show_background: false
                    show_state: true
              - type: custom:auto-entities
                filter:
                  include:
                    - group: sensor.offline_devices
                      options:
                        type: custom:mushroom-template-card
                        primary: '{{ state_attr(entity, "friendly_name") | regex_replace(find="
                          last seen", replace="", ignorecase=true) }}'
                        secondary: "{%- if has_value(entity) -%}\n  {{ as_datetime(states(entity)).strftime(\"\
                          %Y-%m-%d %-I:%M %p\") }}\n{%- else -%}\n  Unknown\n{%- endif\
                          \ -%}"
                        icon: mdi:network-off
                        icon_color: blue-grey
                        layout: horizontal
                        tap_action:
                          action: more-info
                  exclude: []
                card:
                  type: custom:layout-card
                  cards: []
                  layout_type: masonry
                sort:
                  method: friendly_name
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#updates'
                button_type: name
                name: Updates
                show_icon: false
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                  - more_info_popup
                sub_button:
                  - entity: sensor.updates
                    name: Updates
                    show_background: false
                    show_state: true
              - type: custom:auto-entities
                filter:
                  include:
                    - group: sensor.updates
                      options:
                        type: tile
                        state_content:
                          - install_status
                          - installed_version
                          - latest_version
                  exclude: []
                card:
                  type: custom:layout-card
                  cards: []
                  layout_type: masonry
                sort:
                  method: friendly_name
              - type: custom:mod-card
                style:
                  hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                    \ wrap;\n  justify-content: space-around;\n}\n"
                card:
                  type: grid
                  square: false
                  cards:
                    - type: custom:button-card
                      template: button
                      name: Updates Page
                      icon: mdi:update
                      tap_action:
                        action: navigate
                        navigation_path: /config/updates
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#timers'
                button_type: name
                name: Timers
                show_icon: false
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                  - more_info_popup
              - type: custom:auto-entities
                card:
                  type: custom:timer-bar-card
                filter:
                  template: "{%- set results = namespace(timers = []) -%} {%- set\
                    \ state_map = {\n  \"set\": \"active\",\n  \"ringing\": \"active\"\
                    ,\n} -%} {%- set icon_map = {\n  \"set\": \"mdi:timer\",\n  \"\
                    ringing\": \"mdi:timer-alert\",\n  \"paused\": \"mdi:timer-pause\"\
                    ,\n} -%} {%- for entity_id in integration_entities('google_home')\n\
                    \  if entity_id is contains '_timers'\n-%}\n  {%- set multiple\
                    \ = not loop.first or not loop.last -%}\n  {%- set suffix = ''\n\
                    \    if not multiple\n    else ' ⸱ ' + state_attr(entity_id, 'friendly_name')\
                    \ | replace(' timers', '')\n  -%}\n  {%- for t in state_attr(entity_id,\
                    \ 'timers') if as_timestamp(t.local_time_iso) > as_timestamp(now())\
                    \ -%}\n    {%- set label = t.label if t.label else t.duration\
                    \ | regex_replace('^0:0*', '') -%}\n    {%- set results.timers\
                    \ = results.timers + [{\n      'entity': entity_id,\n      'icon':\
                    \ icon_map[t.status],\n      'duration': {'fixed': t.duration},\n\
                    \      'end_time': {'fixed': t.local_time_iso},\n      'name':\
                    \ label + suffix,\n      'state': {'fixed': state_map[t.status]\
                    \ | default(t.status)},\n      'bar_width': 'calc(70% - 10em)',\n\
                    \      \"extend_paper_buttons_row\": {\n        \"position\":\
                    \ \"right\",\n        \"buttons\": [\n          {\n          \
                    \  \"icon\": \"mdi:close\",\n            \"tooltip\": \"Dismiss\"\
                    ,\n            \"tap_action\": {\n              \"action\": \"\
                    call-service\",\n              \"service\": \"google_home.delete_timer\"\
                    ,\n              \"service_data\": {\n                \"timer_id\"\
                    : t.timer_id,\n                \"entity_id\": entity_id,\n   \
                    \             \"skip_refresh\": False,\n              }\n    \
                    \        }\n          }\n        ]\n      }\n    }] -%}\n  {%-\
                    \ endfor -%}\n{%- endfor -%} {{ results.timers }}"
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#air-quality'
                button_type: name
                name: Air Quality
                show_icon: false
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
              - type: heading
                icon: mdi:home
                heading: Inside
                heading_style: title
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                entities:
                  - entity: sensor.airgradient_kitchen_pm_2_5_aqi
                    name: AQI
                    min: 0
                    max: 400
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '50'
                      - color: var(--yellow-color)
                        from: '50'
                        to: '100'
                      - color: var(--orange-color)
                        from: '100'
                        to: '150'
                      - color: var(--red-color)
                        from: '150'
                        to: '200'
                      - color: var(--purple-color)
                        from: '200'
                        to: '300'
                      - color: var(--pink-color)
                        from: '300'
                        to: '400'
                  - entity: sensor.airgradient_kitchen_pm_2_5
                    name: PM 2.5
                    min: 0
                    max: 100
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '12'
                      - color: var(--yellow-color)
                        from: '12'
                        to: '35'
                      - color: var(--orange-color)
                        from: '35'
                        to: '50'
                      - color: var(--red-color)
                        from: '50'
                        to: '100'
                  - entity: sensor.airgradient_kitchen_pm_10_0
                    name: PM 10
                    min: 0
                    max: 100
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '12'
                      - color: var(--yellow-color)
                        from: '12'
                        to: '35'
                      - color: var(--orange-color)
                        from: '35'
                        to: '50'
                      - color: var(--red-color)
                        from: '50'
                        to: '100'
                  - entity: sensor.airgradient_kitchen_voc_index
                    name: VOC
                    min: 0
                    max: 500
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '150'
                      - color: var(--yellow-color)
                        from: '150'
                        to: '250'
                      - color: var(--orange-color)
                        from: '250'
                        to: '400'
                      - color: var(--red-color)
                        from: '400'
                        to: '500'
                  - entity: sensor.airgradient_kitchen_nox_index
                    name: NOx
                    min: 0
                    max: 500
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '30'
                      - color: var(--yellow-color)
                        from: '30'
                        to: '150'
                      - color: var(--orange-color)
                        from: '150'
                        to: '300'
                      - color: var(--red-color)
                        from: '300'
                        to: '500'
              - type: heading
                icon: mdi:spa
                heading: Outside
                heading_style: title
              - type: custom:mushroom-template-card
                entity: sensor.airnow_air_quality_index
                primary: 'AQI: {{ state_attr(entity, "description") }}'
                multiline_secondary: true
                fill_container: false
                tap_action:
                  action: none
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon: mdi:air-filter
                icon_color: "{% if has_value(entity) %}\n  {% set level = states(entity)\
                  \ | float(default=0) %}\n  {% if level >= 300 %}\n    red\n  {%\
                  \ elif level >= 200 %}\n    purple\n  {% elif level >= 150 %}\n\
                  \    pink\n  {% elif level >= 100 %}\n    orange\n  {% elif level\
                  \ >= 50 %}\n    yellow\n  {% elif level >= 0 %}\n    green\n  {%\
                  \ endif %}\n{% else %}\n  grey\n{% endif %}"
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                entities:
                  - entity: sensor.airnow_air_quality_index
                    name: AQI
                    min: 0
                    max: 400
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '50'
                      - color: var(--yellow-color)
                        from: '50'
                        to: '100'
                      - color: var(--orange-color)
                        from: '100'
                        to: '150'
                      - color: var(--red-color)
                        from: '150'
                        to: '200'
                      - color: var(--purple-color)
                        from: '200'
                        to: '300'
                      - color: var(--pink-color)
                        from: '300'
                        to: '400'
                  - entity: sensor.airnow_pm2_5
                    name: PM 2.5
                    min: 0
                    max: 100
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '12'
                      - color: var(--yellow-color)
                        from: '12'
                        to: '35'
                      - color: var(--orange-color)
                        from: '35'
                        to: '50'
                      - color: var(--red-color)
                        from: '50'
                        to: '100'
              - type: custom:mini-graph-card
                name: CO2 Levels
                icon: mdi:molecule-co2
                show:
                  labels: false
                entities:
                  - entity: sensor.airgradient_kitchen_co2
                    name: Kitchen
                    color: var(--amber-color)
                    show_state: true
                    show_points: false
                  - entity: sensor.apollo_msr_1_office_co2
                    name: Office
                    color: var(--blue-color)
                    show_state: true
                    show_points: false
                line_width: 3
                font_size: 75
                hours_to_show: 30
                points_per_hour: 12
                update_interval: 300
                animate: true
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#allergy'
                button_type: name
                name: Allergy
                show_icon: false
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
              - type: heading
                icon: mdi:flower-pollen
                heading: Allergens
                heading_style: title
              - type: markdown
                content: "{%- set ns = namespace(allergens=[]) -%}\n{%- for id in\
                  \ range(1, 4) -%}\n  {%- set attr = \"allergen_name_\" ~ id -%}\n\
                  \  {%- if not state_attr(\"sensor.allergy_index_today\", attr) in\
                  \ [\"unknown\", \"unavailable\", None] -%}\n    {%- set ns.allergens\
                  \ = ns.allergens + [ state_attr(\"sensor.allergy_index_today\",\
                  \ attr) ] -%}\n  {%- endif -%}\n{%- endfor -%} {{ ns.allergens |\
                  \ join(\", \") }}\n{{ state_attr(\"sensor.allergy_index_forecasted_average\"\
                  , \"outlook\") | default(\"\", true) }}"
                text_only: true
              - type: heading
                icon: mdi:flower-pollen-outline
                heading: Forecast
                heading_style: title
              - type: heading
                icon: ''
                heading: Allergy
                heading_style: subtitle
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                entities:
                  - entity: sensor.allergy_index_today
                  - entity: sensor.allergy_index_tomorrow
                  - entity: sensor.allergy_index_forecasted_average
                min: 0
                max: 12
                decimal: 1
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                severity:
                  - color: var(--green-color)
                    from: '0'
                    to: '2.5'
                  - color: var(--light-green-color)
                    from: '2.5'
                    to: '4.9'
                  - color: var(--amber-color)
                    from: '4.9'
                    to: '7.3'
                  - color: var(--orange-color)
                    from: '7.3'
                    to: '9.7'
                  - color: var(--red-color)
                    from: '9.7'
                    to: '12'
              - type: heading
                icon: ''
                heading: Asthma
                heading_style: subtitle
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                entities:
                  - entity: sensor.asthma_index_today
                  - entity: sensor.asthma_index_tomorrow
                  - entity: sensor.asthma_index_forecasted_average
                min: 0
                max: 12
                decimal: 1
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                severity:
                  - color: var(--green-color)
                    from: '0'
                    to: '2.5'
                  - color: var(--light-green-color)
                    from: '2.5'
                    to: '4.9'
                  - color: var(--amber-color)
                    from: '4.9'
                    to: '7.3'
                  - color: var(--orange-color)
                    from: '7.3'
                    to: '9.7'
                  - color: var(--red-color)
                    from: '9.7'
                    to: '12'
              - type: heading
                icon: ''
                heading: Cold
                heading_style: subtitle
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                entities:
                  - entity: sensor.cold_flu_index_today
                  - entity: sensor.cold_flu_forecasted_average
                min: 0
                max: 12
                decimal: 1
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                severity:
                  - color: var(--green-color)
                    from: '0'
                    to: '2.5'
                  - color: var(--light-green-color)
                    from: '2.5'
                    to: '4.9'
                  - color: var(--amber-color)
                    from: '4.9'
                    to: '7.3'
                  - color: var(--orange-color)
                    from: '7.3'
                    to: '9.7'
                  - color: var(--red-color)
                    from: '9.7'
                    to: '12'
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#dishwasher'
                button_type: name
                name: Dishwasher
                show_icon: false
                margin_top_desktop: 30vh
                width_desktop: 40vw
                margin_top_mobile: 10vw
                modules:
                  - default
                sub_button:
                  - entity: sensor.ge_dishwasher_cycle_name
                    show_state: true
                    tap_action:
                      action: none
                    name: Cycle Name
                  - entity: binary_sensor.ge_dishwasher_remote_start_enable
                    tap_action:
                      action: none
                    name: Remote Enable
                    icon: mdi:remote
              - type: custom:timer-bar-card
                filter: true
                invert: true
                state_color: true
                layout: full_row
                text_width: 4.5em
                bar_height: 12px
                bar_radius: var(--ha-card-border-radius, 12px)
                bar_direction: rtl
                bar_foreground: var(--lime-color)
                bar_background: var(--disabled-color)
                compressed: true
                modifications:
                  - remaining: 00:03:00
                    bar_foreground: var(--amber-color)
                  - remaining: 00:02:00
                    bar_foreground: var(--orange-color)
                  - remaining: 00:01:00
                    bar_foreground: var(--red-color)
                entities:
                  - entity: timer.ge_dishwasher
              - type: tile
                entity: binary_sensor.ge_dishwasher_is_clean
                name: Clean
                color: green
                hide_state: true
                features_position: bottom
              - type: conditional
                conditions:
                  - condition: state
                    entity: sensor.ge_dishwasher_cycle_state
                    state_not: N/A
                card:
                  type: entity
                  entity: sensor.ge_dishwasher_cycle_state
                  name: Current Cycle
                  state_color: true
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: entity
                    entity: sensor.ge_dishwasher_user_setting_cycle_mode
                    name: Cycle Mode
                    state_color: true
                  - type: entity
                    entity: sensor.ge_dishwasher_user_setting_presoak
                    name: Presoak
                    state_color: true
                  - type: entity
                    entity: sensor.ge_dishwasher_user_setting_bottle_jet
                    name: Bottle Jets
                    state_color: true
                  - type: entity
                    entity: sensor.ge_dishwasher_user_setting_wash_temp
                    name: Wash Temp
                    state_color: true
                  - type: entity
                    entity: sensor.ge_dishwasher_user_setting_rinse_aid
                    name: Rinse Aid
                    state_color: true
                  - type: entity
                    entity: sensor.ge_dishwasher_user_setting_dry_option
                    name: Dry Mode
                    state_color: true
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#oven'
                button_type: name
                name: Oven
                show_icon: false
                margin_top_desktop: 30vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                sub_button:
                  - entity: switch.ge_oven_light
                    name: Light
                    show_state: true
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                  - entity: binary_sensor.ge_oven_remote_enabled
                    name: Remote Enable
                    icon: mdi:remote
                    tap_action:
                      action: none
              - type: custom:mushroom-template-card
                entity: water_heater.ge_oven
                multiline_secondary: false
                primary: "{% if has_value(entity) and is_state_attr(entity, 'operation_mode',\
                  \ 'Off') %}\n  Oven\n{% elif not is_state('sensor.ge_oven_cook_time_remaining',\
                  \ 'Off') %}\n  Cook Time\n{% elif not is_state('sensor.ge_oven_kitchen_timer',\
                  \ 'Off') %}\n  Timer\n{% else %}\n  {{ state_attr(entity, 'operation_mode')\
                  \ }} ⸱ {{ float(state_attr('water_heater.ge_oven', 'temperature'),\
                  \ 0) | round(0) }}°F\n{% endif %}"
                secondary: "{% if has_value(entity) %}\n  {% if is_state_attr(entity,\
                  \ 'operation_mode', 'Off') %}\n    Off\n  {% else %}\n    Current:\
                  \ {{ float(state_attr(entity, 'current_temperature')) | round(0)\
                  \ }}°F\n  {% endif %}\n{% endif %}"
                icon: '{% if not is_state(''sensor.ge_oven_cook_time_remaining'',
                  ''Off'') %}mdi:timer-play

                  {% elif not is_state(''sensor.ge_oven_kitchen_timer'', ''Off'')
                  %}mdi:timer

                  {% else %}mdi:stove

                  {% endif %}'
                icon_color: '{% if is_state_attr(entity, ''operation_mode'', ''Preheat'')
                  %}yellow

                  {% elif is_state_attr(entity, ''operation_mode'', ''Bake'') %}red

                  {% elif is_state_attr(entity, ''operation_mode'', ''Air Fry'') %}orange

                  {% elif is_state_attr(entity, ''operation_mode'', ''Convection'')
                  %}amber

                  {% elif not is_state(''sensor.ge_oven_cook_time_remaining'', ''Off'')
                  %}cyan

                  {% elif not is_state(''sensor.ge_oven_kitchen_timer'', ''Off'')
                  %}purple

                  {% else %}grey

                  {% endif %}'
                tap_action:
                  action: more-info
              - type: custom:timer-bar-card
                filter: true
                invert: true
                state_color: true
                bar_height: 12px
                bar_radius: var(--ha-card-border-radius, 12px)
                bar_direction: rtl
                bar_foreground: var(--lime-color)
                bar_background: var(--disabled-color)
                compressed: true
                modifications:
                  - remaining: 00:03:00
                    bar_foreground: var(--amber-color)
                  - remaining: 00:02:00
                    bar_foreground: var(--orange-color)
                  - remaining: 00:01:00
                    bar_foreground: var(--red-color)
                entities:
                  - entity: timer.ge_oven_cook
                    name: Cook
                  - entity: timer.ge_oven_kitchen
                    name: Kitchen
              - type: custom:mod-card
                style:
                  hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                    \ wrap;\n  justify-content: space-around;\n}\n"
                card:
                  type: grid
                  square: false
                  cards:
                    - type: custom:button-card
                      template: button
                      entity: water_heater.ge_oven
                      name: 300°F
                      icon: mdi:thermometer
                      variables:
                        color: "[[[\n  return entity.attributes.operation_mode !==\
                          \ 'Off'\n    && entity.attributes.temperature === 300\n\
                          \    ? 'var(--green-color)'\n    : 'var(--grey-color)';\n\
                          ]]]\n"
                      tap_action:
                        action: call-service
                        service: water_heater.set_temperature
                        service_data:
                          temperature: 300
                          operation_mode: Bake
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
                    - type: custom:button-card
                      template: button
                      entity: water_heater.ge_oven
                      name: 350°F
                      icon: mdi:thermometer
                      variables:
                        color: "[[[\n  return entity.attributes.operation_mode !==\
                          \ 'Off'\n    && entity.attributes.temperature === 350\n\
                          \    ? 'var(--green-color)'\n    : 'var(--grey-color)';\n\
                          ]]]\n"
                      tap_action:
                        action: call-service
                        service: water_heater.set_temperature
                        service_data:
                          temperature: 350
                          operation_mode: Bake
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
                    - type: custom:button-card
                      template: button
                      entity: water_heater.ge_oven
                      name: 375°F
                      icon: mdi:thermometer
                      variables:
                        color: "[[[\n  return entity.attributes.operation_mode !==\
                          \ 'Off'\n    && entity.attributes.temperature === 375\n\
                          \    ? 'var(--green-color)'\n    : 'var(--grey-color)';\n\
                          ]]]\n"
                      tap_action:
                        action: call-service
                        service: water_heater.set_temperature
                        service_data:
                          temperature: 375
                          operation_mode: Bake
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
                    - type: custom:button-card
                      template: button
                      entity: water_heater.ge_oven
                      name: 400°F
                      icon: mdi:thermometer
                      variables:
                        color: "[[[\n  return entity.attributes.operation_mode !==\
                          \ 'Off'\n    && entity.attributes.temperature === 400\n\
                          \    ? 'var(--green-color)'\n    : 'var(--grey-color)';\n\
                          ]]]\n"
                      tap_action:
                        action: call-service
                        service: water_heater.set_temperature
                        service_data:
                          temperature: 400
                          operation_mode: Bake
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
                    - type: custom:button-card
                      template: button
                      entity: water_heater.ge_oven
                      name: 425°F
                      icon: mdi:thermometer
                      variables:
                        color: "[[[\n  return entity.attributes.operation_mode !==\
                          \ 'Off'\n    && entity.attributes.temperature === 425\n\
                          \    ? 'var(--green-color)'\n    : 'var(--grey-color)';\n\
                          ]]]\n"
                      tap_action:
                        action: call-service
                        service: water_heater.set_temperature
                        service_data:
                          temperature: 425
                          operation_mode: Bake
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
                    - type: custom:button-card
                      template: button
                      entity: water_heater.ge_oven
                      name: 450°F
                      icon: mdi:thermometer
                      variables:
                        color: "[[[\n  return entity.attributes.operation_mode !==\
                          \ 'Off'\n    && entity.attributes.temperature === 450\n\
                          \    ? 'var(--green-color)'\n    : 'var(--grey-color)';\n\
                          ]]]\n"
                      tap_action:
                        action: call-service
                        service: water_heater.set_temperature
                        service_data:
                          temperature: 450
                          operation_mode: Bake
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
                    - type: custom:button-card
                      template: button
                      entity: water_heater.ge_oven
                      name: 475°F
                      icon: mdi:thermometer
                      variables:
                        color: "[[[\n  return entity.attributes.operation_mode !==\
                          \ 'Off'\n    && entity.attributes.temperature === '475'\n\
                          \    ? 'var(--green-color)'\n    : 'var(--grey-color)';\n\
                          ]]]\n"
                      tap_action:
                        action: call-service
                        service: water_heater.set_temperature
                        service_data:
                          temperature: 475
                          operation_mode: Bake
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
              - type: conditional
                conditions:
                  - condition: state
                    entity: water_heater.ge_oven
                    state_not: 'Off'
                  - condition: state
                    entity: water_heater.ge_oven
                    state_not: unavailable
                  - condition: state
                    entity: water_heater.ge_oven
                    state_not: unknown
                card:
                  type: custom:mod-card
                  style:
                    hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                      \ wrap;\n  justify-content: space-around;\n}\n"
                  card:
                    type: grid
                    square: false
                    cards:
                      - type: custom:button-card
                        template: button
                        entity: water_heater.ge_oven
                        name: 'Off'
                        icon: mdi:power
                        variables:
                          color: "[[[\n  return entity.attributes.operation_mode !==\
                            \ 'Off'\n    ? 'var(--red-color)'\n    : 'var(--grey-color)';\n\
                            ]]]\n"
                        tap_action:
                          action: call-service
                          service: water_heater.set_operation_mode
                          service_data:
                            entity_id: water_heater.ge_oven
                            operation_mode: 'Off'
                        extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                          \    ha-card:hover {\n      background: color-mix(in srgb,\
                          \ ${variables.color}, transparent 80%) !important;\n   \
                          \ }\n  }\n  `\n]]]\n"
              - features:
                  - type: select-options
                type: tile
                entity: select.ge_oven_operation
                features_position: inline
                name: Mode
                icon: mdi:heating-coil
                color: blue
                hide_state: true
                vertical: false
              - type: custom:bubble-card
                card_type: separator
                name: Cooktop
                modules:
                  - default
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 33% 33% 33%
                  grid-template-rows: auto
                  grid-template-areas: '"rl rc rr" "fl . fr"'
                  margin: 0
                  padding: 0
                cards:
                  - type: custom:mushroom-template-card
                    view_layout:
                      grid-area: rl
                    entity: binary_sensor.ge_oven_cooktop_status_left_rear_on
                    secondary: Left Rear
                    multiline_secondary: true
                    icon: "{%- if is_state(entity, \"on\") -%}\n  mdi:circle-slice-8\n\
                      {%- else -%}\n  mdi:circle-outline\n{%- endif -%}"
                    icon_color: "{%- if is_state(entity, \"on\") -%}\n  red\n{%- else\
                      \ -%}\n  disabled\n{%- endif -%}"
                    layout: vertical
                    tap_action:
                      action: more-info
                    card_mod:
                      style:
                        .: "ha-card {\n  --ha-card-background: none;\n  --ha-card-box-shadow:\
                          \ none;\n  --ha-card-border-width: 0;\n  --icon-size: 48px;\n\
                          \  margin-top: 10px;\n}\n{% set power = \"sensor.ge_oven_cooktop_status_left_rear_power_pct\"\
                          \ %}\n{% if has_value(power) and states(power) not in [\"\
                          Empty\", \"unknown\"] %}\nha-card:after {\n  content: \"\
                          {{ states(power) }}%\";\n  position: absolute;\n  font-weight:\
                          \ bolder;\n  top: -2px;\n  right: 2px;\n  font-size: 12px;\n\
                          }\n{% endif %}\n"
                        mushroom-shape-icon$: ".shape {\n  {% if is_state(config.entity,\
                          \ \"on\") %}\n  --shape-animation: ping 2s infinite;\n \
                          \ {% endif %}\n}\n@keyframes ping {\n  0% { box-shadow:\
                          \ 0 0 1px 15px rgba(255,254,249, 0.25); }\n  100% { box-shadow:\
                          \ 0 0 1px 15px transparent; }\n}\n"
                  - type: custom:mushroom-template-card
                    view_layout:
                      grid-area: rc
                    entity: binary_sensor.ge_oven_cooktop_status_center_rear_on
                    secondary: Warmer
                    multiline_secondary: true
                    icon: "{%- if is_state(entity, \"on\") -%}\n  mdi:circle-slice-8\n\
                      {%- else -%}\n  mdi:circle-outline\n{%- endif -%}"
                    icon_color: "{%- if is_state(entity, \"on\") -%}\n  red\n{%- else\
                      \ -%}\n  disabled\n{%- endif -%}"
                    layout: vertical
                    tap_action:
                      action: more-info
                    card_mod:
                      style:
                        .: "ha-card {\n  --ha-card-background: none;\n  --ha-card-box-shadow:\
                          \ none;\n  --ha-card-border-width: 0;\n  --icon-size: 48px;\n\
                          \  margin-top: 10px;\n}\n"
                        mushroom-shape-icon$: ".shape {\n  {% if is_state(config.entity,\
                          \ \"on\") %}\n  --shape-animation: ping 2s infinite;\n \
                          \ {% endif %}\n}\n@keyframes ping {\n  0% { box-shadow:\
                          \ 0 0 1px 15px rgba(255,254,249, 0.25); }\n  100% { box-shadow:\
                          \ 0 0 1px 15px transparent; }\n}\n"
                  - type: custom:mushroom-template-card
                    view_layout:
                      grid-area: rr
                    entity: binary_sensor.ge_oven_cooktop_status_right_rear_on
                    secondary: Right Rear
                    multiline_secondary: true
                    icon: "{%- if is_state(entity, \"on\") -%}\n  mdi:circle-slice-8\n\
                      {%- else -%}\n  mdi:circle-outline\n{%- endif -%}"
                    icon_color: "{%- if is_state(entity, \"on\") -%}\n  red\n{%- else\
                      \ -%}\n  disabled\n{%- endif -%}"
                    layout: vertical
                    tap_action:
                      action: more-info
                    card_mod:
                      style:
                        .: "ha-card {\n  --ha-card-background: none;\n  --ha-card-box-shadow:\
                          \ none;\n  --ha-card-border-width: 0;\n  --icon-size: 48px;\n\
                          \  margin-top: 10px;\n}\n{% set power = \"sensor.ge_oven_cooktop_status_right_rear_power_pct\"\
                          \ %}\n{% if has_value(power) and states(power) not in [\"\
                          Empty\", \"unknown\"] %}\nha-card:after {\n  content: \"\
                          {{ states(power) }}%\";\n  position: absolute;\n  font-weight:\
                          \ bolder;\n  top: -2px;\n  right: 2px;\n  font-size: 12px;\n\
                          }\n{% endif %}\n"
                        mushroom-shape-icon$: ".shape {\n  {% if is_state(config.entity,\
                          \ \"on\") %}\n  --shape-animation: ping 2s infinite;\n \
                          \ {% endif %}\n}\n@keyframes ping {\n  0% { box-shadow:\
                          \ 0 0 1px 15px rgba(255,254,249, 0.25); }\n  100% { box-shadow:\
                          \ 0 0 1px 15px transparent; }\n}\n"
                  - type: custom:mushroom-template-card
                    view_layout:
                      grid-area: fl
                    entity: binary_sensor.ge_oven_cooktop_status_left_front_on
                    secondary: Left Front
                    multiline_secondary: true
                    icon: "{%- if is_state(entity, \"on\") -%}\n  mdi:circle-slice-8\n\
                      {%- else -%}\n  mdi:circle-outline\n{%- endif -%}"
                    icon_color: "{%- if is_state(entity, \"on\") -%}\n  red\n{%- else\
                      \ -%}\n  disabled\n{%- endif -%}"
                    layout: vertical
                    tap_action:
                      action: more-info
                    card_mod:
                      style:
                        .: "ha-card {\n  --ha-card-background: none;\n  --ha-card-box-shadow:\
                          \ none;\n  --ha-card-border-width: 0;\n  --icon-size: 48px;\n\
                          \  margin-top: 10px;\n}\n{% set power = \"sensor.ge_oven_cooktop_status_left_front_power_pct\"\
                          \ %}\n{% if has_value(power) and states(power) not in [\"\
                          Empty\", \"unknown\"] %}\nha-card:after {\n  content: \"\
                          {{ states(power) }}%\";\n  position: absolute;\n  font-weight:\
                          \ bolder;\n  top: -2px;\n  right: 2px;\n  font-size: 12px;\n\
                          }\n{% endif %}\n"
                        mushroom-shape-icon$: ".shape {\n  {% if is_state(config.entity,\
                          \ \"on\") %}\n  --shape-animation: ping 2s infinite;\n \
                          \ {% endif %}\n}\n@keyframes ping {\n  0% { box-shadow:\
                          \ 0 0 1px 15px rgba(255,254,249, 0.25); }\n  100% { box-shadow:\
                          \ 0 0 1px 15px transparent; }\n}\n"
                  - type: custom:mushroom-template-card
                    view_layout:
                      grid-area: fr
                    entity: binary_sensor.ge_oven_cooktop_status_right_front_on
                    secondary: Right Front
                    multiline_secondary: true
                    icon: "{%- if is_state(entity, \"on\") -%}\n  mdi:circle-slice-8\n\
                      {%- else -%}\n  mdi:circle-outline\n{%- endif -%}"
                    icon_color: "{%- if is_state(entity, \"on\") -%}\n  red\n{%- else\
                      \ -%}\n  disabled\n{%- endif -%}"
                    layout: vertical
                    tap_action:
                      action: more-info
                    card_mod:
                      style:
                        .: "ha-card {\n  --ha-card-background: none;\n  --ha-card-box-shadow:\
                          \ none;\n  --ha-card-border-width: 0;\n  --icon-size: 48px;\n\
                          \  margin-top: 10px;\n}\n{% set power = \"sensor.ge_oven_cooktop_status_right_front_power_pct\"\
                          \ %}\n{% if has_value(power) and states(power) not in [\"\
                          Empty\", \"unknown\"] %}\nha-card:after {\n  content: \"\
                          {{ states(power) }}%\";\n  position: absolute;\n  font-weight:\
                          \ bolder;\n  top: -2px;\n  right: 2px;\n  font-size: 12px;\n\
                          }\n{% endif %}\n"
                        mushroom-shape-icon$: ".shape {\n  {% if is_state(config.entity,\
                          \ \"on\") %}\n  --shape-animation: ping 2s infinite;\n \
                          \ {% endif %}\n}\n@keyframes ping {\n  0% { box-shadow:\
                          \ 0 0 1px 15px rgba(255,254,249, 0.25); }\n  100% { box-shadow:\
                          \ 0 0 1px 15px transparent; }\n}\n"
    badges:
      - type: custom:mushroom-template-badge
        content: Announce
        icon: mdi:dots-horizontal-circle
        color: blue
        tap_action:
          action: navigate
          navigation_path: '#announce'
      - type: custom:mushroom-template-badge
        label: Security
        content: '{% from "util.jinja" import security_count %}

          {{ iif(security_count() | int == 0, "Secure", "Not Secure") }}'
        icon: '{% from "util.jinja" import security_count %}

          {{ iif(security_count() | int == 0, "mdi:shield-check",

          "mdi:shield-alert") }}'
        color: '{% from "util.jinja" import security_count %}

          {{ iif(security_count() | int == 0, "green", "red") }}'
        tap_action:
          action: navigate
          navigation_path: security
      - type: custom:mushroom-template-badge
        entity: binary_sensor.all_doors
        label: Doors
        content: '{{ expand(entity) | selectattr(''state'', ''=='', ''on'') | list
          | count }}'
        icon: '{{ iif(is_state(entity, "on"), "mdi:door-open", "mdi:door") }}'
        color: '{{ iif(is_state(entity, "on"), "cyan", "grey") }}'
        tap_action:
          action: navigate
          navigation_path: '#doors'
        visibility:
          - condition: state
            entity: binary_sensor.all_doors
            state: 'on'
      - type: custom:mushroom-template-badge
        entity: light.all_lights
        label: Lights
        content: '{{ expand(entity) | selectattr(''state'', ''=='', ''on'') | list
          | count }}'
        icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-group", "mdi:lightbulb-group-off")
          }}'
        color: '{{ iif(is_state(entity, "on"), "amber", "grey") }}'
        tap_action:
          action: navigate
          navigation_path: lights
        hold_action:
          action: call-service
          service: light.turn_off
          target:
            entity_id: light.all_lights
      - type: custom:mushroom-template-badge
        entity: sensor.emporiavue_main_total_power
        label: Power
        content: "{% if has_value(entity) %}\n  {% set power = int(states(entity),\
          \ 0) | abs %}\n  {% if power > 1000 %}\n    {{ (power | float * 0.001) |\
          \ round(1) }} kWh\n  {% else %}\n    {{ power }} W\n  {% endif %}\n{% endif\
          \ %}"
        icon: "{% if has_value(entity) %}\n  {% if int(states(entity), 0) < 0 %}\n\
          \    mdi:transmission-tower-import\n  {% else %}\n    mdi:transmission-tower-export\n\
          \  {% endif %}\n{% else %}\n  mdi:transmission-tower-off\n{% endif %}"
        color: "{% if has_value(entity) %}\n  {% if int(states(entity), 0) < 0 %}\n\
          \    lime\n  {% else %}\n    deep-orange\n  {% endif %}\n{% else %}\n  grey\n\
          {% endif %}"
        tap_action:
          action: navigate
          navigation_path: power
      - type: custom:mushroom-template-badge
        entity: binary_sensor.computers
        content: '{{ expand(config.entity) | selectattr("state", "==", "on") | list
          | count }}'
        icon: mdi:desktop-tower
        color: '{{ iif (is_state(entity, "on"), "teal", "grey") }}'
        tap_action:
          action: navigate
          navigation_path: computer
        label: PC
      - type: custom:mushroom-template-badge
        entity: sensor.bambu_p1s_print_status
        label: Bambu
        content: "{% if is_state(entity, \"running\") and\nhas_value(\"sensor.bambu_p1s_current_layer\"\
          ) %}\n  {{ states('sensor.bambu_p1s_current_layer') }} / {{\n  states('sensor.bambu_p1s_total_layer_count')\
          \ }}\n{% else %}\n  3D\n{% endif %}"
        icon: mdi:printer-3d
        color: "{% if is_state(\"sensor.bambu_p1s_current_stage\", \"idle\") %}\n\
          \  grey\n{% elif is_state(entity, \"running\") %}\n  green\n{% elif is_state(entity,\
          \ \"finish\") %}\n  orange\n{% elif states(entity) in [\"idle\", \"pause\"\
          ] %}\n  yellow\n{% elif states(entity) in [\"init\", \"prepare\", \"slicing\"\
          ] %}\n  light-blue\n{% elif is_state(entity, \"failed\") %}\n  red\n{% else\
          \ %}\n  grey\n{% endif %}"
        tap_action:
          action: navigate
          navigation_path: bambu
      - type: custom:mushroom-template-badge
        entity: sensor.meater_probe_cook_state
        label: Meater
        content: "{% if has_value(entity) %}\n  {{ states(\"sensor.meater_probe_internal\"\
          , rounded=true, with_unit=true) }}\n  {% if has_value(\"sensor.meater_probe_cook_time_remaining\"\
          )  %}\n    {%- from 'easy_time.jinja' import easy_time -%}\n    | {{ easy_time(\"\
          sensor.meater_probe_cook_time_remaining\", short=true) }}\n  {% endif %}\n\
          {% endif %}"
        icon: mdi:food-drumstick
        color: '{{ has_value(entity) | iif("brown", "grey") }}'
        tap_action:
          action: navigate
          navigation_path: '#meater'
      - type: custom:mushroom-template-badge
        entity: sensor.ibbq_temperature_probe_6
        label: iBBQ
        content: "{%- from 'easy_time.jinja' import easy_time -%}\n{% if has_value(\"\
          sensor.ibbq_temperature_probe_1\") and (states(\"sensor.ibbq_temperature_probe_1\"\
          ) | int) > 32 %}\n  {{ states(\"sensor.ibbq_temperature_probe_1\", rounded=true,\
          \ with_unit=true) }}\n  {% if has_value(\"sensor.ibbq_probe_1_time_to_target\"\
          )  %}\n    | {{ easy_time(\"sensor.ibbq_probe_1_time_to_target\", short=true)\
          \ }}\n  {% endif %}\n{% elif has_value(\"sensor.ibbq_temperature_probe_6\"\
          ) %}\n  {{ states(\"sensor.ibbq_temperature_probe_6\", rounded=true, with_unit=true)\
          \ }}\n  {% if has_value(\"sensor.ibbq_grill_time_to_target\")  %}\n    |\
          \ {{ easy_time(\"sensor.ibbq_grill_time_to_target\", short=true) }}\n  {%\
          \ endif %}\n{% endif %}"
        icon: mdi:grill
        color: '{{ has_value(entity) | iif("red", "grey") }}'
        tap_action:
          action: navigate
          navigation_path: '#bbq'
      - type: custom:mushroom-template-badge
        entity: sensor.luna_box_cat_litter_level
        label: Litterbox
        content: "{% if is_state(\"binary_sensor.luna_box_garbage_can_full\", \"on\"\
          ) %}\n  Full\n{% elif not is_state(\"sensor.luna_box_bin_state\", \"normal\"\
          ) %}\n  Error\n{% else %}\n  {{ states(entity) | round(0) }}%\n{% endif\
          \ %}"
        icon: mdi:trash-can
        color: "{% from \"util.jinja\" import battery_color %}\n{% if is_state(\"\
          binary_sensor.luna_box_garbage_can_full\", \"on\") %}\n  orange\n{% elif\
          \ not is_state(\"sensor.luna_box_bin_state\", \"normal\") %}\n  red\n{%\
          \ else %}\n  {{ battery_color(entity) }}\n{% endif %}"
        tap_action:
          action: navigate
          navigation_path: '#litter-info'
      - type: custom:mushroom-template-badge
        entity: sensor.cat_feeder_food_level
        label: Cat Food
        content: "{% if is_state(\"binary_sensor.cat_feeder_error\", \"on\") %}\n\
          \  Error\n{% else %}\n  {{ states(entity) | round(0) }}%\n{% endif %}"
        icon: mdi:paw
        color: "{% from \"util.jinja\" import battery_color %}\n{% if is_state(\"\
          binary_sensor.cat_feeder_error\", \"on\") %}\n  red\n{% else %}\n  {{ battery_color(entity)\
          \ }}\n{% endif %}"
        tap_action:
          action: navigate
          navigation_path: '#feeder-info'
      - type: custom:mushroom-template-badge
        entity: sensor.water_softener_salt_monitor_salt_level
        label: Salt
        content: '{{ states(entity) | round(0) }}%'
        icon: mdi:arrow-expand-vertical
        color: '{% from "util.jinja" import battery_color %}

          {{ battery_color(entity) }}'
        tap_action:
          action: navigate
          navigation_path: utility
        visibility:
          - condition: numeric_state
            entity: sensor.water_softener_salt_monitor_salt_level
            below: 10
      - type: custom:mushroom-template-badge
        entity: sensor.low_battery_devices
        label: Battery
        content: '{{ states(entity) }}'
        icon: mdi:battery-alert
        color: red
        tap_action:
          action: navigate
          navigation_path: '#low-battery'
        visibility:
          - condition: numeric_state
            entity: sensor.low_battery_devices
            above: 0
      - type: custom:mushroom-template-badge
        entity: sensor.offline_devices
        label: Offline
        content: '{{ states(entity) }}'
        icon: mdi:network-off
        color: blue-grey
        tap_action:
          action: navigate
          navigation_path: '#offline-devices'
        visibility:
          - condition: numeric_state
            entity: sensor.offline_devices
            above: 0
          - condition: user
            users:
              - f615672fc2554783beab56221097564e
      - type: custom:mushroom-template-badge
        entity: sensor.updates
        label: Updates
        content: '{{ states(entity) }}'
        icon: mdi:package-up
        color: red
        visibility:
          - condition: numeric_state
            entity: sensor.updates
            above: 0
          - condition: user
            users:
              - f615672fc2554783beab56221097564e
        tap_action:
          action: navigate
          navigation_path: '#updates'
        hold_action:
          action: navigate
          navigation_path: /config/updates
      - type: custom:mushroom-template-badge
        icon: mdi:timer
        color: lime
        tap_action:
          action: navigate
          navigation_path: '#timers'
        visibility:
          - condition: or
            conditions:
              - condition: state
                entity: sensor.living_room_speaker_timers
                state_not: unavailable
              - condition: state
                entity: sensor.family_room_speaker_timers
                state_not: unavailable
              - condition: state
                entity: sensor.office_speaker_timers
                state_not: unavailable
        label: Timer
        content: "{%- from 'easy_time.jinja' import easy_time -%}\n{%- set _ = namespace(found=false)\
          \ -%}\n{%- for entity_id in integration_entities('google_home') if entity_id\
          \ is contains '_timers' -%}\n  {%- if has_value(entity_id) and not _.found\
          \ -%}\n    {%- set _.found = true -%}\n    {{ easy_time(entity_id, short=true)\
          \ }}\n  {%- endif -%}\n{%- endfor -%}"
    cards: []
    visible:
      - user: ce9ee65ab49c4ca4af52496609016f1c
      - user: f615672fc2554783beab56221097564e
      - user: 171eeb6104704b03afcad6553b7b793e
      - user: 6905264120304e96aa416e287aca5b80
  - title: Main (Kids)
    type: sections
    path: main-kids
    max_columns: 1
    icon: mdi:home-assistant
    sections:
      - type: grid
        cards:
          - type: custom:button-card
            visibility:
              - condition: user
                users:
                  - f2a4e20a373e4c5b8d030da2a313eb28
                  - ce9ee65ab49c4ca4af52496609016f1c
                  - f615672fc2554783beab56221097564e
            template: person
            name: Ethan
            entity: person.ethan
            tap_action:
              action: navigate
              navigation_path: '#ethan'
            variables:
              chips_top:
                - type: template
                  entity: sensor.ethan_bedroom_temperature
                  icon: mdi:thermometer
                  content: '{{ states(entity, with_unit=true) }}'
                  color: '{% from "util.jinja" import room_temp %}

                    {{ room_temp(entity) }}'
                  tap_action:
                    action: more-info
              chips:
                - type: template
                  entity: switch.nebula_projector_ethan_main_switch
                  icon_color: '{{ iif(is_state(entity, "on"), "pink", "disabled")
                    }}'
                  icon: mdi:crystal-ball
                  tap_action:
                    action: more-info
                - type: template
                  entity: light.ethan_bedroom_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: Ethan's Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.ethan_bedroom_lights
                - type: template
                  entity: binary_sensor.ethan_bedroom_occupancy
                  icon: "{%- if is_state(\"binary_sensor.ethan_bedroom_motion\", \"\
                    on\") -%}\n  mdi:motion-sensor\n{%- elif is_state(entity, \"on\"\
                    ) -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n{%-\
                    \ endif -%}"
                  icon_color: "{%- if is_state(\"binary_sensor.ethan_bedroom_motion\"\
                    , \"on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n\
                    \  light-green\n{%- else -%}\n  disabled\n{%- endif -%}"
                  tap_action:
                    action: none
                  hold_action:
                    action: none
          - type: custom:button-card
            visibility:
              - condition: user
                users:
                  - 092efcafdaeb41838fd9204177be8a43
                  - ce9ee65ab49c4ca4af52496609016f1c
                  - f615672fc2554783beab56221097564e
            template: person
            name: Emma
            entity: person.emma
            tap_action:
              action: navigate
              navigation_path: '#emma'
            variables:
              chips_top:
                - type: template
                  entity: sensor.emma_bedroom_temperature
                  icon: mdi:thermometer
                  content: '{{ states(entity, with_unit=true) }}'
                  color: '{% from "util.jinja" import room_temp %}

                    {{ room_temp(entity) }}'
                  tap_action:
                    action: more-info
              chips:
                - type: template
                  entity: switch.nebula_projector_emma_main_switch
                  icon_color: '{{ iif(is_state(entity, "on"), "pink", "disabled")
                    }}'
                  icon: mdi:crystal-ball
                  tap_action:
                    action: more-info
                - type: template
                  entity: light.emma_bedroom_lights
                  icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-on", "mdi:lightbulb")
                    }}'
                  icon_color: '{{ iif(is_state(entity, "on"), "amber", "disabled")
                    }}'
                  card_mod:
                    style:
                      .: "{% if is_state(config.entity, \"on\") %}\nha-card:after\
                        \ {\n  content: \"{{ expand(config.entity) | selectattr('state',\
                        \ '==', 'on') | list | count }}\";\n  position: absolute;\n\
                        \  color: var(--amber-color);\n  font-weight: bolder;\n  top:\
                        \ -2px;\n  right: 2px;\n  font-size: 12px;\n}\n{% endif %}\n"
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        title: emma's Lights
                        content:
                          type: custom:streamline-card
                          template: light_group
                          variables:
                            - entity: light.emma_bedroom_lights
                - type: template
                  entity: binary_sensor.emma_bedroom_occupancy
                  icon: "{%- if is_state(\"binary_sensor.emma_bedroom_motion\", \"\
                    on\") -%}\n  mdi:motion-sensor\n{%- elif is_state(entity, \"on\"\
                    ) -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n{%-\
                    \ endif -%}"
                  icon_color: "{%- if is_state(\"binary_sensor.emma_bedroom_motion\"\
                    , \"on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n\
                    \  light-green\n{%- else -%}\n  disabled\n{%- endif -%}"
                  tap_action:
                    action: none
                  hold_action:
                    action: none
          - type: custom:streamline-card
            template: person_card_simple
            variables:
              person: joshua
              name: Dad
            grid_options:
              columns: 6
              rows: auto
          - type: custom:streamline-card
            template: person_card_simple
            variables:
              person: amy
              name: Mom
            grid_options:
              columns: 6
              rows: auto
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#air-quality'
                show_header: true
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                button_type: name
                name: Air Quality
                show_icon: false
              - type: heading
                icon: mdi:home
                heading: Inside
                heading_style: title
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                entities:
                  - entity: sensor.airgradient_kitchen_pm_2_5_aqi
                    name: AQI
                    min: 0
                    max: 400
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '50'
                      - color: var(--yellow-color)
                        from: '50'
                        to: '100'
                      - color: var(--orange-color)
                        from: '100'
                        to: '150'
                      - color: var(--red-color)
                        from: '150'
                        to: '200'
                      - color: var(--purple-color)
                        from: '200'
                        to: '300'
                      - color: var(--pink-color)
                        from: '300'
                        to: '400'
                  - entity: sensor.airgradient_kitchen_pm_2_5
                    name: PM 2.5
                    min: 0
                    max: 100
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '12'
                      - color: var(--yellow-color)
                        from: '12'
                        to: '35'
                      - color: var(--orange-color)
                        from: '35'
                        to: '50'
                      - color: var(--red-color)
                        from: '50'
                        to: '100'
                  - entity: sensor.airgradient_kitchen_pm_10_0
                    name: PM 10
                    min: 0
                    max: 100
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '12'
                      - color: var(--yellow-color)
                        from: '12'
                        to: '35'
                      - color: var(--orange-color)
                        from: '35'
                        to: '50'
                      - color: var(--red-color)
                        from: '50'
                        to: '100'
                  - entity: sensor.airgradient_kitchen_voc_index
                    name: VOC
                    min: 0
                    max: 500
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '150'
                      - color: var(--yellow-color)
                        from: '150'
                        to: '250'
                      - color: var(--orange-color)
                        from: '250'
                        to: '400'
                      - color: var(--red-color)
                        from: '400'
                        to: '500'
                  - entity: sensor.airgradient_kitchen_nox_index
                    name: NOx
                    min: 0
                    max: 500
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '30'
                      - color: var(--yellow-color)
                        from: '30'
                        to: '150'
                      - color: var(--orange-color)
                        from: '150'
                        to: '300'
                      - color: var(--red-color)
                        from: '300'
                        to: '500'
              - type: heading
                icon: mdi:spa
                heading: Outside
                heading_style: title
              - type: custom:mushroom-template-card
                entity: sensor.airnow_air_quality_index
                primary: 'AQI: {{ state_attr(entity, "description") }}'
                multiline_secondary: true
                fill_container: false
                tap_action:
                  action: none
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon: mdi:air-filter
                icon_color: "{% if has_value(entity) %}\n  {% set level = states(entity)\
                  \ | float(default=0) %}\n  {% if level >= 300 %}\n    red\n  {%\
                  \ elif level >= 200 %}\n    purple\n  {% elif level >= 150 %}\n\
                  \    pink\n  {% elif level >= 100 %}\n    orange\n  {% elif level\
                  \ >= 50 %}\n    yellow\n  {% elif level >= 0 %}\n    green\n  {%\
                  \ endif %}\n{% else %}\n  grey\n{% endif %}"
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                entities:
                  - entity: sensor.airnow_air_quality_index
                    name: AQI
                    min: 0
                    max: 400
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '50'
                      - color: var(--yellow-color)
                        from: '50'
                        to: '100'
                      - color: var(--orange-color)
                        from: '100'
                        to: '150'
                      - color: var(--red-color)
                        from: '150'
                        to: '200'
                      - color: var(--purple-color)
                        from: '200'
                        to: '300'
                      - color: var(--pink-color)
                        from: '300'
                        to: '400'
                  - entity: sensor.airnow_pm2_5
                    name: PM 2.5
                    min: 0
                    max: 100
                    severity:
                      - color: var(--green-color)
                        from: '0'
                        to: '12'
                      - color: var(--yellow-color)
                        from: '12'
                        to: '35'
                      - color: var(--orange-color)
                        from: '35'
                        to: '50'
                      - color: var(--red-color)
                        from: '50'
                        to: '100'
              - type: custom:mini-graph-card
                name: CO2 Levels
                icon: mdi:molecule-co2
                show:
                  labels: false
                entities:
                  - entity: sensor.airgradient_kitchen_co2
                    name: Kitchen
                    color: var(--amber-color)
                    show_state: true
                    show_points: false
                  - entity: sensor.apollo_msr_1_office_co2
                    name: Office
                    color: var(--blue-color)
                    show_state: true
                    show_points: false
                line_width: 3
                font_size: 75
                hours_to_show: 30
                points_per_hour: 12
                update_interval: 300
                animate: true
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#allergy'
                show_header: true
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                button_type: name
                name: Allergy
                show_icon: false
              - type: heading
                icon: mdi:flower-pollen
                heading: Allergens
                heading_style: title
              - type: markdown
                content: "{%- set ns = namespace(allergens=[]) -%}\n{%- for id in\
                  \ range(1, 4) -%}\n  {%- set attr = \"allergen_name_\" ~ id -%}\n\
                  \  {%- if not state_attr(\"sensor.allergy_index_today\", attr) in\
                  \ [\"unknown\", \"unavailable\", None] -%}\n    {%- set ns.allergens\
                  \ = ns.allergens + [ state_attr(\"sensor.allergy_index_today\",\
                  \ attr) ] -%}\n  {%- endif -%}\n{%- endfor -%} {{ ns.allergens |\
                  \ join(\", \") }}\n{{ state_attr(\"sensor.allergy_index_forecasted_average\"\
                  , \"outlook\") | default(\"\", true) }}"
                text_only: true
              - type: heading
                icon: mdi:flower-pollen-outline
                heading: Forecast
                heading_style: title
              - type: heading
                icon: ''
                heading: Allergy
                heading_style: subtitle
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                entities:
                  - entity: sensor.allergy_index_today
                  - entity: sensor.allergy_index_tomorrow
                  - entity: sensor.allergy_index_forecasted_average
                min: 0
                max: 12
                decimal: 1
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                severity:
                  - color: var(--green-color)
                    from: '0'
                    to: '2.5'
                  - color: var(--light-green-color)
                    from: '2.5'
                    to: '4.9'
                  - color: var(--amber-color)
                    from: '4.9'
                    to: '7.3'
                  - color: var(--orange-color)
                    from: '7.3'
                    to: '9.7'
                  - color: var(--red-color)
                    from: '9.7'
                    to: '12'
              - type: heading
                icon: ''
                heading: Asthma
                heading_style: subtitle
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                entities:
                  - entity: sensor.asthma_index_today
                  - entity: sensor.asthma_index_tomorrow
                  - entity: sensor.asthma_index_forecasted_average
                min: 0
                max: 12
                decimal: 1
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                severity:
                  - color: var(--green-color)
                    from: '0'
                    to: '2.5'
                  - color: var(--light-green-color)
                    from: '2.5'
                    to: '4.9'
                  - color: var(--amber-color)
                    from: '4.9'
                    to: '7.3'
                  - color: var(--orange-color)
                    from: '7.3'
                    to: '9.7'
                  - color: var(--red-color)
                    from: '9.7'
                    to: '12'
              - type: heading
                icon: ''
                heading: Cold
                heading_style: subtitle
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                entities:
                  - entity: sensor.cold_flu_index_today
                  - entity: sensor.cold_flu_forecasted_average
                min: 0
                max: 12
                decimal: 1
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                severity:
                  - color: var(--green-color)
                    from: '0'
                    to: '2.5'
                  - color: var(--light-green-color)
                    from: '2.5'
                    to: '4.9'
                  - color: var(--amber-color)
                    from: '4.9'
                    to: '7.3'
                  - color: var(--orange-color)
                    from: '7.3'
                    to: '9.7'
                  - color: var(--red-color)
                    from: '9.7'
                    to: '12'
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#timers'
                show_header: true
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                  - more_info_popup
                button_type: name
                name: Timers
                show_icon: false
              - type: custom:auto-entities
                card:
                  type: custom:timer-bar-card
                filter:
                  template: "{%- set results = namespace(timers = []) -%} {%- set\
                    \ state_map = {\n  \"set\": \"active\",\n  \"ringing\": \"active\"\
                    ,\n} -%} {%- set icon_map = {\n  \"set\": \"mdi:timer\",\n  \"\
                    ringing\": \"mdi:timer-alert\",\n  \"paused\": \"mdi:timer-pause\"\
                    ,\n} -%} {%- for entity_id in integration_entities('google_home')\n\
                    \  if entity_id is contains '_timers'\n-%}\n  {%- set multiple\
                    \ = not loop.first or not loop.last -%}\n  {%- set suffix = ''\n\
                    \    if not multiple\n    else ' ⸱ ' + state_attr(entity_id, 'friendly_name')\
                    \ | replace(' timers', '')\n  -%}\n  {%- for t in state_attr(entity_id,\
                    \ 'timers') if as_timestamp(t.local_time_iso) > as_timestamp(now())\
                    \ -%}\n    {%- set label = t.label if t.label else t.duration\
                    \ | regex_replace('^0:0*', '') -%}\n    {%- set results.timers\
                    \ = results.timers + [{\n      'entity': entity_id,\n      'icon':\
                    \ icon_map[t.status],\n      'duration': {'fixed': t.duration},\n\
                    \      'end_time': {'fixed': t.local_time_iso},\n      'name':\
                    \ label + suffix,\n      'state': {'fixed': state_map[t.status]\
                    \ | default(t.status)},\n      'bar_width': 'calc(70% - 10em)',\n\
                    \      \"extend_paper_buttons_row\": {\n        \"position\":\
                    \ \"right\",\n        \"buttons\": [\n          {\n          \
                    \  \"icon\": \"mdi:close\",\n            \"tooltip\": \"Dismiss\"\
                    ,\n            \"tap_action\": {\n              \"action\": \"\
                    call-service\",\n              \"service\": \"google_home.delete_timer\"\
                    ,\n              \"service_data\": {\n                \"timer_id\"\
                    : t.timer_id,\n                \"entity_id\": entity_id,\n   \
                    \             \"skip_refresh\": False,\n              }\n    \
                    \        }\n          }\n        ]\n      }\n    }] -%}\n  {%-\
                    \ endfor -%}\n{%- endfor -%} {{ results.timers }}"
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#weather'
                show_header: true
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                button_type: name
                name: Weather
                show_icon: false
              - card_config_version: 8
                daily_forecast_days: 6
                entity_apparent_temp: sensor.openweathermap_feels_like_temperature
                entity_extended: sensor.forecast
                entity_forecast_icon: weather.openweathermap
                entity_forecast_icon_1: weather.openweathermap
                entity_forecast_max: weather.openweathermap
                entity_forecast_max_1: weather.openweathermap
                entity_forecast_min: weather.openweathermap
                entity_forecast_min_1: weather.openweathermap
                entity_humidity: sensor.openweathermap_humidity
                entity_pop: weather.openweathermap
                entity_pop_1: weather.openweathermap
                entity_pos: weather.openweathermap
                entity_pos_1: weather.openweathermap
                entity_pressure: sensor.openweathermap_pressure
                entity_summary: weather.openweathermap
                entity_summary_1: weather.openweathermap
                entity_sun: sun.sun
                entity_temperature: sensor.openweathermap_temperature
                entity_uv_alert_summary: sensor.openweathermap_uv_index
                entity_visibility: sensor.openweathermap_visibility
                entity_wind_bearing: sensor.openweathermap_wind_bearing
                entity_wind_speed: sensor.openweathermap_wind_speed
                extended_name_attr: precipitation_unit
                extended_use_attr: false
                forecast_type: daily
                option_color_fire_danger: false
                option_show_overview_separator: false
                option_static_icons: false
                option_tooltips: false
                section_order:
                  - overview
                  - extended
                  - slots
                  - daily_forecast
                show_section_daily_forecast: true
                show_section_slots: true
                slot_l1: forecast_max
                slot_l2: forecast_min
                slot_l3: wind
                slot_l4: pressure
                slot_l5: remove
                slot_l6: remove
                slot_l7: remove
                slot_l8: remove
                slot_r1: popforecast
                slot_r2: humidity
                slot_r3: uv_summary
                slot_r4: visibility
                slot_r5: remove
                slot_r6: remove
                slot_r7: remove
                slot_r8: remove
                type: custom:platinum-weather-card
                weather_entity: weather.openweathermap
              - type: custom:hourly-weather
                entity: weather.openweathermap
                name: ' '
                icons: true
                label_spacing: '2'
                num_segments: '12'
                show_wind: barb-and-speed
                card_mod:
                  style:
                    weather-bar$: ".main {\n  --mush-rgb-red: 244, 67, 54;\n  --mush-rgb-pink:\
                      \ 233, 30, 99;\n  --mush-rgb-purple: 156, 39, 176;\n  --mush-rgb-deep-purple:\
                      \ 103, 58, 183;\n  --mush-rgb-indigo: 63, 81, 181;\n  --mush-rgb-blue:\
                      \ 33, 150, 243;\n  --mush-rgb-light-blue: 3, 169, 244;\n  --mush-rgb-cyan:\
                      \ 0, 188, 212;\n  --mush-rgb-teal: 0, 150, 136;\n  --mush-rgb-green:\
                      \ 76, 175, 80;\n  --mush-rgb-light-green: 139, 195, 74;\n  --mush-rgb-lime:\
                      \ 205, 220, 57;\n  --mush-rgb-yellow: 255, 235, 59;\n  --mush-rgb-amber:\
                      \ 255, 193, 7;\n  --mush-rgb-orange: 255, 152, 0;\n  --mush-rgb-deep-orange:\
                      \ 255, 87, 34;\n  --mush-rgb-brown: 121, 85, 72;\n  --mush-rgb-grey:\
                      \ 158, 158, 158;\n  --mush-rgb-blue-grey: 96, 125, 139;\n  --mush-rgb-black:\
                      \ 0, 0, 0;\n  --mush-rgb-white: 255, 255, 255;\n  --color-clear-night:\
                      \ rgba(var(--mush-rgb-black), 0.2) !important;\n  --color-cloudy:\
                      \ rgba(var(--mush-rgb-grey), 0.2) !important;\n  --color-fog:\
                      \ var(--color-cloudy);\n  --color-hail: rgba(var(--mush-rgb-indigo),\
                      \ 0.2) !important;\n  --color-lightning: var(--color-rainy);\n\
                      \  --color-lightning-rainy: var(--color-rainy);\n  --color-partlycloudy:\
                      \ rgba(var(--mush-rgb-blue), 0.2) !important;\n  --color-pouring:\
                      \ var(--color-rainy);\n  --color-rainy: rgba(var(--mush-rgb-indigo),\
                      \ 0.2) !important;\n  --color-snowy: rgba(var(--mush-rgb-white),\
                      \ 0.2) !important;\n  --color-snowy-rainy: var(--color-partlycloudy);\n\
                      \  --color-sunny: rgba(var(--mush-rgb-yellow), 0.2) !important;\n\
                      \  --color-windy: var(--color-sunny);\n  --color-windy-variant:\
                      \ var(--color-sunny);\n  --color-exceptional: rgba(var(--mush-rgb-amber),\
                      \ 0.2) !important;\n}\n.bar > div {\n  height: 42px !important;\n\
                      }\n.bar > div:first-child {\n  border-top-left-radius: var(--ha-card-border-radius)\
                      \ !important;\n  border-bottom-left-radius: var(--ha-card-border-radius)\
                      \ !important;\n}\n.bar > div:last-child {\n  border-top-right-radius:\
                      \ var(--ha-card-border-radius) !important;\n  border-bottom-right-radius:\
                      \ var(--ha-card-border-radius) !important;\n}\n.bar > div >\
                      \ span {\n  text-shadow: none !important;\n  color: rgb(var(--primary-text-color));\n\
                      \  font-size: 14px;\n  font-weight: bold;\n}\n.axes > div >\
                      \ .bar-block-bottom > .hour {\n  font-size: 12px;\n  font-weight:\
                      \ bolder;\n}\n.axes > div > .bar-block-bottom > .temperature\
                      \ {\n  font-size: 12px;\n  font-weight: bolder;\n}\n.axes {\n\
                      \  margin-top: 10px !important;\n}\n"
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#ethan'
                button_type: name
                name: Ethan
                show_icon: false
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                sub_button:
                  - entity: sensor.ethan_bedroom_temperature
                    name: Temperature
                    show_state: true
                    state_background: false
                    show_background: false
              - type: heading
                icon: mdi:lightbulb-group
                heading: Lights
                heading_style: subtitle
                badges:
                  - type: custom:mushroom-template-badge
                    entity: light.ethan_bedroom_lights
                    content: '{{ expand(entity) | selectattr("state", "==", "on")
                      | list | count }}/{{ expand(entity) | list | count }}'
                    tap_action:
                      action: more-info
                    hold_action:
                      action: toggle
              - type: custom:bubble-card
                card_type: button
                button_type: slider
                card_layout: large
                entity: light.ethan_bedroom
                name: Main
                use_accent_color: true
                show_attribute: true
                attribute: brightness
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                modules:
                  - default
              - type: heading
                icon: mdi:light-flood-up
                heading: Nebula Projector
                heading_style: subtitle
                badges:
                  - type: custom:mushroom-template-badge
                    entity: switch.nebula_projector_ethan_main_switch
                    content: '{{ state_translated(entity) }}'
                    icon: mdi:{{ iif(is_state(entity, "on"), "lightbulb", "lightbulb-off")
                      }}
                    color: '{{ iif(is_state(entity, ''on''), ''green'', ''red'') }}'
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
              - type: conditional
                conditions:
                  - condition: state
                    entity: switch.nebula_projector_ethan_main_switch
                    state: 'on'
                card:
                  type: vertical-stack
                  cards:
                    - features:
                        - type: select-options
                      type: tile
                      entity: select.nebula_projector_ethan_scene
                      features_position: inline
                      hide_state: true
                      name: Scene
                      icon: mdi:crystal-ball
                    - type: custom:bubble-card
                      card_type: button
                      button_type: slider
                      card_layout: large
                      entity: light.nebula_projector_ethan_light
                      name: Projector
                      use_accent_color: false
                      show_attribute: true
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      sub_button:
                        - entity: light.nebula_projector_ethan_light
                          name: More Info
                          icon: mdi:palette
                          state_background: false
                      modules:
                        - default
                        - light_color_state
                    - square: false
                      type: grid
                      columns: 2
                      cards:
                        - type: custom:bubble-card
                          card_type: button
                          button_type: slider
                          card_layout: large
                          entity: light.nebula_projector_ethan_laser
                          name: Laser
                          use_accent_color: true
                          show_attribute: true
                          attribute: brightness
                          tap_action:
                            action: toggle
                          hold_action:
                            action: more-info
                          modules:
                            - default
                        - type: custom:bubble-card
                          card_type: button
                          button_type: slider
                          card_layout: large
                          entity: fan.nebula_projector_ethan_motor
                          name: Motor
                          use_accent_color: true
                          show_attribute: true
                          attribute: brightness
                          tap_action:
                            action: toggle
                          hold_action:
                            action: more-info
                          modules:
                            - default
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#emma'
                button_type: name
                name: Emma
                show_icon: false
                width_desktop: 40vw
                margin_top_desktop: 20vh
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
                sub_button:
                  - entity: sensor.emma_bedroom_temperature
                    name: Temperature
                    show_state: true
                    state_background: false
                    show_background: false
              - type: heading
                icon: mdi:lightbulb-group
                heading: Lights
                heading_style: subtitle
                badges:
                  - type: custom:mushroom-template-badge
                    entity: light.emma_bedroom_lights
                    content: '{{ expand(entity) | selectattr("state", "==", "on")
                      | list | count }}/{{ expand(entity) | list | count }}'
                    tap_action:
                      action: more-info
                    hold_action:
                      action: toggle
              - type: custom:bubble-card
                card_type: button
                button_type: slider
                card_layout: large
                entity: light.emma_bedroom
                name: Main
                use_accent_color: true
                show_attribute: true
                attribute: brightness
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                modules:
                  - default
              - type: heading
                icon: mdi:light-flood-up
                heading: Nebula Projector
                heading_style: subtitle
                badges:
                  - type: custom:mushroom-template-badge
                    entity: switch.nebula_projector_emma_main_switch
                    content: '{{ state_translated(entity) }}'
                    icon: mdi:{{ iif(is_state(entity, "on"), "lightbulb", "lightbulb-off")
                      }}
                    color: '{{ iif(is_state(entity, ''on''), ''green'', ''red'') }}'
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
              - type: conditional
                conditions:
                  - condition: state
                    entity: switch.nebula_projector_emma_main_switch
                    state: 'on'
                card:
                  type: vertical-stack
                  cards:
                    - features:
                        - type: select-options
                      type: tile
                      entity: select.nebula_projector_emma_scene
                      features_position: inline
                      hide_state: true
                      name: Scene
                      icon: mdi:crystal-ball
                    - type: custom:bubble-card
                      card_type: button
                      button_type: slider
                      card_layout: large
                      entity: light.nebula_projector_emma_light
                      name: Projector
                      use_accent_color: false
                      show_attribute: true
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      sub_button:
                        - entity: light.nebula_projector_emma_light
                          name: More Info
                          icon: mdi:palette
                          state_background: false
                      modules:
                        - default
                        - light_color_state
                    - square: false
                      type: grid
                      columns: 2
                      cards:
                        - type: custom:bubble-card
                          card_type: button
                          button_type: slider
                          card_layout: large
                          entity: light.nebula_projector_emma_laser
                          name: Laser
                          use_accent_color: true
                          show_attribute: true
                          attribute: brightness
                          tap_action:
                            action: toggle
                          hold_action:
                            action: more-info
                          modules:
                            - default
                        - type: custom:bubble-card
                          card_type: button
                          button_type: slider
                          card_layout: large
                          entity: fan.nebula_projector_emma_motor
                          name: Motor
                          use_accent_color: true
                          show_attribute: true
                          attribute: brightness
                          tap_action:
                            action: toggle
                          hold_action:
                            action: more-info
                          modules:
                            - default
    badges:
      - type: custom:mushroom-template-badge
        entity: weather.openweathermap
        label: Weather
        icon: '{% from "util.jinja" import weather_icon %} {{ weather_icon(entity)
          }}'
        content: '{{ state_translated(entity) | truncate(16) }} / {{ states("sensor.ecowitt_outdoor_temperature")
          | round() }} {{ state_attr("sensor.ecowitt_outdoor_temperature", "unit_of_measurement")
          }}'
        tap_action:
          action: navigate
          navigation_path: '#weather'
      - type: custom:mushroom-template-badge
        entity: sensor.ecobee_mode
        label: Climate
        content: '{{ states("sensor.ecobee_current_temperature") | round(0) }} {{
          state_attr("sensor.ecobee_current_temperature", "unit_of_measurement") }}'
        icon: mdi:thermostat
        color: "{% if is_state(entity, \"Heating\") %}\n  red\n{% elif is_state(entity,\
          \ \"Cooling\") %}\n  light-blue\n{% elif is_state(entity, \"Fan\") %}\n\
          \  amber\n{% elif is_state(entity, \"Off\") %}\n  grey\n{% else %}\n  blue-grey\n\
          {% endif %}"
        tap_action:
          action: none
      - type: custom:mushroom-template-badge
        entity: sensor.airgradient_kitchen_pm_2_5_aqi
        label: AQI
        content: '{{ states(entity) | int(default="?") }} / {{ states("sensor.airnow_air_quality_index")
          | int(default="?") }}'
        icon: '{{ iif(has_value(entity), "mdi:blur", "mdi:blur-off") }}'
        color: "{% if has_value(entity) %}\n  {% set level = states(entity) | float(default=0)\
          \ %}\n  {% if level >= 300 %}\n    red\n  {% elif level >= 200 %}\n    purple\n\
          \  {% elif level >= 150 %}\n    pink\n  {% elif level >= 100 %}\n    orange\n\
          \  {% elif level >= 50 %}\n    yellow\n  {% elif level >= 0 %}\n    green\n\
          \  {% endif %}\n{% else %}\n  grey\n{% endif %}"
        tap_action:
          action: navigate
          navigation_path: '#air-quality'
      - type: custom:mushroom-template-badge
        entity: sensor.allergy_index_today
        label: Allergy
        content: '{{ states(entity) | float(default=0) }}'
        icon: mdi:flower-pollen
        color: "{% set level = states(entity) | float(default=0) %}\n{% if level >=\
          \ 9.7 %}\n  red\n{% elif level >= 7.3 %}\n  orange\n{% elif level >= 4.9\
          \ %}\n  yellow\n{% elif level >= 2.5 %}\n  lime\n{% else %}\n  green\n{%\
          \ endif %}"
        tap_action:
          action: navigate
          navigation_path: '#allergy'
      - type: custom:mushroom-template-badge
        entity: sensor.garbage_collection
        label: Garbage
        content: "{% if is_state(\"input_boolean.garbage_collection\", \"on\") %}\n\
          \  At Curb\n{% elif is_state(entity, \"0\") %}\n  Today\n{% elif is_state(entity,\
          \ \"1\") %}\n  Tomorrow\n{% else %}\n  {{ state_attr(entity, \"days\") }}\
          \ days\n{% endif %}"
        icon: mdi:trash-can
        color: "{% if is_state(\"input_boolean.garbage_collection\", \"on\") %}\n\
          \  green\n{% elif is_state(entity, \"0\") %}\n  red\n{% elif is_state(entity,\
          \ \"1\") %}\n  yellow\n{% else %}\n  grey\n{% endif %}"
        tap_action:
          action: none
      - type: custom:mushroom-template-badge
        entity: sensor.recycle_collection
        label: Recycling
        content: "{% if is_state(\"input_boolean.recycle_collection\", \"on\") %}\n\
          \  At Curb\n{% elif is_state(entity, \"0\") %}\n  Today\n{% elif is_state(entity,\
          \ \"1\") %}\n  Tomorrow\n{% else %}\n  {{ state_attr(entity, \"days\") }}\
          \ days\n{% endif %}"
        icon: mdi:recycle
        color: "{% if is_state(\"input_boolean.recycle_collection\", \"on\") %}\n\
          \  green\n{% elif is_state(entity, \"0\") %}\n  red\n{% elif is_state(entity,\
          \ \"1\") %}\n  yellow\n{% else %}\n  grey\n{% endif %}"
        tap_action:
          action: none
      - type: custom:button-card
        template: badge
        entity: vacuum.r2dee2
        name: R2Dee2
        icon: mdi:robot-vacuum
        label: "[[[\n  if (entity.state === 'returning') return 'Returning';\n  else\
          \ return helpers.localize(entity);\n]]]\n"
        tap_action:
          action: none
        variables:
          color: "[[[\n  if (entity.state === 'cleaning') return 'var(--cyan-color)';\n\
            \  else if (entity.state === 'charging') return 'var(--orange-color)';\n\
            \  else if (entity.state === 'paused') return 'var(--yellow-color)';\n\
            \  else if (entity.state === 'returning') return 'var(--purple-color)';\n\
            \  else if (entity.state === 'docked') return 'var(--blue-grey-color)';\n\
            \  else return 'var(--grey-color)';\n]]]\n"
        state:
          - value: cleaning
            icon: mdi:robot-vacuum
            styles:
              icon:
                - animation: cleaning 10s linear infinite
        extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
          \ {\n      background: color-mix(in srgb, ${variables.color} 4%, var(--card-background-color)\
          \ 100%);\n    }\n  }\n  @keyframes cleaning {\n    0% { transform: translate(0px,\
          \ 5px) rotate(0deg); }\n    2% { transform: translate(0px, 5px) rotate(-45deg);\
          \ }\n\n    10% { transform: translate(-5px, 0px) rotate(-45deg); }\n   \
          \ 12% { transform: translate(-5px, 0px) rotate(45deg); }\n\n    20% { transform:\
          \ translate(0px, -5px) rotate(45deg); }\n    22% { transform: translate(0px,\
          \ -5px) rotate(135deg); }\n\n    30% { transform: translate(5px, 0px) rotate(135deg);\
          \ }\n    32% { transform: translate(5px, 0px) rotate(225deg); }\n\n    40%\
          \ { transform: translate(0px, 5px) rotate(225deg); }\n    42% { transform:\
          \ translate(0px, 5px) rotate(45deg); }\n    \n    50% { transform: translate(5px,\
          \ 0px) rotate(45deg); }\n    52% { transform: translate(5px, 0px) rotate(-45deg);\
          \ }\n\n    60% { transform: translate(0px, -5px) rotate(-45deg); }\n   \
          \ 62% { transform: translate(0px, -5px) rotate(-135deg); }\n\n    70% {\
          \ transform: translate(-5px, 0px) rotate(-135deg); }\n    72% { transform:\
          \ translate(-5px, 0px) rotate(-225deg); }\n\n    80% { transform: translate(0px,\
          \ 5px) rotate(-225deg); }\n    82% { transform: translate(0px, 5px) rotate(-180deg);\
          \ }\n\n    90% { transform: translate(0px, 5px) rotate(0deg); }\n    100%\
          \ { transform: translate(0px, 5px) rotate(0deg); }\n  }\n  `\n  ]]]\n"
      - type: custom:button-card
        template: badge
        entity: vacuum.dustin_mopman
        name: D. Mopman
        icon: mdi:robot-vacuum
        label: "[[[\n  if (entity.state === 'returning') return 'Returning';\n  else\
          \ return helpers.localize(entity);\n]]]\n"
        tap_action:
          action: none
        variables:
          color: "[[[\n  if (entity.state === 'cleaning') return 'var(--cyan-color)';\n\
            \  else if (entity.state === 'charging') return 'var(--orange-color)';\n\
            \  else if (entity.state === 'paused') return 'var(--yellow-color)';\n\
            \  else if (entity.state === 'returning') return 'var(--purple-color)';\n\
            \  else if (entity.state === 'docked') return 'var(--blue-grey-color)';\n\
            \  else return 'var(--grey-color)';\n]]]\n"
        state:
          - value: cleaning
            icon: mdi:robot-vacuum
            styles:
              icon:
                - animation: cleaning 10s linear infinite
        extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
          \ {\n      background: color-mix(in srgb, ${variables.color} 4%, var(--card-background-color)\
          \ 100%);\n    }\n  }\n  @keyframes cleaning {\n    0% { transform: translate(0px,\
          \ 5px) rotate(0deg); }\n    2% { transform: translate(0px, 5px) rotate(-45deg);\
          \ }\n\n    10% { transform: translate(-5px, 0px) rotate(-45deg); }\n   \
          \ 12% { transform: translate(-5px, 0px) rotate(45deg); }\n\n    20% { transform:\
          \ translate(0px, -5px) rotate(45deg); }\n    22% { transform: translate(0px,\
          \ -5px) rotate(135deg); }\n\n    30% { transform: translate(5px, 0px) rotate(135deg);\
          \ }\n    32% { transform: translate(5px, 0px) rotate(225deg); }\n\n    40%\
          \ { transform: translate(0px, 5px) rotate(225deg); }\n    42% { transform:\
          \ translate(0px, 5px) rotate(45deg); }\n    \n    50% { transform: translate(5px,\
          \ 0px) rotate(45deg); }\n    52% { transform: translate(5px, 0px) rotate(-45deg);\
          \ }\n\n    60% { transform: translate(0px, -5px) rotate(-45deg); }\n   \
          \ 62% { transform: translate(0px, -5px) rotate(-135deg); }\n\n    70% {\
          \ transform: translate(-5px, 0px) rotate(-135deg); }\n    72% { transform:\
          \ translate(-5px, 0px) rotate(-225deg); }\n\n    80% { transform: translate(0px,\
          \ 5px) rotate(-225deg); }\n    82% { transform: translate(0px, 5px) rotate(-180deg);\
          \ }\n\n    90% { transform: translate(0px, 5px) rotate(0deg); }\n    100%\
          \ { transform: translate(0px, 5px) rotate(0deg); }\n  }\n  `\n  ]]]\n"
      - type: custom:button-card
        template: badge
        entity: sensor.ge_dishwasher_cycle_state
        triggers_update:
          - binary_sensor.ge_dishwasher_is_clean
          - sensor.ge_dishwasher_duration
          - sensor.ge_dishwasher_time_remaining
        name: Dishwasher
        icon: mdi:dishwasher-off
        label: "[[[\n  if (states['binary_sensor.ge_dishwasher_is_clean'].state ===\
          \ 'on') return 'Clean';\n  else if (entity.state === 'N/A') return 'Off';\n\
          \  else return helpers.localize(entity);\n]]]\n"
        tap_action:
          action: none
        variables:
          color: "[[[\n  if (states['binary_sensor.ge_dishwasher_is_clean'].state\
            \ === 'on') return 'var(--green-color)';\n  else if (entity.state ===\
            \ 'Pre Wash') return 'var(--purple-color)';\n  else if (entity.state ===\
            \ 'Main Wash') return 'var(--cyan-color)';\n  else if (entity.state ===\
            \ 'Rinsing') return 'var(--blue-color)';\n  else if (entity.state ===\
            \ 'Sanitizing') return 'var(--light-blue-color)';\n  else if (entity.state\
            \ === 'Drying') return 'var(--orange-color)';\n  else return 'var(--grey-color)';\n\
            ]]]\n"
        state:
          - value: "[[[\n  if (entity.state === 'N/A' && states['binary_sensor.ge_dishwasher_is_clean'].state\
              \ === 'on') return true;\n  return false;\n]]]\n"
            operator: template
            icon: mdi:dishwasher
          - value: unavailable
          - value: N/A
            operator: '!='
            icon: mdi:dishwasher
            styles:
              icon:
                - animation: bounce 1.5s ease-in-out infinite, wash 1s ease-in-out
                    infinite
                - transform-origin: 50% 75%
        styles:
          img_cell:
            - background: "[[[\n  let entity_remain = \"sensor.ge_dishwasher_time_remaining\"\
                ;\n  let entity_duration = \"sensor.ge_dishwasher_duration\";\n\n\
                \  if (entity.state !== \"Off\"\n    && states[entity_remain].state\n\
                \    && states[entity_duration].state\n    && states[entity_duration].state\
                \ !== \"Off\"\n  ) {\n    let remaining = states[entity_remain].state.split(\"\
                :\");\n    remaining = parseInt(remaining[0] * 60) + parseInt(remaining[1]);\n\
                \    let duration = states[entity_duration].state.split(\":\");\n\
                \    duration = parseInt(duration[0] * 60) + parseInt(duration[1]);\n\
                \n    return `radial-gradient(var(--card-background-color) 60%, transparent\
                \ calc(60% + 1px)), conic-gradient(${variables.color} ${Math.round((remaining\
                \ / duration) * 100, 0)}% 0%, var(--card-background-color) 0% 100%)`;\n\
                \  } else {\n    return 'inherit';\n  }\n]]]\n"
        extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
          \ {\n      background: color-mix(in srgb, ${variables.color} 4%, var(--card-background-color)\
          \ 100%);\n    }\n  }\n  @keyframes bounce {\n    0%, 20%, 50%, 80%, 100%\
          \ {transform: translateY(0); }\n    40% { transform: translateY(-1.2px)\
          \ rotate(5deg); }\n    60% { transform: translateY(-1.1px) rotate(-4deg);\
          \ }\n  }\n  @keyframes wash {\n    50% { clip-path: polygon(0 0, 0 100%,\
          \ 35% 100%, 36% 74%, 31% 43%, 61% 40%, 71% 69%, 62% 78%, 36% 73%, 35% 100%,\
          \ 100% 100%, 100% 0); }\n  }\n  `\n]]]\n"
      - type: custom:button-card
        template: badge
        entity: sensor.ge_oven_current_state
        triggers_update:
          - sensor.ge_oven_kitchen_timer
          - sensor.ge_oven_kitchen_timer_duration
          - sensor.ge_oven_cook_time_remaining
          - sensor.ge_oven_cook_time_duration
        name: Oven
        icon: '[[[ return variables.icon ]]]'
        label: "[[[\n  if (entity.state !== 'Off') {\n    return helpers.localize(entity);\n\
          \  }\n  else if (states['sensor.ge_oven_cook_time_remaining'].state !==\
          \ 'Off') {\n    return \"Cook Time\";\n  }\n  else if (states['sensor.ge_oven_kitchen_timer'].state\
          \ !== 'Off') {\n    return \"Timer\";\n  }\n  else {\n    return helpers.localize(entity);\n\
          \  }\n]]]\n"
        tap_action:
          action: none
        variables:
          icon: "[[[\n  if (!['Off', 'unknown', 'unavailable'].includes(states['sensor.ge_oven_cook_time_remaining'].state))\
            \ return 'mdi:timer-play';\n  else if (!['Off', 'unknown', 'unavailable'].includes(states['sensor.ge_oven_kitchen_timer'].state))\
            \ return 'mdi:timer';\n  else return \"mdi:stove\";\n]]]\n"
          color: "[[[\n  if (entity.state === 'Preheat') return 'var(--yellow-color)';\n\
            \  else if (entity.state === 'Bake') return 'var(--red-color)';\n  else\
            \ if (entity.state === 'Air Fry') return 'var(--orange-color)';\n  else\
            \ if (entity.state === 'Convection') return 'var(--amber-color)';\n  else\
            \ if (!['Off', 'unknown', 'unavailable'].includes(states['sensor.ge_oven_cook_time_remaining'].state))\
            \ return 'var(--cyan-color)';\n  else if (!['Off', 'unknown', 'unavailable'].includes(states['sensor.ge_oven_kitchen_timer'].state))\
            \ return 'var(--purple-color)';\n  else return 'var(--grey-color)';\n\
            ]]]\n"
        styles:
          img_cell:
            - background: "[[[\n  let cook_time_remain = \"sensor.ge_oven_cook_time_remaining\"\
                ;\n  let cook_time_duration = \"sensor.ge_oven_cook_time_duration\"\
                ;\n\n  let timer_remain = \"sensor.ge_oven_kitchen_timer\";\n  let\
                \ timer_duration = \"sensor.ge_oven_kitchen_timer_duration\";\n\n\
                \  let remaining = \"\";\n  let duration = \"\";\n  if (states[cook_time_remain]?.state\n\
                \    && states[cook_time_duration]?.state !== \"Off\"\n  ) {\n   \
                \ remaining = states[cook_time_remain].state.split(\":\");\n    remaining\
                \ = parseInt(remaining[0] * 60) + parseInt(remaining[1]);\n    duration\
                \ = states[cook_time_duration].state.split(\":\");\n    duration =\
                \ parseInt(duration[0] * 60) + parseInt(duration[1]);\n\n    return\
                \ `radial-gradient(var(--card-background-color) 60%, transparent calc(60%\
                \ + 1px)), conic-gradient(${variables.color} ${Math.round((remaining\
                \ / duration) * 100, 0)}% 0%, var(--card-background-color) 0% 100%)`;\n\
                \  }\n  else if (states[timer_remain]?.state\n    && states[timer_duration]?.state\
                \ !== \"Off\"\n  ) {\n    remaining = states[timer_remain].state.split(\"\
                :\");\n    remaining = parseInt(remaining[0] * 60) + parseInt(remaining[1]);\n\
                \    duration = states[timer_duration].state.split(\":\");\n    duration\
                \ = parseInt(duration[0] * 60) + parseInt(duration[1]);\n\n    return\
                \ `radial-gradient(var(--card-background-color) 60%, transparent calc(60%\
                \ + 1px)), conic-gradient(${variables.color} ${Math.round((remaining\
                \ / duration) * 100, 0)}% 0%, var(--card-background-color) 0% 100%)`;\n\
                \  }\n]]]\n"
        extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
          \ {\n      background: color-mix(in srgb, ${variables.color} 4%, var(--card-background-color)\
          \ 100%);\n    }\n  }\n  `\n  ]]]\n"
      - type: custom:button-card
        template: badge
        entity: input_boolean.washer_status
        name: Washer
        icon: mdi:washing-machine-off
        label: "[[[\n  if (entity.state === 'on') return 'Running';\n  else return\
          \ 'Off';\n]]]\n"
        tap_action:
          action: none
        variables:
          color: "[[[\n  if (entity.state === 'on') return 'var(--blue-color)';\n\
            \  else return 'var(--grey-color)';\n]]]\n"
        state:
          - value: 'on'
            icon: mdi:washing-machine
            styles:
              icon:
                - animation: shake 400ms ease-in-out infinite, drum 2s ease infinite
                - transform-origin: 50% 110%
        extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
          \ {\n      background: color-mix(in srgb, ${variables.color} 4%, var(--card-background-color)\
          \ 100%);\n    }\n  }\n  @keyframes shake {\n    0%, 100% { transform: translate(0,\
          \ 0) rotate(0); }\n    20%  { transform: translate(0.4px, -0.4px) rotate(-4deg);\
          \ }\n    40%  { transform: translate(-0.4px, 0.4px) rotate(4deg); }\n  \
          \  60%  { transform: translate(0.4px, 0.4px) rotate(-4deg); }\n    80% \
          \ { transform: translate(-0.4px, -0.4px) rotate(4deg); }\n  }\n  @keyframes\
          \ drum {\n    50%  { clip-path: polygon(0 0, 0 100%, 35% 100%, 34% 68%,\
          \ 60% 41%, 71% 56%, 65% 74%, 47% 79%, 34% 68%, 35% 100%, 100% 100%, 100%\
          \ 0); }\n  }\n  `\n  ]]]\n"
      - type: custom:button-card
        template: badge
        entity: input_boolean.dryer_status
        name: Dryer
        icon: mdi:tumble-dryer-off
        label: "[[[\n  if (entity.state === 'on') return 'Running';\n  else return\
          \ 'Off';\n]]]\n"
        tap_action:
          action: none
        variables:
          color: "[[[\n  if (entity.state === 'on') return 'var(--orange-color)';\n\
            \  else return 'var(--grey-color)';\n]]]\n"
        state:
          - value: 'on'
            icon: mdi:tumble-dryer
            styles:
              icon:
                - animation: shake 400ms ease-in-out infinite, drum 1s infinite
                - transform-origin: 50% 65%
        extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
          \ {\n      background: color-mix(in srgb, ${variables.color} 4%, var(--card-background-color)\
          \ 100%);\n    }\n  }\n  @keyframes shake {\n    0%, 100% { transform: rotate(4deg);\
          \ }\n    50%  { transform: rotate(-4deg); }\n  }\n  @keyframes drum {\n\
          \    50%  { clip-path: polygon(0 0, 0 100%, 35% 100%, 36% 74%, 31% 43%,\
          \ 61% 40%, 71% 69%, 62% 78%, 36% 73%, 35% 100%, 100% 100%, 100% 0); }\n\
          \  }\n  `\n  ]]]\n"
      - type: custom:mushroom-template-badge
        icon: mdi:timer
        color: lime
        tap_action:
          action: navigate
          navigation_path: '#timers'
        visibility:
          - condition: or
            conditions:
              - condition: state
                entity: sensor.living_room_speaker_timers
                state_not: unavailable
              - condition: state
                entity: sensor.family_room_speaker_timers
                state_not: unavailable
              - condition: state
                entity: sensor.office_speaker_timers
                state_not: unavailable
        label: Timer
        content: "{%- from 'easy_time.jinja' import easy_time -%}\n{%- set _ = namespace(found=false)\
          \ -%}\n{%- for entity_id in integration_entities('google_home') if entity_id\
          \ is contains '_timers' -%}\n  {%- if has_value(entity_id) and not _.found\
          \ -%}\n    {%- set _.found = true -%}\n    {{ easy_time(entity_id, short=true)\
          \ }}\n  {%- endif -%}\n{%- endfor -%}"
    cards: []
    visible:
      - user: 092efcafdaeb41838fd9204177be8a43
      - user: f2a4e20a373e4c5b8d030da2a313eb28
  - title: Living Room
    path: living
    icon: mdi:sofa-single
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: light.living_room_lights
                content: '{{ expand(entity) | selectattr("state", "==", "on") | list
                  | count }}/{{ expand(entity) | list | count }}'
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.living_room_fan_light
            name: Fan Light
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            modules:
              - default
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.living_room_floor_lamp
            name: Floor Lamp
            use_accent_color: false
            show_attribute: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            sub_button:
              - entity: light.living_room_floor_lamp
                name: More Info
                icon: mdi:palette
                state_background: false
            modules:
              - default
              - light_color_state
          - features:
              - type: fan-speed
            type: tile
            layout_options:
              grid_columns: full
            entity: fan.living_room_ceiling
            name: Fan
            hide_state: true
            features_position: inline
            vertical: false
            card_mod:
              style:
                .: "ha-tile-icon {\n  {% if is_state(config.entity, 'on') %}\n   \
                  \ {% set speed = state_attr(config.entity, 'percentage') %}\n  \
                  \  {% set color = {\n      33: \"green\",\n      66: \"orange\"\
                  ,\n      100: \"red\"\n    }[speed] %}\n  {% else %}\n    {% set\
                  \ color = \"grey\" %}\n  {% endif %}\n  --tile-color: var(--{{ color\
                  \ }}-color);\n}\nha-state-icon {\n  {% if is_state(config.entity,\
                  \ 'on') %}\n    {% set speed = state_attr(config.entity, 'percentage')\
                  \ %}\n    animation: {{ (2 - (speed / 100)) | round(2) }}s rotation\
                  \ linear infinite;\n  {% endif %}\n}\n@keyframes rotation {\n  0%\
                  \ {transform: rotate(0deg);}\n  100% {transform: rotate(360deg);}\n\
                  }\n"
      - type: grid
        cards:
          - type: heading
            icon: mdi:play-speed
            heading: Media
            heading_style: subtitle
            badges: []
          - type: custom:streamline-card
            template: media_card
            variables:
              - entity: media_player.universal_living_room
            visibility:
              - condition: state
                entity: media_player.universal_living_room
                state_not: unavailable
              - condition: state
                entity: media_player.universal_living_room
                state_not: unknown
          - type: custom:mini-media-player
            entity: media_player.living_room_speaker
            name: Google Home
            icon: mdi:dots-horizontal-circle
            info: scroll
            hide:
              power: true
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.ecobee_occupancy
        icon: "{%- if is_state(\"binary_sensor.ecobee_motion\", \"on\") -%}\n  mdi:motion-sensor\n\
          {%- elif is_state(entity, \"on\") -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n\
          {%- endif -%}"
        color: "{%- if is_state(\"binary_sensor.ecobee_motion\", \"on\") -%}\n  orange\n\
          {%- elif is_state(entity, \"on\") -%}\n  light-green\n{%- else -%}\n  grey\n\
          {%- endif -%}"
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.ecobee_current_temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.ecobee_current_humidity
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:water-percent
        color: '{% from "util.jinja" import room_humidity %}

          {{ room_humidity(entity) }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: camera.livingroom
        icon: mdi:cctv
        color: '{{ iif(has_value(entity), "cyan", "red") }}'
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Living Room
              size: fullscreen
              content:
                type: custom:streamline-card
                template: camera_popup
                variables:
                  - camera: camera.livingroom
                  - stream: livingroom
      - type: custom:mushroom-template-badge
        icon: mdi:remote-tv
        color: orange
        content: Remote
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Living Room Media
              content:
                type: custom:vertical-stack-in-card
                card_mod:
                  style: "ha-card {\n  --ha-card-background: none;\n  --ha-card-border-width:\
                    \ 0;\n}\n"
                cards:
                  - type: custom:streamline-card
                    template: remote_living
      - type: custom:mushroom-template-badge
        icon: mdi:dots-horizontal-circle
        color: blue
        content: Announce
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Send Message
              right_button: Send
              right_button_action:
                service: script.media_play
                data:
                  media_player: media_player.living_room_speaker
                  volume: 80
              content:
                - name: message
                  label: Message
                  selector:
                    select:
                      custom_value: true
                      options:
                        - label: School
                          value: Time to go to School!
                        - label: Snack
                          value: It's snack time!
                        - label: Lunch
                          value: Hey, come get some lunch.
                        - label: Dinner
                          value: It's time for dinner. Wash your hands!
                        - label: Breakfast
                          value: It's time for breakfast. Wash your hands!
                        - label: Bedtime
                          value: It's time for bed.
                        - label: Ethan down-stairs
                          value: Hey Ethan, come down-stairs please.
                        - label: Emma down-stairs
                          value: Hey Emma, come down-stairs please.
                        - label: Kids down-stairs
                          value: Hey kids, come down-stairs please.
    cards: []
    subview: true
  - title: Kitchen
    path: kitchen
    icon: mdi:fridge-variant
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: light.kitchen_lights
                content: '{{ expand(entity) | selectattr("state", "==", "on") | list
                  | count }}/{{ expand(entity) | list | count }}'
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.kitchen
            name: Main
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            modules:
              - default
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.kitchen_island
            name: Island
            use_accent_color: false
            show_attribute: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            sub_button:
              - entity: light.kitchen_island
                name: More Info
                icon: mdi:palette
                light_background: true
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
              - light_color_state
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.dining_room
            name: Dining
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.kitchen_occupancy
        icon: "{%- if is_state(\"binary_sensor.kitchen_motion\", \"on\") -%}\n  mdi:motion-sensor\n\
          {%- elif is_state(entity, \"on\") -%}\n  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n\
          {%- endif -%}"
        color: "{%- if is_state(\"binary_sensor.kitchen_motion\", \"on\") -%}\n  orange\n\
          {%- elif is_state(entity, \"on\") -%}\n  light-green\n{%- else -%}\n  grey\n\
          {%- endif -%}"
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.kitchen_temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.airgradient_kitchen_co2
        color: green
        tap_action:
          action: more-info
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.airgradient_kitchen_pm_2_5_aqi
        color: blue-grey
    subview: true
  - title: Family Room
    path: family
    icon: mdi:gamepad-circle
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: script.family_room_game_light_mode
                icon: mdi:light-flood-up
                color: pink
                tap_action:
                  action: call-service
                  service: script.family_room_game_light_mode
              - type: custom:mushroom-template-badge
                entity: light.family_room_lights
                content: '{{ expand(entity) | selectattr("state", "==", "on") | list
                  | count }}/{{ expand(entity) | list | count }}'
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.family_room
            name: Main
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            modules:
              - default
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.family_room_lamp
            name: Lamp
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            modules:
              - default
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.basement_hallway
            name: Hallway
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
          - type: custom:bubble-card
            card_type: button
            button_type: switch
            card_layout: large
            entity: light.stairway
            name: Stairs
            use_accent_color: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
      - type: grid
        cards:
          - type: heading
            icon: mdi:play-speed
            heading: Media
            heading_style: subtitle
            badges: []
          - type: custom:streamline-card
            template: media_card
            variables:
              - entity: media_player.universal_family_room
            visibility:
              - condition: state
                entity: media_player.universal_family_room
                state_not: unavailable
              - condition: state
                entity: media_player.universal_family_room
                state_not: unknown
          - type: custom:mini-media-player
            entity: media_player.family_room_speaker
            name: Google Home
            icon: mdi:dots-horizontal-circle
            info: scroll
            hide:
              power: true
      - type: grid
        cards:
          - type: heading
            icon: mdi:spotlight
            heading: Dreamscreen
            heading_style: subtitle
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Video
                entity: dreamscreen.family_room
                icon: mdi:television
                icon_color: "{%- if is_state_attr(entity, \"device_mode\", 1) -%}\n\
                  \  purple\n{%- else -%}\n  grey\n{%- endif -%}"
                tap_action:
                  action: call-service
                  service: dreamscreen.set_mode
                  data:
                    entity_id: dreamscreen.family_room
                    mode: 1
                  target:
                    entity_id: dreamscreen.family_room
              - type: custom:mushroom-template-card
                primary: Music
                entity: dreamscreen.family_room
                icon: mdi:music-note
                icon_color: "{%- if is_state_attr(entity, \"device_mode\", 2) -%}\n\
                  \  blue\n{%- else -%}\n  grey\n{%- endif -%}"
                tap_action:
                  action: call-service
                  service: dreamscreen.set_mode
                  data:
                    entity_id: dreamscreen.family_room
                    mode: 2
                  target:
                    entity_id: dreamscreen.family_room
              - type: custom:mushroom-template-card
                primary: Ambient
                entity: dreamscreen.family_room
                icon: mdi:lightbulb-on
                icon_color: "{%- if is_state_attr(entity, \"device_mode\", 3) -%}\n\
                  \  amber\n{%- else -%}\n  grey\n{%- endif -%}"
                tap_action:
                  action: call-service
                  service: dreamscreen.set_mode
                  data:
                    entity_id: dreamscreen.family_room
                    mode: 3
                  target:
                    entity_id: dreamscreen.family_room
          - type: custom:mushroom-template-card
            primary: Power
            entity: dreamscreen.family_room
            icon: mdi:power
            icon_color: red
            tap_action:
              action: call-service
              service: dreamscreen.set_mode
              data:
                entity_id: dreamscreen.family_room
                mode: 0
              target:
                entity_id: dreamscreen.family_room
            visibility:
              - condition: state
                entity: dreamscreen.family_room
                state: 'on'
            layout_options:
              grid_columns: full
          - type: conditional
            conditions:
              - entity: sensor.dreamscreen_family_room_mode
                state: Ambient
            card:
              features:
                - type: select-options
              type: tile
              entity: input_select.dreamscreen_family_room_scene
              name: Ambient Scene
              features_position: inline
              vertical: false
              color: amber
              hide_state: true
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.family_room_occupancy
        icon: "{%- if is_state(\"binary_sensor.family_room_motion\", \"on\") -%}\n\
          \  mdi:motion-sensor\n{%- elif is_state(entity, \"on\") -%}\n  mdi:walk\n\
          {%- else -%}\n  mdi:motion-sensor-off\n{%- endif -%}"
        color: "{%- if is_state(\"binary_sensor.family_room_motion\", \"on\") -%}\n\
          \  orange\n{%- elif is_state(entity, \"on\") -%}\n  light-green\n{%- else\
          \ -%}\n  grey\n{%- endif -%}"
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.family_room_temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: binary_sensor.quest_in_use
        icon: fapro:meta
        color: '{{ iif(is_state(entity, "on"), "blue", "grey") }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: camera.familyroom
        icon: mdi:cctv
        color: '{{ iif(has_value(entity), "cyan", "red") }}'
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Family Room
              size: fullscreen
              content:
                type: custom:streamline-card
                template: camera_popup
                variables:
                  - camera: camera.familyroom
                  - stream: familyroom
      - type: custom:mushroom-template-badge
        icon: mdi:remote-tv
        color: orange
        content: Remote
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Family Room Media
              content:
                type: custom:vertical-stack-in-card
                card_mod:
                  style: "ha-card {\n  --ha-card-background: none;\n  --ha-card-border-width:\
                    \ 0;\n}\n"
                cards:
                  - type: custom:streamline-card
                    template: remote_family
        hold_action:
          action: perform-action
          perform_action: script.find_remote
          data:
            media_player: media_player.shield_family_room
      - type: custom:mushroom-template-badge
        icon: mdi:dots-horizontal-circle
        color: blue
        content: Announce
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Send Message
              right_button: Send
              right_button_action:
                service: script.media_play
                data:
                  media_player: media_player.family_room_speaker
                  volume: 90
              content:
                - name: message
                  label: Message
                  selector:
                    select:
                      custom_value: true
                      options:
                        - label: School
                          value: Time to go to School!
                        - label: Snack
                          value: It's snack time!
                        - label: Lunch
                          value: Hey, come get some lunch.
                        - label: Dinner
                          value: Head up-stairs, it's time for dinner. Don't forget
                            to wash your hands!
                        - label: Breakfast
                          value: It's time for breakfast. Wash your hands!
                        - label: Ethan up-stairs
                          value: Hey Ethan, come up-stairs please.
                        - label: Emma up-stairs
                          value: Hey Emma, come up-stairs please.
                        - label: Kids up-stairs
                          value: Hey kids, come up-stairs please.
      - type: custom:mushroom-template-badge
        entity: script.family_room_play_mode
        icon: mdi:desktop-tower
        color: cyan
        tap_action:
          action: perform-action
          perform_action: script.family_room_play_mode
          target: {}
          data:
            activity: Computer
        label: ''
        content: Game Mode
    cards: []
    subview: true
  - title: Theater Room
    path: theater
    icon: mdi:projector
    type: sections
    max_columns: 2
    sections: []
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.theater_room_occupancy
        icon: "{%- if is_state(\"binary_sensor.theater_room_motion\", \"on\") -%}\n\
          \  mdi:motion-sensor\n{%- elif is_state(entity, \"on\") -%}\n  mdi:walk\n\
          {%- else -%}\n  mdi:motion-sensor-off\n{%- endif -%}"
        color: "{%- if is_state(\"binary_sensor.theater_room_motion\", \"on\") -%}\n\
          \  orange\n{%- elif is_state(entity, \"on\") -%}\n  light-green\n{%- else\
          \ -%}\n  grey\n{%- endif -%}"
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.theater_room_temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
    subview: true
  - title: Josh's Office
    path: josh-office
    icon: mdi:chair-rolling
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: switch.adaptive_lighting_adapt_brightness_office
                icon: mdi:brightness-auto
                color: '{{ iif(is_state(entity, "on"), "amber", "gray") }}'
                tap_action:
                  action: toggle
              - type: custom:mushroom-template-badge
                entity: switch.adaptive_lighting_adapt_color_office
                icon: mdi:palette
                color: '{{ iif(is_state(entity, "on"), "pink", "gray") }}'
                tap_action:
                  action: toggle
              - type: custom:mushroom-template-badge
                entity: switch.adaptive_lighting_sleep_mode_office
                icon: mdi:sleep
                color: '{{ iif(is_state(entity, "on"), "cyan", "gray") }}'
                tap_action:
                  action: toggle
              - type: custom:mushroom-template-badge
                entity: switch.adaptive_lighting_office
                icon: mdi:theme-light-dark
                color: '{{ iif(is_state(entity, "on"), "green", "gray") }}'
                tap_action:
                  action: toggle
              - type: custom:mushroom-template-badge
                entity: light.joshua_office_lights
                content: '{{ expand(entity) | selectattr("state", "==", "on") | list
                  | count }}/{{ expand(entity) | list | count }}'
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.joshua_office
            name: Main
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            modules:
              - default
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.wled_joshua_office_desk
            name: Desk
            use_accent_color: false
            show_attribute: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            sub_button:
              - entity: light.wled_joshua_office_desk
                name: More Info
                icon: mdi:palette
                state_background: false
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
              - light_color_state
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.joshua_office_lamp
            name: Lamp
            use_accent_color: false
            show_attribute: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            sub_button:
              - entity: light.joshua_office_lamp
                name: More Info
                icon: mdi:palette
                state_background: false
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
              - light_color_state
          - type: custom:bubble-card
            card_type: button
            button_type: switch
            card_layout: large
            entity: light.joshua_office_shelf_led
            name: Shelf
            use_accent_color: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
          - type: custom:bubble-card
            card_type: button
            button_type: switch
            card_layout: large
            entity: light.joshua_office_workbench
            name: Workbench
            use_accent_color: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
          - type: custom:mini-media-player
            entity: media_player.office_speaker
            name: Google Home
            icon: mdi:dots-horizontal-circle
            info: scroll
            hide:
              power: true
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.apollo_msr_1_office_radar_target
        icon: "{%- if is_state(\"binary_sensor.apollo_msr_1_office_radar_moving_target\"\
          , \"on\") -%}\n  mdi:motion-sensor\n{%- elif is_state(entity, \"on\") -%}\n\
          \  mdi:walk\n{%- else -%}\n  mdi:motion-sensor-off\n{%- endif -%}"
        color: "{%- if is_state(\"binary_sensor.apollo_msr_1_office_radar_moving_target\"\
          , \"on\") -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n  light-green\n\
          {%- else -%}\n  disabled\n{%- endif -%}"
        tap_action:
          action: more-info
        hold_action:
          action: none
      - type: custom:mushroom-template-badge
        entity: sensor.joshua_office_temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.apollo_msr_1_office_co2
        color: green
        tap_action:
          action: more-info
    subview: true
  - title: Amy's Office
    path: amy-office
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: switch.adaptive_lighting_adapt_brightness_amy_office
                icon: mdi:brightness-auto
                color: '{{ iif(is_state(entity, "on"), "amber", "gray") }}'
                tap_action:
                  action: toggle
              - type: custom:mushroom-template-badge
                entity: switch.adaptive_lighting_adapt_color_amy_office
                icon: mdi:palette
                color: '{{ iif(is_state(entity, "on"), "pink", "gray") }}'
                tap_action:
                  action: toggle
              - type: custom:mushroom-template-badge
                entity: switch.adaptive_lighting_sleep_mode_amy_office
                icon: mdi:sleep
                color: '{{ iif(is_state(entity, "on"), "cyan", "gray") }}'
                tap_action:
                  action: toggle
              - type: custom:mushroom-template-badge
                entity: switch.adaptive_lighting_amy_office
                icon: mdi:theme-light-dark
                color: '{{ iif(is_state(entity, "on"), "green", "gray") }}'
                tap_action:
                  action: toggle
              - type: custom:mushroom-template-badge
                entity: light.amy_office_lights
                content: '{{ expand(entity) | selectattr("state", "==", "on") | list
                  | count }}/{{ expand(entity) | list | count }}'
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.amy_office
            name: Main
            use_accent_color: false
            show_attribute: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            sub_button:
              - entity: light.amy_office
                name: More Info
                icon: mdi:palette
                light_background: true
            modules:
              - default
              - light_color_state
    icon: mdi:skull
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.amy_office_occupancy
        icon: "{%- if is_state(\"binary_sensor.amy_office_motion\", \"on\") -%}\n\
          \  mdi:motion-sensor\n{%- elif is_state(entity, \"on\") -%}\n  mdi:walk\n\
          {%- else -%}\n  mdi:motion-sensor-off\n{%- endif -%}"
        color: "{%- if is_state(\"binary_sensor.amy_office_motion\", \"on\") -%}\n\
          \  orange\n{%- elif is_state(entity, \"on\") -%}\n  light-green\n{%- else\
          \ -%}\n  grey\n{%- endif -%}"
        tap_action:
          action: more-info
        hold_action:
          action: none
      - type: custom:mushroom-template-badge
        entity: sensor.amy_office_temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
    subview: true
  - title: Ethan
    path: ethan
    icon: mdi:toy-brick
    type: sections
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: light.ethan_bedroom_lights
                content: '{{ expand(entity) | selectattr("state", "==", "on") | list
                  | count }}/{{ expand(entity) | list | count }}'
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.ethan_bedroom
            name: Main
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            modules:
              - default
      - type: grid
        cards:
          - type: heading
            icon: mdi:light-flood-up
            heading: Nebula Projector
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: switch.nebula_projector_ethan_main_switch
                content: '{{ state_translated(entity) }}'
                icon: mdi:{{ iif(is_state(entity, "on"), "lightbulb", "lightbulb-off")
                  }}
                color: '{{ iif(is_state(entity, ''on''), ''green'', ''red'') }}'
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
          - type: vertical-stack
            cards:
              - features:
                  - type: select-options
                type: tile
                entity: select.nebula_projector_ethan_scene
                features_position: inline
                hide_state: true
                name: Scene
                icon: mdi:crystal-ball
              - type: custom:bubble-card
                card_type: button
                button_type: slider
                card_layout: large
                entity: light.nebula_projector_ethan_light
                name: Projector
                use_accent_color: false
                show_attribute: true
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                sub_button:
                  - entity: light.nebula_projector_ethan_light
                    name: More Info
                    icon: mdi:palette
                    state_background: false
                modules:
                  - default
                  - light_color_state
              - square: false
                type: grid
                columns: 2
                cards:
                  - type: custom:bubble-card
                    card_type: button
                    button_type: slider
                    card_layout: large
                    entity: light.nebula_projector_ethan_laser
                    name: Laser
                    use_accent_color: true
                    show_attribute: true
                    attribute: brightness
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    modules:
                      - default
                  - type: custom:bubble-card
                    card_type: button
                    button_type: slider
                    card_layout: large
                    entity: fan.nebula_projector_ethan_motor
                    name: Motor
                    use_accent_color: true
                    show_attribute: true
                    attribute: brightness
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    modules:
                      - default
            visibility:
              - condition: state
                entity: switch.nebula_projector_ethan_main_switch
                state: 'on'
    max_columns: 2
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.ethan_bedroom_occupancy
        icon: "{%- if is_state(\"binary_sensor.ethan_bedroom_motion\", \"on\") -%}\n\
          \  mdi:motion-sensor\n{%- elif is_state(entity, \"on\") -%}\n  mdi:walk\n\
          {%- else -%}\n  mdi:motion-sensor-off\n{%- endif -%}"
        color: "{%- if is_state(\"binary_sensor.ethan_bedroom_motion\", \"on\") -%}\n\
          \  orange\n{%- elif is_state(entity, \"on\") -%}\n  light-green\n{%- else\
          \ -%}\n  grey\n{%- endif -%}"
        tap_action:
          action: more-info
        hold_action:
          action: none
      - type: custom:mushroom-template-badge
        entity: sensor.ethan_bedroom_temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
    subview: true
  - title: Emma
    path: emma
    icon: mdi:cat
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: light.emma_bedroom_lights
                content: '{{ expand(entity) | selectattr("state", "==", "on") | list
                  | count }}/{{ expand(entity) | list | count }}'
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.emma_bedroom
            name: Main
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            modules:
              - default
      - type: grid
        cards:
          - type: heading
            icon: mdi:light-flood-up
            heading: Nebula Projector
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: switch.nebula_projector_emma_main_switch
                content: '{{ state_translated(entity) }}'
                icon: mdi:{{ iif(is_state(entity, "on"), "lightbulb", "lightbulb-off")
                  }}
                color: '{{ iif(is_state(entity, ''on''), ''green'', ''red'') }}'
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
          - type: vertical-stack
            cards:
              - features:
                  - type: select-options
                type: tile
                entity: select.nebula_projector_emma_scene
                features_position: inline
                vertical: false
                hide_state: true
                name: Scene
                icon: mdi:crystal-ball
              - type: custom:bubble-card
                card_type: button
                button_type: slider
                card_layout: large
                entity: light.nebula_projector_emma_light
                name: Projector
                use_accent_color: false
                show_attribute: true
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                sub_button:
                  - entity: light.nebula_projector_emma_light
                    name: More Info
                    icon: mdi:palette
                    state_background: false
                modules:
                  - default
                  - light_color_state
              - square: false
                type: grid
                columns: 2
                cards:
                  - type: custom:bubble-card
                    card_type: button
                    button_type: slider
                    card_layout: large
                    entity: light.nebula_projector_emma_laser
                    name: Laser
                    use_accent_color: true
                    show_attribute: true
                    attribute: brightness
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    modules:
                      - default
                  - type: custom:bubble-card
                    card_type: button
                    button_type: slider
                    card_layout: large
                    entity: fan.nebula_projector_emma_motor
                    name: Motor
                    use_accent_color: true
                    show_attribute: true
                    attribute: brightness
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    modules:
                      - default
            visibility:
              - condition: state
                entity: switch.nebula_projector_emma_main_switch
                state: 'on'
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.emma_bedroom_occupancy
        icon: "{%- if is_state(\"binary_sensor.emma_bedroom_motion\", \"on\") -%}\n\
          \  mdi:motion-sensor\n{%- elif is_state(entity, \"on\") -%}\n  mdi:walk\n\
          {%- else -%}\n  mdi:motion-sensor-off\n{%- endif -%}"
        color: "{%- if is_state(\"binary_sensor.emma_bedroom_motion\", \"on\") -%}\n\
          \  orange\n{%- elif is_state(entity, \"on\") -%}\n  light-green\n{%- else\
          \ -%}\n  grey\n{%- endif -%}"
        tap_action:
          action: more-info
        hold_action:
          action: none
      - type: custom:mushroom-template-badge
        entity: sensor.emma_bedroom_temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
    subview: true
  - title: Main Bedroom
    path: main-bed
    icon: mdi:bed-king
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: light.main_bedroom_lights
                content: '{{ expand(entity) | selectattr("state", "==", "on") | list
                  | count }}/{{ expand(entity) | list | count }}'
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.main_bedroom
            name: Main
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            modules:
              - default
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.main_bedroom_fan_light
            name: Fan Light
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.main_bedroom_floor_lamp
            name: Floor Lamp
            use_accent_color: false
            show_attribute: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            sub_button:
              - entity: light.main_bedroom_floor_lamp
                name: More Info
                icon: mdi:palette
                state_background: false
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
              - light_color_state
          - features:
              - type: fan-speed
            type: tile
            layout_options:
              grid_columns: full
            entity: fan.main_bedroom_ceiling
            name: Fan
            hide_state: true
            features_position: inline
            vertical: false
            card_mod:
              style:
                .: "ha-tile-icon {\n  {% if is_state(config.entity, 'on') %}\n   \
                  \ {% set speed = state_attr(config.entity, 'percentage') %}\n  \
                  \  {% set color = {\n      33: \"green\",\n      66: \"orange\"\
                  ,\n      100: \"red\"\n    }[speed] %}\n  {% else %}\n    {% set\
                  \ color = \"grey\" %}\n  {% endif %}\n  --tile-color: var(--{{ color\
                  \ }}-color);\n}\nha-state-icon {\n  {% if is_state(config.entity,\
                  \ 'on') %}\n    {% set speed = state_attr(config.entity, 'percentage')\
                  \ %}\n    animation: {{ (2 - (speed / 100)) | round(2) }}s rotation\
                  \ linear infinite;\n  {% endif %}\n}\n@keyframes rotation {\n  0%\
                  \ {transform: rotate(0deg);}\n  100% {transform: rotate(360deg);}\n\
                  }\n"
      - type: grid
        cards:
          - type: heading
            icon: mdi:play-speed
            heading: Media
            heading_style: subtitle
            badges: []
          - type: custom:streamline-card
            template: media_card
            variables:
              - entity: media_player.universal_main_bedroom
            visibility:
              - condition: state
                entity: media_player.universal_main_bedroom
                state_not: unavailable
              - condition: state
                entity: media_player.universal_main_bedroom
                state_not: unknown
      - type: grid
        cards:
          - type: heading
            heading: Bed Presence
            heading_style: subtitle
            icon: mdi:bunk-bed
          - type: tile
            entity: binary_sensor.bed_presence_f56148_bed_occupied_both
            name: Both
          - type: tile
            entity: binary_sensor.bed_presence_f56148_bed_occupied_either
            name: Either
            icon: mdi:bunk-bed-outline
          - type: tile
            entity: binary_sensor.bed_presence_f56148_bed_occupied_left
            name: Left
          - type: tile
            entity: binary_sensor.bed_presence_f56148_bed_occupied_right
            name: Right
          - type: custom:mushroom-template-card
            primary: '{% set energy = states(''sensor.bed_presence_f56148_left_pressure'')
              | int(-1) %} {{ ''-'' if energy < 0 else energy }}/{{ states(''number.bed_presence_f56148_left_trigger_pressure'')
              | int(0) }}'
            entity: number.bed_presence_f56148_left_trigger_pressure
            tap_action:
              action: more-info
            card_mod:
              style: "ha-card {\n  display: block;\n  {% set energy = states('sensor.bed_presence_f56148_left_pressure')\
                \ | int(0) %}\n  {% if energy %}\n    {% set above_threshold = energy\
                \ > states(config.entity) | int(0) %}\n    background: linear-gradient(to\
                \ right, rgba({{ 0 if above_threshold else 255 }}, 255, 0, 0.2), {{\
                \ energy }}%, transparent {{energy}}%);\n  {% endif %}\n}\n"
          - type: custom:mushroom-template-card
            primary: '{% set energy = states(''sensor.bed_presence_f56148_right_pressure'')
              | int(-1) %} {{ ''-'' if energy < 0 else energy }}/{{ states(''number.bed_presence_f56148_right_trigger_pressure'')
              | int(0) }}'
            entity: number.bed_presence_f56148_right_trigger_pressure
            tap_action:
              action: more-info
            card_mod:
              style: "ha-card {\n  display: block;\n  {% set energy = states('sensor.bed_presence_f56148_right_pressure')\
                \ | int(0) %}\n  {% if energy %}\n    {% set above_threshold = energy\
                \ > states(config.entity) | int(0) %}\n    background: linear-gradient(to\
                \ right, rgba({{ 0 if above_threshold else 255 }}, 255, 0, 0.2), {{\
                \ energy }}%, transparent {{energy}}%);\n  {% endif %}\n}\n"
          - type: custom:mini-graph-card
            entities:
              - entity: sensor.bed_presence_f56148_left_pressure
              - entity: number.bed_presence_f56148_left_trigger_pressure
                color: var(--red-color)
                show_state: false
                show_legend: false
                show_fill: false
            name: Left Pressure
            icon: mdi:bed-outline
            hours_to_show: 12
            points_per_hour: 60
            lower_bound: 0
            upper_bound: 100
            min_bound_range: 100
            aggregate_func: max
            font_size_header: 12
            font_size: 70
            smoothing: false
            layout_options:
              grid_columns: 2
          - type: custom:mini-graph-card
            entities:
              - entity: sensor.bed_presence_f56148_right_pressure
              - entity: number.bed_presence_f56148_right_trigger_pressure
                color: var(--red-color)
                show_state: false
                show_legend: false
                show_fill: false
            name: Right Pressure
            icon: mdi:bed-outline
            hours_to_show: 12
            points_per_hour: 60
            lower_bound: 0
            upper_bound: 100
            min_bound_range: 100
            aggregate_func: max
            font_size_header: 12
            font_size: 70
            smoothing: false
            layout_options:
              grid_columns: 2
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.main_bedroom_occupancy
        icon: "{%- if is_state(\"binary_sensor.main_bedroom_motion\", \"on\") -%}\n\
          \  mdi:motion-sensor\n{%- elif is_state(entity, \"on\") -%}\n  mdi:walk\n\
          {%- else -%}\n  mdi:motion-sensor-off\n{%- endif -%}"
        color: "{%- if is_state(\"binary_sensor.main_bedroom_motion\", \"on\") -%}\n\
          \  orange\n{%- elif is_state(entity, \"on\") -%}\n  light-green\n{%- else\
          \ -%}\n  grey\n{%- endif -%}"
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.main_bedroom_temperature
        label: Main
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.main_bathroom_sensor_temperature
        label: Bath
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.main_bathroom_sensor_humidity
        label: Bath
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:water-percent
        color: '{% from "util.jinja" import room_humidity %}

          {{ room_humidity(entity) }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        icon: mdi:remote-tv
        color: orange
        content: Remote
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Main Bedroom Media
              content:
                type: custom:vertical-stack-in-card
                card_mod:
                  style: "ha-card {\n  --ha-card-background: none;\n  --ha-card-border-width:\
                    \ 0;\n}\n"
                cards:
                  - type: custom:streamline-card
                    template: remote_main
    subview: true
  - title: Utility
    icon: mdi:progress-wrench
    path: utility
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: light.utility_lights
                content: '{{ expand(entity) | selectattr("state", "==", "on") | list
                  | count }}/{{ expand(entity) | list | count }}'
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
          - type: custom:bubble-card
            card_type: button
            button_type: switch
            card_layout: large
            entity: light.mud_room
            name: Mud Room
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
          - type: custom:bubble-card
            card_type: button
            button_type: switch
            card_layout: large
            entity: light.cold_storage
            name: Cold Storage
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
      - type: grid
        cards:
          - type: heading
            icon: mdi:water
            heading: Water
            heading_style: subtitle
          - type: custom:auto-entities
            card:
              type: vertical-stack
            card_param: cards
            sort:
              method: state
            filter:
              include:
                - group: binary_sensor.water_leak_detected
                  options:
                    type: custom:mushroom-entity-card
              exclude:
                - entity_id: binary_sensor.water_leak_detected
                - state: 'off'
                - state: unavailable
                - state: unknown
            visibility:
              - condition: state
                entity: binary_sensor.water_leak_detected
                state: 'on'
          - type: custom:mod-card
            style:
              hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                \ wrap;\n  justify-content: space-around;\n}\n"
            card:
              type: grid
              square: false
              cards:
                - type: custom:button-card
                  template: button_label
                  entity: valve.water_main_valve
                  name: Water Main Valve
                  label: "[[[\n  if (entity.state == \"open\") {\n    return \"Press\
                    \ and Hold to Close\";\n  } else if (entity.state == \"closed\"\
                    ) {\n    return \"Press and Hold to Open\";\n  }\n]]]\n"
                  icon: "[[[\n  if (entity.state == \"open\") {\n    return \"mdi:valve-open\"\
                    ;\n  } else if (entity.state == \"closed\") {\n    return \"mdi:valve-closed\"\
                    ;\n  } else {\n    return \"mdi:valve\";\n  }\n]]]\n"
                  variables:
                    color: "[[[\n  if (entity.state == \"open\") {\n    return \"\
                      var(--green-color)\";\n  } else if (entity.state == \"closed\"\
                      ) {\n    return \"var(--red-color)\";\n  } else {\n    return\
                      \ \"var(--grey-color)\";\n  }\n]]]\n"
                  tap_action:
                    action: more-info
                  hold_action:
                    action: toggle
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color},\
                    \ transparent 80%) !important;\n    }\n  }\n  `\n]]]\n"
          - type: custom:expander-card
            gap: 0em
            padding: 0em
            child-padding: 0.5em
            title-card-padding: 0em
            title-card:
              type: custom:bar-card
              card_mod:
                style: "ha-card {\n  background: none;\n  border-width: 0;\n  box-shadow:\
                  \ none;\n}\n#states {\n  padding: 8px 2px;\n}\nbar-card-name,\n\
                  bar-card-value {\n  font-weight: 500;\n  text-shadow: 1px 1px var(--primary-background-color);\n\
                  }\nbar-card-backgroundbar {\n  background-color: var(--primary-background-color);\n\
                  }\n"
              name: Water Softener Salt Level
              entities:
                - entity: sensor.water_softener_salt_monitor_salt_level
                  name: Water Softener Salt Level
              decimal: 1
              animation:
                state: 'on'
              positions:
                indicator: inside
              severity:
                - color: var(--red-color)
                  from: 0
                  to: 10
                - color: var(--orange-color)
                  from: 10
                  to: 20
                - color: var(--amber-color)
                  from: 20
                  to: 40
                - color: var(--light-green-color)
                  from: 40
                  to: 70
                - color: var(--green-color)
                  from: 70
                  to: 100
            cards:
              - type: custom:apexcharts-card
                apex_config:
                  chart:
                    foreColor: '#7B7B7B'
                    toolbar:
                      show: false
                  grid:
                    borderColor: '#7B7B7B'
                  xaxis:
                    tooltip:
                      enabled: false
                experimental:
                  color_threshold: true
                header:
                  show: false
                all_series_config:
                  extend_to: now
                  stroke_width: 2
                  type: line
                  group_by:
                    func: min
                    duration: 1hour
                  color_threshold:
                    - value: 0
                      color: '#f44336'
                    - value: 10
                      color: '#ff9800'
                    - value: 20
                      color: '#ffc107'
                    - value: 40
                      color: '#8bc34a'
                    - value: 70
                      color: '#4caf50'
                span:
                  end: minute
                graph_span: 10d
                yaxis:
                  - decimals: 0
                    min: ~0
                    max: ~100
                    apex_config:
                      tickAmount: 4
                      title:
                        text: '%'
                series:
                  - entity: sensor.water_softener_salt_monitor_salt_level
                    name: Salt Level
                    color: rgb(158,158,158)
                card_mod:
                  style: "ha-card {\n  --ha-card-border-width: 0;\n  box-shadow: none;\n\
                    }\n"
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: sensor.ecowitt_indoor_temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.cold_storage_temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
        label: Storage
      - type: custom:mushroom-template-badge
        entity: sensor.cold_storage_humidity
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:water-percent
        color: '{% from "util.jinja" import room_humidity %}

          {{ room_humidity(entity) }}'
        tap_action:
          action: more-info
        label: Storage
    subview: true
  - title: Outside
    path: outside
    icon: mdi:spa
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: light.outside_lights
                content: '{{ expand(entity) | selectattr("state", "==", "on") | list
                  | count }}/{{ expand(entity) | list | count }}'
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.outside_entry
            name: Front Entry
            use_accent_color: false
            show_attribute: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            sub_button:
              - entity: light.outside_entry
                name: More Info
                icon: mdi:palette
                light_background: true
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
              - light_color_state
          - type: custom:bubble-card
            card_type: button
            button_type: slider
            card_layout: large
            entity: light.outside_garage
            name: Garage Front
            use_accent_color: false
            show_attribute: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            sub_button:
              - entity: light.outside_garage
                name: More Info
                icon: mdi:palette
                light_background: true
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
              - light_color_state
          - type: custom:bubble-card
            card_type: button
            button_type: switch
            card_layout: large
            entity: light.outside_side
            name: Side
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
          - type: custom:bubble-card
            card_type: button
            button_type: switch
            card_layout: large
            entity: light.outside_back
            name: Back
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
      - type: grid
        cards:
          - type: heading
            icon: mdi:sprinkler
            heading: Sprinklers
            heading_style: subtitle
            badges:
              - type: entity
                show_state: true
                show_icon: true
                entity: sensor.opensprinkler_water_level
                visibility:
                  - condition: numeric_state
                    entity: sensor.opensprinkler_water_level
                    above: 0
              - type: entity
                show_state: true
                show_icon: true
                entity: sensor.opensprinkler_current_draw
                visibility:
                  - condition: numeric_state
                    entity: sensor.opensprinkler_current_draw
                    above: 0
              - type: custom:mushroom-template-badge
                entity: opensprinkler.stop
                icon: mdi:stop
                color: "{% if is_state(\"binary_sensor.sprinkler_zones\", \"on\")\
                  \ %}\n  red\n{% else %}\n  grey\n{% endif %}\n"
                tap_action:
                  action: none
                hold_action:
                  action: call-service
                  service: opensprinkler.stop
              - type: custom:mushroom-template-badge
                entity: opensprinkler.pause_stations
                icon: mdi:pause
                color: "{% if is_state(\"binary_sensor.sprinkler_zones\", \"on\")\
                  \ %}\n  yellow\n{% elif is_state(\"binary_sensor.opensprinkler_paused\"\
                  , \"on\") %}\n  green\n{% else %}\n  grey\n{% endif %}\n"
                tap_action:
                  action: none
                hold_action:
                  action: call-service
                  service: opensprinkler.pause_stations
              - type: custom:mushroom-template-badge
                entity: switch.opensprinkler_enabled
                content: '{{ state_translated(entity) }}'
                label: System
                icon: mdi:sprinkler
                color: '{{ iif(is_state(entity, "on"), "green", "grey") }}

                  '
                tap_action:
                  action: none
                hold_action:
                  action: toggle
          - type: custom:opensprinkler-card
            device: c2a83f52c36a3795327fad03d6c568e1
            name: OpenSprinkler
            extra_entities:
              - binary_sensor.opensprinkler_rain_delay_active
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.doorbell_person_occupancy
        icon: "{%- if is_state(\"binary_sensor.doorbell_camera_motion\", \"on\") -%}\n\
          \  mdi:motion-sensor\n{%- elif is_state(entity, \"on\") -%}\n  mdi:walk\n\
          {%- else -%}\n  mdi:motion-sensor-off\n{%- endif -%}"
        color: "{%- if is_state(\"binary_sensor.doorbell_camera_motion\", \"on\")\
          \ -%}\n  orange\n{%- elif is_state(entity, \"on\") -%}\n  light-green\n\
          {%- else -%}\n  grey\n{%- endif -%}"
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.ecowitt_outdoor_temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.ecowitt_humidity
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:water-percent
        color: '{% from "util.jinja" import room_humidity %}

          {{ room_humidity(entity) }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.ecowitt_solar_lux
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:brightness-5
        color: blue
        tap_action:
          action: more-info
    subview: true
  - title: Garage
    path: garage
    icon: mdi:garage-variant
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: light.garage_lights
                content: '{{ expand(entity) | selectattr("state", "==", "on") | list
                  | count }}/{{ expand(entity) | list | count }}'
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
          - type: custom:bubble-card
            card_type: button
            button_type: switch
            card_layout: large
            entity: light.garage
            name: Main
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
          - type: custom:bubble-card
            card_type: button
            button_type: switch
            card_layout: large
            entity: light.garage_door_light
            name: Opener
            use_accent_color: true
            show_attribute: true
            attribute: brightness
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            grid_options:
              columns: 6
              rows: 1
            modules:
              - default
      - type: grid
        cards:
          - type: heading
            icon: mdi:garage-variant
            heading: Door
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: binary_sensor.garage_door_obstruction
                label: Obstruction
                content: '{{ state_translated(entity) }}'
                icon: mdi:{{ iif(is_state(entity, "on"), "alert-circle", "check-circle")
                  }}
                color: '{{ iif(is_state(entity, "on"), "red", "green") }}'
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
              - type: custom:mushroom-template-badge
                entity: lock.garage_door_lock_remotes
                label: Remotes
                content: '{{ iif(is_state(entity, "locked"), "Disabled", "Enabled")
                  }}'
                icon: mdi:{{ iif(is_state(entity, "locked"), "lock", "lock-open")
                  }}
                color: '{{ iif(is_state(entity, "locked"), "red", "green") }}'
                tap_action:
                  action: more-info
          - features:
              - type: cover-open-close
              - type: cover-position
            type: tile
            entity: cover.garage_door
            color: green
            state_content:
              - state
              - last-changed
            features_position: bottom
            vertical: false
            grid_options:
              columns: full
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.garage_multisensor_motion_detection
        icon: '{{ iif(is_state(entity, "on"), "mdi:motion-sensor", "mdi:motion-sensor-off")
          }}'
        color: '{{ iif(is_state(entity, "on"), "orange", "grey") }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.garage_multisensor_air_temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.garage_multisensor_humidity
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:water-percent
        color: '{% from "util.jinja" import room_humidity %}

          {{ room_humidity(entity) }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.garage_multisensor_illuminance
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:brightness-5
        color: blue
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: camera.garage
        icon: mdi:cctv
        color: '{{ iif(has_value(entity), "cyan", "red") }}'
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Garage
              size: fullscreen
              content:
                type: custom:streamline-card
                template: camera_popup
                variables:
                  - camera: camera.garage
                  - stream: garage
    subview: true
  - type: sections
    title: Ethan's Chores
    path: ethan-chores
    max_columns: 3
    sections:
      - type: grid
        cards:
          - type: grid
            square: false
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(Kid_name='', \n  Kid_name_normalize='',\n\
                    \  pref_column_count='',\n  pref_use_overdue_grouping='',\n  pref_use_today_grouping='',\n\
                    \  pref_include_daily_recurring_in_today='',\n  pref_use_weekly_grouping='',\n\
                    \  pref_include_weekly_recurring_in_weekly='',\n  pref_exclude_approved='',\n\
                    \  pref_use_label_grouping='',\n  pref_exclude_label_list=[],\n\
                    \  overdue_buttons=[], \n  am_buttons=[],\n  pm_buttons=[],\n\
                    \  weekly_buttons=[],\n  other_buttons=[],\n  complete_buttons=[],\n\
                    \  today_00='',\n  today_12='',\n  today_24='',\n  next_week_00='',\n\
                    \  points_label='', \n  points_icon='',\n  label_button_groups=[],\n\
                    \  all_label_buttons=[],\n  temp_label_button_group=[],\n  all_chore_labels=[],\n\
                    \  group_cards=[],\n\n\n  CHORES='',OVERDUE='', THIS_MORNING='',\
                    \ TODAY='', BONUS='', \n  STREAK='', STATUS='', DUE='', MULTI_APPROVE_MARK='',\n\
                    \  SHARED_MARK='', PENDING='', CLAIMED='', APPROVED='',\n  NO_DUE_DATE='',\
                    \ DAILY='', WEEKLY='', DUE_THIS_WEEK=''\n) -%}  \n{#-- *************\
                    \ Set Translatable Text ************* --#}  \n{%- set ns.CHORES\
                    \ = \"Chores\" -%} \n{%- set ns.OVERDUE = \"Overdue\" -%} \n{%-\
                    \ set ns.THIS_MORNING = \"Due This Morning\" -%} \n{%- set ns.TODAY\
                    \ = \"Due Today\" -%}\n{%- set ns.DUE_THIS_WEEK = \"Due This Week\"\
                    \ -%} \n{%- set ns.BONUS = \"Upcoming & Bonus\" -%} \n{%- set\
                    \ ns.STREAK = \"Streak\" -%}\n{%- set ns.STATUS = \"Status\" -%}\n\
                    {%- set ns.DUE = \"Due\" -%}\n{%- set ns.MULTI_APPROVE_MARK =\
                    \ \"M\" -%}\n{%- set ns.SHARED_MARK = \"S\" -%}\n{%- set ns.PENDING\
                    \ = \"Pending\" -%}\n{%- set ns.CLAIMED = \"Claimed\" -%}\n{%-\
                    \ set ns.APPROVED = \"Approved\" -%}\n{%- set ns.NO_DUE_DATE =\
                    \ \"No Due Date\" -%}\n{%- set ns.DAILY = \"Daily\" -%}\n{%- set\
                    \ ns.WEEKLY = \"Weekly\" -%}        \n{#-- ************* End Translatable\
                    \ Text ************* --#}\n{#-- ************* Set Preferences\
                    \ ************* --#} \n{%- set ns.pref_column_count = 2 -%}\n\
                    {%- set ns.pref_use_overdue_grouping = true -%}\n{%- set ns.pref_use_today_grouping\
                    \ = true -%}\n{%- set ns.pref_include_daily_recurring_in_today\
                    \ = true -%}\n{%- set ns.pref_use_weekly_grouping = true -%}\n\
                    {%- set ns.pref_include_weekly_recurring_in_weekly = true -%}\n\
                    {%- set ns.pref_exclude_approved = false -%}\n{%- set ns.pref_use_label_grouping\
                    \ = true -%}\n{%- set ns.pref_exclude_label_list = [ \"Example_label_1\"\
                    , \"Example_label_2\" ] -%}     \n{#-- ************* End Preferences\
                    \ ************* --#}\n{#-- Set Kid_name and normalize --#}  \n\
                    {%- set ns.Kid_name = 'Ethan' -%}\n{%- set ns.Kid_name_normalize\
                    \ = ns.Kid_name | slugify() -%}\n{#-- Point Labels --#}   {%-\
                    \ set points_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_points'\
                    \ -%} {%- set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
                    \ -%} {%- set ns.points_icon = state_attr(points_sensor, 'icon')\
                    \ -%}        \n{#-- Build a list of button entities for this kid\
                    \ --#} {%- set prefix = 'button\\\\.kc_' ~ (ns.Kid_name_normalize)\
                    \ ~ '_chore_claim_' -%}     {%- set buttons = states.button |\
                    \ selectattr('entity_id', 'match', '^' ~ prefix) | list -%} \n\
                    {#-- Get timestamps for Today Processing --#}    {%- set ns.today_00\
                    \ = as_timestamp(now().replace(hour=0, minute=0, second=0, microsecond=0))\
                    \ -%}   {%- set ns.today_12 = ns.today_00 + (12 * 60 * 60) -%}\
                    \  {%- set ns.today_24 = ns.today_00 + (24 * 60 * 60) -%}\n{#--\
                    \ Get timestamp for the next Monday (day 0) at 12 AM for Weekly\
                    \ Processing--#}  {%- set week_start = 0 -%}  {%- set days_until_week_start\
                    \ = 7 if now().weekday() == week_start else (7 - now().weekday())\
                    \ % 7 -%}  {%- set ns.week_start_00 = as_timestamp((now() + timedelta(days=days_until_week_start)).replace(hour=0,\
                    \ minute=0, second=0, microsecond=0)) -%}\n{%- for button in buttons\
                    \ -%}\n  {%- set chore_sensor_id = button.entity_id | regex_replace('^button\\\
                    \\.kc_', 'sensor.kc_') | regex_replace('_chore_claim_', '_chore_status_')\
                    \ -%}\n  {%- set sensor_state = states(chore_sensor_id) -%}\n\
                    \  {%- set due_date_str = state_attr(chore_sensor_id, 'due_date')\
                    \ -%}\n  {%- set recurring = state_attr(chore_sensor_id, 'recurring_frequency')\
                    \ -%}\n  {%- set chore_labels = state_attr(chore_sensor_id, 'labels')\
                    \ -%}\n  {%- if not (chore_labels | select('in', ns.pref_exclude_label_list)\
                    \ | list | count > 0) -%}\n    {%- if sensor_state == 'overdue'\
                    \ and ns.pref_use_overdue_grouping -%}\n      {%- set ns.overdue_buttons\
                    \ = ns.overdue_buttons + [button] -%}\n    {%- elif sensor_state\
                    \ == 'approved' and state_attr(chore_sensor_id,'allow_multiple_claims_per_day')\
                    \ == false and ns.pref_exclude_approved -%}\n      {#-- Do nothing\
                    \ --#}\n    {%- elif ns.pref_use_label_grouping and chore_labels\
                    \ is iterable and chore_labels | length > 0 -%}\n      {#-- Process\
                    \ label and button sorting --#}\n      {%- for label in chore_labels\
                    \ -%}\n        {%- set ns.all_chore_labels = (ns.all_chore_labels\
                    \ | list + [label]) -%}\n        {%- set ns.all_label_buttons\
                    \ = ns.all_label_buttons + [(label, [button])] -%}\n      {%-\
                    \ endfor -%}\n    {%- elif ns.pref_use_today_grouping or ns.pref_use_weekly_grouping\
                    \ -%}\n      {#-- Calculate Due this Morning and Due Today --#}\n\
                    \      {%- if due_date_str is not none and due_date_str != 'unknown'\
                    \ -%}\n        {%- set due_date_ts = as_timestamp(due_date_str)\
                    \ -%}\n        {%- if (ns.today_00 <= due_date_ts < ns.today_24)\
                    \ and ns.pref_use_today_grouping -%}\n          {%- if due_date_ts\
                    \ < ns.today_12 -%}\n            {%- set ns.am_buttons = ns.am_buttons\
                    \ + [button] -%}\n          {%- elif due_date_ts < ns.today_24\
                    \ -%}\n            {%- set ns.pm_buttons = ns.pm_buttons + [button]\
                    \ -%}\n          {%- endif -%}\n        {%- elif (due_date_ts\
                    \ < ns.week_start_00) and ns.pref_use_weekly_grouping -%}\n  \
                    \        {%- set ns.weekly_buttons = ns.weekly_buttons + [button]\
                    \ -%}\n        {%- else -%}\n          {%- set ns.other_buttons\
                    \ = ns.other_buttons + [button] -%}\n        {%- endif -%}\n \
                    \     {%- elif recurring == 'daily' and ns.pref_include_daily_recurring_in_today\
                    \ -%}\n        {%- set ns.pm_buttons = ns.pm_buttons + [button]\
                    \ -%}\n      {%- elif recurring == 'weekly' and ns.pref_include_weekly_recurring_in_weekly\
                    \ -%}\n        {%- set ns.weekly_buttons = ns.weekly_buttons +\
                    \ [button] -%}\n      {%- else -%}\n        {%- set ns.other_buttons\
                    \ = ns.other_buttons + [button] -%}\n      {%- endif -%}\n   \
                    \ {%- else -%}\n      {%- set ns.other_buttons = ns.other_buttons\
                    \ + [button] -%}\n    {%- endif -%}\n  {%- endif -%}\n{%- endfor\
                    \ -%}\n{#-- Create Button Groups by Label --#}   {%- set ns.all_chore_labels\
                    \ = ns.all_chore_labels | unique | list | sort -%} {%- set ns.all_chore_labels\
                    \ = ns.all_chore_labels| reject('in', ns.pref_exclude_label_list)\
                    \ | list -%} {%- for label in ns.all_chore_labels -%}\n  {%- set\
                    \ ns.temp_label_button_group = [] -%}\n  {%- for label_entry,\
                    \ button in ns.all_label_buttons -%}\n    {%- if label_entry ==\
                    \ label -%}\n          {#-- Only ever 1 button in each label_entry,\
                    \ so only taking first rather than loop --#}\n          {%- set\
                    \ ns.temp_label_button_group = ns.temp_label_button_group + ([button]\
                    \ | first) -%}\n    {%- endif -%}\n  {%- endfor -%}\n    {%- set\
                    \ ns.label_button_groups = ns.label_button_groups + [{'name':\
                    \ label, 'buttons': ns.temp_label_button_group, 'icon': 'mdi:label'}]\
                    \ -%}\n{%- endfor -%}\n{#-- Build the button groups --#}  {%-\
                    \ set button_groups = [\n    {'name': \"!!!!!!!!!!! \" ~ ns.OVERDUE\
                    \ ~ \" !!!!!!!!!!!\", 'buttons': ns.overdue_buttons, 'icon': 'mdi:alert-octagon'},\n\
                    \    {'name': ns.THIS_MORNING, 'buttons': ns.am_buttons, 'icon':\
                    \ 'mdi:alarm'},\n    {'name': ns.TODAY, 'buttons': ns.pm_buttons,\
                    \ 'icon': 'mdi:calendar-today'},\n    {'name': ns.DUE_THIS_WEEK,\
                    \ 'buttons': ns.weekly_buttons, 'icon': 'mdi:calendar-week'}\n\
                    ] -%}\n{#-- Insert label-based groups here (between overdue and\
                    \ this morning) --#}  {%- set button_groups = button_groups +\
                    \ ns.label_button_groups -%}\n{#-- Continue with existing time-based\
                    \ button groups --#}  {%- set button_groups = button_groups +\
                    \ [\n    {'name': ns.BONUS, 'buttons': ns.other_buttons, 'icon':\
                    \ 'mdi:calendar-clock'}\n] -%}\n{#-- Display the overall chores\
                    \ heading card --#} {{\n  {\n    'type': 'heading',\n    'icon':\
                    \ 'mdi:broom',\n    'heading': ns.CHORES,\n    'heading_style':\
                    \ 'title',\n  }\n}},\n{#-- Loop through the button groups and\
                    \ create all claim buttons --#} {%- for group in button_groups\
                    \ -%}\n  {%- set ns.group_cards = [] -%}\n  {%- if group.buttons\
                    \ | length > 0 -%}\n    {%- set heading_card =\n      {\n    \
                    \    'type': 'heading',\n        'icon': group.icon,\n       \
                    \ 'heading': group.name,\n        'heading_style': 'title',\n\
                    \      }\n    -%}\n    {{- heading_card -}},         \n\n    {%-\
                    \ for button in group.buttons -%}\n      {%- set chore_sensor_id\
                    \ = button.entity_id | regex_replace('^button\\\\.kc_', 'sensor.kc_')\
                    \ | regex_replace('_chore_claim_', '_chore_status_') -%}\n   \
                    \   {%- set streak_chore_sensor_id = chore_sensor_id | regex_replace('_status_',\
                    \ '_streak_') -%}\n      {%- set primary = state_attr(chore_sensor_id,\
                    \ 'chore_name') ~ (' (' ~ ns.SHARED_MARK ~ ')' if state_attr(chore_sensor_id,\
                    \ 'shared_chore') else '')  -%}\n      {%- if button.state not\
                    \ in ['unknown', 'unavailable', 'error'] -%}\n        {%- set\
                    \ ts_diff = (now().timestamp() - as_timestamp(button.state)) |\
                    \ float(0) -%}\n        {%- set last_update = (\n            '%.0f\
                    \ minutes ago' % (ts_diff / 60)\n            if ts_diff < 3600\
                    \ else\n            '%.0f hours ago' % (ts_diff / 3600)\n    \
                    \        if ts_diff < 86400 else\n            '%.0f days ago'\
                    \ % (ts_diff / 86400)\n          ) -%}\n      {%- else -%}\n \
                    \       {%- set last_update = '' -%}\n      {%- endif -%}\n  \
                    \    {%- set due_date_str = state_attr(chore_sensor_id, 'due_date')\
                    \ | string -%}\n      {%- set due_date = as_datetime(due_date_str).astimezone(now().tzinfo)\
                    \ if due_date_str not in ['None', 'unknown', 'unavailable'] else\
                    \ None -%}\n      {%- set recurring = state_attr(chore_sensor_id,\
                    \ 'recurring_frequency') -%}\n      {%- set today = now().astimezone(now().tzinfo).date()\
                    \ -%}          \n      {%- set due_date_short = \n          ns.DAILY\
                    \ if recurring == 'daily' and not due_date else \n          ns.WEEKLY\
                    \ if recurring == 'weekly' and not due_date else\n          ns.NO_DUE_DATE\
                    \ if not due_date else \n          (due_date.strftime('%-I:%M\
                    \ %p') if due_date.date() == today else as_timestamp(due_date)\
                    \ | timestamp_custom('%a %b %-d', true)) \n      -%}\n\n     \
                    \     \n      {%- set multi_approve = state_attr(chore_sensor_id,\
                    \ 'allow_multiple_claims_per_day') -%}\n      {%- set chore_state\
                    \ = states(chore_sensor_id) -%}\n      {%- set state_map = {\n\
                    \          'pending': ns.PENDING,\n          'claimed': ns.CLAIMED,\n\
                    \          'approved': ns.APPROVED,\n          'overdue': ns.OVERDUE\n\
                    \      } -%}\n      {%- set chore_state_display = (state_map[chore_state]\
                    \ if chore_state in state_map else chore_state) ~ ' (' ~ ns.MULTI_APPROVE_MARK\
                    \ ~ ')' if multi_approve == true else (state_map[chore_state]\
                    \ if chore_state in state_map else chore_state) -%}\n      {%-\
                    \ set points = state_attr(chore_sensor_id, 'default_points') |\
                    \ string -%}\n      {%- set global_chore_state = state_attr(chore_sensor_id,\
                    \ 'global_state') -%}\n      {%- set multi_approve = state_attr(chore_sensor_id,\
                    \ 'allow_multiple_claims_per_day') -%}\n      {%- set streak =\
                    \ state_attr(chore_sensor_id, 'chore_current_streak') | string\
                    \ -%}              \n      {%- set secondary_options = 'Points:\
                    \ ' + points + '\\n' + 'Streak: ' + streak + '\\n' + 'Last: '\
                    \ + last_update  + '\\n \\n' + 'Status: ' + chore_state + '\\\
                    n' + 'Due: ' + due_date_short -%}\n      {%- set secondary = ns.points_label\
                    \ ~ ': ' + points + '\\n' + ns.STREAK + ': ' + streak + '\\n \\\
                    n' + ns.STATUS + ': ' + chore_state_display + '\\n' + ns.DUE +\
                    \ ': ' + due_date_short -%}\n      {%- set icon_color = (\n  \
                    \          'blue' if chore_state == 'approved' and multi_approve\
                    \ == true else\n            'green' if chore_state == 'approved'\
                    \ else\n            'yellow' if chore_state == 'partial' else\n\
                    \            'orange' if chore_state == 'claimed' else\n     \
                    \       'red' if chore_state == 'overdue' else\n            'purple'\
                    \ if '_in_part' in global_chore_state else\n            'grey'\n\
                    \          ) -%}\n      {%- set badge_color = (\n            'blue'\
                    \ if chore_state == 'approved' and multi_approve == true else\n\
                    \            'green' if chore_state == 'approved' else\n     \
                    \       'green' if chore_state == 'partial' else\n           \
                    \ 'green' if chore_state == 'claimed' else\n            'red'\
                    \ if chore_state == 'overdue' else\n            'purple' if '_in_part'\
                    \ in global_chore_state else\n            'grey'\n          )\
                    \ -%}\n      {%- set badge_icon = (\n            'mdi:check-bold'\
                    \ if chore_state == 'approved' else\n            'mdi:check-bold'\
                    \ if chore_state == 'partial' else\n            'mdi:check-bold'\
                    \ if chore_state == 'claimed' else\n            'mdi:exclamation-thick'\
                    \ if chore_state == 'overdue' else\n            'mdi:account-group'\
                    \ if '_in_part' in global_chore_state else\n            ''\n \
                    \         ) -%}\n      {#-- Add chore card to the group_cards\
                    \ list --#}\n      {%- set ns.group_cards = ns.group_cards + [{\n\
                    \          'type': 'custom:mushroom-template-card',\n        \
                    \  'entity': button.entity_id,\n          'primary': primary,\n\
                    \          'multiline_secondary': 'false',\n          'secondary':\
                    \ secondary,\n          'layout': 'horizontal',\n          'icon':\
                    \ button.attributes.icon,\n          'icon_color': icon_color,\n\
                    \          'badge_icon': badge_icon,\n          'badge_color':\
                    \ badge_color,\n          'tap_action': {\n            'action':\
                    \ 'toggle'\n          },\n          'hold_action': {\n       \
                    \     'action': 'more-info'\n          }\n      }] -%}\n    {%-\
                    \ endfor -%}\n    {#-- Display the grid card for this group so\
                    \ column count can be adjusted --#}\n      {{\n        {\n   \
                    \       'type': 'grid',\n          'columns': ns.pref_column_count,\n\
                    \          'square': false,\n          'cards': ns.group_cards\n\
                    \        }\n      }},\n  {%- endif -%}\n{%- endfor -%}       \
                    \       "
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(\n  Kid_name='', Kid_name_normalize='',\n\
                    \  current_points=0,\n  points_label='',\n  points_icon='',\n\
                    \  rewards=[],\n  label_key='',\n  all_reward_labels=[],\n  all_label_sensors=[],\n\
                    \  label_sensor_groups=[],\n  temp_label_sensor_group=[],\n  group_cards=[],\n\
                    \n  COST='', REWARDS='', NO_REWARDS='', NEED='', MORE=''\n) -%}\
                    \    \n{#-- ************* Set Translatable Text *************\
                    \ --#}  \n{%- set ns.REWARDS = \"Rewards\" -%} \n{%- set ns.NO_REWARDS\
                    \ = \"No rewards available.\" -%} \n{%- set ns.COST = \"Cost\"\
                    \ -%}\n{%- set ns.NEED = \"Need\" -%} \n{%- set ns.MORE = \"more\"\
                    \ -%}  \n{#-- ************* End Translatable Text *************\
                    \ --#}\n{#-- ************* Set Preferences ************* --#}\
                    \ \n{%- set ns.pref_column_count = 1 -%}\n{%- set ns.pref_use_label_grouping\
                    \ = false -%}\n{%- set ns.pref_exclude_label_list = [ \"Example_label_1\"\
                    , \"Example_label_2\" ] -%}     \n{#-- ************* End Preferences\
                    \ ************* --#}\n{#-- Set Kid_name and normalize --#}  \n\
                    {%- set ns.Kid_name = 'Ethan' -%}\n{%- set ns.Kid_name_normalize\
                    \ = ns.Kid_name | slugify() -%}\n{#-- Point Labels --#}    {%-\
                    \ set points_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_points'\
                    \ -%}    {%- set ns.current_points = states(points_sensor) | int(default=0)\
                    \ -%}    {%- set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
                    \ -%}    {%- set ns.points_icon = state_attr(points_sensor, 'icon')\
                    \ -%}\n{#-- Collect Available Rewards --#}    {%- set reward_prefix\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_reward_status_' -%}\
                    \    {%- set reward_list = states.sensor | selectattr('entity_id',\
                    \ 'match', reward_prefix ~ '.*') | list -%}\n{%- for sensor in\
                    \ reward_list -%}\n  {%- set reward_labels = state_attr(sensor.entity_id,\
                    \ 'labels') | default(['-No Label-'], true) -%}\n\n  {#-- Process\
                    \ label and sensor sorting - Default to no label if ns.pref_use_label_grouping\
                    \ is false --#}\n  {%- for label in reward_labels -%}\n    {%-\
                    \ set label_to_use = label if ns.pref_use_label_grouping else\
                    \ '-No Label-' -%}\n    {%- set ns.all_reward_labels = (ns.all_reward_labels\
                    \ | list + [label_to_use]) -%}\n    {%- set ns.all_label_sensors\
                    \ = ns.all_label_sensors + ([(label_to_use, [sensor])]) -%}\n\
                    \  {%- endfor -%}    \n{%- endfor -%}\n{#-- Remove Duplicate Labels\
                    \ & Exclude any in ns.pref_exclude_label_list --#} {%- set ns.all_reward_labels\
                    \ = ns.all_reward_labels | unique | list | sort -%} {%- set ns.all_reward_labels\
                    \ = ns.all_reward_labels | reject('in', ns.pref_exclude_label_list)\
                    \ | list -%}\n{#-- Create Groups by Label --#}   {%- for label\
                    \ in ns.all_reward_labels -%}\n  {%- set ns.temp_label_sensor_group\
                    \ = [] -%}\n  {%- set ns.label_key = label -%}\n  {%- for label_entry,\
                    \ sensor_list in ns.all_label_sensors -%}    \n    {%- set sensor\
                    \ = sensor_list | first -%} \n    {%- if label_entry == ns.label_key\
                    \ -%}\n      {%- set ns.temp_label_sensor_group = ns.temp_label_sensor_group\
                    \ + [sensor] -%}\n    {%- endif -%}\n  {%- endfor -%}\n  {%- set\
                    \ ns.label_sensor_groups = ns.label_sensor_groups + [{'name':\
                    \ label, 'sensors': ns.temp_label_sensor_group, 'icon': 'mdi:gift'}]\
                    \ -%}\n{%- endfor -%}\n{#-- Insert Label-Based Groups into Groups\
                    \ --#} {%- set sensor_groups = [] -%} {%- set sensor_groups =\
                    \ sensor_groups + ns.label_sensor_groups -%}\n{%- for group in\
                    \ sensor_groups -%}\n  {#-- Iterate through each label group to\
                    \ build button cards--#}\n  {%- set ns.group_cards = [] -%}\n\
                    \  \n  {%- for sensor in group.sensors -%}\n      {#-- Build the\
                    \ buttons --#}\n      {%- set reward_name = state_attr(sensor.entity_id,\
                    \ 'reward_name') | default('Unknown') -%}\n      {%- set reward_cost\
                    \ = state_attr(sensor.entity_id, 'cost') | int(default=0) -%}\n\
                    \      {%- set reward_status = states(sensor.entity_id) | default('unknown')\
                    \ -%}\n      {%- set reward_icon = state_attr(sensor.entity_id,\
                    \ 'icon') | default('mdi:gift') -%}\n      \n      {#-- Collect\
                    \ Approvals and Claims --#}  \n      {%- set claim_button = sensor.entity_id\
                    \ | regex_replace('^sensor\\\\.kc_(\\\\w+)_reward_status_(.+)$',\
                    \ 'button.kc_\\\\1_reward_claim_\\\\2') -%}\n      {%- set approvals\
                    \ = state_attr(sensor.entity_id, 'reward_approvals_count') | int(default=0)\
                    \ -%}\n      {%- set claims = state_attr(sensor.entity_id, 'reward_claims_count')\
                    \ | int(default=0) -%}\n\n      {#-- Check Points Availability\
                    \ --#}  \n      {%- set points_needed = reward_cost - ns.current_points\
                    \ if reward_cost > ns.current_points else 0 -%}\n      {%- set\
                    \ can_claim = \"✅\" if points_needed == 0 else \"❌ \" ~ ns.NEED\
                    \ ~ \" \" ~ points_needed ~ \" \" ~ ns.MORE -%}\n\n      {#--\
                    \ Add Reward Card to the list --#}  \n      {%- set ns.group_cards\
                    \ = ns.group_cards + [{\n        'type': 'custom:mushroom-template-card',\n\
                    \        'primary': reward_name,\n        'secondary': \"\U0001F4B0\
                    \ \" ~ ns.COST ~ \": \" ~ reward_cost|string ~ \" | \U0001F44D\
                    \ \" ~ approvals|string ~ \" | \U0001F4E5 \" ~ claims|string ~\
                    \ \" | \" ~ can_claim,\n        'icon': reward_icon,\n       \
                    \ 'icon_color': 'green' if points_needed == 0 else 'grey',\n \
                    \       'tap_action': { 'action': 'call-service', 'service': 'button.press',\
                    \ 'target': {'entity_id': claim_button } }\n      }] -%}\n  {%-\
                    \ endfor -%} \n  {#-- Display Cards --#}\n  {{\n    {\n      'type':\
                    \ 'heading',\n      'icon': 'mdi:gift-outline',\n      'heading':\
                    \ group.name if group.name != '-No Label-' else ns.REWARDS,\n\
                    \      'heading_style': 'title',\n    }\n  }},{{\n    {\n    \
                    \  'type': 'grid',\n      'columns': ns.pref_column_count,\n \
                    \     'square': false,\n      'cards': ns.group_cards if ns.group_cards\
                    \ | length > 0 else [{'type': 'markdown', 'content': ns.NO_REWARDS}]\n\
                    \    }\n  }},         \n{%- endfor -%} "
      - type: grid
        cards:
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace( Kid_name='', Kid_name_normalize='',\
                    \  points=0, points_label='',  points_icon='',  overdue=0, weekly_completed=0,\
                    \ todays_completed=0,  all_time_completed='',  all_badges=[],\
                    \  badge_list=[], badge_name_normalize='',  highest_badge='',\
                    \  highest_badge_icon='', highest_badge_entity='',  highest_badge_multiplier='',\
                    \ highest_badge_display_line='',  reward_progress=[], total_bonus_points=0,\
                    \  bonuses=[], total_penalty_points=0,  penalties=[],  achievements=[],\
                    \  challenges=[], content='', pref_show_penalties='',\nREWARDS_LABEL='',\
                    \  BONUSES_APPLIED_LABEL='', TOTAL_BONUS_LABEL='',  PENALTIES_APPLIED_LABEL='',\
                    \ TOTAL_PENALTY_LABEL='',  SHOWCASE='',   TOTAL_COMPLETED='',\
                    \  HIGHEST_BADGE_EARNED='',  ACHIEVEMENTS='',   CHALLENGES='',\
                    \  MULTIPLIER='',   NONE='',  ALL_EARNED_BADGES='',   COMPLETED='',\
                    \ APPLIED='', CLAIMS='', APPROVALS=''\n ) -%}      \n\n{#-- *************\
                    \ Set Translatable Text ************* --#}  \n{%- set ns.SHOWCASE\
                    \ = \"Showcase\" -%} \n{%- set ns.TOTAL_COMPLETED = \"Total Chores\
                    \ Completed\" -%} \n{%- set ns.HIGHEST_BADGE_EARNED = \"Highest\
                    \ Badge Earned\" -%} \n{%- set ns.MULTIPLIER = \"Multiplier\"\
                    \ -%}\n{%- set ns.ALL_EARNED_BADGES = \"All Earned Badges\" -%}\
                    \ \n{%- set ns.NONE = \"None\" -%}\n{%- set ns.COMPLETED = 'Completed'\
                    \ -%}\n{%- set ns.REWARDS_LABEL = \"Rewards\" -%}\n{%- set ns.BONUSES_APPLIED_LABEL\
                    \ = \"Bonuses Applied\" -%}  \n{%- set ns.TOTAL_BONUS_LABEL =\
                    \ \"Total Bonus\" -%}  \n{%- set ns.PENALTIES_APPLIED_LABEL =\
                    \ \"Penalties Applied\" -%}  \n{%- set ns.TOTAL_PENALTY_LABEL\
                    \ = \"Total Penalty\" -%} \n{%- set ns.ACHIEVEMENTS = \"Achievements\"\
                    \ -%}\n{%- set ns.CHALLENGES = \"Challenges\" -%} \n{%- set ns.APPLIED\
                    \ = \"Applied\" -%}\n{%- set ns.APPROVALS = \"Approvals\" -%}\n\
                    {%- set ns.CLAIMS = \"Claims\" -%}                \n{#-- *************\
                    \ End Translatable Text ************* --#}\n{#-- *************\
                    \ Set Preferences ************* --#} \n{%- set ns.pref_show_penalties\
                    \ = true -%}\n{#-- ************* End Preferences *************\
                    \ --#}\n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name\
                    \ = 'Ethan' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name |\
                    \ slugify() -%}\n{#-- Collect Points --#}  {%- set points_sensor\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_points' -%}   {%-\
                    \ set ns.points = states(points_sensor) | int(default=0) -%} {%-\
                    \ set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
                    \ -%} {%- set ns.points_icon = state_attr(points_sensor, 'icon')\
                    \ -%}\n{#-- Collect Overdue Chores --#}  {%- set chore_sensor_id_prefix\
                    \ = 'sensor.kc_'~ ns.Kid_name_normalize ~ '_chore_status_' -%}\
                    \   {%- set ns.overdue = states.sensor \n    | selectattr('entity_id',\
                    \ 'match', '^' ~ chore_sensor_id_prefix ~ '.*') \n    | selectattr('state',\
                    \ 'eq', 'overdue') \n    | list | length | int(default=0) -%}\n\
                    \n{#-- Collect Weekly Completed --#}  {%- set weekly_sensor =\
                    \ 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_chores_completed_weekly'\
                    \ -%}  {%- set ns.weekly_completed = states(weekly_sensor) | int(default=0)\
                    \ -%}\n{#-- Collect Today's Completed --#}  {%- set todays_sensor\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_chores_completed_daily'\
                    \ -%}  {%- set ns.todays_completed = states(todays_sensor) | int(default=0)\
                    \ -%}\n{#-- Collect Total Completed --#}  {%- set all_time_sensor\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_chores_completed_total'\
                    \ -%}  {%- set ns.all_time_completed = states(all_time_sensor)\
                    \ | int(default=0) -%}\n{#-- Get Highest Badge Info --#}   \n\
                    {%- set highest_badge_entity = 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_highest_badge' -%}    \n{%- set ns.highest_badge = states(highest_badge_entity)\
                    \ or 'None' -%}  \n{%- set ns.highest_badge_icon = state_attr(highest_badge_entity,\
                    \ 'icon') or 'mdi:medal-outline' -%}\n{%- set ns.highest_badge_multiplier\
                    \ = state_attr(highest_badge_entity, 'points_multiplier') | float(default=1)\
                    \ -%}\n\n{#-- Construct Badge Display Line for Markdown --#}\n\
                    {%- if ns.highest_badge not in ['None', 'unknown', 'Unknown',\
                    \ 'unavailable'] -%}\n  {%- set ns.badge_display_line = \"<ha-icon\
                    \ icon='\" ~ ns.highest_badge_icon ~ \"'></ha-icon> \" ~ ns.highest_badge\
                    \  -%}\n{%- else -%}\n  {%- set ns.badge_display_line = ns.NONE\
                    \ -%}\n{%- endif -%}\n\n{#-- Get All Earned Badges --#}  \n{%-\
                    \ set ns.all_badges = state_attr(highest_badge_entity, 'all_earned_badges')\
                    \ | default([], true) -%}\n{#-- Construct the Badge List with\
                    \ Icons --#}\n{%- set ns.badge_list = \"\\n \" -%} \n{%- for badge\
                    \ in ns.all_badges -%}\n\n      {%- set ns.badge_name_normalize\
                    \ = badge | slugify() -%}\n\n  {%- set badge_entity = 'sensor.kc_'\
                    \ ~ ns.badge_name_normalize ~ '_badge' -%}\n  {%- set badge_icon\
                    \ = state_attr(badge_entity, 'icon') | default('mdi:medal-outline')\
                    \ -%}\n  {%- set ns.badge_list = ns.badge_list + \"- <ha-icon\
                    \ icon='\" ~ badge_icon ~ \"'></ha-icon> \" ~ badge ~ \"  \\n\"\
                    \ -%}\n{%- endfor -%}\n{#-- Collect Earned Rewards (Claims & Approvals)\
                    \ --#}   \n{%- set reward_status_prefix = 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_reward_status_' -%}   \n{%- set reward_status_entities =\
                    \ states.sensor | selectattr('entity_id', 'match', reward_status_prefix\
                    \ ~ '.*') | list -%}   \n{%- for entity in reward_status_entities\
                    \ -%}\n  {%- set status_sensor = entity.entity_id -%}\n  {%- set\
                    \ reward_name = state_attr(status_sensor, 'reward_name') | default('Unknown\
                    \ Reward') -%}\n  {%- set reward_icon = state_attr(status_sensor,\
                    \ 'icon') | default('mdi:gift-outline') -%}\n  {%- set claim_count\
                    \ = state_attr(status_sensor, 'reward_claims_count') | int(default=0)\
                    \ -%}\n  {%- set approval_count = state_attr(status_sensor, 'reward_approvals_count')\
                    \ | int(default=0) -%}\n\n  {%- if claim_count > 0 or approval_count\
                    \ > 0 -%}\n    {%- set ns.reward_progress = ns.reward_progress\
                    \ + [\n      \"- <ha-icon icon='\" ~ reward_icon ~ \"'></ha-icon>\
                    \ **\" ~ reward_name ~ \":** &nbsp;&nbsp; \" ~ ns.CLAIMS ~ \"\
                    : &nbsp;\" \n      ~ claim_count ~ \"&nbsp; |&nbsp; \" ~ ns.APPROVALS\
                    \ ~ \": &nbsp;\" ~ approval_count\n    ] -%}\n  {%- endif -%}\n\
                    {%- endfor -%}\n{#-- Collect Bonuses Applied --#} \n{%- set bonus_prefix\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_bonuses_applied_'\
                    \ -%}   {%- set bonus_list = states.sensor | selectattr('entity_id',\
                    \ 'match', bonus_prefix ~ '.*') | list -%}   \n{%- for sensor\
                    \ in bonus_list -%}\n  {%- set bonus_name = state_attr(sensor.entity_id,\
                    \ 'bonus_name') | default('Unknown Penalty') -%}\n  {%- set bonus_icon\
                    \ = state_attr(sensor.entity_id, 'icon') | default('mdi:alert')\
                    \ -%}\n  {%- set bonus_points = state_attr(sensor.entity_id, 'bonus_points')\
                    \ | float(default=0) -%}\n  {%- set bonus_count = states(sensor.entity_id)\
                    \ | int(default=0) -%}\n\n  {%- if bonus_count > 0 -%}\n    {%-\
                    \ set ns.total_bonus_points = ns.total_bonus_points + (bonus_points\
                    \ * bonus_count) -%}\n    {%- set ns.bonuses = ns.bonuses + [\n\
                    \      \"- <ha-icon icon='\" ~ bonus_icon ~ \"'></ha-icon> **\"\
                    \ ~ bonus_name ~ \":** \" ~ ns.APPLIED ~ \" \" \n      ~ bonus_count\
                    \ ~ \" (\U0001F4B0 \" ~ (bonus_points * bonus_count) ~ \" \" ~\
                    \ ns.points_label ~ \")\"\n    ] -%}\n  {%- endif -%}\n{%- endfor\
                    \ -%}\n{#-- Collect Penalties Applied --#}   {%- set penalty_prefix\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_penalties_applied_'\
                    \ -%}   {%- set penalty_list = states.sensor | selectattr('entity_id',\
                    \ 'match', penalty_prefix ~ '.*') | list -%}   \n{%- for sensor\
                    \ in penalty_list -%}\n  {%- set penalty_name = state_attr(sensor.entity_id,\
                    \ 'penalty_name') | default('Unknown Penalty') -%}\n  {%- set\
                    \ penalty_icon = state_attr(sensor.entity_id, 'icon') | default('mdi:alert')\
                    \ -%}\n  {%- set penalty_points = state_attr(sensor.entity_id,\
                    \ 'penalty_points') | float(default=0) -%}\n  {%- set penalty_count\
                    \ = states(sensor.entity_id) | int(default=0) -%}\n\n  {%- if\
                    \ penalty_count > 0 -%}\n    {%- set ns.total_penalty_points =\
                    \ ns.total_penalty_points + (-penalty_points * penalty_count)\
                    \ -%}\n    {%- set ns.penalties = ns.penalties + [\n      \"-\
                    \ <ha-icon icon='\" ~ penalty_icon ~ \"'></ha-icon> **\" ~ penalty_name\
                    \ ~ \":** \" ~ ns.APPLIED ~ \" \" \n      ~ penalty_count ~ \"\
                    \ (\U0001F4A5 \" ~ (-penalty_points * penalty_count) ~ \" \" ~\
                    \ ns.points_label ~ \")\"\n    ] -%}\n  {%- endif -%}\n{%- endfor\
                    \ -%}\n\n{#-- Collect Achievements with Progress and Rewards --#}\
                    \ \n{%- set achievement_prefix = 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_achievement_status_' -%}   {%- set achievement_list = states.sensor\
                    \ | selectattr('entity_id', 'match', achievement_prefix ~ '.*')\
                    \ | list -%}   {%- for sensor in achievement_list -%}\n  {%- set\
                    \ name = state_attr(sensor.entity_id, 'achievement_name') | default('Unknown\
                    \ Achievement') -%}\n  {%- set icon = state_attr(sensor.entity_id,\
                    \ 'icon') or 'mdi:trophy-award' -%}\n  {%- set progress = states(sensor.entity_id)\
                    \ | float(default=0) -%}\n  {%- set award_status = state_attr(sensor.entity_id,\
                    \ 'awarded') -%}\n\n  {#-- Get Overall Sensor for Reward Points\
                    \ --#}\n  {%- set overall_sensor = sensor.entity_id | regex_replace('^sensor\\\
                    \\.kc_.*?_achievement_status_', 'sensor.kc_achievement_status_')\
                    \ -%}\n\n  {%- set reward_points = state_attr(overall_sensor,\
                    \ 'reward_points') | int(default=0) -%}\n\n  {%- set status =\
                    \ ns.COMPLETED if award_status == 'true' else '⌛ ' ~ progress|round(0)\
                    \ ~ '%' -%}\n  {%- set ns.achievements = ns.achievements + [\"\
                    - \" ~ \"<ha-icon icon='\" ~ icon ~ \"'></ha-icon>&nbsp;\" ~ name\
                    \ ~ \" (\" ~ status ~ \", \U0001F48E \" ~ reward_points ~ \")\"\
                    ] -%}\n{%- endfor -%}\n{#-- Collect Challenges with Progress and\
                    \ Rewards --#}\n{%- set challenge_prefix = 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_challenge_status_' -%}   {%- set challenge_list = states.sensor\
                    \ | selectattr('entity_id', 'match', challenge_prefix ~ '.*')\
                    \ | list -%}   {%- for sensor in challenge_list -%}\n  {%- set\
                    \ name = state_attr(sensor.entity_id, 'challenge_name') | default('Unknown\
                    \ Challenge') -%}\n  {%- set icon = state_attr(sensor.entity_id,\
                    \ 'icon') or 'mdi:flag-checkered' -%}\n  {%- set progress = states(sensor.entity_id)\
                    \ | float(default=0) -%}\n  {%- set award_status = state_attr(sensor.entity_id,\
                    \ 'awarded') -%}\n\n  {#-- Get Overall Sensor for Reward Points\
                    \ --#}\n  {%- set overall_sensor = sensor.entity_id | regex_replace('^sensor\\\
                    \\.kc_.*?_achievement_status_', 'sensor.kc_achievement_status_')\
                    \ -%}\n  {%- set reward_points = state_attr(overall_sensor, 'reward_points')\
                    \ | int(default=0) -%}\n\n  {%- set status = \"✔️ \" ~ ns.COMPLETED\
                    \ if award_status == 'true' else '⌛ ' ~ progress|round(0) ~ '%'\
                    \ -%}\n  {%- set ns.challenges = ns.challenges + [\"- \" ~ \"\
                    <ha-icon icon='\" ~ icon ~ \"'></ha-icon>&nbsp;\" ~ name ~ \"\
                    \ (\" ~ status ~ \", \U0001F48E \" ~ reward_points ~ \")\"] -%}\n\
                    {%- endfor -%}\n{#-- Create Content Variable --#}  \n{%- set ns.content\
                    \ = \n  \"## \U0001F3C5 \" ~ ns.Kid_name ~ \"’s \" ~ ns.SHOWCASE\
                    \ ~ \"  \\n\"\n  \"<ha-icon icon=\" ~ ns.points_icon ~ \"></ha-icon>\"\
                    \ ~ \"&nbsp;&nbsp;**\" ~ ns.points_label ~ \":** &nbsp;&nbsp;\"\
                    \ ~ ns.points ~ \" \\n\\n\"\n  \"<ha-icon icon=\" ~ 'mdi:broom'\
                    \ ~ \"></ha-icon>\" ~ \"&nbsp;&nbsp;**\" ~ ns.TOTAL_COMPLETED\
                    \ ~ \":** &nbsp;&nbsp;\" ~ ns.all_time_completed ~ \" \\n\\n\"\
                    \  \n  \"**\U0001F947 \" ~ ns.HIGHEST_BADGE_EARNED ~ \":** &nbsp;&nbsp;\"\
                    \ ~ ns.badge_display_line ~ \"  \\n\"\n  \"**\U0001F48E \" ~ ns.points_label\
                    \ ~ \" \" ~ ns.MULTIPLIER ~ \":** &nbsp;&nbsp;x\" ~ ns.highest_badge_multiplier\
                    \ ~ \"  \\n\\n\"\n  \"**\U0001F947 \" ~ ns.ALL_EARNED_BADGES ~\
                    \ \":**  \" ~ (ns.badge_list if ns.all_badges | length > 0 else\
                    \ \"&nbsp;\" ~ ns.NONE) ~ \"  \\n\"\n  \"#### \U0001F381 \" ~\
                    \ ns.REWARDS_LABEL ~ \": &nbsp;&nbsp;\" ~ \n  (\"\\n\" ~ ('\\\
                    n'.join(ns.reward_progress)) if ns.reward_progress | length >\
                    \ 0 else ns.NONE) ~ \"  \\n\\n\"\n  \"#### ⭐ \" ~ ns.BONUSES_APPLIED_LABEL\
                    \ ~ \": &nbsp;&nbsp;\" ~ \n  (\"\\n\" ~ ('\\n'.join(ns.bonuses))\
                    \ ~ \"  \\n\"\n  \"**\U0001F4B0 \" ~ ns.TOTAL_BONUS_LABEL ~ \"\
                    \ \" ~ ns.points_label ~ \":** &nbsp;&nbsp;\" ~ ns.total_bonus_points\
                    \ ~ \"  \\n\"\n  if ns.bonuses | length > 0 else ns.NONE) ~ \"\
                    \ \\n\"\n  -%}\n\n  {%- if ns.pref_show_penalties -%}\n    {%-\
                    \ set ns.content = ns.content ~ \n      \"#### ⚠️ \" ~ ns.PENALTIES_APPLIED_LABEL\
                    \ ~ \": &nbsp;&nbsp;\" ~ \n      (\"\\n\" ~ ('\\n'.join(ns.penalties))\
                    \  ~ \"  \\n\"\n      \"**\U0001F4A5 \" ~ ns.TOTAL_PENALTY_LABEL\
                    \ ~ \" \" ~ ns.points_label ~ \":** &nbsp;&nbsp;\" ~ ns.total_penalty_points\
                    \ ~ \"  \\n\"\n      if ns.penalties | length > 0 else ns.NONE)\
                    \ ~ \" \\n\"\n      -%}\n  {%- endif -%}\n\n  \n  {%- set ns.content\
                    \ = ns.content ~\n  \"#### \U0001F3C6 \" ~ ns.ACHIEVEMENTS ~ \"\
                    : &nbsp;&nbsp; \" ~ \n  ('\\n' ~ ('\\n'.join(ns.achievements))\
                    \ if ns.achievements | length > 0 else \"&nbsp;\" ~ ns.NONE) ~\
                    \ \"  \\n\"\n  \"#### \U0001F3C1 \" ~ ns.CHALLENGES ~ \": &nbsp;&nbsp;\
                    \ \" ~ \n  ('\\n' ~ ('\\n'.join(ns.challenges)) if ns.challenges\
                    \ | length > 0 else \"&nbsp;\" ~ ns.NONE) ~ \"  \\n\"\n-%}\n{{\n\
                    \  {\n    'type': 'markdown',\n    'content': ns.content\n  }\n\
                    }},"
          - type: custom:auto-entities
            card:
              square: false
              type: grid
              columns: 1
            card_param: cards
            filter:
              template: "{#-- Initialize Namespace Variables --#}  \n{%- set ns =\
                \ namespace(\n  Kid_name='', \n  Kid_name_normalize='', \n  badge_sensor_id_prefix='',\
                \ \n  badges=[], points='', \n  points_label='', \n  points_sensor='',\
                \ \n  all_time_sensor='', \n  threshold_type='', \n  threshold_display='',\
                \ \n  points_multiplier='', \n  kids_earned='', \n  earned_text='',\
                \ \n\n  BADGE_TITLE='', STATUS='', THRESHOLD='', MULTIPLIER='', \n\
                \  EARNED_BY='', NO_BADGES_FOUND='', BADGE_SETUP_PROMPT='', \n  IN_PROGRESS='',\
                \ EARNED='', REMAINING='', CHORES=''\n) -%}    \n{#-- *************\
                \ Set Translatable Text ************* --#}  \n{%- set ns.BADGE_TITLE\
                \ = \"Badge\" -%} \n{%- set ns.STATUS = \"Status\" -%} \n{%- set ns.THRESHOLD\
                \ = \"Threshold\" -%}\n{%- set ns.MULTIPLIER = \"Multiplier\" -%}\
                \ \n{%- set ns.EARNED_BY = \"Earned By\" -%}\n{%- set ns.NO_BADGES_FOUND\
                \ = \"No Badges Found\" -%}\n{%- set ns.BADGE_SETUP_PROMPT = \"Set\
                \ up badges to reward milestones and keep chores fun!\" -%} \n{%-\
                \ set ns.IN_PROGRESS = \"In Progress\" -%} \n{%- set ns.EARNED = \"\
                Earned\" -%}\n{%- set ns.REMAINING = \"to go!\" -%}\n{%- set ns.CHORES\
                \ = \"Chores\" -%}\n{#-- ************* End Translatable Text *************\
                \ --#}\n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name\
                \ = 'Ethan' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name | slugify()\
                \ -%}\n{#-- Collect Points --#}  \n{%- set points_sensor = 'sensor.kc_'\
                \ ~ ns.Kid_name_normalize ~ '_points' -%}     {%- set ns.points =\
                \ states(points_sensor) | int(default=0) -%}   {%- set ns.points_label\
                \ = state_attr(points_sensor, 'unit_of_measurement') -%}   {%- set\
                \ ns.points_icon = state_attr(points_sensor, 'icon') -%}\n{#-- Collect\
                \ Total Completed --#}  \n{%- set ns.all_time_sensor = 'sensor.kc_'\
                \ ~ ns.Kid_name_normalize ~ '_chores_completed_total' -%} \n{#-- Badge\
                \ Sensors --#}  \n{%- set badge_sensors = states.sensor \n    | selectattr('entity_id',\
                \ 'match', '^sensor\\\\.kc_.*_badge$') \n    | rejectattr('entity_id',\
                \ 'search', '_highest_badge$') \n    | list \n-%}\n{#-- Collect badge\
                \ attributes --#}  \n{%- for badge_sensor in badge_sensors -%}\n \
                \   {%- set badge_info = {\n        'entity_id': badge_sensor.entity_id,\n\
                \        'name': (state_attr(badge_sensor.entity_id, 'friendly_name')\
                \ | default('UNKNOWN BADGE')) | regex_replace('^Badge - ', ''),\n\
                \        'icon': state_attr(badge_sensor.entity_id, 'icon') | default('mdi:medal-outline'),\n\
                \        'description': state_attr(badge_sensor.entity_id, 'description')\
                \ | default(''),\n        'threshold': states(badge_sensor.entity_id)\
                \ | float(default=0),\n        'threshold_display': (states(badge_sensor.entity_id)\
                \ | float(default=0) | round(0)) ~ \" \" ~ \n                    \
                \          (ns.points_label if state_attr(badge_sensor.entity_id,\
                \ 'threshold_type') == \"points\" else ns.CHORES),\n        'points_multiplier':\
                \ state_attr(badge_sensor.entity_id, 'points_multiplier') | float(default=1),\n\
                \        'kids_earned': state_attr(badge_sensor.entity_id, 'kids_earned')\
                \ | default([], true),\n        'earned_text': \"✔️ \" ~ ns.EARNED\
                \ if ns.Kid_name in (state_attr(badge_sensor.entity_id, 'kids_earned')\
                \ | default([], true)) else \"⌛ \" ~ ns.IN_PROGRESS\n    } -%}   \
                \  \n    {%- set ns.badges = ns.badges + [badge_info] -%}\n{%- endfor\
                \ -%}\n{%- set sorted_badges = ns.badges | sort(reverse=true, attribute='threshold')\
                \ | sort(reverse=true, attribute='points_multiplier') -%}\n{%- if\
                \ sorted_badges | length == 0 -%}\n  {{\n    {\n      'type': 'markdown',\n\
                \      'content': \"### \U0001F3C5 \" ~ ns.NO_BADGES_FOUND ~ \" \\\
                n\" ~ ns.BADGE_SETUP_PROMPT\n    }\n  }},  \n{%- else -%}\n  {%- for\
                \ badge in sorted_badges -%}\n    {%- set required_value = badge.threshold\
                \ -%}\n    {%- set progress_value = ns.points if ns.points_label in\
                \ badge.threshold_display else states(ns.all_time_sensor) | int(default=0)\
                \ -%}\n    {%- set earned = ns.Kid_name in badge.kids_earned -%}\n\
                \    {%- set remaining_value = (required_value - progress_value) |\
                \ round(0) if required_value > progress_value and not earned else\
                \ 0 -%}\n    {%- set remaining_text = \" (\" ~ remaining_value|string\
                \ ~ \" \" ~ ns.REMAINING ~ \")\" if remaining_value > 0 else \"\"\
                \ -%}\n\n    {%- set content = \"## <ha-icon icon=\" ~ badge.icon\
                \ ~ \"></ha-icon> \" ~ \"**\" ~ ns.BADGE_TITLE ~ \":** \" ~ badge.name\
                \ ~ \"  \\n\" %}\n    {%- if badge.description -%}\n      {%- set\
                \ content = content ~ \"#### \U0001F4D6 &nbsp;\" ~ badge.description\
                \ ~ \"  \\n\" %}\n    {%- endif -%}\n    {%- set content = content\
                \ ~ \"**\" ~ \"\U0001F3C5 \" ~ ns.STATUS ~ \":** &nbsp;\" ~ badge.earned_text\
                \ ~ \"  \\n\" %}\n    {%- set content = content ~ \"**\U0001F3AF \"\
                \ ~ ns.THRESHOLD ~ \":** &nbsp;\" ~ badge.threshold_display ~ remaining_text\
                \ ~ \"  \\n\" %}\n    {%- if badge.points_multiplier > 1 -%}\n   \
                \   {%- set content = content ~ \"**\U0001F48E \" ~ ns.MULTIPLIER\
                \ ~ \":** &nbsp;x\" ~ badge.points_multiplier|string ~ \"  \\n\" %}\n\
                \    {%- endif -%}\n    {%- if badge.kids_earned | count > 0 -%}\n\
                \      {%- set content = content ~ \"**\U0001F465 \" ~ ns.EARNED_BY\
                \ ~ \":** &nbsp;\" ~ badge.kids_earned | join(', ') ~ \"  \\n\" %}\n\
                \    {%- endif -%}\n\n\n    {{\n      {\n        'type': 'markdown',\n\
                \        'content': content\n      }\n    }},  \n  {%- endfor -%}\n\
                {%- endif -%}"
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{#-- Initialize Namespace Variables --#}  \n{%- set ns\
                    \ = namespace(\n  Kid_name='',\n  Kid_name_normalize='',\n  current_points='',\n\
                    \  points_label='',\n  achievements=[],\n\n  NO_ACHIEVEMENTS_FOUND='',\n\
                    \  START_A_ACHIEVEMENT='',\n  ACHIEVEMENT_LABEL='',\n  AWARD_STATUS_LABEL='',\n\
                    \  EARNED_LABEL='',\n  IN_PROCESS_LABEL='',\n  DESCRIPTION_LABEL='',\n\
                    \  CRITERIA_LABEL='',\n  GOAL_LABEL='',\n  START_DATE_LABEL='',\n\
                    \  END_DATE_LABEL='',\n  REWARD_LABEL='',\n  PROGRESS_LABEL='',\n\
                    \  ASSIGNED_TO_LABEL='',\n  RELATED_CHORE_LABEL='',\n  STREAK_GOAL='',\n\
                    \  COMPLETION_GOAL='',\n  DAILY_MINIMUM=''\n) -%}    \n{#-- *************\
                    \ Set Translatable Text ************* --#}  \n{%- set ns.NO_ACHIEVEMENTS_FOUND\
                    \ = \"No Achievements Found\" -%} \n{%- set ns.START_A_ACHIEVEMENT\
                    \ = \"Start an achievement to track your progress!\" -%} \n{%-\
                    \ set ns.ACHIEVEMENT_LABEL = \"Achievement\" -%} \n{%- set ns.AWARD_STATUS_LABEL\
                    \ = \"Award Status\" -%}  \n{%- set ns.EARNED_LABEL = \"Earned\"\
                    \ -%}  \n{%- set ns.IN_PROCESS_LABEL = \"In Process\" -%}  \n\
                    {%- set ns.DESCRIPTION_LABEL = \"Description\" -%}  \n{%- set\
                    \ ns.CRITERIA_LABEL = \"Criteria\" -%}  \n{%- set ns.GOAL_LABEL\
                    \ = \"Goal\" -%}  \n{%- set ns.START_DATE_LABEL = \"Start Date\"\
                    \ -%}  \n{%- set ns.END_DATE_LABEL = \"End Date\" -%}  \n{%- set\
                    \ ns.REWARD_LABEL = \"Reward\" -%}  \n{%- set ns.PROGRESS_LABEL\
                    \ = \"Progress\" -%}  \n{%- set ns.ASSIGNED_TO_LABEL = \"Assigned\
                    \ To\" -%}  \n{%- set ns.RELATED_CHORE_LABEL = \"Related Chore\"\
                    \ -%}\n{%- set ns.STREAK_GOAL = \"Streak Goal\" -%}\n{%- set ns.TOTAL_CHORES\
                    \ = \"Total Chores\" -%}\n{%- set ns.DAILY_MINIMUM = \"Daily Minimum\"\
                    \ -%} \n{#-- ************* End Translatable Text *************\
                    \ --#}\n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name\
                    \ = 'Ethan' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name |\
                    \ slugify() -%}\n{#-- Point Labels --#}      {%- set points_sensor\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_points' -%}   {%-\
                    \ set ns.current_points = states(points_sensor) | int(default=0)\
                    \ -%}   {%- set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
                    \ -%}   {%- set ns.points_icon = state_attr(points_sensor, 'icon')\
                    \ -%}\n{#-- Collect Achievements --#}  {%- set achievement_prefix\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_achievement_status_'\
                    \ -%}  {%- set achievements = states.sensor | selectattr('entity_id',\
                    \ 'match', achievement_prefix ~ '.*') | list -%}\n{%- if achievements\
                    \ | length == 0 -%}\n  {{\n    {\n      'type': 'markdown',\n\
                    \      'content': \"### \U0001F3C6 \" ~ ns.NO_ACHIEVEMENTS_FOUND\
                    \ ~ \"  \\n\" ~ ns.START_A_ACHIEVEMENT\n    }\n  }},\n{%- else\
                    \ -%}\n  {%- for achievement_sensor in achievements -%}\n    {%-\
                    \ set achievement_name = state_attr(achievement_sensor.entity_id,\
                    \ 'achievement_name') | default('Unknown') -%}\n    {%- set achievement_icon\
                    \ = state_attr(achievement_sensor.entity_id, 'icon') or 'mdi:flag-checkered'\
                    \ -%}            \n    {%- set achievement_overall_sensor = achievement_sensor.entity_id\
                    \ | regex_replace('^sensor\\.kc_[a-zA-Z0-9_]+_achievement_status_',\
                    \ 'sensor.kc_achievement_status_') -%}\n    {%- set target_value\
                    \ = state_attr(achievement_sensor.entity_id, 'target_value') |\
                    \ int(default=0) -%}\n    {%- set raw_progress = state_attr(achievement_sensor.entity_id,\
                    \ 'raw_progress') | float(default=0) -%}\n    {%- set awarded\
                    \ = state_attr(achievement_sensor.entity_id, 'awarded') | default(false)\
                    \ -%}\n    {%- set reward_points = state_attr(achievement_overall_sensor,\
                    \ 'reward_points') | int(default=0) -%}\n    {%- set achievement_type\
                    \ = state_attr(achievement_overall_sensor, 'type') | default('total_within_window')\
                    \ -%}\n    {%- set progress_percentage = ((raw_progress / target_value)\
                    \ * 100) | round(1) if target_value > 0 else 0 -%}\n    {%- set\
                    \ associated_chore = state_attr(achievement_sensor.entity_id,\
                    \ 'associated_chore') | default('') -%}\n    {%- set description\
                    \ = state_attr(achievement_sensor.entity_id, 'description') |\
                    \ default('') -%}\n    {%- set criteria = state_attr(achievement_sensor.entity_id,\
                    \ 'criteria') | default('') -%}\n    {%- set assigned_kids = state_attr(achievement_sensor.entity_id,\
                    \ 'assigned_kids') | default([], true) -%}\n  \n    {%- set awarded_text\
                    \ = \"✔️ \" ~ ns.EARNED_LABEL if awarded else \"⌛ \" ~ ns.IN_PROCESS_LABEL\
                    \ -%}\n    {%- set goal_type_label = \n      target_value ~ '\
                    \ (' ~ ns.STREAK_GOAL ~ ')' if achievement_type == 'chore_streak'\
                    \ \n      else target_value ~ ' (' ~ ns.DAILY_MINIMUM ~ ')' if\
                    \ achievement_type == 'daily_minimum'\n      else target_value\
                    \ ~ ' (' ~ ns.TOTAL_CHORES ~ ')' -%}\n    {%- set kids_display\
                    \ = assigned_kids | join(', ') if assigned_kids | count > 0 else\
                    \ '' -%}\n\n\n    {%- set content = \"## <ha-icon icon=\" ~ achievement_icon\
                    \ ~ \"></ha-icon> \" ~ ns.ACHIEVEMENT_LABEL ~ \": \" ~ achievement_name\
                    \ ~ \"  \\n\" %}\n    {%- set content = content ~ \"### \U0001F3C5\
                    \ \" ~ ns.AWARD_STATUS_LABEL ~ \": &nbsp;&nbsp;\" ~ awarded_text\
                    \ ~ \"  \\n\" %}\n    {%- if description -%}\n      {%- set content\
                    \ = content ~ \"#### \U0001F4D6 &nbsp;&nbsp;\" ~ description ~\
                    \ \"  \\n\" %}\n    {%- endif -%}\n    {%- if criteria -%}\n \
                    \     {%- set content = content ~ \"**\U0001F4CC \" ~ ns.CRITERIA_LABEL\
                    \ ~ \":** &nbsp;&nbsp;\" ~ criteria ~ \"  \\n\" %}\n    {%- endif\
                    \ -%}\n    {%- set content = content ~ \"**\U0001F3AF \" ~ ns.GOAL_LABEL\
                    \ ~ \":** &nbsp;&nbsp;\" ~ goal_type_label ~ \"  \\n\" %}\n  \
                    \  {%- if reward_points > 0 -%}\n      {%- set content = content\
                    \ ~ \"**\U0001F48E \" ~ ns.REWARD_LABEL ~ \":** &nbsp;&nbsp;\"\
                    \ ~ reward_points|string ~ \" \" ~ ns.points_label ~ \" \\n\"\
                    \ %}\n    {%- endif -%}\n    {%- set content = content ~ \"\\\
                    n **\U0001F4CA \" ~ ns.PROGRESS_LABEL ~ \":** &nbsp;&nbsp;\" ~\
                    \ raw_progress|int|string ~ \"/\" ~ target_value|string ~ \" (\"\
                    \ ~ progress_percentage|string ~ \"%)  \\n\" %}\n    {%- if kids_display\
                    \ -%}\n      {%- set content = content ~ \"**\U0001F465 \" ~ ns.ASSIGNED_TO_LABEL\
                    \ ~ \":** &nbsp;&nbsp;\" ~ kids_display ~ \"  \\n\" %}\n    {%-\
                    \ endif -%}\n    {%- if associated_chore -%}\n      {%- set content\
                    \ = content ~ \"**\U0001F6E0 \" ~ ns.RELATED_CHORE_LABEL ~ \"\
                    :** &nbsp;&nbsp;\" ~ associated_chore ~ \"  \\n\" %}\n    {%-\
                    \ endif -%}  \n\n    {{\n      {\n        'type': 'markdown',\n\
                    \        'content': content\n      }\n    }},\n  {%- endfor -%}\n\
                    {%- endif -%}"
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{#-- Initialize Namespace Variables --#}  \n{%- set ns\
                    \ = namespace(\n  Kid_name='',\n  Kid_name_normalize='',\n  current_points='',\n\
                    \  points_label='',\n  challenges=[],\n\n  NO_CHALLENGES_FOUND='',\n\
                    \  START_A_CHALLENGE='',\n  CHALLENGE_LABEL='',\n  AWARD_STATUS_LABEL='',\n\
                    \  EARNED_LABEL='',\n  IN_PROCESS_LABEL='',\n  DESCRIPTION_LABEL='',\n\
                    \  CRITERIA_LABEL='',\n  GOAL_LABEL='',\n  START_DATE_LABEL='',\n\
                    \  END_DATE_LABEL='',\n  REWARD_LABEL='',\n  PROGRESS_LABEL='',\n\
                    \  ASSIGNED_TO_LABEL='',\n  RELATED_CHORE_LABEL='',\n  TOTAL_CHORES='',\n\
                    \  PER_DAY_GOAL='',\n) -%}    \n{#-- ************* Set Translatable\
                    \ Text ************* --#}  \n{%- set ns.NO_CHALLENGES_FOUND =\
                    \ \"No Challenges Found\" -%} \n{%- set ns.START_A_CHALLENGE =\
                    \ \"Start a challenge to push your limits!\" -%} \n{%- set ns.CHALLENGE_LABEL\
                    \ = \"Challenge\" -%} \n{%- set ns.AWARD_STATUS_LABEL = \"Award\
                    \ Status\" -%}  \n{%- set ns.EARNED_LABEL = \"Earned\" -%}  \n\
                    {%- set ns.IN_PROCESS_LABEL = \"In Process\" -%}  \n{%- set ns.DESCRIPTION_LABEL\
                    \ = \"Description\" -%}  \n{%- set ns.CRITERIA_LABEL = \"Criteria\"\
                    \ -%}  \n{%- set ns.GOAL_LABEL = \"Goal\" -%}  \n{%- set ns.START_DATE_LABEL\
                    \ = \"Start Date\" -%}  \n{%- set ns.END_DATE_LABEL = \"End Date\"\
                    \ -%}  \n{%- set ns.REWARD_LABEL = \"Reward\" -%}  \n{%- set ns.PROGRESS_LABEL\
                    \ = \"Progress\" -%}  \n{%- set ns.ASSIGNED_TO_LABEL = \"Assigned\
                    \ To\" -%}  \n{%- set ns.RELATED_CHORE_LABEL = \"Related Chore\"\
                    \ -%}\n{%- set ns.TOTAL_CHORES = \"Total Chores\" -%}\n{%- set\
                    \ ns.PER_DAY_GOAL = \"Per Day Goal\" -%}  \n{#-- *************\
                    \ End Translatable Text ************* --#}\n{#-- Set Kid_name\
                    \ and normalize --#}  \n{%- set ns.Kid_name = 'Ethan' -%}\n{%-\
                    \ set ns.Kid_name_normalize = ns.Kid_name | slugify() -%}\n{#--\
                    \ Point Labels --#}      {%- set points_sensor = 'sensor.kc_'\
                    \ ~ ns.Kid_name_normalize ~ '_points' -%}   {%- set ns.current_points\
                    \ = states(points_sensor) | int(default=0) -%}   {%- set ns.points_label\
                    \ = state_attr(points_sensor, 'unit_of_measurement') -%}   {%-\
                    \ set ns.points_icon = state_attr(points_sensor, 'icon') -%}\n\
                    {#-- Collect Challenges --#}  {%- set challenge_prefix = 'sensor.kc_'\
                    \ ~ ns.Kid_name_normalize ~ '_challenge_status_' -%}  {%- set\
                    \ challenges = states.sensor | selectattr('entity_id', 'match',\
                    \ challenge_prefix ~ '.*') | list -%}\n{%- if challenges | length\
                    \ == 0 -%}\n  {{\n    {\n      'type': 'markdown',\n      'content':\
                    \ \"### \U0001F3C1 \" ~ ns.NO_CHALLENGES_FOUND ~ \"  \\n\" ~ ns.START_A_CHALLENGE\n\
                    \    }\n  }},\n{%- else -%}\n  {%- for challenge_sensor in challenges\
                    \ -%}\n    {%- set challenge_name = state_attr(challenge_sensor.entity_id,\
                    \ 'challenge_name') | default('Unknown') -%}\n    {%- set challenge_icon\
                    \ = state_attr(challenge_sensor.entity_id, 'icon') or 'mdi:flag-checkered'\
                    \ -%}            \n    {%- set challenge_overall_sensor = challenge_sensor.entity_id\
                    \ | regex_replace('^sensor\\.kc_[a-zA-Z0-9_]+_challenge_status_',\
                    \ 'sensor.kc_challenge_status_') -%}\n    {%- set target_value\
                    \ = state_attr(challenge_sensor.entity_id, 'target_value') | int(default=0)\
                    \ -%}\n    {%- set raw_progress = state_attr(challenge_sensor.entity_id,\
                    \ 'raw_progress') | float(default=0) -%}\n    {%- set awarded\
                    \ = state_attr(challenge_sensor.entity_id, 'awarded') | default(false)\
                    \ -%}\n    {%- set reward_points = state_attr(challenge_overall_sensor,\
                    \ 'reward_points') | int(default=0) -%}\n    {%- set challenge_type\
                    \ = state_attr(challenge_overall_sensor, 'type') | default('total_within_window')\
                    \ -%}\n    {%- set progress_percentage = ((raw_progress / target_value)\
                    \ * 100) | round(1) if target_value > 0 else 0 -%}\n    {%- set\
                    \ associated_chore = state_attr(challenge_sensor.entity_id, 'associated_chore')\
                    \ | default('') -%}\n    {%- set description = state_attr(challenge_sensor.entity_id,\
                    \ 'description') | default('') -%}\n    {%- set criteria = state_attr(challenge_sensor.entity_id,\
                    \ 'criteria') | default('') -%}\n    {%- set assigned_kids = state_attr(challenge_sensor.entity_id,\
                    \ 'assigned_kids') | default([], true) -%}\n  \n    {%- set awarded_text\
                    \ = \"✔️ \" ~ ns.EARNED_LABEL if awarded else \"⌛ \" ~ ns.IN_PROCESS_LABEL\
                    \ -%}\n    {%- set goal_type_label = target_value ~ ' (' ~ ns.TOTAL_CHORES\
                    \ ~ ')' if challenge_type == 'total_within_window' else target_value\
                    \ ~ ' (' ~ ns.PER_DAY_GOAL ~ ')' -%}\n    {%- set kids_display\
                    \ = assigned_kids | join(', ') if assigned_kids | count > 0 else\
                    \ '' -%}\n    {# Convert start and end dates to local time and\
                    \ short format #}\n    {%- set start_date_utc = state_attr(challenge_overall_sensor,\
                    \ 'start_date') -%}\n    {%- set end_date_utc = state_attr(challenge_overall_sensor,\
                    \ 'end_date') -%}\n    {%- set start_date = as_datetime(start_date_utc).astimezone().strftime('%b\
                    \ %d, %Y') if start_date_utc else 'N/A' -%}\n    {%- set end_date\
                    \ = as_datetime(end_date_utc).astimezone().strftime('%b %d, %Y')\
                    \ if end_date_utc else 'N/A' -%}\n\n\n    {%- set content = \"\
                    ## <ha-icon icon=\" ~ challenge_icon ~ \"></ha-icon> \" ~ ns.CHALLENGE_LABEL\
                    \ ~ \": \" ~ challenge_name ~ \"  \\n\" %}\n    {%- set content\
                    \ = content ~ \"### \U0001F3C5 \" ~ ns.AWARD_STATUS_LABEL ~ \"\
                    : &nbsp;&nbsp;\" ~ awarded_text ~ \"  \\n\" %}\n    {%- if description\
                    \ -%}\n      {%- set content = content ~ \"#### \U0001F4D6 &nbsp;&nbsp;\"\
                    \ ~ description ~ \"  \\n\" %}\n    {%- endif -%}\n    {%- if\
                    \ criteria -%}\n      {%- set content = content ~ \"**\U0001F4CC\
                    \ \" ~ ns.CRITERIA_LABEL ~ \":** &nbsp;&nbsp;\" ~ criteria ~ \"\
                    \  \\n\" %}\n    {%- endif -%}\n    {%- set content = content\
                    \ ~ \"**\U0001F3AF \" ~ ns.GOAL_LABEL ~ \":** &nbsp;&nbsp;\" ~\
                    \ goal_type_label ~ \"  \\n\" %}\n    {%- set content = content\
                    \ ~ \"**\U0001F4C5 \" ~ ns.START_DATE_LABEL ~ \":** &nbsp;&nbsp;\"\
                    \ ~ start_date ~ \"  \\n\" %}\n    {%- set content = content ~\
                    \ \"**\U0001F4C5 \" ~ ns.END_DATE_LABEL ~ \":** &nbsp;&nbsp;\"\
                    \ ~ end_date ~ \"  \\n\" %}\n    {%- if reward_points > 0 -%}\n\
                    \      {%- set content = content ~ \"**\U0001F48E \" ~ ns.REWARD_LABEL\
                    \ ~ \":** &nbsp;&nbsp;\" ~ reward_points|string ~ \" \" ~ ns.points_label\
                    \ ~ \" \\n\" %}\n    {%- endif -%}\n    {%- set content = content\
                    \ ~ \"\\n **\U0001F4CA \" ~ ns.PROGRESS_LABEL ~ \":** &nbsp;&nbsp;\"\
                    \ ~ raw_progress|int|string ~ \"/\" ~ target_value|string ~ \"\
                    \ (\" ~ progress_percentage|string ~ \"%)  \\n\" %}\n    {%- if\
                    \ kids_display -%}\n      {%- set content = content ~ \"**\U0001F465\
                    \ \" ~ ns.ASSIGNED_TO_LABEL ~ \":** &nbsp;&nbsp;\" ~ kids_display\
                    \ ~ \"  \\n\" %}\n    {%- endif -%}\n    {%- if associated_chore\
                    \ -%}\n      {%- set content = content ~ \"**\U0001F6E0 \" ~ ns.RELATED_CHORE_LABEL\
                    \ ~ \":** &nbsp;&nbsp;\" ~ associated_chore ~ \"  \\n\" %}\n \
                    \   {%- endif -%}  \n\n    {{\n      {\n        'type': 'markdown',\n\
                    \        'content': content\n      }\n    }},\n  {%- endfor -%}\n\
                    {%- endif -%}"
      - type: grid
        cards:
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(\n  Kid_name='',\n  Kid_name_normalize='',\n\
                    \  points=0,\n  points_label='',\n  points_icon='',\n  todays_completed=0,\n\
                    \  weekly_completed=0,\n  monthly_completed=0,\n  overdue_chores=0,\n\
                    \n  PARENT_DASHBOARD_LABEL='',\n  CHORES_COMPLETED_LABEL='',\n\
                    \  TODAY_LABEL='',\n  WEEK_LABEL='',\n  MONTH_LABEL='',\n  OVERDUE_CHORES_LABEL='',\n\
                    \  NONE=''\n) -%}    \n{#-- ************* Set Translatable Text\
                    \ ************* --#}  \n{%- set ns.PARENT_DASHBOARD_LABEL = \"\
                    Parent Dashboard for\" -%} \n{%- set ns.CHORES_COMPLETED_LABEL\
                    \ = \"Chores Completed\" -%} \n{%- set ns.TODAY_LABEL = \"Today\"\
                    \ -%} \n{%- set ns.WEEK_LABEL = \"Week\" -%}  \n{%- set ns.MONTH_LABEL\
                    \ = \"Month\" -%}  \n{%- set ns.OVERDUE_CHORES_LABEL = \"Overdue\
                    \ Chores\" -%}  \n{%- set ns.NONE = \"None\" -%}  \n{#-- *************\
                    \ End Translatable Text ************* --#}\n{#-- Set Kid_name\
                    \ and normalize --#}  \n{%- set ns.Kid_name = 'Ethan' -%}\n{%-\
                    \ set ns.Kid_name_normalize = ns.Kid_name | slugify() -%}\n{#--\
                    \ Collect Points Info --#}   {%- set points_sensor = 'sensor.kc_'\
                    \ ~ ns.Kid_name_normalize ~ '_points' -%}   {%- set ns.points\
                    \ = states(points_sensor) | int(default=0) -%}   {%- set ns.points_label\
                    \ = state_attr(points_sensor, 'unit_of_measurement') -%}   {%-\
                    \ set ns.points_icon = state_attr(points_sensor, 'icon') -%}\n\
                    {#-- Collect Chores Completed: Today, Week, Month --#}   {%- set\
                    \ todays_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_chores_completed_daily'\
                    \ -%}   {%- set weekly_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_chores_completed_weekly' -%}   {%- set monthly_sensor =\
                    \ 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_chores_completed_monthly'\
                    \ -%}   {%- set ns.todays_completed = states(todays_sensor) |\
                    \ int(default=0) -%}   {%- set ns.weekly_completed = states(weekly_sensor)\
                    \ | int(default=0) -%}   {%- set ns.monthly_completed = states(monthly_sensor)\
                    \ | int(default=0) -%}  \n{#-- Collect Overdue Chores --#}   {%-\
                    \ set chore_sensor_prefix = 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_chore_status_' -%}   {%- set overdue = states.sensor  \n\
                    \    | selectattr('entity_id', 'match', '^' ~ chore_sensor_prefix\
                    \ ~ '.*')  \n    | selectattr('state', 'eq', 'overdue')  \n  \
                    \  | list  \n    | length  \n-%}   {%- set ns.overdue_chores =\
                    \ overdue | int(default=0) -%}  \n{#-- Store the Markdown content\
                    \ in a variable --#}\n{#-- Store the Markdown content in a variable\
                    \ --#} {%- set content = \n  \"## \U0001F468‍\U0001F469‍\U0001F467\
                    \ \" ~ ns.PARENT_DASHBOARD_LABEL ~ \": \" ~ ns.Kid_name ~ \" \
                    \ \\n\"\n  \"<ha-icon icon=\" ~ ns.points_icon ~ \"></ha-icon>\
                    \ **\" ~ ns.points_label ~ \":** &nbsp;&nbsp;\" ~ ns.points ~\
                    \ \"  \\n\"\n  \"#### \U0001F4C5 \" ~ ns.CHORES_COMPLETED_LABEL\
                    \ ~ \":  \\n\"\n  \"- ☀️ \" ~ ns.TODAY_LABEL ~ \": &nbsp;&nbsp;\"\
                    \ ~ ns.todays_completed ~ \"  \\n\"\n  \"- \U0001F4C5 \" ~ ns.WEEK_LABEL\
                    \ ~ \": &nbsp;&nbsp;\" ~ ns.weekly_completed ~ \"  \\n\"\n  \"\
                    - \U0001F5D3️ \" ~ ns.MONTH_LABEL ~ \": &nbsp;&nbsp;\" ~ ns.monthly_completed\
                    \ ~ \"  \\n\"\n  \"- \U0001F6A8 \" ~ ns.OVERDUE_CHORES_LABEL ~\
                    \ \": &nbsp;&nbsp;\" ~ ns.overdue_chores ~ \"  \\n\\n\"\n-%}\n\
                    {#-- Use the content variable inside the markdown card --#}\n\
                    {{\n  {\n    'type': 'markdown',\n    'content': content\n  }\n\
                    }},"
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace( Kid_name='',   Kid_name_normalize='',\
                    \ pref_column_count='',  approve_chore_buttons=[],  approve_reward_buttons=[],\
                    \  heading_card_blank='',  has_approvals='false',  chore_name_normalize='',\
                    \ reward_name_normalize='', group_cards=[],\n\nCHORE_APPROVALS='',\
                    \ REWARD_APPROVALS='', OK='',  NO='' ) -%} \n{#-- *************\
                    \ Set Translatable Text ************* --#}  \n{%- set ns.CHORE_APPROVALS\
                    \ = \"Chore Approvals\" -%} \n{%- set ns.REWARD_APPROVALS = \"\
                    Reward Approvals\" -%} \n{%- set ns.OK = \"OK\" -%} \n{%- set\
                    \ ns.NO = \"NO\" -%}  \n{#-- ************* End Translatable Text\
                    \ ************* --#}\n{#-- ************* Set Preferences *************\
                    \ --#} \n{%- set ns.pref_column_count = 2 -%}\n{#-- *************\
                    \ End Preferences ************* --#}  \n{#-- ************* Set\
                    \ Kid_Name and Normalize ************* --#} {%- set ns.Kid_name\
                    \ = 'Ethan'-%} \n{%- set ns.Kid_name_normalize = ns.Kid_name |\
                    \ slugify() -%}  \n{#-- ************* Find pending approval sensors\
                    \ - multiple listed to support legacy sensor names in 0.2.2 and\
                    \ before ************* --#} {%- set pending_chore_data = state_attr('sensor.kc_global_chore_pending_approvals',\
                    \ ns.Kid_name) | default([], true) \n  if states('sensor.kc_global_chore_pending_approvals')\
                    \ not in ['unavailable', 'unknown'] else state_attr('sensor.kc_pending_chore_approvals',\
                    \ ns.Kid_name) | default([], true) \n  if states('sensor.kc_pending_chore_approvals')\
                    \ not in ['unavailable', 'unknown'] else  [{'chore_name': 'error',\
                    \ 'Claimed on':'2000-01-01'}] -%}\n\n{%- set pending_reward_data\
                    \ = state_attr('sensor.kc_global_reward_pending_approvals', ns.Kid_name)\
                    \ | default([], true) \n  if states('sensor.kc_global_reward_pending_approvals')\
                    \ not in ['unavailable', 'unknown'] else state_attr('sensor.kc_global_pending_reward_approvals',\
                    \ ns.Kid_name) | default([], true) \n  if states('sensor.kc_global_pending_reward_approvals')\
                    \ not in ['unavailable', 'unknown'] else state_attr('sensor.kc_pending_reward_approvals',\
                    \ ns.Kid_name) | default([], true) \n  if states('sensor.kc_pending_reward_approvals')\
                    \ not in ['unavailable', 'unknown'] else  [{'reward_name': 'error',\
                    \ 'Redeemed on': '2000-01-01'}] -%}\n\n{#-- ************* Build\
                    \ button lists for claimed chores and rewards ************* --#}\
                    \ {%- if pending_chore_data | count > 0 -%}\n  {%- for chore in\
                    \ pending_chore_data | unique(attribute='chore_name') -%}\n  \
                    \  {%- set ns.chore_name_normalize = chore.chore_name | slugify()\
                    \ -%} \n    {%- set ns.approve_chore_buttons = ns.approve_chore_buttons\
                    \ + ['button.kc_' ~ ns.Kid_name_normalize ~ '_chore_approval_'\
                    \ ~ ns.chore_name_normalize] + ['button.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_chore_disapproval_' ~ ns.chore_name_normalize]-%}\n  {%-\
                    \ endfor -%}\n{%- endif -%} {%- if pending_reward_data | count\
                    \ > 0 -%}\n  {%- for reward in pending_reward_data | unique(attribute='reward_name')\
                    \ -%}\n    {%- set ns.reward_name_normalize = reward.reward_name\
                    \ | slugify() -%}\n    {%- set ns.approve_reward_buttons = ns.approve_reward_buttons\
                    \ + ['button.kc_' ~ ns.Kid_name_normalize ~ '_reward_approval_'\
                    \ ~ ns.reward_name_normalize] + ['button.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_reward_disapproval_' ~ ns.reward_name_normalize]-%}\n  {%-\
                    \ endfor -%}\n{%- endif -%}\n{%- set button_groups = [\n    {'name':\
                    \ ns.CHORE_APPROVALS, 'buttons': ns.approve_chore_buttons, 'icon':\
                    \ 'mdi:thumb-up-outline'},\n    {'name': ns.REWARD_APPROVALS,\
                    \ 'buttons': ns.approve_reward_buttons, 'icon': 'mdi:thumb-up-outline'},\n\
                    ] -%}\n{%- for group in button_groups -%}\n  {%- set ns.group_cards\
                    \ = [] -%}\n  {%- if group.buttons | length > 0 -%}\n    {%- set\
                    \ ns.has_approvals = 'true' -%}\n    {%- set heading_card =\n\
                    \      {\n        'type': 'heading',\n        'icon': group.icon,\n\
                    \        'heading': group.name,\n        'heading_style': 'title',\n\
                    \      }\n    -%}    \n\n    {%- for button in group.buttons -%}\n\
                    \      {%- set sensor_id = button \n          | regex_replace('^button\\\
                    \\.kc_', 'sensor.kc_') \n          | regex_replace('_(approval|disapproval)_',\
                    \ '_status_') \n      -%}\n\n      {%- set primary = \n      \
                    \  (ns.OK ~ ': ' ~ state_attr(sensor_id, 'reward_name') if sensor_id\
                    \ | regex_search('_reward_') else state_attr(sensor_id, 'chore_name'))\n\
                    \        if button | regex_search('_approval_') \n        else\
                    \ \n        (ns.NO ~ ': ' ~ state_attr(sensor_id, 'reward_name')\
                    \ if sensor_id | regex_search('_reward_') else state_attr(sensor_id,\
                    \ 'chore_name'))\n      -%}\n      \n      {%- set icon = \n \
                    \         'mdi:thumb-up' if '_approval_' in button else \n   \
                    \       'mdi:thumb-down' if '_disapproval_' in button else \n\
                    \          'mdi:progress-question' \n      -%}\n      {%- set\
                    \ icon_color = \n          'green' if '_approval_' in button else\
                    \ \n          'red' if '_disapproval_' in button else \n     \
                    \     'grey'\n      -%}\n      {%- set ns.group_cards = ns.group_cards\
                    \ + [{\n            'type': 'custom:mushroom-template-card',\n\
                    \            'entity': button,\n            'primary': primary,\n\
                    \            'icon': icon,\n            'layout': '',\n      \
                    \      'icon_color': icon_color,\n            'tap_action': {\n\
                    \              'action': 'toggle'\n            },\n          \
                    \  'hold_action': {\n              'action': 'more-info'\n   \
                    \         },\n          }]\n      -%}\n    {%- endfor -%}\n  \
                    \  \n    {#-- Display the cards for this group --#}\n    {{- heading_card\
                    \ -}}, {{\n      {\n        'type': 'grid',\n        'columns':\
                    \ ns.pref_column_count,\n        'square': false,\n        'cards':\
                    \ ns.group_cards\n      }\n    }},\n  {%- endif -%}\n{%- endfor\
                    \ -%} "
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(\n  Kid_name='',\n  Kid_name_normalize='',\n\
                    \  replacements=[],\n  chore_select_entity='',\n  chore_selected='',\n\
                    \  chore_selected_normalize='',\n  chore_sensor_id_prefix='',\n\
                    \  chore_sensor_id='',\n  current_status='',\n  chore_description='',\n\
                    \  chore_days='',\n  chore_allow_multiple='',\n  global_status='Unknown',\n\
                    \  shared_chore='False',\n  due_date_formatted='None',\n  recurrence='Not\
                    \ Recurring',\n  chore_custom_freq_unit='',\n  chore_custom_freq_int='',\n\
                    \  chore_icon='mdi:clipboard-check',\n  chore_value='N/A',\n \
                    \ points='',\n  points_label='',\n  points_icon='',\n  content='',\n\
                    \  select_new_date_and_time_secondary='',\n\n  CHORE_ADMIN_ACTIONS='',\n\
                    \  SELECT_CHORE_TO_EDIT_DUE_DATE='',\n  CHORE_DETAIL_LABEL='',\n\
                    \  CURRENT_STATUS_LABEL='',\n  GLOBAL_STATUS_LABEL='',\n  SHARED_CHORE_LABEL='',\n\
                    \  VALUE_LABEL='',\n  DUE_DATE_LABEL='',\n  RECURRENCE_LABEL='',\n\
                    \  CUSTOM_INTERVAL='',\n  NO_CHORE_SELECTED_LABEL='',\n  PLUS_NEXT_DUE='',\n\
                    \  PLUS_1_DAY='',\n  PLUS_1_WEEK='',\n  CLEAR_DATE='',\n  SELECT_NEW_DATE_AND_TIME='',\n\
                    \  TAP_TO_CHANGE_HOLD_TO_SET='',\n  RESET_ALL='',\n  OVERDUE_CHORES='',\n\
                    \  RESET_OVERDUE_STATUS='',\n  ALLOW_MULTIPLE_CLAIMS='',\n  APPLICABLE_DAYS='',\n\
                    \  OVERDUE='', \n  PENDING='', \n  CLAIMED='', \n  APPROVED='',\n\
                    \  TRUE='',\n  FALSE='',\n  NONE=''\n) -%}  \n\n{#-- *************\
                    \ Set Translatable Text ************* --#}  \n{%- set ns.SELECT_CHORE_TO_EDIT_DUE_DATE\
                    \ = \"Select Chore to Edit Due Date\" -%}\n{%- set ns.CHORE_DETAIL_LABEL\
                    \ = \"Chore Detail\" -%} \n{%- set ns.CURRENT_STATUS_LABEL = \"\
                    Current Status\" -%} \n{%- set ns.GLOBAL_STATUS_LABEL = \"Global\
                    \ Status\" -%} \n{%- set ns.SHARED_CHORE_LABEL = \"Shared Chore\"\
                    \ -%}  \n{%- set ns.VALUE_LABEL = \"Value\" -%}  \n{%- set ns.DUE_DATE_LABEL\
                    \ = \"Due Date\" -%}  \n{%- set ns.RECURRENCE_LABEL = \"Recurrence\"\
                    \ -%}\n{%- set ns.CUSTOM_INTERVAL = \"Interval\" -%} \n{%- set\
                    \ ns.NO_CHORE_SELECTED_LABEL = \"No Chore Selected or Status Unavailable\"\
                    \ -%} \n{%- set ns.PLUS_NEXT_DUE = \"+Next Due\" -%}  \n{%- set\
                    \ ns.PLUS_1_DAY = \"+1 Day\" -%}  \n{%- set ns.PLUS_1_WEEK = \"\
                    +1 Week\" -%}  \n{%- set ns.CLEAR_DATE = \"Clear Date\" -%}  \n\
                    {%- set ns.SELECT_NEW_DATE_AND_TIME = \"Select New Date & Time\"\
                    \ -%}  \n{%- set ns.TAP_TO_CHANGE_HOLD_TO_SET = \"(Tap to Change\
                    \ / Hold to Set)\" -%}\n{%- set ns.RESET_ALL = \"Reset All\" -%}\n\
                    {%- set ns.OVERDUE_CHORES = \"Overdue Chores\" -%}\n{%- set ns.RESET_OVERDUE_STATUS\
                    \ = \"Reset Overdue Status\" -%}\n{%- set ns.ALLOW_MULTIPLE_CLAIMS\
                    \ = \"Allow Multiple Claims\" -%}\n{%- set ns.APPLICABLE_DAYS\
                    \ = \"Applicable Days\" -%}\n{%- set ns.CHORE_ADMIN_ACTIONS =\
                    \ \"Chore Admin Actions\" -%}\n{%- set ns.OVERDUE = \"Overdue\"\
                    \ -%}\n{%- set ns.PENDING = \"Pending\" -%}\n{%- set ns.CLAIMED\
                    \ = \"Claimed\" -%}\n{%- set ns.APPROVED = \"Approved\" -%}\n\
                    {%- set ns.TRUE = \"True\" -%}\n{%- set ns.FALSE = \"False\" -%}\n\
                    {%- set ns.NONE = \"None\" -%}\n{#-- ************* End Translatable\
                    \ Text ************* --#} \n{#-- Set Kid_name and normalize --#}\
                    \  \n{%- set ns.Kid_name = 'Ethan' -%}\n{%- set ns.Kid_name_normalize\
                    \ = ns.Kid_name | slugify() -%}\n{#-- Collect Points --#}  \n\
                    {%- set points_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize ~\
                    \ '_points' -%}     {%- set ns.points = states(points_sensor)\
                    \ | int(default=0) -%}   {%- set ns.points_label = state_attr(points_sensor,\
                    \ 'unit_of_measurement') -%}   {%- set ns.points_icon = state_attr(points_sensor,\
                    \ 'icon') -%}\n{#-- Get Selected Chore from Input Select --#}\
                    \ \n{%- set ns.chore_select_entity = 'select.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_chore_list' -%}   {%- set ns.chore_selected = states(ns.chore_select_entity)\
                    \ -%}   {%- set ns.chore_sensor_id_prefix ='sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_chore_status_' -%}\n{#-- Collect Chore Status Sensor and\
                    \ Details --#}          \n{%- if ns.chore_selected | lower not\
                    \ in ['none', 'unknown', 'unavailable', ''] -%}\n\n {%- set ns.chore_selected_normalize\
                    \ = ns.chore_selected | slugify() -%}\n  \n  {%- set ns.chore_sensor_id\
                    \ = ns.chore_sensor_id_prefix ~ ns.chore_selected_normalize -%}\
                    \       \n  {%- set ns.current_status = states(ns.chore_sensor_id)\
                    \ | default('Unknown') -%}\n  {%- set ns.global_status = state_attr(ns.chore_sensor_id,\
                    \ 'global_state') | default('Unknown') -%}\n  {%- set state_map\
                    \ = {\n      'pending': ns.PENDING,\n      'claimed': ns.CLAIMED,\n\
                    \      'approved': ns.APPROVED,\n      'overdue': ns.OVERDUE\n\
                    \  } -%}\n  {%- set current_status_display = state_map[ns.current_status]\
                    \ if ns.current_status in state_map else ns.current_status -%}\n\
                    \  {%- set global_status_display = state_map[ns.global_status]\
                    \ if ns.global_status in state_map else ns.global_status -%}\n\
                    \  {%- set ns.shared_chore = state_attr(ns.chore_sensor_id, 'shared_chore')\
                    \ | string | default('False') -%}\n  {%- set ns.chore_allow_multiple\
                    \ = state_attr(ns.chore_sensor_id, 'allow_multiple_claims_per_day')\
                    \ | string | default('False') -%}\n  {%- set state_map_tf = {\n\
                    \      'False': ns.FALSE,\n      'True': ns.TRUE\n  } -%}\n  {%-\
                    \ set shared_chore_display = state_map_tf[ns.shared_chore] if\
                    \ ns.shared_chore in state_map_tf else ns.shared_chore -%}\n \
                    \ {%- set chore_allow_multiple_display = state_map_tf[ ns.chore_allow_multiple]\
                    \ if  ns.chore_allow_multiple in state_map_tf else  ns.chore_allow_multiple\
                    \ -%} \n  {%- set ns.recurrence = state_attr(ns.chore_sensor_id,\
                    \ 'recurring_frequency') if state_attr(ns.chore_sensor_id, 'recurring_frequency')\
                    \ != 'none' else ns.NONE -%}\n  {%- set ns.chore_value = state_attr(ns.chore_sensor_id,\
                    \ 'default_points') | int(default=0) -%}\n  {%- set ns.chore_icon\
                    \ = state_attr(ns.chore_sensor_id, 'icon') | default('mdi:clipboard-check')\
                    \ -%}\n  {%- set ns.chore_description = state_attr(ns.chore_sensor_id,\
                    \ 'description') | default('') -%}\n  {%- set ns.chore_days =\
                    \ state_attr(ns.chore_sensor_id, 'applicable_days') | default([],\
                    \ true)  -%}\n  {%- set ns.chore_custom_freq_unit = state_attr(ns.chore_sensor_id,\
                    \ 'custom_frequency_unit') | default('')  -%}\n  {%- set ns.chore_custom_freq_int\
                    \ = state_attr(ns.chore_sensor_id, 'custom_frequency_interval')\
                    \ | default('') -%}\n\n  {#-- Convert and Format Due Date --#}\n\
                    \  {%- set due_date_str = state_attr(ns.chore_sensor_id, 'due_date')\
                    \ | string-%}\n  {%- set due_date = as_datetime(due_date_str)\
                    \ if due_date_str and due_date_str not in ['None', 'unknown',\
                    \ 'unavailable'] else None -%}\n  {%- set ns.due_date_formatted\
                    \ = as_timestamp(due_date) | timestamp_custom('%a, %b %d, %Y %I:%M\
                    \ %p', true) if due_date else ns.NONE -%}        \n\n  {%- set\
                    \ ns.select_new_date_and_time_secondary = ns.TAP_TO_CHANGE_HOLD_TO_SET\
                    \ + \"\\n \\n\" + state_attr('input_datetime.kc_ui_set_date_helper',\
                    \ 'timestamp') | timestamp_custom('%a, %b %d, %Y %I:%M %p', true)\
                    \ if states('input_datetime.kc_ui_set_date_helper') != 'unknown'\
                    \ else 'No date set' -%}\n\n  {#-- Store the Markdown content\
                    \ in a variable --#}\n\n  {%- set ns.content =  \"### <ha-icon\
                    \ icon='\" ~ ns.chore_icon ~\n  \"'></ha-icon> \" ~ ns.CHORE_DETAIL_LABEL\
                    \ ~ \": \" ~ (ns.chore_selected |\n  title) ~ \"  \\n\" -%} \n\
                    \n  {%- set ns.content =  ns.content ~ \"#### \U0001F4D6 &nbsp;&nbsp;\"\
                    \ ~\n  ns.chore_description ~ \"  \\n\" if ns.chore_description\
                    \ else ns.content\n  -%} \n\n  {%- set ns.content = ns.content\
                    \ ~ \n    \"**\U0001F4CC \" ~ ns.CURRENT_STATUS_LABEL ~ \":**\
                    \ &nbsp;\" ~ current_status_display ~ \"  \\n\"\n    \"**\U0001F30D\
                    \ \" ~ ns.GLOBAL_STATUS_LABEL ~ \":** &nbsp;\" ~ global_status_display\
                    \ ~ \"  \\n\"\n    \"**\U0001F465 \" ~ ns.SHARED_CHORE_LABEL ~\
                    \ \":** &nbsp;\" ~ shared_chore_display ~ \"  \\n\"\n    \"**\U0001F4E5\
                    \ \" ~ ns.ALLOW_MULTIPLE_CLAIMS ~ \":** &nbsp;\" ~ chore_allow_multiple_display\
                    \ ~ \"  \\n\"\n    \"**\U0001F48E \" ~ ns.VALUE_LABEL ~ \":**\
                    \ &nbsp;\" ~ ns.chore_value ~ \" \" ~ ns.points_label ~ \"  \\\
                    n\\n\"\n    \"**\U0001F4C5 \" ~ ns.DUE_DATE_LABEL ~ \":** &nbsp;\"\
                    \ ~ ns.due_date_formatted ~ \"  \\n\"\n    \"**\U0001F501 \" ~\
                    \ ns.RECURRENCE_LABEL ~ \":** &nbsp;\" ~ ns.recurrence | title\
                    \ ~ \"  \\n\" -%}\n\n  {%- set ns.content = ns.content ~ ((\"\
                    **\U0001F535 \" ~ ns.APPLICABLE_DAYS ~ \":** &nbsp;\" ~ ns.chore_days\
                    \ | join(', ') | title) \n    if ns.chore_days is iterable and\
                    \ ns.chore_days | length > 0 else \"\") -%}\n\n  {%- set ns.content\
                    \ = ns.content ~ (\"**\U0001F535 \" ~ ns.CUSTOM_INTERVAL ~ \"\
                    :** &nbsp;\" ~ ns.chore_custom_freq_int | int ~ \" \" ~ ns.chore_custom_freq_unit\
                    \ | title \n    if ns.recurrence == 'custom' else \"\" ) -%}\n\
                    \n  {%- set ns.content =  ns.content if ns.chore_selected not\
                    \ in ['None', 'unknown', 'unavailable']  else \"**\U0001F6AB \"\
                    \ ~ ns.NO_CHORE_SELECTED_LABEL ~ \"**\" -%}\n\n{%- endif -%}\n\
                    {#-- Construct Overdue chore reset, chore dropdown, Markdown Card\
                    \ for Chore Details, and chore actions --#}  {{\n  {\n    'type':\
                    \ 'heading',\n    'icon': 'mdi:rocket-launch',\n    'heading':\
                    \ ns.CHORE_ADMIN_ACTIONS,\n    'heading_style': 'title',\n  }\n\
                    }}, {%- if states.sensor \n    | selectattr('entity_id', 'match',\
                    \ '^' ~ ns.chore_sensor_id_prefix ~ '.*') \n    | selectattr('state',\
                    \ 'eq', 'overdue') \n    | list | length > 0 -%}\n  \n  {{\n \
                    \   {\n      'type': 'grid',\n      'title': '',\n      'columns':\
                    \ 1,\n      'square': false,\n      'cards': [\n        {\n  \
                    \        'type': 'custom:mushroom-template-card',\n          'primary':\
                    \ ns.RESET_ALL ~ ' ' ~ ns.Kid_name ~ '\\'s ' ~ ns.OVERDUE_CHORES,\n\
                    \          'icon': 'mdi:restore-alert',\n          'icon_color':\
                    \ 'orange',\n          'tap_action': {\n            'action':\
                    \ 'call-service',\n            'service': 'kidschores.reset_overdue_chores',\n\
                    \            'data': {\n              'kid_name': ns.Kid_name\n\
                    \            }\n          }\n        }\n      ]\n    }\n  }},\n\
                    {%- endif -%}      \n  {{\n      {\n        'type': 'custom:mushroom-select-card',\n\
                    \        'entity': ns.chore_select_entity,\n        'name': ns.SELECT_CHORE_TO_EDIT_DUE_DATE,\n\
                    \        'icon': 'mdi:clipboard-edit',\n        'icon_color':\
                    \ 'blue',\n        'secondary_info': 'none'       \n      } \n\
                    \  }},\n  \n {%- if ns.chore_selected | lower not in ['none',\
                    \ 'unknown', 'unavailable', ''] -%}  \n     {{\n      {\n    \
                    \    'type': 'markdown',\n        'content': ns.content\n    \
                    \  }\n    }},\n    {%- if states(ns.chore_sensor_id) | lower in\
                    \ ['overdue'] -%}\n        {{\n          {\n            'type':\
                    \ 'grid',\n            'title': '',\n            'columns': 1,\n\
                    \            'square': false,\n            'cards': [\n      \
                    \        {\n                'type': 'custom:mushroom-template-card',\n\
                    \                'primary': ns.RESET_OVERDUE_STATUS,\n       \
                    \         'icon': 'mdi:restore',\n                'icon_color':\
                    \ 'orange',\n                'tap_action': {\n               \
                    \   'action': 'call-service',\n                  'service': 'kidschores.reset_overdue_chores',\n\
                    \                  'data': {\n                    'chore_name':\
                    \ ns.chore_selected,\n                    'kid_name': ns.Kid_name\n\
                    \                  }\n                }\n              }\n   \
                    \         ]\n          }\n        }},\n      {%- endif -%}\n \
                    \     {{\n        {\n          'type': 'grid',\n          'title':\
                    \ '',\n          'columns': 4,\n          'square': False,\n \
                    \         'cards': [\n            {\n              'type': 'custom:mushroom-template-card',\n\
                    \              'primary': ns.PLUS_NEXT_DUE,\n              'icon':\
                    \ 'mdi:calendar-refresh',\n              'icon_color': 'blue',\n\
                    \              'layout': 'vertical',\n              'tap_action':\
                    \ {\n                'action': 'call-service',\n             \
                    \   'service': 'kidschores.skip_chore_due_date',\n           \
                    \     'data': {\n                  'chore_name': ns.chore_selected\n\
                    \                }\n              }\n            },\n        \
                    \    {\n              'type': 'custom:mushroom-template-card',\n\
                    \              'primary': ns.PLUS_1_DAY,\n              'icon':\
                    \ 'mdi:calendar-plus',\n              'icon_color': 'blue',\n\
                    \              'layout': 'vertical',\n              'tap_action':\
                    \ {\n                'action': 'call-service',\n             \
                    \   'service': 'kidschores.set_chore_due_date',\n            \
                    \    'data': {\n                  'chore_name': ns.chore_selected,\n\
                    \                  'due_date': (as_datetime(due_date) + timedelta(days=1)).isoformat()\
                    \ if due_date else ''\n                }\n              }\n  \
                    \          },\n            {\n              'type': 'custom:mushroom-template-card',\n\
                    \              'primary': ns.PLUS_1_WEEK,\n              'icon':\
                    \ 'mdi:calendar-arrow-right',\n              'icon_color': 'blue',\n\
                    \              'layout': 'vertical',\n              'tap_action':\
                    \ {\n                'action': 'call-service',\n             \
                    \   'service': 'kidschores.set_chore_due_date',\n            \
                    \    'data': {\n                  'chore_name': ns.chore_selected,\n\
                    \                  'due_date': (as_datetime(due_date) + timedelta(weeks=1)).isoformat()\
                    \ if due_date else ''\n                }\n              }\n  \
                    \          },\n            {\n              'type': 'custom:mushroom-template-card',\n\
                    \              'primary': ns.CLEAR_DATE,\n              'icon':\
                    \ 'mdi:calendar-remove',\n              'icon_color': 'blue',\n\
                    \              'layout': 'vertical',\n              'tap_action':\
                    \ {\n                'action': 'call-service',\n             \
                    \   'service': 'kidschores.set_chore_due_date',\n            \
                    \    'data': {\n                  'chore_name': ns.chore_selected,\n\
                    \                  'due_date': ''\n                }\n       \
                    \       }\n            }\n          ]\n        }\n      }},{{\n\
                    \      {\n        'type': 'grid',\n        'columns': 1,\n   \
                    \     'square': false,\n        'cards': [\n          {\n    \
                    \        'type': 'custom:mushroom-template-card',\n          \
                    \  'entity': 'input_datetime.kc_ui_set_date_helper',\n       \
                    \     'primary': ns.SELECT_NEW_DATE_AND_TIME,\n            'secondary':\
                    \ ns.select_new_date_and_time_secondary,\n            'multiline_secondary':\
                    \ 'true',\n            'fill_container': 'true',\n           \
                    \ 'icon': 'mdi:calendar-edit',\n            'icon_color': 'blue',\n\
                    \            'tap_action': {\n              'action': 'more-info'\n\
                    \            },\n            'hold_action': {\n              'action':\
                    \ 'call-service',\n              'service': 'kidschores.set_chore_due_date',\n\
                    \              'data': {\n                'chore_name': ns.chore_selected,\n\
                    \                'due_date': states('input_datetime.kc_ui_set_date_helper')\n\
                    \              }\n            }\n          },\n        ]\n   \
                    \   }\n    }}\n{%- endif -%}"
          - type: grid
            square: false
            columns: 1
            grid_options:
              columns: full
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace( Kid_name='',  Kid_name_normalize='',\n\
                    PLUSES_AND_MINUSES='', ) -%}\n\n{#-- ************* Set Translatable\
                    \ Text ************* --#}  \n{%- set ns.PLUSES_AND_MINUSES = 'Pluses\
                    \ & Minuses' -%}  \n{#-- ************* End Translatable Text *************\
                    \ --#}  \n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name\
                    \ = 'Ethan' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name |\
                    \ slugify() -%}\n{{\n  {\n    'type': 'heading',\n    'icon':\
                    \ 'mdi:plus-circle-multiple',\n    'heading': ns.PLUSES_AND_MINUSES,\n\
                    \    'heading_style': 'title',\n  }\n}},{{\n  {\n    'type': 'custom:mini-graph-card',\n\
                    \    'hours_to_show': '168',\n    'unit': ' ',\n    'entities':\
                    \ [\n      {\n      'entity': 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_points'\n      },\n    ]\n  }\n}},"
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 2
                card_param: cards
                filter:
                  template: "{%- set ns = namespace( Kid_name='',  Kid_name_normalize='',\
                    \ current_points='',  points_label='', \nBONUS_LABEL='', APPLIED_LABEL='',\
                    \ APPLIED_TIMES='' ) -%}  \n{#-- ************* Set Translatable\
                    \ Text ************* --#}  \n{%- set ns.BONUS_LABEL = 'Bonus'\
                    \ -%}  \n{%- set ns.APPLIED_LABEL = 'Applied' -%} \n{%- set ns.APPLIED_TIMES\
                    \ = 'times' -%}  \n{#-- ************* End Translatable Text *************\
                    \ --#}  \n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name\
                    \ = 'Ethan' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name |\
                    \ slugify() -%}\n{#-- Point Labels --#}      {%- set points_sensor\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_points' -%}  {%-\
                    \ set ns.current_points = states(points_sensor) | int(default=0)\
                    \ -%} {%- set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
                    \ -%}   {%- set ns.points_icon = state_attr(points_sensor, 'icon')\
                    \ -%}\n{#-- Gather Button Entities --#}     {%- set prefix_pattern\
                    \ = 'button\\\\.kc_' ~ (ns.Kid_name_normalize) ~ '_bonus_' -%}\
                    \  {%- set buttons = states.button | selectattr('entity_id', 'match',\
                    \ prefix_pattern) | list -%} \n{%- for button in buttons -%}\n\
                    \  {%- set sensor_id = button.entity_id \n      | regex_replace('^button\\\
                    \\.kc_', 'sensor.kc_') \n      | regex_replace('_bonus_', '_bonuses_applied_')\
                    \ -%}\n  {%- set bonus_points = state_attr(sensor_id, 'bonus_points')\
                    \ | int(default=0) -%}\n  {%- set bonuses_applied = states(sensor_id)\
                    \ | int(default=0) -%}\n\n  {%- set primary = ns.BONUS_LABEL ~\
                    \ \": \" ~button.attributes.friendly_name | regex_replace(\"^.*\
                    \ - \", \"\") -%}\n\n  {%- set secondary = \n    '⭐ ' ~ ns.BONUS_LABEL\
                    \ ~ ':  ' ~ (bonus_points | string) ~ ' ' ~ ns.points_label ~\
                    \ '\\n' ~\n    '\U0001F4CA ' ~ ns.APPLIED_LABEL ~ ':  ' ~ (bonuses_applied\
                    \ | string) ~ ' ' ~ ns.APPLIED_TIMES -%}\n\n  {%- set icon_color\
                    \ = \n    '#00FF00' if bonus_points >= 20 else \n    '#20C997'\
                    \ if bonus_points >= 10 else \n    '#7FFFD4' \n  -%}\n\n  {{\n\
                    \    {\n      'type': 'custom:mushroom-template-card',\n     \
                    \ 'entity': button.entity_id,\n      'primary': primary,\n   \
                    \   'secondary': secondary,\n      'multiline_secondary': 'true',\n\
                    \      'layout': 'vertical',\n      'icon': button.attributes.icon,\n\
                    \      'icon_color': icon_color,\n      'tap_action': {\n    \
                    \    'action': 'toggle'\n      },\n      'hold_action': {\n  \
                    \      'action': 'more-info'\n      }\n    }\n  }},\n{%- endfor\
                    \ -%}"
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 6
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(Kid_name='',  Kid_name_normalize='',\
                    \ prefix_pattern='',  sorted_entities=[] ) -%}\n{#-- Set Kid_name\
                    \ and normalize --#}  \n{%- set ns.Kid_name = 'Ethan' -%}\n{%-\
                    \ set ns.Kid_name_normalize = ns.Kid_name | slugify() -%}\n{#--\
                    \ Build a list of button entities for this kid --#}     {%- set\
                    \ ns.prefix_pattern = 'button\\\\.kc_' ~ (ns.Kid_name_normalize)\
                    \ -%}   {%- set buttons = states.button | selectattr('entity_id',\
                    \ 'match', ns.prefix_pattern~ '(.*?)_points$') | list -%}\n{#--\
                    \ Extract numeric values from entity names --#}  {%- set numbers\
                    \ = buttons \n    | map(attribute='entity_id') \n    | map('regex_replace',\
                    \ '.*_(plus|minus)_(\\\\d+)_points$', '\\\\1\\\\2') \n    | map('replace',\
                    \ 'plus', '') \n    | map('replace', 'minus', '-') \n    | map('int')\
                    \ \n    | list -%}\n\n{% set sorted_numbers = numbers | sort %}\
                    \ {% for num in sorted_numbers %}\n  {% if num < 0 %}\n    {%\
                    \ set ns.sorted_entities = ns.sorted_entities + [ns.prefix_pattern\
                    \ | replace('\\\\', '')~'_minus_' ~ (num * -1) ~ '_points'  ]\
                    \ %}\n  {% else %}\n    {% set ns.sorted_entities = ns.sorted_entities\
                    \ + [ns.prefix_pattern | replace('\\\\', '')~'_plus_' ~ num ~\
                    \ '_points'] %}\n  {% endif %}\n{% endfor %}\n{% for button_name\
                    \ in ns.sorted_entities -%}\n\n    {%- set primary = '+'~ button_name.split('_')[-2]\
                    \ if '_plus_' in button_name else '-'~ button_name.split('_')[-2]\
                    \ -%}          \n    {%- set icon = 'mdi:plus-circle' if '_plus_'\
                    \ in button_name else 'mdi:minus-circle' -%}\n    {%- set icon_color\
                    \ = 'green' if '_plus_' in button_name else 'red' -%}\n    {{\n\
                    \      {\n        'type': 'custom:mushroom-template-card',\n \
                    \       'entity': button_name,\n        'primary': primary,\n\
                    \        'icon': icon,\n        'icon_color': icon_color,\n  \
                    \      'layout': 'vertical',\n        'tap_action': {\n      \
                    \    'action': 'toggle'\n        },\n        'hold_action': {\n\
                    \          'action': 'more-info'\n        }\n      }\n    }},\n\
                    {%- endfor %}"
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 2
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(Kid_name='', Kid_name_normalize='',\
                    \ current_points='', points_label='', PENALTY_LABEL='', APPLIED_LABEL='',\
                    \ APPLIED_TIMES='') -%}  \n{#-- ************* Set Translatable\
                    \ Text ************* --#}  \n{%- set ns.PENALTY_LABEL = 'Penalty'\
                    \ -%}  \n{%- set ns.APPLIED_LABEL = 'Applied' -%} \n{%- set ns.APPLIED_TIMES\
                    \ = 'times' -%}  \n{#-- ************* End Translatable Text *************\
                    \ --#}  \n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name\
                    \ = 'Ethan' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name |\
                    \ slugify() -%}\n{#-- Point Labels --#}      {%- set points_sensor\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_points' -%}  {%-\
                    \ set ns.current_points = states(points_sensor) | int(default=0)\
                    \ -%} {%- set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
                    \ -%}   {%- set ns.points_icon = state_attr(points_sensor, 'icon')\
                    \ -%}\n{#-- Gather Button Entities --#}     {%- set prefix_pattern\
                    \ = 'button\\\\.kc_' ~ (ns.Kid_name_normalize) ~ '_penalty_' -%}\
                    \  {%- set buttons = states.button | selectattr('entity_id', 'match',\
                    \ prefix_pattern) | list -%} \n{%- for button in buttons -%}\n\
                    \  {%- set sensor_id = button.entity_id \n      | regex_replace('^button\\\
                    \\.kc_', 'sensor.kc_') \n      | regex_replace('_penalty_', '_penalties_applied_')\
                    \ -%}\n  {%- set penalty_points = state_attr(sensor_id, 'penalty_points')\
                    \ | int(default=0) -%}\n  {%- set penalties_applied = states(sensor_id)\
                    \ | int(default=0) -%}\n\n  {%- set primary = ns.PENALTY_LABEL\
                    \ ~ \": \" ~button.attributes.friendly_name | regex_replace(\"\
                    ^.* - \", \"\") -%}\n\n  {%- set secondary = \n    '\U0001F4A5\
                    \ ' ~ ns.PENALTY_LABEL ~ ':  ' ~ (penalty_points | string) ~ '\
                    \ ' ~ ns.points_label ~ '\\n' ~\n    '\U0001F4CA ' ~ ns.APPLIED_LABEL\
                    \ ~ ':  ' ~ (penalties_applied | string) ~ ' ' ~ ns.APPLIED_TIMES\
                    \ -%}\n\n  {%- set icon_color = \n    '#FF4500' if penalty_points\
                    \ >= 20 else \n    '#FFA54F' if penalty_points >= 10 else \n \
                    \   '#FFD27F' \n  -%}\n\n  {{\n    {\n      'type': 'custom:mushroom-template-card',\n\
                    \      'entity': button.entity_id,\n      'primary': primary,\n\
                    \      'secondary': secondary,\n      'multiline_secondary': 'true',\n\
                    \      'layout': 'vertical',\n      'icon': button.attributes.icon,\n\
                    \      'icon_color': icon_color,\n      'tap_action': {\n    \
                    \    'action': 'toggle'\n      },\n      'hold_action': {\n  \
                    \      'action': 'more-info'\n      }\n    }\n  }},\n{%- endfor\
                    \ -%}"
                sort:
                  method: friendly_name
          - square: false
            type: grid
            columns: 1
            cards:
              - type: heading
                icon: mdi:clipboard-text
                heading: 7 Day Activity Log
                heading_style: title
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(Kid_name='', Kid_name_normalize='',\
                    \ entity_list=[]) -%}\n{#-- Set Kid_name and normalize --#}\n\
                    {%- set ns.Kid_name = 'Ethan' -%} {%- set ns.Kid_name_normalize\
                    \ = ns.Kid_name | slugify() -%}\n{#-- Build a list of entities\
                    \ for this kid, excluding unwanted sensors --#}\n{%- set prefix_pattern\
                    \ = '(button|sensor)\\\\.kc_' ~ (ns.Kid_name_normalize) ~ '_'\
                    \ -%} {%- set exclude_pattern = '^sensor\\\\.kc_' ~ (ns.Kid_name_normalize)\
                    \ ~ '_(chore_(claims|approvals|streak)|reward_(claims|approvals))_'\
                    \ -%}\n{%- set entities = (states.button | selectattr('entity_id',\
                    \ 'match', prefix_pattern) | list) + (states.sensor | selectattr('entity_id',\
                    \ 'match', prefix_pattern) | rejectattr('entity_id', 'match',\
                    \ exclude_pattern) | list) -%}\n{%- for entity in entities -%}\n\
                    \  {%- set ns.entity_list = ns.entity_list + [entity.entity_id]\
                    \ -%}\n{%- endfor -%}\n{{ {\n  'type': 'logbook',\n  'title':\
                    \ '',\n  'hours_to_show': 168,\n  'target': {\n    'entity_id':\
                    \ ns.entity_list\n  },\n} }},"
        visibility:
          - condition: user
            users:
              - ce9ee65ab49c4ca4af52496609016f1c
              - f615672fc2554783beab56221097564e
    cards: []
    icon: mdi:toy-brick
    header:
      card:
        type: markdown
        content: "\n{#-- ************* Version KCD_0.3.6 ************* --#}\n{%- set\
          \ ns = namespace(Kid_name='',  Kid_name_normalize='', points=0,\npoints_label='',\
          \ points_icon='', overdue=0, weekly_completed=0,\ntodays_completed=0,  all_time_completed='',\
          \ highest_badge='',\nhighest_badge_icon='', highest_badge_entity='', \n\
          highest_badge_multiplier='', highest_badge_display_line='', \nachievements=[],\
          \  challenges=[], content='', WELCOME='',\nACHIEVEMENTS='', CHALLENGES='',\
          \ NONE='', WEEKLY_COMPLETED='',\nTODAYS_COMPLETED=''\n) -%}    \n\n{#--\
          \ ************* Set Translatable Text ************* --#}  \n\n{%- set ns.WELCOME\
          \ = \"Welcome\" -%} \n{%- set ns.NONE = \"None\" -%}\n{%- set ns.WEEKLY_COMPLETED\
          \ = \"Weekly Completed\" -%}\n{%- set ns.TODAYS_COMPLETED = \"Today's Completed\"\
          \ -%}\n{%- set ns.ACHIEVEMENTS = \"Achievements\" -%}\n{%- set ns.CHALLENGES\
          \ = \"Challenges\" -%} \n\n{#-- ************* End Translatable Text *************\
          \ --#}\n\n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name =\
          \ 'Ethan' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name | slugify() -%}\n\
          \n{#-- Collect Points --#}\n\n{%- set points_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize\
          \ ~ '_points' -%}\n{%- set ns.points = states(points_sensor) | int(default=0)\
          \ -%}\n{%- set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
          \ -%}\n{%- set ns.points_icon = state_attr(points_sensor, 'icon') -%}\n\n\
          {#-- Collect Overdue Chores --#}\n\n{%- set chore_sensor_id_prefix = 'sensor.kc_'~\
          \ ns.Kid_name_normalize ~ '_chore_status_' -%}\n{%- set ns.overdue = states.sensor\
          \ \n  | selectattr('entity_id', 'match', '^' ~ chore_sensor_id_prefix ~\
          \ '.*') \n  | selectattr('state', 'eq', 'overdue') \n  | list | length |\
          \ int(default=0) -%}\n\n{#-- Collect Weekly Completed --#}\n{%- set weekly_sensor\
          \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_chores_completed_weekly' -%}\n\
          {%- set ns.weekly_completed = states(weekly_sensor) | int(default=0) -%}\n\
          \n{#-- Collect Today's Completed --#}\n\n{%- set todays_sensor = 'sensor.kc_'\
          \ ~ ns.Kid_name_normalize ~ '_chores_completed_daily' -%} \n{%- set ns.todays_completed\
          \ = states(todays_sensor) | int(default=0) -%}\n\n{#-- Collect Total Completed\
          \ --#}\n\n{%- set all_time_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize\
          \ ~ '_chores_completed_total' -%} \n{%- set ns.all_time_completed = states(all_time_sensor)\
          \ | int(default=0) -%}\n\n{#-- Get Highest Badge Info --#}   \n\n{%- set\
          \ highest_badge_entity = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_highest_badge'\
          \ -%}    \n{%- set ns.highest_badge = states(highest_badge_entity) or 'None'\
          \ -%}  \n{%- set ns.highest_badge_icon = state_attr(highest_badge_entity,\
          \ 'icon') or 'mdi:medal-outline' -%}\n{%- set ns.highest_badge_multiplier\
          \ = state_attr(highest_badge_entity, 'points_multiplier') | float(default=1)\
          \ -%}\n\n{#-- Construct Badge Display Line for Markdown --#}\n\n{%- if ns.highest_badge\
          \ not in ['None', 'unknown', 'Unknown', 'unavailable'] -%}\n  {%- if ns.highest_badge_multiplier\
          \ > 1 -%}\n    {%- set ns.badge_display_line = \"<ha-icon icon='\" ~ ns.highest_badge_icon\
          \ ~ \"'></ha-icon> \" ~ ns.highest_badge ~ \" (x\" ~ ns.highest_badge_multiplier|string\
          \ ~ \")  \\n\" -%}\n  {%- else -%}\n    {%- set ns.badge_display_line =\
          \ \"<ha-icon icon='\" ~ ns.highest_badge_icon ~ \"'></ha-icon> \" ~ ns.highest_badge\
          \ ~ \"  \\n\" -%}\n  {%- endif -%}\n{%- else -%}\n  {%- set ns.badge_display_line\
          \ = \"\" -%}\n{%- endif -%}\n\n{#-- Collect Achievements with Progress and\
          \ Rewards --#}\n{%- set achievement_prefix = 'sensor.kc_' ~ ns.Kid_name_normalize\
          \ ~ '_achievement_status_' -%}\n{%- set achievement_list = states.sensor\
          \ | selectattr('entity_id', 'match', achievement_prefix ~ '.*') | list -%}\
          \  \n{%- for sensor in achievement_list -%}\n  {%- set name = state_attr(sensor.entity_id,\
          \ 'achievement_name') | default('Unknown Achievement') -%}\n  {%- set icon\
          \ = state_attr(sensor.entity_id, 'icon') or 'mdi:trophy-award' -%}\n  {%-\
          \ set progress = states(sensor.entity_id) | float(default=0) -%}\n  {%-\
          \ set award_status = state_attr(sensor.entity_id, 'awarded') -%}\n\n  {#--\
          \ Get Overall Sensor for Reward Points --#}\n  {%- set overall_sensor =\
          \ sensor.entity_id | regex_replace('^sensor\\\\.kc_.*?_achievement_status_',\
          \ 'sensor.kc_achievement_status_') -%}\n  {%- set reward_points = state_attr(overall_sensor,\
          \ 'reward_points') | int(default=0) -%}\n  {%- set status = ns.COMPLETED\
          \ if award_status == 'true' else '⌛ ' ~ progress|round(0) ~ '%' -%}\n  {%-\
          \ set ns.achievements = ns.achievements + [\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"\
          \ ~ \"<ha-icon icon='\" ~ icon ~ \"'></ha-icon>&nbsp;\" ~ name ~ \" (\"\
          \ ~ status ~ \", \U0001F48E \" ~ reward_points ~ \")\"] -%}\n{%- endfor\
          \ -%}\n\n{#-- Collect Challenges with Progress and Rewards --#}\n{%- set\
          \ challenge_prefix = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_challenge_status_'\
          \ -%}\n{%- set challenge_list = states.sensor |selectattr('entity_id', 'match',\
          \ challenge_prefix ~ '.*') | list -%}  \n{%- for sensor in challenge_list\
          \ -%}\n  {%- set name = state_attr(sensor.entity_id, 'challenge_name') |\
          \ default('Unknown Challenge') -%}\n  {%- set icon = state_attr(sensor.entity_id,\
          \ 'icon') or 'mdi:flag-checkered' -%}\n  {%- set progress = states(sensor.entity_id)\
          \ | float(default=0) -%}\n  {%- set award_status = state_attr(sensor.entity_id,\
          \ 'awarded') -%}\n\n  {#-- Get Overall Sensor for Reward Points --#}\n \
          \ {%- set overall_sensor = sensor.entity_id | regex_replace('^sensor\\\\\
          .kc_.*?_achievement_status_', 'sensor.kc_achievement_status_') -%}\n  {%-\
          \ set reward_points = state_attr(overall_sensor, 'reward_points') | int(default=0)\
          \ -%}\n  {%- set status = ns.COMPLETED if award_status == 'true' else '⌛\
          \ ' ~ progress|round(0) ~ '%' -%}\n  {%- set ns.challenges = ns.challenges\
          \ + [\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\" ~ \"<ha-icon\
          \ icon='\" ~ icon ~ \"'></ha-icon>&nbsp;\" ~ name ~ \" (\" ~ status ~ \"\
          , \U0001F48E \" ~ reward_points ~ \")\"] -%}\n{%- endfor -%}\n\n{#-- Create\
          \ Content Variable --#}  \n\n{%- set ns.content = \n  \"## \U0001F44B \"\
          \ ~ ns.WELCOME ~ \", \" ~ ns.Kid_name ~ \"! \\n\"\n  \"#### \" ~ \"<ha-icon\
          \ icon=\" ~ ns.points_icon ~ \"></ha-icon>\" ~ \"&nbsp;&nbsp;\" ~ ns.points_label\
          \ ~ \": &nbsp;&nbsp;\" ~ ns.points ~ \"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"\
          \ ~ ns.badge_display_line ~ \" \\n\"\n  \"**\U0001F4C5 \" ~ ns.WEEKLY_COMPLETED\
          \ ~ \":** &nbsp;&nbsp;\" ~ ns.weekly_completed ~ \"  \\n\"\n  \"**☀️ \"\
          \ ~ ns.TODAYS_COMPLETED ~ \":** &nbsp;&nbsp;\" ~ ns.todays_completed ~ \"\
          \  \\n\\n\" \n-%} {%- if ns.achievements | length > 0 -%}\n  {%- set ns.content\
          \ = ns.content ~\n    \"**\U0001F3C6 \" ~ ns.ACHIEVEMENTS ~ \":** &nbsp;&nbsp;\
          \ \" ~ \n    ('\\n' ~ ('\\n'.join(ns.achievements)) if ns.achievements |\
          \ length > 0 else \"&nbsp;\" ~ ns.NONE) ~ \"  \\n\" -%}\n{%- endif -%} {%-\
          \ if ns.challenges | length > 0 -%}\n  {%- set ns.content = ns.content ~\n\
          \    \"**\U0001F3C1 \" ~ ns.CHALLENGES ~ \":** &nbsp;&nbsp; \" ~ \n    ('\\\
          n' ~ ('\\n'.join(ns.challenges)) if ns.challenges | length > 0 else \"&nbsp;\"\
          \ ~ ns.NONE) ~ \"  \\n\" -%}\n{%- endif -%}\n{{ ns.content }}"
        text_only: true
      layout: responsive
      badges_position: top
      badges_wrap: wrap
    visible:
      - user: ce9ee65ab49c4ca4af52496609016f1c
      - user: f2a4e20a373e4c5b8d030da2a313eb28
      - user: f615672fc2554783beab56221097564e
    badges:
      - type: custom:mushroom-template-badge
        content: Settings
        icon: mdi:cog
        color: grey
        tap_action:
          action: navigate
          navigation_path: /config/integrations/integration/kidschores
        visibility:
          - condition: user
            users:
              - ce9ee65ab49c4ca4af52496609016f1c
              - f615672fc2554783beab56221097564e
  - type: sections
    title: Emma's Chores
    path: emma-chores
    max_columns: 3
    sections:
      - type: grid
        cards:
          - type: grid
            square: false
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(Kid_name='', \n  Kid_name_normalize='',\n\
                    \  pref_column_count='',\n  pref_use_overdue_grouping='',\n  pref_use_today_grouping='',\n\
                    \  pref_include_daily_recurring_in_today='',\n  pref_use_weekly_grouping='',\n\
                    \  pref_include_weekly_recurring_in_weekly='',\n  pref_exclude_approved='',\n\
                    \  pref_use_label_grouping='',\n  pref_exclude_label_list=[],\n\
                    \  overdue_buttons=[], \n  am_buttons=[],\n  pm_buttons=[],\n\
                    \  weekly_buttons=[],\n  other_buttons=[],\n  complete_buttons=[],\n\
                    \  today_00='',\n  today_12='',\n  today_24='',\n  next_week_00='',\n\
                    \  points_label='', \n  points_icon='',\n  label_button_groups=[],\n\
                    \  all_label_buttons=[],\n  temp_label_button_group=[],\n  all_chore_labels=[],\n\
                    \  group_cards=[],\n\n\n  CHORES='',OVERDUE='', THIS_MORNING='',\
                    \ TODAY='', BONUS='', \n  STREAK='', STATUS='', DUE='', MULTI_APPROVE_MARK='',\n\
                    \  SHARED_MARK='', PENDING='', CLAIMED='', APPROVED='',\n  NO_DUE_DATE='',\
                    \ DAILY='', WEEKLY='', DUE_THIS_WEEK=''\n) -%}  \n{#-- *************\
                    \ Set Translatable Text ************* --#}  \n{%- set ns.CHORES\
                    \ = \"Chores\" -%} \n{%- set ns.OVERDUE = \"Overdue\" -%} \n{%-\
                    \ set ns.THIS_MORNING = \"Due This Morning\" -%} \n{%- set ns.TODAY\
                    \ = \"Due Today\" -%}\n{%- set ns.DUE_THIS_WEEK = \"Due This Week\"\
                    \ -%} \n{%- set ns.BONUS = \"Upcoming & Bonus\" -%} \n{%- set\
                    \ ns.STREAK = \"Streak\" -%}\n{%- set ns.STATUS = \"Status\" -%}\n\
                    {%- set ns.DUE = \"Due\" -%}\n{%- set ns.MULTI_APPROVE_MARK =\
                    \ \"M\" -%}\n{%- set ns.SHARED_MARK = \"S\" -%}\n{%- set ns.PENDING\
                    \ = \"Pending\" -%}\n{%- set ns.CLAIMED = \"Claimed\" -%}\n{%-\
                    \ set ns.APPROVED = \"Approved\" -%}\n{%- set ns.NO_DUE_DATE =\
                    \ \"No Due Date\" -%}\n{%- set ns.DAILY = \"Daily\" -%}\n{%- set\
                    \ ns.WEEKLY = \"Weekly\" -%}        \n{#-- ************* End Translatable\
                    \ Text ************* --#}\n{#-- ************* Set Preferences\
                    \ ************* --#} \n{%- set ns.pref_column_count = 2 -%}\n\
                    {%- set ns.pref_use_overdue_grouping = true -%}\n{%- set ns.pref_use_today_grouping\
                    \ = true -%}\n{%- set ns.pref_include_daily_recurring_in_today\
                    \ = true -%}\n{%- set ns.pref_use_weekly_grouping = true -%}\n\
                    {%- set ns.pref_include_weekly_recurring_in_weekly = true -%}\n\
                    {%- set ns.pref_exclude_approved = false -%}\n{%- set ns.pref_use_label_grouping\
                    \ = true -%}\n{%- set ns.pref_exclude_label_list = [ \"Example_label_1\"\
                    , \"Example_label_2\" ] -%}     \n{#-- ************* End Preferences\
                    \ ************* --#}\n{#-- Set Kid_name and normalize --#}  \n\
                    {%- set ns.Kid_name = 'Emma' -%}\n{%- set ns.Kid_name_normalize\
                    \ = ns.Kid_name | slugify() -%}\n{#-- Point Labels --#}   {%-\
                    \ set points_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_points'\
                    \ -%} {%- set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
                    \ -%} {%- set ns.points_icon = state_attr(points_sensor, 'icon')\
                    \ -%}        \n{#-- Build a list of button entities for this kid\
                    \ --#} {%- set prefix = 'button\\\\.kc_' ~ (ns.Kid_name_normalize)\
                    \ ~ '_chore_claim_' -%}     {%- set buttons = states.button |\
                    \ selectattr('entity_id', 'match', '^' ~ prefix) | list -%} \n\
                    {#-- Get timestamps for Today Processing --#}    {%- set ns.today_00\
                    \ = as_timestamp(now().replace(hour=0, minute=0, second=0, microsecond=0))\
                    \ -%}   {%- set ns.today_12 = ns.today_00 + (12 * 60 * 60) -%}\
                    \  {%- set ns.today_24 = ns.today_00 + (24 * 60 * 60) -%}\n{#--\
                    \ Get timestamp for the next Monday (day 0) at 12 AM for Weekly\
                    \ Processing--#}  {%- set week_start = 0 -%}  {%- set days_until_week_start\
                    \ = 7 if now().weekday() == week_start else (7 - now().weekday())\
                    \ % 7 -%}  {%- set ns.week_start_00 = as_timestamp((now() + timedelta(days=days_until_week_start)).replace(hour=0,\
                    \ minute=0, second=0, microsecond=0)) -%}\n{%- for button in buttons\
                    \ -%}\n  {%- set chore_sensor_id = button.entity_id | regex_replace('^button\\\
                    \\.kc_', 'sensor.kc_') | regex_replace('_chore_claim_', '_chore_status_')\
                    \ -%}\n  {%- set sensor_state = states(chore_sensor_id) -%}\n\
                    \  {%- set due_date_str = state_attr(chore_sensor_id, 'due_date')\
                    \ -%}\n  {%- set recurring = state_attr(chore_sensor_id, 'recurring_frequency')\
                    \ -%}\n  {%- set chore_labels = state_attr(chore_sensor_id, 'labels')\
                    \ -%}\n  {%- if not (chore_labels | select('in', ns.pref_exclude_label_list)\
                    \ | list | count > 0) -%}\n    {%- if sensor_state == 'overdue'\
                    \ and ns.pref_use_overdue_grouping -%}\n      {%- set ns.overdue_buttons\
                    \ = ns.overdue_buttons + [button] -%}\n    {%- elif sensor_state\
                    \ == 'approved' and state_attr(chore_sensor_id,'allow_multiple_claims_per_day')\
                    \ == false and ns.pref_exclude_approved -%}\n      {#-- Do nothing\
                    \ --#}\n    {%- elif ns.pref_use_label_grouping and chore_labels\
                    \ is iterable and chore_labels | length > 0 -%}\n      {#-- Process\
                    \ label and button sorting --#}\n      {%- for label in chore_labels\
                    \ -%}\n        {%- set ns.all_chore_labels = (ns.all_chore_labels\
                    \ | list + [label]) -%}\n        {%- set ns.all_label_buttons\
                    \ = ns.all_label_buttons + [(label, [button])] -%}\n      {%-\
                    \ endfor -%}\n    {%- elif ns.pref_use_today_grouping or ns.pref_use_weekly_grouping\
                    \ -%}\n      {#-- Calculate Due this Morning and Due Today --#}\n\
                    \      {%- if due_date_str is not none and due_date_str != 'unknown'\
                    \ -%}\n        {%- set due_date_ts = as_timestamp(due_date_str)\
                    \ -%}\n        {%- if (ns.today_00 <= due_date_ts < ns.today_24)\
                    \ and ns.pref_use_today_grouping -%}\n          {%- if due_date_ts\
                    \ < ns.today_12 -%}\n            {%- set ns.am_buttons = ns.am_buttons\
                    \ + [button] -%}\n          {%- elif due_date_ts < ns.today_24\
                    \ -%}\n            {%- set ns.pm_buttons = ns.pm_buttons + [button]\
                    \ -%}\n          {%- endif -%}\n        {%- elif (due_date_ts\
                    \ < ns.week_start_00) and ns.pref_use_weekly_grouping -%}\n  \
                    \        {%- set ns.weekly_buttons = ns.weekly_buttons + [button]\
                    \ -%}\n        {%- else -%}\n          {%- set ns.other_buttons\
                    \ = ns.other_buttons + [button] -%}\n        {%- endif -%}\n \
                    \     {%- elif recurring == 'daily' and ns.pref_include_daily_recurring_in_today\
                    \ -%}\n        {%- set ns.pm_buttons = ns.pm_buttons + [button]\
                    \ -%}\n      {%- elif recurring == 'weekly' and ns.pref_include_weekly_recurring_in_weekly\
                    \ -%}\n        {%- set ns.weekly_buttons = ns.weekly_buttons +\
                    \ [button] -%}\n      {%- else -%}\n        {%- set ns.other_buttons\
                    \ = ns.other_buttons + [button] -%}\n      {%- endif -%}\n   \
                    \ {%- else -%}\n      {%- set ns.other_buttons = ns.other_buttons\
                    \ + [button] -%}\n    {%- endif -%}\n  {%- endif -%}\n{%- endfor\
                    \ -%}\n{#-- Create Button Groups by Label --#}   {%- set ns.all_chore_labels\
                    \ = ns.all_chore_labels | unique | list | sort -%} {%- set ns.all_chore_labels\
                    \ = ns.all_chore_labels| reject('in', ns.pref_exclude_label_list)\
                    \ | list -%} {%- for label in ns.all_chore_labels -%}\n  {%- set\
                    \ ns.temp_label_button_group = [] -%}\n  {%- for label_entry,\
                    \ button in ns.all_label_buttons -%}\n    {%- if label_entry ==\
                    \ label -%}\n          {#-- Only ever 1 button in each label_entry,\
                    \ so only taking first rather than loop --#}\n          {%- set\
                    \ ns.temp_label_button_group = ns.temp_label_button_group + ([button]\
                    \ | first) -%}\n    {%- endif -%}\n  {%- endfor -%}\n    {%- set\
                    \ ns.label_button_groups = ns.label_button_groups + [{'name':\
                    \ label, 'buttons': ns.temp_label_button_group, 'icon': 'mdi:label'}]\
                    \ -%}\n{%- endfor -%}\n{#-- Build the button groups --#}  {%-\
                    \ set button_groups = [\n    {'name': \"!!!!!!!!!!! \" ~ ns.OVERDUE\
                    \ ~ \" !!!!!!!!!!!\", 'buttons': ns.overdue_buttons, 'icon': 'mdi:alert-octagon'},\n\
                    \    {'name': ns.THIS_MORNING, 'buttons': ns.am_buttons, 'icon':\
                    \ 'mdi:alarm'},\n    {'name': ns.TODAY, 'buttons': ns.pm_buttons,\
                    \ 'icon': 'mdi:calendar-today'},\n    {'name': ns.DUE_THIS_WEEK,\
                    \ 'buttons': ns.weekly_buttons, 'icon': 'mdi:calendar-week'}\n\
                    ] -%}\n{#-- Insert label-based groups here (between overdue and\
                    \ this morning) --#}  {%- set button_groups = button_groups +\
                    \ ns.label_button_groups -%}\n{#-- Continue with existing time-based\
                    \ button groups --#}  {%- set button_groups = button_groups +\
                    \ [\n    {'name': ns.BONUS, 'buttons': ns.other_buttons, 'icon':\
                    \ 'mdi:calendar-clock'}\n] -%}\n{#-- Display the overall chores\
                    \ heading card --#} {{\n  {\n    'type': 'heading',\n    'icon':\
                    \ 'mdi:broom',\n    'heading': ns.CHORES,\n    'heading_style':\
                    \ 'title',\n  }\n}},\n{#-- Loop through the button groups and\
                    \ create all claim buttons --#} {%- for group in button_groups\
                    \ -%}\n  {%- set ns.group_cards = [] -%}\n  {%- if group.buttons\
                    \ | length > 0 -%}\n    {%- set heading_card =\n      {\n    \
                    \    'type': 'heading',\n        'icon': group.icon,\n       \
                    \ 'heading': group.name,\n        'heading_style': 'title',\n\
                    \      }\n    -%}\n    {{- heading_card -}},         \n\n    {%-\
                    \ for button in group.buttons -%}\n      {%- set chore_sensor_id\
                    \ = button.entity_id | regex_replace('^button\\\\.kc_', 'sensor.kc_')\
                    \ | regex_replace('_chore_claim_', '_chore_status_') -%}\n   \
                    \   {%- set streak_chore_sensor_id = chore_sensor_id | regex_replace('_status_',\
                    \ '_streak_') -%}\n      {%- set primary = state_attr(chore_sensor_id,\
                    \ 'chore_name') ~ (' (' ~ ns.SHARED_MARK ~ ')' if state_attr(chore_sensor_id,\
                    \ 'shared_chore') else '')  -%}\n      {%- if button.state not\
                    \ in ['unknown', 'unavailable', 'error'] -%}\n        {%- set\
                    \ ts_diff = (now().timestamp() - as_timestamp(button.state)) |\
                    \ float(0) -%}\n        {%- set last_update = (\n            '%.0f\
                    \ minutes ago' % (ts_diff / 60)\n            if ts_diff < 3600\
                    \ else\n            '%.0f hours ago' % (ts_diff / 3600)\n    \
                    \        if ts_diff < 86400 else\n            '%.0f days ago'\
                    \ % (ts_diff / 86400)\n          ) -%}\n      {%- else -%}\n \
                    \       {%- set last_update = '' -%}\n      {%- endif -%}\n  \
                    \    {%- set due_date_str = state_attr(chore_sensor_id, 'due_date')\
                    \ | string -%}\n      {%- set due_date = as_datetime(due_date_str).astimezone(now().tzinfo)\
                    \ if due_date_str not in ['None', 'unknown', 'unavailable'] else\
                    \ None -%}\n      {%- set recurring = state_attr(chore_sensor_id,\
                    \ 'recurring_frequency') -%}\n      {%- set today = now().astimezone(now().tzinfo).date()\
                    \ -%}          \n      {%- set due_date_short = \n          ns.DAILY\
                    \ if recurring == 'daily' and not due_date else \n          ns.WEEKLY\
                    \ if recurring == 'weekly' and not due_date else\n          ns.NO_DUE_DATE\
                    \ if not due_date else \n          (due_date.strftime('%-I:%M\
                    \ %p') if due_date.date() == today else as_timestamp(due_date)\
                    \ | timestamp_custom('%a %b %-d', true)) \n      -%}\n\n     \
                    \     \n      {%- set multi_approve = state_attr(chore_sensor_id,\
                    \ 'allow_multiple_claims_per_day') -%}\n      {%- set chore_state\
                    \ = states(chore_sensor_id) -%}\n      {%- set state_map = {\n\
                    \          'pending': ns.PENDING,\n          'claimed': ns.CLAIMED,\n\
                    \          'approved': ns.APPROVED,\n          'overdue': ns.OVERDUE\n\
                    \      } -%}\n      {%- set chore_state_display = (state_map[chore_state]\
                    \ if chore_state in state_map else chore_state) ~ ' (' ~ ns.MULTI_APPROVE_MARK\
                    \ ~ ')' if multi_approve == true else (state_map[chore_state]\
                    \ if chore_state in state_map else chore_state) -%}\n      {%-\
                    \ set points = state_attr(chore_sensor_id, 'default_points') |\
                    \ string -%}\n      {%- set global_chore_state = state_attr(chore_sensor_id,\
                    \ 'global_state') -%}\n      {%- set multi_approve = state_attr(chore_sensor_id,\
                    \ 'allow_multiple_claims_per_day') -%}\n      {%- set streak =\
                    \ state_attr(chore_sensor_id, 'chore_current_streak') | string\
                    \ -%}              \n      {%- set secondary_options = 'Points:\
                    \ ' + points + '\\n' + 'Streak: ' + streak + '\\n' + 'Last: '\
                    \ + last_update  + '\\n \\n' + 'Status: ' + chore_state + '\\\
                    n' + 'Due: ' + due_date_short -%}\n      {%- set secondary = ns.points_label\
                    \ ~ ': ' + points + '\\n' + ns.STREAK + ': ' + streak + '\\n \\\
                    n' + ns.STATUS + ': ' + chore_state_display + '\\n' + ns.DUE +\
                    \ ': ' + due_date_short -%}\n      {%- set icon_color = (\n  \
                    \          'blue' if chore_state == 'approved' and multi_approve\
                    \ == true else\n            'green' if chore_state == 'approved'\
                    \ else\n            'yellow' if chore_state == 'partial' else\n\
                    \            'orange' if chore_state == 'claimed' else\n     \
                    \       'red' if chore_state == 'overdue' else\n            'purple'\
                    \ if '_in_part' in global_chore_state else\n            'grey'\n\
                    \          ) -%}\n      {%- set badge_color = (\n            'blue'\
                    \ if chore_state == 'approved' and multi_approve == true else\n\
                    \            'green' if chore_state == 'approved' else\n     \
                    \       'green' if chore_state == 'partial' else\n           \
                    \ 'green' if chore_state == 'claimed' else\n            'red'\
                    \ if chore_state == 'overdue' else\n            'purple' if '_in_part'\
                    \ in global_chore_state else\n            'grey'\n          )\
                    \ -%}\n      {%- set badge_icon = (\n            'mdi:check-bold'\
                    \ if chore_state == 'approved' else\n            'mdi:check-bold'\
                    \ if chore_state == 'partial' else\n            'mdi:check-bold'\
                    \ if chore_state == 'claimed' else\n            'mdi:exclamation-thick'\
                    \ if chore_state == 'overdue' else\n            'mdi:account-group'\
                    \ if '_in_part' in global_chore_state else\n            ''\n \
                    \         ) -%}\n      {#-- Add chore card to the group_cards\
                    \ list --#}\n      {%- set ns.group_cards = ns.group_cards + [{\n\
                    \          'type': 'custom:mushroom-template-card',\n        \
                    \  'entity': button.entity_id,\n          'primary': primary,\n\
                    \          'multiline_secondary': 'false',\n          'secondary':\
                    \ secondary,\n          'layout': 'horizontal',\n          'icon':\
                    \ button.attributes.icon,\n          'icon_color': icon_color,\n\
                    \          'badge_icon': badge_icon,\n          'badge_color':\
                    \ badge_color,\n          'tap_action': {\n            'action':\
                    \ 'toggle'\n          },\n          'hold_action': {\n       \
                    \     'action': 'more-info'\n          }\n      }] -%}\n    {%-\
                    \ endfor -%}\n    {#-- Display the grid card for this group so\
                    \ column count can be adjusted --#}\n      {{\n        {\n   \
                    \       'type': 'grid',\n          'columns': ns.pref_column_count,\n\
                    \          'square': false,\n          'cards': ns.group_cards\n\
                    \        }\n      }},\n  {%- endif -%}\n{%- endfor -%}       \
                    \       "
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(\n  Kid_name='', Kid_name_normalize='',\n\
                    \  current_points=0,\n  points_label='',\n  points_icon='',\n\
                    \  rewards=[],\n  label_key='',\n  all_reward_labels=[],\n  all_label_sensors=[],\n\
                    \  label_sensor_groups=[],\n  temp_label_sensor_group=[],\n  group_cards=[],\n\
                    \n  COST='', REWARDS='', NO_REWARDS='', NEED='', MORE=''\n) -%}\
                    \    \n{#-- ************* Set Translatable Text *************\
                    \ --#}  \n{%- set ns.REWARDS = \"Rewards\" -%} \n{%- set ns.NO_REWARDS\
                    \ = \"No rewards available.\" -%} \n{%- set ns.COST = \"Cost\"\
                    \ -%}\n{%- set ns.NEED = \"Need\" -%} \n{%- set ns.MORE = \"more\"\
                    \ -%}  \n{#-- ************* End Translatable Text *************\
                    \ --#}\n{#-- ************* Set Preferences ************* --#}\
                    \ \n{%- set ns.pref_column_count = 1 -%}\n{%- set ns.pref_use_label_grouping\
                    \ = false -%}\n{%- set ns.pref_exclude_label_list = [ \"Example_label_1\"\
                    , \"Example_label_2\" ] -%}     \n{#-- ************* End Preferences\
                    \ ************* --#}\n{#-- Set Kid_name and normalize --#}  \n\
                    {%- set ns.Kid_name = 'Emma' -%}\n{%- set ns.Kid_name_normalize\
                    \ = ns.Kid_name | slugify() -%}\n{#-- Point Labels --#}    {%-\
                    \ set points_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_points'\
                    \ -%}    {%- set ns.current_points = states(points_sensor) | int(default=0)\
                    \ -%}    {%- set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
                    \ -%}    {%- set ns.points_icon = state_attr(points_sensor, 'icon')\
                    \ -%}\n{#-- Collect Available Rewards --#}    {%- set reward_prefix\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_reward_status_' -%}\
                    \    {%- set reward_list = states.sensor | selectattr('entity_id',\
                    \ 'match', reward_prefix ~ '.*') | list -%}\n{%- for sensor in\
                    \ reward_list -%}\n  {%- set reward_labels = state_attr(sensor.entity_id,\
                    \ 'labels') | default(['-No Label-'], true) -%}\n\n  {#-- Process\
                    \ label and sensor sorting - Default to no label if ns.pref_use_label_grouping\
                    \ is false --#}\n  {%- for label in reward_labels -%}\n    {%-\
                    \ set label_to_use = label if ns.pref_use_label_grouping else\
                    \ '-No Label-' -%}\n    {%- set ns.all_reward_labels = (ns.all_reward_labels\
                    \ | list + [label_to_use]) -%}\n    {%- set ns.all_label_sensors\
                    \ = ns.all_label_sensors + ([(label_to_use, [sensor])]) -%}\n\
                    \  {%- endfor -%}    \n{%- endfor -%}\n{#-- Remove Duplicate Labels\
                    \ & Exclude any in ns.pref_exclude_label_list --#} {%- set ns.all_reward_labels\
                    \ = ns.all_reward_labels | unique | list | sort -%} {%- set ns.all_reward_labels\
                    \ = ns.all_reward_labels | reject('in', ns.pref_exclude_label_list)\
                    \ | list -%}\n{#-- Create Groups by Label --#}   {%- for label\
                    \ in ns.all_reward_labels -%}\n  {%- set ns.temp_label_sensor_group\
                    \ = [] -%}\n  {%- set ns.label_key = label -%}\n  {%- for label_entry,\
                    \ sensor_list in ns.all_label_sensors -%}    \n    {%- set sensor\
                    \ = sensor_list | first -%} \n    {%- if label_entry == ns.label_key\
                    \ -%}\n      {%- set ns.temp_label_sensor_group = ns.temp_label_sensor_group\
                    \ + [sensor] -%}\n    {%- endif -%}\n  {%- endfor -%}\n  {%- set\
                    \ ns.label_sensor_groups = ns.label_sensor_groups + [{'name':\
                    \ label, 'sensors': ns.temp_label_sensor_group, 'icon': 'mdi:gift'}]\
                    \ -%}\n{%- endfor -%}\n{#-- Insert Label-Based Groups into Groups\
                    \ --#} {%- set sensor_groups = [] -%} {%- set sensor_groups =\
                    \ sensor_groups + ns.label_sensor_groups -%}\n{%- for group in\
                    \ sensor_groups -%}\n  {#-- Iterate through each label group to\
                    \ build button cards--#}\n  {%- set ns.group_cards = [] -%}\n\
                    \  \n  {%- for sensor in group.sensors -%}\n      {#-- Build the\
                    \ buttons --#}\n      {%- set reward_name = state_attr(sensor.entity_id,\
                    \ 'reward_name') | default('Unknown') -%}\n      {%- set reward_cost\
                    \ = state_attr(sensor.entity_id, 'cost') | int(default=0) -%}\n\
                    \      {%- set reward_status = states(sensor.entity_id) | default('unknown')\
                    \ -%}\n      {%- set reward_icon = state_attr(sensor.entity_id,\
                    \ 'icon') | default('mdi:gift') -%}\n      \n      {#-- Collect\
                    \ Approvals and Claims --#}  \n      {%- set claim_button = sensor.entity_id\
                    \ | regex_replace('^sensor\\\\.kc_(\\\\w+)_reward_status_(.+)$',\
                    \ 'button.kc_\\\\1_reward_claim_\\\\2') -%}\n      {%- set approvals\
                    \ = state_attr(sensor.entity_id, 'reward_approvals_count') | int(default=0)\
                    \ -%}\n      {%- set claims = state_attr(sensor.entity_id, 'reward_claims_count')\
                    \ | int(default=0) -%}\n\n      {#-- Check Points Availability\
                    \ --#}  \n      {%- set points_needed = reward_cost - ns.current_points\
                    \ if reward_cost > ns.current_points else 0 -%}\n      {%- set\
                    \ can_claim = \"✅\" if points_needed == 0 else \"❌ \" ~ ns.NEED\
                    \ ~ \" \" ~ points_needed ~ \" \" ~ ns.MORE -%}\n\n      {#--\
                    \ Add Reward Card to the list --#}  \n      {%- set ns.group_cards\
                    \ = ns.group_cards + [{\n        'type': 'custom:mushroom-template-card',\n\
                    \        'primary': reward_name,\n        'secondary': \"\U0001F4B0\
                    \ \" ~ ns.COST ~ \": \" ~ reward_cost|string ~ \" | \U0001F44D\
                    \ \" ~ approvals|string ~ \" | \U0001F4E5 \" ~ claims|string ~\
                    \ \" | \" ~ can_claim,\n        'icon': reward_icon,\n       \
                    \ 'icon_color': 'green' if points_needed == 0 else 'grey',\n \
                    \       'tap_action': { 'action': 'call-service', 'service': 'button.press',\
                    \ 'target': {'entity_id': claim_button } }\n      }] -%}\n  {%-\
                    \ endfor -%} \n  {#-- Display Cards --#}\n  {{\n    {\n      'type':\
                    \ 'heading',\n      'icon': 'mdi:gift-outline',\n      'heading':\
                    \ group.name if group.name != '-No Label-' else ns.REWARDS,\n\
                    \      'heading_style': 'title',\n    }\n  }},{{\n    {\n    \
                    \  'type': 'grid',\n      'columns': ns.pref_column_count,\n \
                    \     'square': false,\n      'cards': ns.group_cards if ns.group_cards\
                    \ | length > 0 else [{'type': 'markdown', 'content': ns.NO_REWARDS}]\n\
                    \    }\n  }},         \n{%- endfor -%} "
      - type: grid
        cards:
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace( Kid_name='', Kid_name_normalize='',\
                    \  points=0, points_label='',  points_icon='',  overdue=0, weekly_completed=0,\
                    \ todays_completed=0,  all_time_completed='',  all_badges=[],\
                    \  badge_list=[], badge_name_normalize='',  highest_badge='',\
                    \  highest_badge_icon='', highest_badge_entity='',  highest_badge_multiplier='',\
                    \ highest_badge_display_line='',  reward_progress=[], total_bonus_points=0,\
                    \  bonuses=[], total_penalty_points=0,  penalties=[],  achievements=[],\
                    \  challenges=[], content='', pref_show_penalties='',\nREWARDS_LABEL='',\
                    \  BONUSES_APPLIED_LABEL='', TOTAL_BONUS_LABEL='',  PENALTIES_APPLIED_LABEL='',\
                    \ TOTAL_PENALTY_LABEL='',  SHOWCASE='',   TOTAL_COMPLETED='',\
                    \  HIGHEST_BADGE_EARNED='',  ACHIEVEMENTS='',   CHALLENGES='',\
                    \  MULTIPLIER='',   NONE='',  ALL_EARNED_BADGES='',   COMPLETED='',\
                    \ APPLIED='', CLAIMS='', APPROVALS=''\n ) -%}      \n\n{#-- *************\
                    \ Set Translatable Text ************* --#}  \n{%- set ns.SHOWCASE\
                    \ = \"Showcase\" -%} \n{%- set ns.TOTAL_COMPLETED = \"Total Chores\
                    \ Completed\" -%} \n{%- set ns.HIGHEST_BADGE_EARNED = \"Highest\
                    \ Badge Earned\" -%} \n{%- set ns.MULTIPLIER = \"Multiplier\"\
                    \ -%}\n{%- set ns.ALL_EARNED_BADGES = \"All Earned Badges\" -%}\
                    \ \n{%- set ns.NONE = \"None\" -%}\n{%- set ns.COMPLETED = 'Completed'\
                    \ -%}\n{%- set ns.REWARDS_LABEL = \"Rewards\" -%}\n{%- set ns.BONUSES_APPLIED_LABEL\
                    \ = \"Bonuses Applied\" -%}  \n{%- set ns.TOTAL_BONUS_LABEL =\
                    \ \"Total Bonus\" -%}  \n{%- set ns.PENALTIES_APPLIED_LABEL =\
                    \ \"Penalties Applied\" -%}  \n{%- set ns.TOTAL_PENALTY_LABEL\
                    \ = \"Total Penalty\" -%} \n{%- set ns.ACHIEVEMENTS = \"Achievements\"\
                    \ -%}\n{%- set ns.CHALLENGES = \"Challenges\" -%} \n{%- set ns.APPLIED\
                    \ = \"Applied\" -%}\n{%- set ns.APPROVALS = \"Approvals\" -%}\n\
                    {%- set ns.CLAIMS = \"Claims\" -%}                \n{#-- *************\
                    \ End Translatable Text ************* --#}\n{#-- *************\
                    \ Set Preferences ************* --#} \n{%- set ns.pref_show_penalties\
                    \ = true -%}\n{#-- ************* End Preferences *************\
                    \ --#}\n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name\
                    \ = 'Emma' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name |\
                    \ slugify() -%}\n{#-- Collect Points --#}  {%- set points_sensor\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_points' -%}   {%-\
                    \ set ns.points = states(points_sensor) | int(default=0) -%} {%-\
                    \ set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
                    \ -%} {%- set ns.points_icon = state_attr(points_sensor, 'icon')\
                    \ -%}\n{#-- Collect Overdue Chores --#}  {%- set chore_sensor_id_prefix\
                    \ = 'sensor.kc_'~ ns.Kid_name_normalize ~ '_chore_status_' -%}\
                    \   {%- set ns.overdue = states.sensor \n    | selectattr('entity_id',\
                    \ 'match', '^' ~ chore_sensor_id_prefix ~ '.*') \n    | selectattr('state',\
                    \ 'eq', 'overdue') \n    | list | length | int(default=0) -%}\n\
                    \n{#-- Collect Weekly Completed --#}  {%- set weekly_sensor =\
                    \ 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_chores_completed_weekly'\
                    \ -%}  {%- set ns.weekly_completed = states(weekly_sensor) | int(default=0)\
                    \ -%}\n{#-- Collect Today's Completed --#}  {%- set todays_sensor\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_chores_completed_daily'\
                    \ -%}  {%- set ns.todays_completed = states(todays_sensor) | int(default=0)\
                    \ -%}\n{#-- Collect Total Completed --#}  {%- set all_time_sensor\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_chores_completed_total'\
                    \ -%}  {%- set ns.all_time_completed = states(all_time_sensor)\
                    \ | int(default=0) -%}\n{#-- Get Highest Badge Info --#}   \n\
                    {%- set highest_badge_entity = 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_highest_badge' -%}    \n{%- set ns.highest_badge = states(highest_badge_entity)\
                    \ or 'None' -%}  \n{%- set ns.highest_badge_icon = state_attr(highest_badge_entity,\
                    \ 'icon') or 'mdi:medal-outline' -%}\n{%- set ns.highest_badge_multiplier\
                    \ = state_attr(highest_badge_entity, 'points_multiplier') | float(default=1)\
                    \ -%}\n\n{#-- Construct Badge Display Line for Markdown --#}\n\
                    {%- if ns.highest_badge not in ['None', 'unknown', 'Unknown',\
                    \ 'unavailable'] -%}\n  {%- set ns.badge_display_line = \"<ha-icon\
                    \ icon='\" ~ ns.highest_badge_icon ~ \"'></ha-icon> \" ~ ns.highest_badge\
                    \  -%}\n{%- else -%}\n  {%- set ns.badge_display_line = ns.NONE\
                    \ -%}\n{%- endif -%}\n\n{#-- Get All Earned Badges --#}  \n{%-\
                    \ set ns.all_badges = state_attr(highest_badge_entity, 'all_earned_badges')\
                    \ | default([], true) -%}\n{#-- Construct the Badge List with\
                    \ Icons --#}\n{%- set ns.badge_list = \"\\n \" -%} \n{%- for badge\
                    \ in ns.all_badges -%}\n\n      {%- set ns.badge_name_normalize\
                    \ = badge | slugify() -%}\n\n  {%- set badge_entity = 'sensor.kc_'\
                    \ ~ ns.badge_name_normalize ~ '_badge' -%}\n  {%- set badge_icon\
                    \ = state_attr(badge_entity, 'icon') | default('mdi:medal-outline')\
                    \ -%}\n  {%- set ns.badge_list = ns.badge_list + \"- <ha-icon\
                    \ icon='\" ~ badge_icon ~ \"'></ha-icon> \" ~ badge ~ \"  \\n\"\
                    \ -%}\n{%- endfor -%}\n{#-- Collect Earned Rewards (Claims & Approvals)\
                    \ --#}   \n{%- set reward_status_prefix = 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_reward_status_' -%}   \n{%- set reward_status_entities =\
                    \ states.sensor | selectattr('entity_id', 'match', reward_status_prefix\
                    \ ~ '.*') | list -%}   \n{%- for entity in reward_status_entities\
                    \ -%}\n  {%- set status_sensor = entity.entity_id -%}\n  {%- set\
                    \ reward_name = state_attr(status_sensor, 'reward_name') | default('Unknown\
                    \ Reward') -%}\n  {%- set reward_icon = state_attr(status_sensor,\
                    \ 'icon') | default('mdi:gift-outline') -%}\n  {%- set claim_count\
                    \ = state_attr(status_sensor, 'reward_claims_count') | int(default=0)\
                    \ -%}\n  {%- set approval_count = state_attr(status_sensor, 'reward_approvals_count')\
                    \ | int(default=0) -%}\n\n  {%- if claim_count > 0 or approval_count\
                    \ > 0 -%}\n    {%- set ns.reward_progress = ns.reward_progress\
                    \ + [\n      \"- <ha-icon icon='\" ~ reward_icon ~ \"'></ha-icon>\
                    \ **\" ~ reward_name ~ \":** &nbsp;&nbsp; \" ~ ns.CLAIMS ~ \"\
                    : &nbsp;\" \n      ~ claim_count ~ \"&nbsp; |&nbsp; \" ~ ns.APPROVALS\
                    \ ~ \": &nbsp;\" ~ approval_count\n    ] -%}\n  {%- endif -%}\n\
                    {%- endfor -%}\n{#-- Collect Bonuses Applied --#} \n{%- set bonus_prefix\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_bonuses_applied_'\
                    \ -%}   {%- set bonus_list = states.sensor | selectattr('entity_id',\
                    \ 'match', bonus_prefix ~ '.*') | list -%}   \n{%- for sensor\
                    \ in bonus_list -%}\n  {%- set bonus_name = state_attr(sensor.entity_id,\
                    \ 'bonus_name') | default('Unknown Penalty') -%}\n  {%- set bonus_icon\
                    \ = state_attr(sensor.entity_id, 'icon') | default('mdi:alert')\
                    \ -%}\n  {%- set bonus_points = state_attr(sensor.entity_id, 'bonus_points')\
                    \ | float(default=0) -%}\n  {%- set bonus_count = states(sensor.entity_id)\
                    \ | int(default=0) -%}\n\n  {%- if bonus_count > 0 -%}\n    {%-\
                    \ set ns.total_bonus_points = ns.total_bonus_points + (bonus_points\
                    \ * bonus_count) -%}\n    {%- set ns.bonuses = ns.bonuses + [\n\
                    \      \"- <ha-icon icon='\" ~ bonus_icon ~ \"'></ha-icon> **\"\
                    \ ~ bonus_name ~ \":** \" ~ ns.APPLIED ~ \" \" \n      ~ bonus_count\
                    \ ~ \" (\U0001F4B0 \" ~ (bonus_points * bonus_count) ~ \" \" ~\
                    \ ns.points_label ~ \")\"\n    ] -%}\n  {%- endif -%}\n{%- endfor\
                    \ -%}\n{#-- Collect Penalties Applied --#}   {%- set penalty_prefix\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_penalties_applied_'\
                    \ -%}   {%- set penalty_list = states.sensor | selectattr('entity_id',\
                    \ 'match', penalty_prefix ~ '.*') | list -%}   \n{%- for sensor\
                    \ in penalty_list -%}\n  {%- set penalty_name = state_attr(sensor.entity_id,\
                    \ 'penalty_name') | default('Unknown Penalty') -%}\n  {%- set\
                    \ penalty_icon = state_attr(sensor.entity_id, 'icon') | default('mdi:alert')\
                    \ -%}\n  {%- set penalty_points = state_attr(sensor.entity_id,\
                    \ 'penalty_points') | float(default=0) -%}\n  {%- set penalty_count\
                    \ = states(sensor.entity_id) | int(default=0) -%}\n\n  {%- if\
                    \ penalty_count > 0 -%}\n    {%- set ns.total_penalty_points =\
                    \ ns.total_penalty_points + (-penalty_points * penalty_count)\
                    \ -%}\n    {%- set ns.penalties = ns.penalties + [\n      \"-\
                    \ <ha-icon icon='\" ~ penalty_icon ~ \"'></ha-icon> **\" ~ penalty_name\
                    \ ~ \":** \" ~ ns.APPLIED ~ \" \" \n      ~ penalty_count ~ \"\
                    \ (\U0001F4A5 \" ~ (-penalty_points * penalty_count) ~ \" \" ~\
                    \ ns.points_label ~ \")\"\n    ] -%}\n  {%- endif -%}\n{%- endfor\
                    \ -%}\n\n{#-- Collect Achievements with Progress and Rewards --#}\
                    \ \n{%- set achievement_prefix = 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_achievement_status_' -%}   {%- set achievement_list = states.sensor\
                    \ | selectattr('entity_id', 'match', achievement_prefix ~ '.*')\
                    \ | list -%}   {%- for sensor in achievement_list -%}\n  {%- set\
                    \ name = state_attr(sensor.entity_id, 'achievement_name') | default('Unknown\
                    \ Achievement') -%}\n  {%- set icon = state_attr(sensor.entity_id,\
                    \ 'icon') or 'mdi:trophy-award' -%}\n  {%- set progress = states(sensor.entity_id)\
                    \ | float(default=0) -%}\n  {%- set award_status = state_attr(sensor.entity_id,\
                    \ 'awarded') -%}\n\n  {#-- Get Overall Sensor for Reward Points\
                    \ --#}\n  {%- set overall_sensor = sensor.entity_id | regex_replace('^sensor\\\
                    \\.kc_.*?_achievement_status_', 'sensor.kc_achievement_status_')\
                    \ -%}\n\n  {%- set reward_points = state_attr(overall_sensor,\
                    \ 'reward_points') | int(default=0) -%}\n\n  {%- set status =\
                    \ ns.COMPLETED if award_status == 'true' else '⌛ ' ~ progress|round(0)\
                    \ ~ '%' -%}\n  {%- set ns.achievements = ns.achievements + [\"\
                    - \" ~ \"<ha-icon icon='\" ~ icon ~ \"'></ha-icon>&nbsp;\" ~ name\
                    \ ~ \" (\" ~ status ~ \", \U0001F48E \" ~ reward_points ~ \")\"\
                    ] -%}\n{%- endfor -%}\n{#-- Collect Challenges with Progress and\
                    \ Rewards --#}\n{%- set challenge_prefix = 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_challenge_status_' -%}   {%- set challenge_list = states.sensor\
                    \ | selectattr('entity_id', 'match', challenge_prefix ~ '.*')\
                    \ | list -%}   {%- for sensor in challenge_list -%}\n  {%- set\
                    \ name = state_attr(sensor.entity_id, 'challenge_name') | default('Unknown\
                    \ Challenge') -%}\n  {%- set icon = state_attr(sensor.entity_id,\
                    \ 'icon') or 'mdi:flag-checkered' -%}\n  {%- set progress = states(sensor.entity_id)\
                    \ | float(default=0) -%}\n  {%- set award_status = state_attr(sensor.entity_id,\
                    \ 'awarded') -%}\n\n  {#-- Get Overall Sensor for Reward Points\
                    \ --#}\n  {%- set overall_sensor = sensor.entity_id | regex_replace('^sensor\\\
                    \\.kc_.*?_achievement_status_', 'sensor.kc_achievement_status_')\
                    \ -%}\n  {%- set reward_points = state_attr(overall_sensor, 'reward_points')\
                    \ | int(default=0) -%}\n\n  {%- set status = \"✔️ \" ~ ns.COMPLETED\
                    \ if award_status == 'true' else '⌛ ' ~ progress|round(0) ~ '%'\
                    \ -%}\n  {%- set ns.challenges = ns.challenges + [\"- \" ~ \"\
                    <ha-icon icon='\" ~ icon ~ \"'></ha-icon>&nbsp;\" ~ name ~ \"\
                    \ (\" ~ status ~ \", \U0001F48E \" ~ reward_points ~ \")\"] -%}\n\
                    {%- endfor -%}\n{#-- Create Content Variable --#}  \n{%- set ns.content\
                    \ = \n  \"## \U0001F3C5 \" ~ ns.Kid_name ~ \"’s \" ~ ns.SHOWCASE\
                    \ ~ \"  \\n\"\n  \"<ha-icon icon=\" ~ ns.points_icon ~ \"></ha-icon>\"\
                    \ ~ \"&nbsp;&nbsp;**\" ~ ns.points_label ~ \":** &nbsp;&nbsp;\"\
                    \ ~ ns.points ~ \" \\n\\n\"\n  \"<ha-icon icon=\" ~ 'mdi:broom'\
                    \ ~ \"></ha-icon>\" ~ \"&nbsp;&nbsp;**\" ~ ns.TOTAL_COMPLETED\
                    \ ~ \":** &nbsp;&nbsp;\" ~ ns.all_time_completed ~ \" \\n\\n\"\
                    \  \n  \"**\U0001F947 \" ~ ns.HIGHEST_BADGE_EARNED ~ \":** &nbsp;&nbsp;\"\
                    \ ~ ns.badge_display_line ~ \"  \\n\"\n  \"**\U0001F48E \" ~ ns.points_label\
                    \ ~ \" \" ~ ns.MULTIPLIER ~ \":** &nbsp;&nbsp;x\" ~ ns.highest_badge_multiplier\
                    \ ~ \"  \\n\\n\"\n  \"**\U0001F947 \" ~ ns.ALL_EARNED_BADGES ~\
                    \ \":**  \" ~ (ns.badge_list if ns.all_badges | length > 0 else\
                    \ \"&nbsp;\" ~ ns.NONE) ~ \"  \\n\"\n  \"#### \U0001F381 \" ~\
                    \ ns.REWARDS_LABEL ~ \": &nbsp;&nbsp;\" ~ \n  (\"\\n\" ~ ('\\\
                    n'.join(ns.reward_progress)) if ns.reward_progress | length >\
                    \ 0 else ns.NONE) ~ \"  \\n\\n\"\n  \"#### ⭐ \" ~ ns.BONUSES_APPLIED_LABEL\
                    \ ~ \": &nbsp;&nbsp;\" ~ \n  (\"\\n\" ~ ('\\n'.join(ns.bonuses))\
                    \ ~ \"  \\n\"\n  \"**\U0001F4B0 \" ~ ns.TOTAL_BONUS_LABEL ~ \"\
                    \ \" ~ ns.points_label ~ \":** &nbsp;&nbsp;\" ~ ns.total_bonus_points\
                    \ ~ \"  \\n\"\n  if ns.bonuses | length > 0 else ns.NONE) ~ \"\
                    \ \\n\"\n  -%}\n\n  {%- if ns.pref_show_penalties -%}\n    {%-\
                    \ set ns.content = ns.content ~ \n      \"#### ⚠️ \" ~ ns.PENALTIES_APPLIED_LABEL\
                    \ ~ \": &nbsp;&nbsp;\" ~ \n      (\"\\n\" ~ ('\\n'.join(ns.penalties))\
                    \  ~ \"  \\n\"\n      \"**\U0001F4A5 \" ~ ns.TOTAL_PENALTY_LABEL\
                    \ ~ \" \" ~ ns.points_label ~ \":** &nbsp;&nbsp;\" ~ ns.total_penalty_points\
                    \ ~ \"  \\n\"\n      if ns.penalties | length > 0 else ns.NONE)\
                    \ ~ \" \\n\"\n      -%}\n  {%- endif -%}\n\n  \n  {%- set ns.content\
                    \ = ns.content ~\n  \"#### \U0001F3C6 \" ~ ns.ACHIEVEMENTS ~ \"\
                    : &nbsp;&nbsp; \" ~ \n  ('\\n' ~ ('\\n'.join(ns.achievements))\
                    \ if ns.achievements | length > 0 else \"&nbsp;\" ~ ns.NONE) ~\
                    \ \"  \\n\"\n  \"#### \U0001F3C1 \" ~ ns.CHALLENGES ~ \": &nbsp;&nbsp;\
                    \ \" ~ \n  ('\\n' ~ ('\\n'.join(ns.challenges)) if ns.challenges\
                    \ | length > 0 else \"&nbsp;\" ~ ns.NONE) ~ \"  \\n\"\n-%}\n{{\n\
                    \  {\n    'type': 'markdown',\n    'content': ns.content\n  }\n\
                    }},"
          - type: custom:auto-entities
            card:
              square: false
              type: grid
              columns: 1
            card_param: cards
            filter:
              template: "{#-- Initialize Namespace Variables --#}  \n{%- set ns =\
                \ namespace(\n  Kid_name='', \n  Kid_name_normalize='', \n  badge_sensor_id_prefix='',\
                \ \n  badges=[], points='', \n  points_label='', \n  points_sensor='',\
                \ \n  all_time_sensor='', \n  threshold_type='', \n  threshold_display='',\
                \ \n  points_multiplier='', \n  kids_earned='', \n  earned_text='',\
                \ \n\n  BADGE_TITLE='', STATUS='', THRESHOLD='', MULTIPLIER='', \n\
                \  EARNED_BY='', NO_BADGES_FOUND='', BADGE_SETUP_PROMPT='', \n  IN_PROGRESS='',\
                \ EARNED='', REMAINING='', CHORES=''\n) -%}    \n{#-- *************\
                \ Set Translatable Text ************* --#}  \n{%- set ns.BADGE_TITLE\
                \ = \"Badge\" -%} \n{%- set ns.STATUS = \"Status\" -%} \n{%- set ns.THRESHOLD\
                \ = \"Threshold\" -%}\n{%- set ns.MULTIPLIER = \"Multiplier\" -%}\
                \ \n{%- set ns.EARNED_BY = \"Earned By\" -%}\n{%- set ns.NO_BADGES_FOUND\
                \ = \"No Badges Found\" -%}\n{%- set ns.BADGE_SETUP_PROMPT = \"Set\
                \ up badges to reward milestones and keep chores fun!\" -%} \n{%-\
                \ set ns.IN_PROGRESS = \"In Progress\" -%} \n{%- set ns.EARNED = \"\
                Earned\" -%}\n{%- set ns.REMAINING = \"to go!\" -%}\n{%- set ns.CHORES\
                \ = \"Chores\" -%}\n{#-- ************* End Translatable Text *************\
                \ --#}\n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name\
                \ = 'Emma' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name | slugify()\
                \ -%}\n{#-- Collect Points --#}  \n{%- set points_sensor = 'sensor.kc_'\
                \ ~ ns.Kid_name_normalize ~ '_points' -%}     {%- set ns.points =\
                \ states(points_sensor) | int(default=0) -%}   {%- set ns.points_label\
                \ = state_attr(points_sensor, 'unit_of_measurement') -%}   {%- set\
                \ ns.points_icon = state_attr(points_sensor, 'icon') -%}\n{#-- Collect\
                \ Total Completed --#}  \n{%- set ns.all_time_sensor = 'sensor.kc_'\
                \ ~ ns.Kid_name_normalize ~ '_chores_completed_total' -%} \n{#-- Badge\
                \ Sensors --#}  \n{%- set badge_sensors = states.sensor \n    | selectattr('entity_id',\
                \ 'match', '^sensor\\\\.kc_.*_badge$') \n    | rejectattr('entity_id',\
                \ 'search', '_highest_badge$') \n    | list \n-%}\n{#-- Collect badge\
                \ attributes --#}  \n{%- for badge_sensor in badge_sensors -%}\n \
                \   {%- set badge_info = {\n        'entity_id': badge_sensor.entity_id,\n\
                \        'name': (state_attr(badge_sensor.entity_id, 'friendly_name')\
                \ | default('UNKNOWN BADGE')) | regex_replace('^Badge - ', ''),\n\
                \        'icon': state_attr(badge_sensor.entity_id, 'icon') | default('mdi:medal-outline'),\n\
                \        'description': state_attr(badge_sensor.entity_id, 'description')\
                \ | default(''),\n        'threshold': states(badge_sensor.entity_id)\
                \ | float(default=0),\n        'threshold_display': (states(badge_sensor.entity_id)\
                \ | float(default=0) | round(0)) ~ \" \" ~ \n                    \
                \          (ns.points_label if state_attr(badge_sensor.entity_id,\
                \ 'threshold_type') == \"points\" else ns.CHORES),\n        'points_multiplier':\
                \ state_attr(badge_sensor.entity_id, 'points_multiplier') | float(default=1),\n\
                \        'kids_earned': state_attr(badge_sensor.entity_id, 'kids_earned')\
                \ | default([], true),\n        'earned_text': \"✔️ \" ~ ns.EARNED\
                \ if ns.Kid_name in (state_attr(badge_sensor.entity_id, 'kids_earned')\
                \ | default([], true)) else \"⌛ \" ~ ns.IN_PROGRESS\n    } -%}   \
                \  \n    {%- set ns.badges = ns.badges + [badge_info] -%}\n{%- endfor\
                \ -%}\n{%- set sorted_badges = ns.badges | sort(reverse=true, attribute='threshold')\
                \ | sort(reverse=true, attribute='points_multiplier') -%}\n{%- if\
                \ sorted_badges | length == 0 -%}\n  {{\n    {\n      'type': 'markdown',\n\
                \      'content': \"### \U0001F3C5 \" ~ ns.NO_BADGES_FOUND ~ \" \\\
                n\" ~ ns.BADGE_SETUP_PROMPT\n    }\n  }},  \n{%- else -%}\n  {%- for\
                \ badge in sorted_badges -%}\n    {%- set required_value = badge.threshold\
                \ -%}\n    {%- set progress_value = ns.points if ns.points_label in\
                \ badge.threshold_display else states(ns.all_time_sensor) | int(default=0)\
                \ -%}\n    {%- set earned = ns.Kid_name in badge.kids_earned -%}\n\
                \    {%- set remaining_value = (required_value - progress_value) |\
                \ round(0) if required_value > progress_value and not earned else\
                \ 0 -%}\n    {%- set remaining_text = \" (\" ~ remaining_value|string\
                \ ~ \" \" ~ ns.REMAINING ~ \")\" if remaining_value > 0 else \"\"\
                \ -%}\n\n    {%- set content = \"## <ha-icon icon=\" ~ badge.icon\
                \ ~ \"></ha-icon> \" ~ \"**\" ~ ns.BADGE_TITLE ~ \":** \" ~ badge.name\
                \ ~ \"  \\n\" %}\n    {%- if badge.description -%}\n      {%- set\
                \ content = content ~ \"#### \U0001F4D6 &nbsp;\" ~ badge.description\
                \ ~ \"  \\n\" %}\n    {%- endif -%}\n    {%- set content = content\
                \ ~ \"**\" ~ \"\U0001F3C5 \" ~ ns.STATUS ~ \":** &nbsp;\" ~ badge.earned_text\
                \ ~ \"  \\n\" %}\n    {%- set content = content ~ \"**\U0001F3AF \"\
                \ ~ ns.THRESHOLD ~ \":** &nbsp;\" ~ badge.threshold_display ~ remaining_text\
                \ ~ \"  \\n\" %}\n    {%- if badge.points_multiplier > 1 -%}\n   \
                \   {%- set content = content ~ \"**\U0001F48E \" ~ ns.MULTIPLIER\
                \ ~ \":** &nbsp;x\" ~ badge.points_multiplier|string ~ \"  \\n\" %}\n\
                \    {%- endif -%}\n    {%- if badge.kids_earned | count > 0 -%}\n\
                \      {%- set content = content ~ \"**\U0001F465 \" ~ ns.EARNED_BY\
                \ ~ \":** &nbsp;\" ~ badge.kids_earned | join(', ') ~ \"  \\n\" %}\n\
                \    {%- endif -%}\n\n\n    {{\n      {\n        'type': 'markdown',\n\
                \        'content': content\n      }\n    }},  \n  {%- endfor -%}\n\
                {%- endif -%}"
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{#-- Initialize Namespace Variables --#}  \n{%- set ns\
                    \ = namespace(\n  Kid_name='',\n  Kid_name_normalize='',\n  current_points='',\n\
                    \  points_label='',\n  achievements=[],\n\n  NO_ACHIEVEMENTS_FOUND='',\n\
                    \  START_A_ACHIEVEMENT='',\n  ACHIEVEMENT_LABEL='',\n  AWARD_STATUS_LABEL='',\n\
                    \  EARNED_LABEL='',\n  IN_PROCESS_LABEL='',\n  DESCRIPTION_LABEL='',\n\
                    \  CRITERIA_LABEL='',\n  GOAL_LABEL='',\n  START_DATE_LABEL='',\n\
                    \  END_DATE_LABEL='',\n  REWARD_LABEL='',\n  PROGRESS_LABEL='',\n\
                    \  ASSIGNED_TO_LABEL='',\n  RELATED_CHORE_LABEL='',\n  STREAK_GOAL='',\n\
                    \  COMPLETION_GOAL='',\n  DAILY_MINIMUM=''\n) -%}    \n{#-- *************\
                    \ Set Translatable Text ************* --#}  \n{%- set ns.NO_ACHIEVEMENTS_FOUND\
                    \ = \"No Achievements Found\" -%} \n{%- set ns.START_A_ACHIEVEMENT\
                    \ = \"Start an achievement to track your progress!\" -%} \n{%-\
                    \ set ns.ACHIEVEMENT_LABEL = \"Achievement\" -%} \n{%- set ns.AWARD_STATUS_LABEL\
                    \ = \"Award Status\" -%}  \n{%- set ns.EARNED_LABEL = \"Earned\"\
                    \ -%}  \n{%- set ns.IN_PROCESS_LABEL = \"In Process\" -%}  \n\
                    {%- set ns.DESCRIPTION_LABEL = \"Description\" -%}  \n{%- set\
                    \ ns.CRITERIA_LABEL = \"Criteria\" -%}  \n{%- set ns.GOAL_LABEL\
                    \ = \"Goal\" -%}  \n{%- set ns.START_DATE_LABEL = \"Start Date\"\
                    \ -%}  \n{%- set ns.END_DATE_LABEL = \"End Date\" -%}  \n{%- set\
                    \ ns.REWARD_LABEL = \"Reward\" -%}  \n{%- set ns.PROGRESS_LABEL\
                    \ = \"Progress\" -%}  \n{%- set ns.ASSIGNED_TO_LABEL = \"Assigned\
                    \ To\" -%}  \n{%- set ns.RELATED_CHORE_LABEL = \"Related Chore\"\
                    \ -%}\n{%- set ns.STREAK_GOAL = \"Streak Goal\" -%}\n{%- set ns.TOTAL_CHORES\
                    \ = \"Total Chores\" -%}\n{%- set ns.DAILY_MINIMUM = \"Daily Minimum\"\
                    \ -%} \n{#-- ************* End Translatable Text *************\
                    \ --#}\n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name\
                    \ = 'Emma' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name |\
                    \ slugify() -%}\n{#-- Point Labels --#}      {%- set points_sensor\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_points' -%}   {%-\
                    \ set ns.current_points = states(points_sensor) | int(default=0)\
                    \ -%}   {%- set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
                    \ -%}   {%- set ns.points_icon = state_attr(points_sensor, 'icon')\
                    \ -%}\n{#-- Collect Achievements --#}  {%- set achievement_prefix\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_achievement_status_'\
                    \ -%}  {%- set achievements = states.sensor | selectattr('entity_id',\
                    \ 'match', achievement_prefix ~ '.*') | list -%}\n{%- if achievements\
                    \ | length == 0 -%}\n  {{\n    {\n      'type': 'markdown',\n\
                    \      'content': \"### \U0001F3C6 \" ~ ns.NO_ACHIEVEMENTS_FOUND\
                    \ ~ \"  \\n\" ~ ns.START_A_ACHIEVEMENT\n    }\n  }},\n{%- else\
                    \ -%}\n  {%- for achievement_sensor in achievements -%}\n    {%-\
                    \ set achievement_name = state_attr(achievement_sensor.entity_id,\
                    \ 'achievement_name') | default('Unknown') -%}\n    {%- set achievement_icon\
                    \ = state_attr(achievement_sensor.entity_id, 'icon') or 'mdi:flag-checkered'\
                    \ -%}            \n    {%- set achievement_overall_sensor = achievement_sensor.entity_id\
                    \ | regex_replace('^sensor\\.kc_[a-zA-Z0-9_]+_achievement_status_',\
                    \ 'sensor.kc_achievement_status_') -%}\n    {%- set target_value\
                    \ = state_attr(achievement_sensor.entity_id, 'target_value') |\
                    \ int(default=0) -%}\n    {%- set raw_progress = state_attr(achievement_sensor.entity_id,\
                    \ 'raw_progress') | float(default=0) -%}\n    {%- set awarded\
                    \ = state_attr(achievement_sensor.entity_id, 'awarded') | default(false)\
                    \ -%}\n    {%- set reward_points = state_attr(achievement_overall_sensor,\
                    \ 'reward_points') | int(default=0) -%}\n    {%- set achievement_type\
                    \ = state_attr(achievement_overall_sensor, 'type') | default('total_within_window')\
                    \ -%}\n    {%- set progress_percentage = ((raw_progress / target_value)\
                    \ * 100) | round(1) if target_value > 0 else 0 -%}\n    {%- set\
                    \ associated_chore = state_attr(achievement_sensor.entity_id,\
                    \ 'associated_chore') | default('') -%}\n    {%- set description\
                    \ = state_attr(achievement_sensor.entity_id, 'description') |\
                    \ default('') -%}\n    {%- set criteria = state_attr(achievement_sensor.entity_id,\
                    \ 'criteria') | default('') -%}\n    {%- set assigned_kids = state_attr(achievement_sensor.entity_id,\
                    \ 'assigned_kids') | default([], true) -%}\n  \n    {%- set awarded_text\
                    \ = \"✔️ \" ~ ns.EARNED_LABEL if awarded else \"⌛ \" ~ ns.IN_PROCESS_LABEL\
                    \ -%}\n    {%- set goal_type_label = \n      target_value ~ '\
                    \ (' ~ ns.STREAK_GOAL ~ ')' if achievement_type == 'chore_streak'\
                    \ \n      else target_value ~ ' (' ~ ns.DAILY_MINIMUM ~ ')' if\
                    \ achievement_type == 'daily_minimum'\n      else target_value\
                    \ ~ ' (' ~ ns.TOTAL_CHORES ~ ')' -%}\n    {%- set kids_display\
                    \ = assigned_kids | join(', ') if assigned_kids | count > 0 else\
                    \ '' -%}\n\n\n    {%- set content = \"## <ha-icon icon=\" ~ achievement_icon\
                    \ ~ \"></ha-icon> \" ~ ns.ACHIEVEMENT_LABEL ~ \": \" ~ achievement_name\
                    \ ~ \"  \\n\" %}\n    {%- set content = content ~ \"### \U0001F3C5\
                    \ \" ~ ns.AWARD_STATUS_LABEL ~ \": &nbsp;&nbsp;\" ~ awarded_text\
                    \ ~ \"  \\n\" %}\n    {%- if description -%}\n      {%- set content\
                    \ = content ~ \"#### \U0001F4D6 &nbsp;&nbsp;\" ~ description ~\
                    \ \"  \\n\" %}\n    {%- endif -%}\n    {%- if criteria -%}\n \
                    \     {%- set content = content ~ \"**\U0001F4CC \" ~ ns.CRITERIA_LABEL\
                    \ ~ \":** &nbsp;&nbsp;\" ~ criteria ~ \"  \\n\" %}\n    {%- endif\
                    \ -%}\n    {%- set content = content ~ \"**\U0001F3AF \" ~ ns.GOAL_LABEL\
                    \ ~ \":** &nbsp;&nbsp;\" ~ goal_type_label ~ \"  \\n\" %}\n  \
                    \  {%- if reward_points > 0 -%}\n      {%- set content = content\
                    \ ~ \"**\U0001F48E \" ~ ns.REWARD_LABEL ~ \":** &nbsp;&nbsp;\"\
                    \ ~ reward_points|string ~ \" \" ~ ns.points_label ~ \" \\n\"\
                    \ %}\n    {%- endif -%}\n    {%- set content = content ~ \"\\\
                    n **\U0001F4CA \" ~ ns.PROGRESS_LABEL ~ \":** &nbsp;&nbsp;\" ~\
                    \ raw_progress|int|string ~ \"/\" ~ target_value|string ~ \" (\"\
                    \ ~ progress_percentage|string ~ \"%)  \\n\" %}\n    {%- if kids_display\
                    \ -%}\n      {%- set content = content ~ \"**\U0001F465 \" ~ ns.ASSIGNED_TO_LABEL\
                    \ ~ \":** &nbsp;&nbsp;\" ~ kids_display ~ \"  \\n\" %}\n    {%-\
                    \ endif -%}\n    {%- if associated_chore -%}\n      {%- set content\
                    \ = content ~ \"**\U0001F6E0 \" ~ ns.RELATED_CHORE_LABEL ~ \"\
                    :** &nbsp;&nbsp;\" ~ associated_chore ~ \"  \\n\" %}\n    {%-\
                    \ endif -%}  \n\n    {{\n      {\n        'type': 'markdown',\n\
                    \        'content': content\n      }\n    }},\n  {%- endfor -%}\n\
                    {%- endif -%}"
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{#-- Initialize Namespace Variables --#}  \n{%- set ns\
                    \ = namespace(\n  Kid_name='',\n  Kid_name_normalize='',\n  current_points='',\n\
                    \  points_label='',\n  challenges=[],\n\n  NO_CHALLENGES_FOUND='',\n\
                    \  START_A_CHALLENGE='',\n  CHALLENGE_LABEL='',\n  AWARD_STATUS_LABEL='',\n\
                    \  EARNED_LABEL='',\n  IN_PROCESS_LABEL='',\n  DESCRIPTION_LABEL='',\n\
                    \  CRITERIA_LABEL='',\n  GOAL_LABEL='',\n  START_DATE_LABEL='',\n\
                    \  END_DATE_LABEL='',\n  REWARD_LABEL='',\n  PROGRESS_LABEL='',\n\
                    \  ASSIGNED_TO_LABEL='',\n  RELATED_CHORE_LABEL='',\n  TOTAL_CHORES='',\n\
                    \  PER_DAY_GOAL='',\n) -%}    \n{#-- ************* Set Translatable\
                    \ Text ************* --#}  \n{%- set ns.NO_CHALLENGES_FOUND =\
                    \ \"No Challenges Found\" -%} \n{%- set ns.START_A_CHALLENGE =\
                    \ \"Start a challenge to push your limits!\" -%} \n{%- set ns.CHALLENGE_LABEL\
                    \ = \"Challenge\" -%} \n{%- set ns.AWARD_STATUS_LABEL = \"Award\
                    \ Status\" -%}  \n{%- set ns.EARNED_LABEL = \"Earned\" -%}  \n\
                    {%- set ns.IN_PROCESS_LABEL = \"In Process\" -%}  \n{%- set ns.DESCRIPTION_LABEL\
                    \ = \"Description\" -%}  \n{%- set ns.CRITERIA_LABEL = \"Criteria\"\
                    \ -%}  \n{%- set ns.GOAL_LABEL = \"Goal\" -%}  \n{%- set ns.START_DATE_LABEL\
                    \ = \"Start Date\" -%}  \n{%- set ns.END_DATE_LABEL = \"End Date\"\
                    \ -%}  \n{%- set ns.REWARD_LABEL = \"Reward\" -%}  \n{%- set ns.PROGRESS_LABEL\
                    \ = \"Progress\" -%}  \n{%- set ns.ASSIGNED_TO_LABEL = \"Assigned\
                    \ To\" -%}  \n{%- set ns.RELATED_CHORE_LABEL = \"Related Chore\"\
                    \ -%}\n{%- set ns.TOTAL_CHORES = \"Total Chores\" -%}\n{%- set\
                    \ ns.PER_DAY_GOAL = \"Per Day Goal\" -%}  \n{#-- *************\
                    \ End Translatable Text ************* --#}\n{#-- Set Kid_name\
                    \ and normalize --#}  \n{%- set ns.Kid_name = 'Emma' -%}\n{%-\
                    \ set ns.Kid_name_normalize = ns.Kid_name | slugify() -%}\n{#--\
                    \ Point Labels --#}      {%- set points_sensor = 'sensor.kc_'\
                    \ ~ ns.Kid_name_normalize ~ '_points' -%}   {%- set ns.current_points\
                    \ = states(points_sensor) | int(default=0) -%}   {%- set ns.points_label\
                    \ = state_attr(points_sensor, 'unit_of_measurement') -%}   {%-\
                    \ set ns.points_icon = state_attr(points_sensor, 'icon') -%}\n\
                    {#-- Collect Challenges --#}  {%- set challenge_prefix = 'sensor.kc_'\
                    \ ~ ns.Kid_name_normalize ~ '_challenge_status_' -%}  {%- set\
                    \ challenges = states.sensor | selectattr('entity_id', 'match',\
                    \ challenge_prefix ~ '.*') | list -%}\n{%- if challenges | length\
                    \ == 0 -%}\n  {{\n    {\n      'type': 'markdown',\n      'content':\
                    \ \"### \U0001F3C1 \" ~ ns.NO_CHALLENGES_FOUND ~ \"  \\n\" ~ ns.START_A_CHALLENGE\n\
                    \    }\n  }},\n{%- else -%}\n  {%- for challenge_sensor in challenges\
                    \ -%}\n    {%- set challenge_name = state_attr(challenge_sensor.entity_id,\
                    \ 'challenge_name') | default('Unknown') -%}\n    {%- set challenge_icon\
                    \ = state_attr(challenge_sensor.entity_id, 'icon') or 'mdi:flag-checkered'\
                    \ -%}            \n    {%- set challenge_overall_sensor = challenge_sensor.entity_id\
                    \ | regex_replace('^sensor\\.kc_[a-zA-Z0-9_]+_challenge_status_',\
                    \ 'sensor.kc_challenge_status_') -%}\n    {%- set target_value\
                    \ = state_attr(challenge_sensor.entity_id, 'target_value') | int(default=0)\
                    \ -%}\n    {%- set raw_progress = state_attr(challenge_sensor.entity_id,\
                    \ 'raw_progress') | float(default=0) -%}\n    {%- set awarded\
                    \ = state_attr(challenge_sensor.entity_id, 'awarded') | default(false)\
                    \ -%}\n    {%- set reward_points = state_attr(challenge_overall_sensor,\
                    \ 'reward_points') | int(default=0) -%}\n    {%- set challenge_type\
                    \ = state_attr(challenge_overall_sensor, 'type') | default('total_within_window')\
                    \ -%}\n    {%- set progress_percentage = ((raw_progress / target_value)\
                    \ * 100) | round(1) if target_value > 0 else 0 -%}\n    {%- set\
                    \ associated_chore = state_attr(challenge_sensor.entity_id, 'associated_chore')\
                    \ | default('') -%}\n    {%- set description = state_attr(challenge_sensor.entity_id,\
                    \ 'description') | default('') -%}\n    {%- set criteria = state_attr(challenge_sensor.entity_id,\
                    \ 'criteria') | default('') -%}\n    {%- set assigned_kids = state_attr(challenge_sensor.entity_id,\
                    \ 'assigned_kids') | default([], true) -%}\n  \n    {%- set awarded_text\
                    \ = \"✔️ \" ~ ns.EARNED_LABEL if awarded else \"⌛ \" ~ ns.IN_PROCESS_LABEL\
                    \ -%}\n    {%- set goal_type_label = target_value ~ ' (' ~ ns.TOTAL_CHORES\
                    \ ~ ')' if challenge_type == 'total_within_window' else target_value\
                    \ ~ ' (' ~ ns.PER_DAY_GOAL ~ ')' -%}\n    {%- set kids_display\
                    \ = assigned_kids | join(', ') if assigned_kids | count > 0 else\
                    \ '' -%}\n    {# Convert start and end dates to local time and\
                    \ short format #}\n    {%- set start_date_utc = state_attr(challenge_overall_sensor,\
                    \ 'start_date') -%}\n    {%- set end_date_utc = state_attr(challenge_overall_sensor,\
                    \ 'end_date') -%}\n    {%- set start_date = as_datetime(start_date_utc).astimezone().strftime('%b\
                    \ %d, %Y') if start_date_utc else 'N/A' -%}\n    {%- set end_date\
                    \ = as_datetime(end_date_utc).astimezone().strftime('%b %d, %Y')\
                    \ if end_date_utc else 'N/A' -%}\n\n\n    {%- set content = \"\
                    ## <ha-icon icon=\" ~ challenge_icon ~ \"></ha-icon> \" ~ ns.CHALLENGE_LABEL\
                    \ ~ \": \" ~ challenge_name ~ \"  \\n\" %}\n    {%- set content\
                    \ = content ~ \"### \U0001F3C5 \" ~ ns.AWARD_STATUS_LABEL ~ \"\
                    : &nbsp;&nbsp;\" ~ awarded_text ~ \"  \\n\" %}\n    {%- if description\
                    \ -%}\n      {%- set content = content ~ \"#### \U0001F4D6 &nbsp;&nbsp;\"\
                    \ ~ description ~ \"  \\n\" %}\n    {%- endif -%}\n    {%- if\
                    \ criteria -%}\n      {%- set content = content ~ \"**\U0001F4CC\
                    \ \" ~ ns.CRITERIA_LABEL ~ \":** &nbsp;&nbsp;\" ~ criteria ~ \"\
                    \  \\n\" %}\n    {%- endif -%}\n    {%- set content = content\
                    \ ~ \"**\U0001F3AF \" ~ ns.GOAL_LABEL ~ \":** &nbsp;&nbsp;\" ~\
                    \ goal_type_label ~ \"  \\n\" %}\n    {%- set content = content\
                    \ ~ \"**\U0001F4C5 \" ~ ns.START_DATE_LABEL ~ \":** &nbsp;&nbsp;\"\
                    \ ~ start_date ~ \"  \\n\" %}\n    {%- set content = content ~\
                    \ \"**\U0001F4C5 \" ~ ns.END_DATE_LABEL ~ \":** &nbsp;&nbsp;\"\
                    \ ~ end_date ~ \"  \\n\" %}\n    {%- if reward_points > 0 -%}\n\
                    \      {%- set content = content ~ \"**\U0001F48E \" ~ ns.REWARD_LABEL\
                    \ ~ \":** &nbsp;&nbsp;\" ~ reward_points|string ~ \" \" ~ ns.points_label\
                    \ ~ \" \\n\" %}\n    {%- endif -%}\n    {%- set content = content\
                    \ ~ \"\\n **\U0001F4CA \" ~ ns.PROGRESS_LABEL ~ \":** &nbsp;&nbsp;\"\
                    \ ~ raw_progress|int|string ~ \"/\" ~ target_value|string ~ \"\
                    \ (\" ~ progress_percentage|string ~ \"%)  \\n\" %}\n    {%- if\
                    \ kids_display -%}\n      {%- set content = content ~ \"**\U0001F465\
                    \ \" ~ ns.ASSIGNED_TO_LABEL ~ \":** &nbsp;&nbsp;\" ~ kids_display\
                    \ ~ \"  \\n\" %}\n    {%- endif -%}\n    {%- if associated_chore\
                    \ -%}\n      {%- set content = content ~ \"**\U0001F6E0 \" ~ ns.RELATED_CHORE_LABEL\
                    \ ~ \":** &nbsp;&nbsp;\" ~ associated_chore ~ \"  \\n\" %}\n \
                    \   {%- endif -%}  \n\n    {{\n      {\n        'type': 'markdown',\n\
                    \        'content': content\n      }\n    }},\n  {%- endfor -%}\n\
                    {%- endif -%}"
      - type: grid
        cards:
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(\n  Kid_name='',\n  Kid_name_normalize='',\n\
                    \  points=0,\n  points_label='',\n  points_icon='',\n  todays_completed=0,\n\
                    \  weekly_completed=0,\n  monthly_completed=0,\n  overdue_chores=0,\n\
                    \n  PARENT_DASHBOARD_LABEL='',\n  CHORES_COMPLETED_LABEL='',\n\
                    \  TODAY_LABEL='',\n  WEEK_LABEL='',\n  MONTH_LABEL='',\n  OVERDUE_CHORES_LABEL='',\n\
                    \  NONE=''\n) -%}    \n{#-- ************* Set Translatable Text\
                    \ ************* --#}  \n{%- set ns.PARENT_DASHBOARD_LABEL = \"\
                    Parent Dashboard for\" -%} \n{%- set ns.CHORES_COMPLETED_LABEL\
                    \ = \"Chores Completed\" -%} \n{%- set ns.TODAY_LABEL = \"Today\"\
                    \ -%} \n{%- set ns.WEEK_LABEL = \"Week\" -%}  \n{%- set ns.MONTH_LABEL\
                    \ = \"Month\" -%}  \n{%- set ns.OVERDUE_CHORES_LABEL = \"Overdue\
                    \ Chores\" -%}  \n{%- set ns.NONE = \"None\" -%}  \n{#-- *************\
                    \ End Translatable Text ************* --#}\n{#-- Set Kid_name\
                    \ and normalize --#}  \n{%- set ns.Kid_name = 'Emma' -%}\n{%-\
                    \ set ns.Kid_name_normalize = ns.Kid_name | slugify() -%}\n{#--\
                    \ Collect Points Info --#}   {%- set points_sensor = 'sensor.kc_'\
                    \ ~ ns.Kid_name_normalize ~ '_points' -%}   {%- set ns.points\
                    \ = states(points_sensor) | int(default=0) -%}   {%- set ns.points_label\
                    \ = state_attr(points_sensor, 'unit_of_measurement') -%}   {%-\
                    \ set ns.points_icon = state_attr(points_sensor, 'icon') -%}\n\
                    {#-- Collect Chores Completed: Today, Week, Month --#}   {%- set\
                    \ todays_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_chores_completed_daily'\
                    \ -%}   {%- set weekly_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_chores_completed_weekly' -%}   {%- set monthly_sensor =\
                    \ 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_chores_completed_monthly'\
                    \ -%}   {%- set ns.todays_completed = states(todays_sensor) |\
                    \ int(default=0) -%}   {%- set ns.weekly_completed = states(weekly_sensor)\
                    \ | int(default=0) -%}   {%- set ns.monthly_completed = states(monthly_sensor)\
                    \ | int(default=0) -%}  \n{#-- Collect Overdue Chores --#}   {%-\
                    \ set chore_sensor_prefix = 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_chore_status_' -%}   {%- set overdue = states.sensor  \n\
                    \    | selectattr('entity_id', 'match', '^' ~ chore_sensor_prefix\
                    \ ~ '.*')  \n    | selectattr('state', 'eq', 'overdue')  \n  \
                    \  | list  \n    | length  \n-%}   {%- set ns.overdue_chores =\
                    \ overdue | int(default=0) -%}  \n{#-- Store the Markdown content\
                    \ in a variable --#}\n{#-- Store the Markdown content in a variable\
                    \ --#} {%- set content = \n  \"## \U0001F468‍\U0001F469‍\U0001F467\
                    \ \" ~ ns.PARENT_DASHBOARD_LABEL ~ \": \" ~ ns.Kid_name ~ \" \
                    \ \\n\"\n  \"<ha-icon icon=\" ~ ns.points_icon ~ \"></ha-icon>\
                    \ **\" ~ ns.points_label ~ \":** &nbsp;&nbsp;\" ~ ns.points ~\
                    \ \"  \\n\"\n  \"#### \U0001F4C5 \" ~ ns.CHORES_COMPLETED_LABEL\
                    \ ~ \":  \\n\"\n  \"- ☀️ \" ~ ns.TODAY_LABEL ~ \": &nbsp;&nbsp;\"\
                    \ ~ ns.todays_completed ~ \"  \\n\"\n  \"- \U0001F4C5 \" ~ ns.WEEK_LABEL\
                    \ ~ \": &nbsp;&nbsp;\" ~ ns.weekly_completed ~ \"  \\n\"\n  \"\
                    - \U0001F5D3️ \" ~ ns.MONTH_LABEL ~ \": &nbsp;&nbsp;\" ~ ns.monthly_completed\
                    \ ~ \"  \\n\"\n  \"- \U0001F6A8 \" ~ ns.OVERDUE_CHORES_LABEL ~\
                    \ \": &nbsp;&nbsp;\" ~ ns.overdue_chores ~ \"  \\n\\n\"\n-%}\n\
                    {#-- Use the content variable inside the markdown card --#}\n\
                    {{\n  {\n    'type': 'markdown',\n    'content': content\n  }\n\
                    }},"
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace( Kid_name='',   Kid_name_normalize='',\
                    \ pref_column_count='',  approve_chore_buttons=[],  approve_reward_buttons=[],\
                    \  heading_card_blank='',  has_approvals='false',  chore_name_normalize='',\
                    \ reward_name_normalize='', group_cards=[],\n\nCHORE_APPROVALS='',\
                    \ REWARD_APPROVALS='', OK='',  NO='' ) -%} \n{#-- *************\
                    \ Set Translatable Text ************* --#}  \n{%- set ns.CHORE_APPROVALS\
                    \ = \"Chore Approvals\" -%} \n{%- set ns.REWARD_APPROVALS = \"\
                    Reward Approvals\" -%} \n{%- set ns.OK = \"OK\" -%} \n{%- set\
                    \ ns.NO = \"NO\" -%}  \n{#-- ************* End Translatable Text\
                    \ ************* --#}\n{#-- ************* Set Preferences *************\
                    \ --#} \n{%- set ns.pref_column_count = 2 -%}\n{#-- *************\
                    \ End Preferences ************* --#}  \n{#-- ************* Set\
                    \ Kid_Name and Normalize ************* --#} {%- set ns.Kid_name\
                    \ = 'Emma'-%} \n{%- set ns.Kid_name_normalize = ns.Kid_name |\
                    \ slugify() -%}  \n{#-- ************* Find pending approval sensors\
                    \ - multiple listed to support legacy sensor names in 0.2.2 and\
                    \ before ************* --#} {%- set pending_chore_data = state_attr('sensor.kc_global_chore_pending_approvals',\
                    \ ns.Kid_name) | default([], true) \n  if states('sensor.kc_global_chore_pending_approvals')\
                    \ not in ['unavailable', 'unknown'] else state_attr('sensor.kc_pending_chore_approvals',\
                    \ ns.Kid_name) | default([], true) \n  if states('sensor.kc_pending_chore_approvals')\
                    \ not in ['unavailable', 'unknown'] else  [{'chore_name': 'error',\
                    \ 'Claimed on':'2000-01-01'}] -%}\n\n{%- set pending_reward_data\
                    \ = state_attr('sensor.kc_global_reward_pending_approvals', ns.Kid_name)\
                    \ | default([], true) \n  if states('sensor.kc_global_reward_pending_approvals')\
                    \ not in ['unavailable', 'unknown'] else state_attr('sensor.kc_global_pending_reward_approvals',\
                    \ ns.Kid_name) | default([], true) \n  if states('sensor.kc_global_pending_reward_approvals')\
                    \ not in ['unavailable', 'unknown'] else state_attr('sensor.kc_pending_reward_approvals',\
                    \ ns.Kid_name) | default([], true) \n  if states('sensor.kc_pending_reward_approvals')\
                    \ not in ['unavailable', 'unknown'] else  [{'reward_name': 'error',\
                    \ 'Redeemed on': '2000-01-01'}] -%}\n\n{#-- ************* Build\
                    \ button lists for claimed chores and rewards ************* --#}\
                    \ {%- if pending_chore_data | count > 0 -%}\n  {%- for chore in\
                    \ pending_chore_data | unique(attribute='chore_name') -%}\n  \
                    \  {%- set ns.chore_name_normalize = chore.chore_name | slugify()\
                    \ -%} \n    {%- set ns.approve_chore_buttons = ns.approve_chore_buttons\
                    \ + ['button.kc_' ~ ns.Kid_name_normalize ~ '_chore_approval_'\
                    \ ~ ns.chore_name_normalize] + ['button.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_chore_disapproval_' ~ ns.chore_name_normalize]-%}\n  {%-\
                    \ endfor -%}\n{%- endif -%} {%- if pending_reward_data | count\
                    \ > 0 -%}\n  {%- for reward in pending_reward_data | unique(attribute='reward_name')\
                    \ -%}\n    {%- set ns.reward_name_normalize = reward.reward_name\
                    \ | slugify() -%}\n    {%- set ns.approve_reward_buttons = ns.approve_reward_buttons\
                    \ + ['button.kc_' ~ ns.Kid_name_normalize ~ '_reward_approval_'\
                    \ ~ ns.reward_name_normalize] + ['button.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_reward_disapproval_' ~ ns.reward_name_normalize]-%}\n  {%-\
                    \ endfor -%}\n{%- endif -%}\n{%- set button_groups = [\n    {'name':\
                    \ ns.CHORE_APPROVALS, 'buttons': ns.approve_chore_buttons, 'icon':\
                    \ 'mdi:thumb-up-outline'},\n    {'name': ns.REWARD_APPROVALS,\
                    \ 'buttons': ns.approve_reward_buttons, 'icon': 'mdi:thumb-up-outline'},\n\
                    ] -%}\n{%- for group in button_groups -%}\n  {%- set ns.group_cards\
                    \ = [] -%}\n  {%- if group.buttons | length > 0 -%}\n    {%- set\
                    \ ns.has_approvals = 'true' -%}\n    {%- set heading_card =\n\
                    \      {\n        'type': 'heading',\n        'icon': group.icon,\n\
                    \        'heading': group.name,\n        'heading_style': 'title',\n\
                    \      }\n    -%}    \n\n    {%- for button in group.buttons -%}\n\
                    \      {%- set sensor_id = button \n          | regex_replace('^button\\\
                    \\.kc_', 'sensor.kc_') \n          | regex_replace('_(approval|disapproval)_',\
                    \ '_status_') \n      -%}\n\n      {%- set primary = \n      \
                    \  (ns.OK ~ ': ' ~ state_attr(sensor_id, 'reward_name') if sensor_id\
                    \ | regex_search('_reward_') else state_attr(sensor_id, 'chore_name'))\n\
                    \        if button | regex_search('_approval_') \n        else\
                    \ \n        (ns.NO ~ ': ' ~ state_attr(sensor_id, 'reward_name')\
                    \ if sensor_id | regex_search('_reward_') else state_attr(sensor_id,\
                    \ 'chore_name'))\n      -%}\n      \n      {%- set icon = \n \
                    \         'mdi:thumb-up' if '_approval_' in button else \n   \
                    \       'mdi:thumb-down' if '_disapproval_' in button else \n\
                    \          'mdi:progress-question' \n      -%}\n      {%- set\
                    \ icon_color = \n          'green' if '_approval_' in button else\
                    \ \n          'red' if '_disapproval_' in button else \n     \
                    \     'grey'\n      -%}\n      {%- set ns.group_cards = ns.group_cards\
                    \ + [{\n            'type': 'custom:mushroom-template-card',\n\
                    \            'entity': button,\n            'primary': primary,\n\
                    \            'icon': icon,\n            'layout': '',\n      \
                    \      'icon_color': icon_color,\n            'tap_action': {\n\
                    \              'action': 'toggle'\n            },\n          \
                    \  'hold_action': {\n              'action': 'more-info'\n   \
                    \         },\n          }]\n      -%}\n    {%- endfor -%}\n  \
                    \  \n    {#-- Display the cards for this group --#}\n    {{- heading_card\
                    \ -}}, {{\n      {\n        'type': 'grid',\n        'columns':\
                    \ ns.pref_column_count,\n        'square': false,\n        'cards':\
                    \ ns.group_cards\n      }\n    }},\n  {%- endif -%}\n{%- endfor\
                    \ -%} "
          - square: false
            type: grid
            columns: 1
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(\n  Kid_name='',\n  Kid_name_normalize='',\n\
                    \  replacements=[],\n  chore_select_entity='',\n  chore_selected='',\n\
                    \  chore_selected_normalize='',\n  chore_sensor_id_prefix='',\n\
                    \  chore_sensor_id='',\n  current_status='',\n  chore_description='',\n\
                    \  chore_days='',\n  chore_allow_multiple='',\n  global_status='Unknown',\n\
                    \  shared_chore='False',\n  due_date_formatted='None',\n  recurrence='Not\
                    \ Recurring',\n  chore_custom_freq_unit='',\n  chore_custom_freq_int='',\n\
                    \  chore_icon='mdi:clipboard-check',\n  chore_value='N/A',\n \
                    \ points='',\n  points_label='',\n  points_icon='',\n  content='',\n\
                    \  select_new_date_and_time_secondary='',\n\n  CHORE_ADMIN_ACTIONS='',\n\
                    \  SELECT_CHORE_TO_EDIT_DUE_DATE='',\n  CHORE_DETAIL_LABEL='',\n\
                    \  CURRENT_STATUS_LABEL='',\n  GLOBAL_STATUS_LABEL='',\n  SHARED_CHORE_LABEL='',\n\
                    \  VALUE_LABEL='',\n  DUE_DATE_LABEL='',\n  RECURRENCE_LABEL='',\n\
                    \  CUSTOM_INTERVAL='',\n  NO_CHORE_SELECTED_LABEL='',\n  PLUS_NEXT_DUE='',\n\
                    \  PLUS_1_DAY='',\n  PLUS_1_WEEK='',\n  CLEAR_DATE='',\n  SELECT_NEW_DATE_AND_TIME='',\n\
                    \  TAP_TO_CHANGE_HOLD_TO_SET='',\n  RESET_ALL='',\n  OVERDUE_CHORES='',\n\
                    \  RESET_OVERDUE_STATUS='',\n  ALLOW_MULTIPLE_CLAIMS='',\n  APPLICABLE_DAYS='',\n\
                    \  OVERDUE='', \n  PENDING='', \n  CLAIMED='', \n  APPROVED='',\n\
                    \  TRUE='',\n  FALSE='',\n  NONE=''\n) -%}  \n\n{#-- *************\
                    \ Set Translatable Text ************* --#}  \n{%- set ns.SELECT_CHORE_TO_EDIT_DUE_DATE\
                    \ = \"Select Chore to Edit Due Date\" -%}\n{%- set ns.CHORE_DETAIL_LABEL\
                    \ = \"Chore Detail\" -%} \n{%- set ns.CURRENT_STATUS_LABEL = \"\
                    Current Status\" -%} \n{%- set ns.GLOBAL_STATUS_LABEL = \"Global\
                    \ Status\" -%} \n{%- set ns.SHARED_CHORE_LABEL = \"Shared Chore\"\
                    \ -%}  \n{%- set ns.VALUE_LABEL = \"Value\" -%}  \n{%- set ns.DUE_DATE_LABEL\
                    \ = \"Due Date\" -%}  \n{%- set ns.RECURRENCE_LABEL = \"Recurrence\"\
                    \ -%}\n{%- set ns.CUSTOM_INTERVAL = \"Interval\" -%} \n{%- set\
                    \ ns.NO_CHORE_SELECTED_LABEL = \"No Chore Selected or Status Unavailable\"\
                    \ -%} \n{%- set ns.PLUS_NEXT_DUE = \"+Next Due\" -%}  \n{%- set\
                    \ ns.PLUS_1_DAY = \"+1 Day\" -%}  \n{%- set ns.PLUS_1_WEEK = \"\
                    +1 Week\" -%}  \n{%- set ns.CLEAR_DATE = \"Clear Date\" -%}  \n\
                    {%- set ns.SELECT_NEW_DATE_AND_TIME = \"Select New Date & Time\"\
                    \ -%}  \n{%- set ns.TAP_TO_CHANGE_HOLD_TO_SET = \"(Tap to Change\
                    \ / Hold to Set)\" -%}\n{%- set ns.RESET_ALL = \"Reset All\" -%}\n\
                    {%- set ns.OVERDUE_CHORES = \"Overdue Chores\" -%}\n{%- set ns.RESET_OVERDUE_STATUS\
                    \ = \"Reset Overdue Status\" -%}\n{%- set ns.ALLOW_MULTIPLE_CLAIMS\
                    \ = \"Allow Multiple Claims\" -%}\n{%- set ns.APPLICABLE_DAYS\
                    \ = \"Applicable Days\" -%}\n{%- set ns.CHORE_ADMIN_ACTIONS =\
                    \ \"Chore Admin Actions\" -%}\n{%- set ns.OVERDUE = \"Overdue\"\
                    \ -%}\n{%- set ns.PENDING = \"Pending\" -%}\n{%- set ns.CLAIMED\
                    \ = \"Claimed\" -%}\n{%- set ns.APPROVED = \"Approved\" -%}\n\
                    {%- set ns.TRUE = \"True\" -%}\n{%- set ns.FALSE = \"False\" -%}\n\
                    {%- set ns.NONE = \"None\" -%}\n{#-- ************* End Translatable\
                    \ Text ************* --#} \n{#-- Set Kid_name and normalize --#}\
                    \  \n{%- set ns.Kid_name = 'Emma' -%}\n{%- set ns.Kid_name_normalize\
                    \ = ns.Kid_name | slugify() -%}\n{#-- Collect Points --#}  \n\
                    {%- set points_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize ~\
                    \ '_points' -%}     {%- set ns.points = states(points_sensor)\
                    \ | int(default=0) -%}   {%- set ns.points_label = state_attr(points_sensor,\
                    \ 'unit_of_measurement') -%}   {%- set ns.points_icon = state_attr(points_sensor,\
                    \ 'icon') -%}\n{#-- Get Selected Chore from Input Select --#}\
                    \ \n{%- set ns.chore_select_entity = 'select.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_chore_list' -%}   {%- set ns.chore_selected = states(ns.chore_select_entity)\
                    \ -%}   {%- set ns.chore_sensor_id_prefix ='sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_chore_status_' -%}\n{#-- Collect Chore Status Sensor and\
                    \ Details --#}          \n{%- if ns.chore_selected | lower not\
                    \ in ['none', 'unknown', 'unavailable', ''] -%}\n\n {%- set ns.chore_selected_normalize\
                    \ = ns.chore_selected | slugify() -%}\n  \n  {%- set ns.chore_sensor_id\
                    \ = ns.chore_sensor_id_prefix ~ ns.chore_selected_normalize -%}\
                    \       \n  {%- set ns.current_status = states(ns.chore_sensor_id)\
                    \ | default('Unknown') -%}\n  {%- set ns.global_status = state_attr(ns.chore_sensor_id,\
                    \ 'global_state') | default('Unknown') -%}\n  {%- set state_map\
                    \ = {\n      'pending': ns.PENDING,\n      'claimed': ns.CLAIMED,\n\
                    \      'approved': ns.APPROVED,\n      'overdue': ns.OVERDUE\n\
                    \  } -%}\n  {%- set current_status_display = state_map[ns.current_status]\
                    \ if ns.current_status in state_map else ns.current_status -%}\n\
                    \  {%- set global_status_display = state_map[ns.global_status]\
                    \ if ns.global_status in state_map else ns.global_status -%}\n\
                    \  {%- set ns.shared_chore = state_attr(ns.chore_sensor_id, 'shared_chore')\
                    \ | string | default('False') -%}\n  {%- set ns.chore_allow_multiple\
                    \ = state_attr(ns.chore_sensor_id, 'allow_multiple_claims_per_day')\
                    \ | string | default('False') -%}\n  {%- set state_map_tf = {\n\
                    \      'False': ns.FALSE,\n      'True': ns.TRUE\n  } -%}\n  {%-\
                    \ set shared_chore_display = state_map_tf[ns.shared_chore] if\
                    \ ns.shared_chore in state_map_tf else ns.shared_chore -%}\n \
                    \ {%- set chore_allow_multiple_display = state_map_tf[ ns.chore_allow_multiple]\
                    \ if  ns.chore_allow_multiple in state_map_tf else  ns.chore_allow_multiple\
                    \ -%} \n  {%- set ns.recurrence = state_attr(ns.chore_sensor_id,\
                    \ 'recurring_frequency') if state_attr(ns.chore_sensor_id, 'recurring_frequency')\
                    \ != 'none' else ns.NONE -%}\n  {%- set ns.chore_value = state_attr(ns.chore_sensor_id,\
                    \ 'default_points') | int(default=0) -%}\n  {%- set ns.chore_icon\
                    \ = state_attr(ns.chore_sensor_id, 'icon') | default('mdi:clipboard-check')\
                    \ -%}\n  {%- set ns.chore_description = state_attr(ns.chore_sensor_id,\
                    \ 'description') | default('') -%}\n  {%- set ns.chore_days =\
                    \ state_attr(ns.chore_sensor_id, 'applicable_days') | default([],\
                    \ true)  -%}\n  {%- set ns.chore_custom_freq_unit = state_attr(ns.chore_sensor_id,\
                    \ 'custom_frequency_unit') | default('')  -%}\n  {%- set ns.chore_custom_freq_int\
                    \ = state_attr(ns.chore_sensor_id, 'custom_frequency_interval')\
                    \ | default('') -%}\n\n  {#-- Convert and Format Due Date --#}\n\
                    \  {%- set due_date_str = state_attr(ns.chore_sensor_id, 'due_date')\
                    \ | string-%}\n  {%- set due_date = as_datetime(due_date_str)\
                    \ if due_date_str and due_date_str not in ['None', 'unknown',\
                    \ 'unavailable'] else None -%}\n  {%- set ns.due_date_formatted\
                    \ = as_timestamp(due_date) | timestamp_custom('%a, %b %d, %Y %I:%M\
                    \ %p', true) if due_date else ns.NONE -%}        \n\n  {%- set\
                    \ ns.select_new_date_and_time_secondary = ns.TAP_TO_CHANGE_HOLD_TO_SET\
                    \ + \"\\n \\n\" + state_attr('input_datetime.kc_ui_set_date_helper',\
                    \ 'timestamp') | timestamp_custom('%a, %b %d, %Y %I:%M %p', true)\
                    \ if states('input_datetime.kc_ui_set_date_helper') != 'unknown'\
                    \ else 'No date set' -%}\n\n  {#-- Store the Markdown content\
                    \ in a variable --#}\n\n  {%- set ns.content =  \"### <ha-icon\
                    \ icon='\" ~ ns.chore_icon ~\n  \"'></ha-icon> \" ~ ns.CHORE_DETAIL_LABEL\
                    \ ~ \": \" ~ (ns.chore_selected |\n  title) ~ \"  \\n\" -%} \n\
                    \n  {%- set ns.content =  ns.content ~ \"#### \U0001F4D6 &nbsp;&nbsp;\"\
                    \ ~\n  ns.chore_description ~ \"  \\n\" if ns.chore_description\
                    \ else ns.content\n  -%} \n\n  {%- set ns.content = ns.content\
                    \ ~ \n    \"**\U0001F4CC \" ~ ns.CURRENT_STATUS_LABEL ~ \":**\
                    \ &nbsp;\" ~ current_status_display ~ \"  \\n\"\n    \"**\U0001F30D\
                    \ \" ~ ns.GLOBAL_STATUS_LABEL ~ \":** &nbsp;\" ~ global_status_display\
                    \ ~ \"  \\n\"\n    \"**\U0001F465 \" ~ ns.SHARED_CHORE_LABEL ~\
                    \ \":** &nbsp;\" ~ shared_chore_display ~ \"  \\n\"\n    \"**\U0001F4E5\
                    \ \" ~ ns.ALLOW_MULTIPLE_CLAIMS ~ \":** &nbsp;\" ~ chore_allow_multiple_display\
                    \ ~ \"  \\n\"\n    \"**\U0001F48E \" ~ ns.VALUE_LABEL ~ \":**\
                    \ &nbsp;\" ~ ns.chore_value ~ \" \" ~ ns.points_label ~ \"  \\\
                    n\\n\"\n    \"**\U0001F4C5 \" ~ ns.DUE_DATE_LABEL ~ \":** &nbsp;\"\
                    \ ~ ns.due_date_formatted ~ \"  \\n\"\n    \"**\U0001F501 \" ~\
                    \ ns.RECURRENCE_LABEL ~ \":** &nbsp;\" ~ ns.recurrence | title\
                    \ ~ \"  \\n\" -%}\n\n  {%- set ns.content = ns.content ~ ((\"\
                    **\U0001F535 \" ~ ns.APPLICABLE_DAYS ~ \":** &nbsp;\" ~ ns.chore_days\
                    \ | join(', ') | title) \n    if ns.chore_days is iterable and\
                    \ ns.chore_days | length > 0 else \"\") -%}\n\n  {%- set ns.content\
                    \ = ns.content ~ (\"**\U0001F535 \" ~ ns.CUSTOM_INTERVAL ~ \"\
                    :** &nbsp;\" ~ ns.chore_custom_freq_int | int ~ \" \" ~ ns.chore_custom_freq_unit\
                    \ | title \n    if ns.recurrence == 'custom' else \"\" ) -%}\n\
                    \n  {%- set ns.content =  ns.content if ns.chore_selected not\
                    \ in ['None', 'unknown', 'unavailable']  else \"**\U0001F6AB \"\
                    \ ~ ns.NO_CHORE_SELECTED_LABEL ~ \"**\" -%}\n\n{%- endif -%}\n\
                    {#-- Construct Overdue chore reset, chore dropdown, Markdown Card\
                    \ for Chore Details, and chore actions --#}  {{\n  {\n    'type':\
                    \ 'heading',\n    'icon': 'mdi:rocket-launch',\n    'heading':\
                    \ ns.CHORE_ADMIN_ACTIONS,\n    'heading_style': 'title',\n  }\n\
                    }}, {%- if states.sensor \n    | selectattr('entity_id', 'match',\
                    \ '^' ~ ns.chore_sensor_id_prefix ~ '.*') \n    | selectattr('state',\
                    \ 'eq', 'overdue') \n    | list | length > 0 -%}\n  \n  {{\n \
                    \   {\n      'type': 'grid',\n      'title': '',\n      'columns':\
                    \ 1,\n      'square': false,\n      'cards': [\n        {\n  \
                    \        'type': 'custom:mushroom-template-card',\n          'primary':\
                    \ ns.RESET_ALL ~ ' ' ~ ns.Kid_name ~ '\\'s ' ~ ns.OVERDUE_CHORES,\n\
                    \          'icon': 'mdi:restore-alert',\n          'icon_color':\
                    \ 'orange',\n          'tap_action': {\n            'action':\
                    \ 'call-service',\n            'service': 'kidschores.reset_overdue_chores',\n\
                    \            'data': {\n              'kid_name': ns.Kid_name\n\
                    \            }\n          }\n        }\n      ]\n    }\n  }},\n\
                    {%- endif -%}      \n  {{\n      {\n        'type': 'custom:mushroom-select-card',\n\
                    \        'entity': ns.chore_select_entity,\n        'name': ns.SELECT_CHORE_TO_EDIT_DUE_DATE,\n\
                    \        'icon': 'mdi:clipboard-edit',\n        'icon_color':\
                    \ 'blue',\n        'secondary_info': 'none'       \n      } \n\
                    \  }},\n  \n {%- if ns.chore_selected | lower not in ['none',\
                    \ 'unknown', 'unavailable', ''] -%}  \n     {{\n      {\n    \
                    \    'type': 'markdown',\n        'content': ns.content\n    \
                    \  }\n    }},\n    {%- if states(ns.chore_sensor_id) | lower in\
                    \ ['overdue'] -%}\n        {{\n          {\n            'type':\
                    \ 'grid',\n            'title': '',\n            'columns': 1,\n\
                    \            'square': false,\n            'cards': [\n      \
                    \        {\n                'type': 'custom:mushroom-template-card',\n\
                    \                'primary': ns.RESET_OVERDUE_STATUS,\n       \
                    \         'icon': 'mdi:restore',\n                'icon_color':\
                    \ 'orange',\n                'tap_action': {\n               \
                    \   'action': 'call-service',\n                  'service': 'kidschores.reset_overdue_chores',\n\
                    \                  'data': {\n                    'chore_name':\
                    \ ns.chore_selected,\n                    'kid_name': ns.Kid_name\n\
                    \                  }\n                }\n              }\n   \
                    \         ]\n          }\n        }},\n      {%- endif -%}\n \
                    \     {{\n        {\n          'type': 'grid',\n          'title':\
                    \ '',\n          'columns': 4,\n          'square': False,\n \
                    \         'cards': [\n            {\n              'type': 'custom:mushroom-template-card',\n\
                    \              'primary': ns.PLUS_NEXT_DUE,\n              'icon':\
                    \ 'mdi:calendar-refresh',\n              'icon_color': 'blue',\n\
                    \              'layout': 'vertical',\n              'tap_action':\
                    \ {\n                'action': 'call-service',\n             \
                    \   'service': 'kidschores.skip_chore_due_date',\n           \
                    \     'data': {\n                  'chore_name': ns.chore_selected\n\
                    \                }\n              }\n            },\n        \
                    \    {\n              'type': 'custom:mushroom-template-card',\n\
                    \              'primary': ns.PLUS_1_DAY,\n              'icon':\
                    \ 'mdi:calendar-plus',\n              'icon_color': 'blue',\n\
                    \              'layout': 'vertical',\n              'tap_action':\
                    \ {\n                'action': 'call-service',\n             \
                    \   'service': 'kidschores.set_chore_due_date',\n            \
                    \    'data': {\n                  'chore_name': ns.chore_selected,\n\
                    \                  'due_date': (as_datetime(due_date) + timedelta(days=1)).isoformat()\
                    \ if due_date else ''\n                }\n              }\n  \
                    \          },\n            {\n              'type': 'custom:mushroom-template-card',\n\
                    \              'primary': ns.PLUS_1_WEEK,\n              'icon':\
                    \ 'mdi:calendar-arrow-right',\n              'icon_color': 'blue',\n\
                    \              'layout': 'vertical',\n              'tap_action':\
                    \ {\n                'action': 'call-service',\n             \
                    \   'service': 'kidschores.set_chore_due_date',\n            \
                    \    'data': {\n                  'chore_name': ns.chore_selected,\n\
                    \                  'due_date': (as_datetime(due_date) + timedelta(weeks=1)).isoformat()\
                    \ if due_date else ''\n                }\n              }\n  \
                    \          },\n            {\n              'type': 'custom:mushroom-template-card',\n\
                    \              'primary': ns.CLEAR_DATE,\n              'icon':\
                    \ 'mdi:calendar-remove',\n              'icon_color': 'blue',\n\
                    \              'layout': 'vertical',\n              'tap_action':\
                    \ {\n                'action': 'call-service',\n             \
                    \   'service': 'kidschores.set_chore_due_date',\n            \
                    \    'data': {\n                  'chore_name': ns.chore_selected,\n\
                    \                  'due_date': ''\n                }\n       \
                    \       }\n            }\n          ]\n        }\n      }},{{\n\
                    \      {\n        'type': 'grid',\n        'columns': 1,\n   \
                    \     'square': false,\n        'cards': [\n          {\n    \
                    \        'type': 'custom:mushroom-template-card',\n          \
                    \  'entity': 'input_datetime.kc_ui_set_date_helper',\n       \
                    \     'primary': ns.SELECT_NEW_DATE_AND_TIME,\n            'secondary':\
                    \ ns.select_new_date_and_time_secondary,\n            'multiline_secondary':\
                    \ 'true',\n            'fill_container': 'true',\n           \
                    \ 'icon': 'mdi:calendar-edit',\n            'icon_color': 'blue',\n\
                    \            'tap_action': {\n              'action': 'more-info'\n\
                    \            },\n            'hold_action': {\n              'action':\
                    \ 'call-service',\n              'service': 'kidschores.set_chore_due_date',\n\
                    \              'data': {\n                'chore_name': ns.chore_selected,\n\
                    \                'due_date': states('input_datetime.kc_ui_set_date_helper')\n\
                    \              }\n            }\n          },\n        ]\n   \
                    \   }\n    }}\n{%- endif -%}"
          - type: grid
            square: false
            columns: 1
            grid_options:
              columns: full
            cards:
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace( Kid_name='',  Kid_name_normalize='',\n\
                    PLUSES_AND_MINUSES='', ) -%}\n\n{#-- ************* Set Translatable\
                    \ Text ************* --#}  \n{%- set ns.PLUSES_AND_MINUSES = 'Pluses\
                    \ & Minuses' -%}  \n{#-- ************* End Translatable Text *************\
                    \ --#}  \n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name\
                    \ = 'Emma' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name |\
                    \ slugify() -%}\n{{\n  {\n    'type': 'heading',\n    'icon':\
                    \ 'mdi:plus-circle-multiple',\n    'heading': ns.PLUSES_AND_MINUSES,\n\
                    \    'heading_style': 'title',\n  }\n}},{{\n  {\n    'type': 'custom:mini-graph-card',\n\
                    \    'hours_to_show': '168',\n    'unit': ' ',\n    'entities':\
                    \ [\n      {\n      'entity': 'sensor.kc_' ~ ns.Kid_name_normalize\
                    \ ~ '_points'\n      },\n    ]\n  }\n}},"
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 2
                card_param: cards
                filter:
                  template: "{%- set ns = namespace( Kid_name='',  Kid_name_normalize='',\
                    \ current_points='',  points_label='', \nBONUS_LABEL='', APPLIED_LABEL='',\
                    \ APPLIED_TIMES='' ) -%}  \n{#-- ************* Set Translatable\
                    \ Text ************* --#}  \n{%- set ns.BONUS_LABEL = 'Bonus'\
                    \ -%}  \n{%- set ns.APPLIED_LABEL = 'Applied' -%} \n{%- set ns.APPLIED_TIMES\
                    \ = 'times' -%}  \n{#-- ************* End Translatable Text *************\
                    \ --#}  \n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name\
                    \ = 'Emma' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name |\
                    \ slugify() -%}\n{#-- Point Labels --#}      {%- set points_sensor\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_points' -%}  {%-\
                    \ set ns.current_points = states(points_sensor) | int(default=0)\
                    \ -%} {%- set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
                    \ -%}   {%- set ns.points_icon = state_attr(points_sensor, 'icon')\
                    \ -%}\n{#-- Gather Button Entities --#}     {%- set prefix_pattern\
                    \ = 'button\\\\.kc_' ~ (ns.Kid_name_normalize) ~ '_bonus_' -%}\
                    \  {%- set buttons = states.button | selectattr('entity_id', 'match',\
                    \ prefix_pattern) | list -%} \n{%- for button in buttons -%}\n\
                    \  {%- set sensor_id = button.entity_id \n      | regex_replace('^button\\\
                    \\.kc_', 'sensor.kc_') \n      | regex_replace('_bonus_', '_bonuses_applied_')\
                    \ -%}\n  {%- set bonus_points = state_attr(sensor_id, 'bonus_points')\
                    \ | int(default=0) -%}\n  {%- set bonuses_applied = states(sensor_id)\
                    \ | int(default=0) -%}\n\n  {%- set primary = ns.BONUS_LABEL ~\
                    \ \": \" ~button.attributes.friendly_name | regex_replace(\"^.*\
                    \ - \", \"\") -%}\n\n  {%- set secondary = \n    '⭐ ' ~ ns.BONUS_LABEL\
                    \ ~ ':  ' ~ (bonus_points | string) ~ ' ' ~ ns.points_label ~\
                    \ '\\n' ~\n    '\U0001F4CA ' ~ ns.APPLIED_LABEL ~ ':  ' ~ (bonuses_applied\
                    \ | string) ~ ' ' ~ ns.APPLIED_TIMES -%}\n\n  {%- set icon_color\
                    \ = \n    '#00FF00' if bonus_points >= 20 else \n    '#20C997'\
                    \ if bonus_points >= 10 else \n    '#7FFFD4' \n  -%}\n\n  {{\n\
                    \    {\n      'type': 'custom:mushroom-template-card',\n     \
                    \ 'entity': button.entity_id,\n      'primary': primary,\n   \
                    \   'secondary': secondary,\n      'multiline_secondary': 'true',\n\
                    \      'layout': 'vertical',\n      'icon': button.attributes.icon,\n\
                    \      'icon_color': icon_color,\n      'tap_action': {\n    \
                    \    'action': 'toggle'\n      },\n      'hold_action': {\n  \
                    \      'action': 'more-info'\n      }\n    }\n  }},\n{%- endfor\
                    \ -%}"
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 6
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(Kid_name='',  Kid_name_normalize='',\
                    \ prefix_pattern='',  sorted_entities=[] ) -%}\n{#-- Set Kid_name\
                    \ and normalize --#}  \n{%- set ns.Kid_name = 'Emma' -%}\n{%-\
                    \ set ns.Kid_name_normalize = ns.Kid_name | slugify() -%}\n{#--\
                    \ Build a list of button entities for this kid --#}     {%- set\
                    \ ns.prefix_pattern = 'button\\\\.kc_' ~ (ns.Kid_name_normalize)\
                    \ -%}   {%- set buttons = states.button | selectattr('entity_id',\
                    \ 'match', ns.prefix_pattern~ '(.*?)_points$') | list -%}\n{#--\
                    \ Extract numeric values from entity names --#}  {%- set numbers\
                    \ = buttons \n    | map(attribute='entity_id') \n    | map('regex_replace',\
                    \ '.*_(plus|minus)_(\\\\d+)_points$', '\\\\1\\\\2') \n    | map('replace',\
                    \ 'plus', '') \n    | map('replace', 'minus', '-') \n    | map('int')\
                    \ \n    | list -%}\n\n{% set sorted_numbers = numbers | sort %}\
                    \ {% for num in sorted_numbers %}\n  {% if num < 0 %}\n    {%\
                    \ set ns.sorted_entities = ns.sorted_entities + [ns.prefix_pattern\
                    \ | replace('\\\\', '')~'_minus_' ~ (num * -1) ~ '_points'  ]\
                    \ %}\n  {% else %}\n    {% set ns.sorted_entities = ns.sorted_entities\
                    \ + [ns.prefix_pattern | replace('\\\\', '')~'_plus_' ~ num ~\
                    \ '_points'] %}\n  {% endif %}\n{% endfor %}\n{% for button_name\
                    \ in ns.sorted_entities -%}\n\n    {%- set primary = '+'~ button_name.split('_')[-2]\
                    \ if '_plus_' in button_name else '-'~ button_name.split('_')[-2]\
                    \ -%}          \n    {%- set icon = 'mdi:plus-circle' if '_plus_'\
                    \ in button_name else 'mdi:minus-circle' -%}\n    {%- set icon_color\
                    \ = 'green' if '_plus_' in button_name else 'red' -%}\n    {{\n\
                    \      {\n        'type': 'custom:mushroom-template-card',\n \
                    \       'entity': button_name,\n        'primary': primary,\n\
                    \        'icon': icon,\n        'icon_color': icon_color,\n  \
                    \      'layout': 'vertical',\n        'tap_action': {\n      \
                    \    'action': 'toggle'\n        },\n        'hold_action': {\n\
                    \          'action': 'more-info'\n        }\n      }\n    }},\n\
                    {%- endfor %}"
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 2
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(Kid_name='', Kid_name_normalize='',\
                    \ current_points='', points_label='', PENALTY_LABEL='', APPLIED_LABEL='',\
                    \ APPLIED_TIMES='') -%}  \n{#-- ************* Set Translatable\
                    \ Text ************* --#}  \n{%- set ns.PENALTY_LABEL = 'Penalty'\
                    \ -%}  \n{%- set ns.APPLIED_LABEL = 'Applied' -%} \n{%- set ns.APPLIED_TIMES\
                    \ = 'times' -%}  \n{#-- ************* End Translatable Text *************\
                    \ --#}  \n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name\
                    \ = 'Emma' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name |\
                    \ slugify() -%}\n{#-- Point Labels --#}      {%- set points_sensor\
                    \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_points' -%}  {%-\
                    \ set ns.current_points = states(points_sensor) | int(default=0)\
                    \ -%} {%- set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
                    \ -%}   {%- set ns.points_icon = state_attr(points_sensor, 'icon')\
                    \ -%}\n{#-- Gather Button Entities --#}     {%- set prefix_pattern\
                    \ = 'button\\\\.kc_' ~ (ns.Kid_name_normalize) ~ '_penalty_' -%}\
                    \  {%- set buttons = states.button | selectattr('entity_id', 'match',\
                    \ prefix_pattern) | list -%} \n{%- for button in buttons -%}\n\
                    \  {%- set sensor_id = button.entity_id \n      | regex_replace('^button\\\
                    \\.kc_', 'sensor.kc_') \n      | regex_replace('_penalty_', '_penalties_applied_')\
                    \ -%}\n  {%- set penalty_points = state_attr(sensor_id, 'penalty_points')\
                    \ | int(default=0) -%}\n  {%- set penalties_applied = states(sensor_id)\
                    \ | int(default=0) -%}\n\n  {%- set primary = ns.PENALTY_LABEL\
                    \ ~ \": \" ~button.attributes.friendly_name | regex_replace(\"\
                    ^.* - \", \"\") -%}\n\n  {%- set secondary = \n    '\U0001F4A5\
                    \ ' ~ ns.PENALTY_LABEL ~ ':  ' ~ (penalty_points | string) ~ '\
                    \ ' ~ ns.points_label ~ '\\n' ~\n    '\U0001F4CA ' ~ ns.APPLIED_LABEL\
                    \ ~ ':  ' ~ (penalties_applied | string) ~ ' ' ~ ns.APPLIED_TIMES\
                    \ -%}\n\n  {%- set icon_color = \n    '#FF4500' if penalty_points\
                    \ >= 20 else \n    '#FFA54F' if penalty_points >= 10 else \n \
                    \   '#FFD27F' \n  -%}\n\n  {{\n    {\n      'type': 'custom:mushroom-template-card',\n\
                    \      'entity': button.entity_id,\n      'primary': primary,\n\
                    \      'secondary': secondary,\n      'multiline_secondary': 'true',\n\
                    \      'layout': 'vertical',\n      'icon': button.attributes.icon,\n\
                    \      'icon_color': icon_color,\n      'tap_action': {\n    \
                    \    'action': 'toggle'\n      },\n      'hold_action': {\n  \
                    \      'action': 'more-info'\n      }\n    }\n  }},\n{%- endfor\
                    \ -%}"
                sort:
                  method: friendly_name
          - square: false
            type: grid
            columns: 1
            cards:
              - type: heading
                icon: mdi:clipboard-text
                heading: 7 Day Activity Log
                heading_style: title
              - type: custom:auto-entities
                card:
                  square: false
                  type: grid
                  columns: 1
                card_param: cards
                filter:
                  template: "{%- set ns = namespace(Kid_name='', Kid_name_normalize='',\
                    \ entity_list=[]) -%}\n{#-- Set Kid_name and normalize --#}\n\
                    {%- set ns.Kid_name = 'Emma' -%} {%- set ns.Kid_name_normalize\
                    \ = ns.Kid_name | slugify() -%}\n{#-- Build a list of entities\
                    \ for this kid, excluding unwanted sensors --#}\n{%- set prefix_pattern\
                    \ = '(button|sensor)\\\\.kc_' ~ (ns.Kid_name_normalize) ~ '_'\
                    \ -%} {%- set exclude_pattern = '^sensor\\\\.kc_' ~ (ns.Kid_name_normalize)\
                    \ ~ '_(chore_(claims|approvals|streak)|reward_(claims|approvals))_'\
                    \ -%}\n{%- set entities = (states.button | selectattr('entity_id',\
                    \ 'match', prefix_pattern) | list) + (states.sensor | selectattr('entity_id',\
                    \ 'match', prefix_pattern) | rejectattr('entity_id', 'match',\
                    \ exclude_pattern) | list) -%}\n{%- for entity in entities -%}\n\
                    \  {%- set ns.entity_list = ns.entity_list + [entity.entity_id]\
                    \ -%}\n{%- endfor -%}\n{{ {\n  'type': 'logbook',\n  'title':\
                    \ '',\n  'hours_to_show': 168,\n  'target': {\n    'entity_id':\
                    \ ns.entity_list\n  },\n} }},"
        visibility:
          - condition: user
            users:
              - ce9ee65ab49c4ca4af52496609016f1c
              - f615672fc2554783beab56221097564e
    cards: []
    icon: mdi:cat
    header:
      card:
        type: markdown
        content: "\n{#-- ************* Version KCD_0.3.6 ************* --#}\n{%- set\
          \ ns = namespace(Kid_name='',  Kid_name_normalize='', points=0,\npoints_label='',\
          \ points_icon='', overdue=0, weekly_completed=0,\ntodays_completed=0,  all_time_completed='',\
          \ highest_badge='',\nhighest_badge_icon='', highest_badge_entity='', \n\
          highest_badge_multiplier='', highest_badge_display_line='', \nachievements=[],\
          \  challenges=[], content='', WELCOME='',\nACHIEVEMENTS='', CHALLENGES='',\
          \ NONE='', WEEKLY_COMPLETED='',\nTODAYS_COMPLETED=''\n) -%}    \n\n{#--\
          \ ************* Set Translatable Text ************* --#}  \n\n{%- set ns.WELCOME\
          \ = \"Welcome\" -%} \n{%- set ns.NONE = \"None\" -%}\n{%- set ns.WEEKLY_COMPLETED\
          \ = \"Weekly Completed\" -%}\n{%- set ns.TODAYS_COMPLETED = \"Today's Completed\"\
          \ -%}\n{%- set ns.ACHIEVEMENTS = \"Achievements\" -%}\n{%- set ns.CHALLENGES\
          \ = \"Challenges\" -%} \n\n{#-- ************* End Translatable Text *************\
          \ --#}\n\n{#-- Set Kid_name and normalize --#}  \n{%- set ns.Kid_name =\
          \ 'Emma' -%}\n{%- set ns.Kid_name_normalize = ns.Kid_name | slugify() -%}\n\
          \n{#-- Collect Points --#}\n\n{%- set points_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize\
          \ ~ '_points' -%}\n{%- set ns.points = states(points_sensor) | int(default=0)\
          \ -%}\n{%- set ns.points_label = state_attr(points_sensor, 'unit_of_measurement')\
          \ -%}\n{%- set ns.points_icon = state_attr(points_sensor, 'icon') -%}\n\n\
          {#-- Collect Overdue Chores --#}\n\n{%- set chore_sensor_id_prefix = 'sensor.kc_'~\
          \ ns.Kid_name_normalize ~ '_chore_status_' -%}\n{%- set ns.overdue = states.sensor\
          \ \n  | selectattr('entity_id', 'match', '^' ~ chore_sensor_id_prefix ~\
          \ '.*') \n  | selectattr('state', 'eq', 'overdue') \n  | list | length |\
          \ int(default=0) -%}\n\n{#-- Collect Weekly Completed --#}\n{%- set weekly_sensor\
          \ = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_chores_completed_weekly' -%}\n\
          {%- set ns.weekly_completed = states(weekly_sensor) | int(default=0) -%}\n\
          \n{#-- Collect Today's Completed --#}\n\n{%- set todays_sensor = 'sensor.kc_'\
          \ ~ ns.Kid_name_normalize ~ '_chores_completed_daily' -%} \n{%- set ns.todays_completed\
          \ = states(todays_sensor) | int(default=0) -%}\n\n{#-- Collect Total Completed\
          \ --#}\n\n{%- set all_time_sensor = 'sensor.kc_' ~ ns.Kid_name_normalize\
          \ ~ '_chores_completed_total' -%} \n{%- set ns.all_time_completed = states(all_time_sensor)\
          \ | int(default=0) -%}\n\n{#-- Get Highest Badge Info --#}   \n\n{%- set\
          \ highest_badge_entity = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_highest_badge'\
          \ -%}    \n{%- set ns.highest_badge = states(highest_badge_entity) or 'None'\
          \ -%}  \n{%- set ns.highest_badge_icon = state_attr(highest_badge_entity,\
          \ 'icon') or 'mdi:medal-outline' -%}\n{%- set ns.highest_badge_multiplier\
          \ = state_attr(highest_badge_entity, 'points_multiplier') | float(default=1)\
          \ -%}\n\n{#-- Construct Badge Display Line for Markdown --#}\n\n{%- if ns.highest_badge\
          \ not in ['None', 'unknown', 'Unknown', 'unavailable'] -%}\n  {%- if ns.highest_badge_multiplier\
          \ > 1 -%}\n    {%- set ns.badge_display_line = \"<ha-icon icon='\" ~ ns.highest_badge_icon\
          \ ~ \"'></ha-icon> \" ~ ns.highest_badge ~ \" (x\" ~ ns.highest_badge_multiplier|string\
          \ ~ \")  \\n\" -%}\n  {%- else -%}\n    {%- set ns.badge_display_line =\
          \ \"<ha-icon icon='\" ~ ns.highest_badge_icon ~ \"'></ha-icon> \" ~ ns.highest_badge\
          \ ~ \"  \\n\" -%}\n  {%- endif -%}\n{%- else -%}\n  {%- set ns.badge_display_line\
          \ = \"\" -%}\n{%- endif -%}\n\n{#-- Collect Achievements with Progress and\
          \ Rewards --#}\n{%- set achievement_prefix = 'sensor.kc_' ~ ns.Kid_name_normalize\
          \ ~ '_achievement_status_' -%}\n{%- set achievement_list = states.sensor\
          \ | selectattr('entity_id', 'match', achievement_prefix ~ '.*') | list -%}\
          \  \n{%- for sensor in achievement_list -%}\n  {%- set name = state_attr(sensor.entity_id,\
          \ 'achievement_name') | default('Unknown Achievement') -%}\n  {%- set icon\
          \ = state_attr(sensor.entity_id, 'icon') or 'mdi:trophy-award' -%}\n  {%-\
          \ set progress = states(sensor.entity_id) | float(default=0) -%}\n  {%-\
          \ set award_status = state_attr(sensor.entity_id, 'awarded') -%}\n\n  {#--\
          \ Get Overall Sensor for Reward Points --#}\n  {%- set overall_sensor =\
          \ sensor.entity_id | regex_replace('^sensor\\\\.kc_.*?_achievement_status_',\
          \ 'sensor.kc_achievement_status_') -%}\n  {%- set reward_points = state_attr(overall_sensor,\
          \ 'reward_points') | int(default=0) -%}\n  {%- set status = ns.COMPLETED\
          \ if award_status == 'true' else '⌛ ' ~ progress|round(0) ~ '%' -%}\n  {%-\
          \ set ns.achievements = ns.achievements + [\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"\
          \ ~ \"<ha-icon icon='\" ~ icon ~ \"'></ha-icon>&nbsp;\" ~ name ~ \" (\"\
          \ ~ status ~ \", \U0001F48E \" ~ reward_points ~ \")\"] -%}\n{%- endfor\
          \ -%}\n\n{#-- Collect Challenges with Progress and Rewards --#}\n{%- set\
          \ challenge_prefix = 'sensor.kc_' ~ ns.Kid_name_normalize ~ '_challenge_status_'\
          \ -%}\n{%- set challenge_list = states.sensor |selectattr('entity_id', 'match',\
          \ challenge_prefix ~ '.*') | list -%}  \n{%- for sensor in challenge_list\
          \ -%}\n  {%- set name = state_attr(sensor.entity_id, 'challenge_name') |\
          \ default('Unknown Challenge') -%}\n  {%- set icon = state_attr(sensor.entity_id,\
          \ 'icon') or 'mdi:flag-checkered' -%}\n  {%- set progress = states(sensor.entity_id)\
          \ | float(default=0) -%}\n  {%- set award_status = state_attr(sensor.entity_id,\
          \ 'awarded') -%}\n\n  {#-- Get Overall Sensor for Reward Points --#}\n \
          \ {%- set overall_sensor = sensor.entity_id | regex_replace('^sensor\\\\\
          .kc_.*?_achievement_status_', 'sensor.kc_achievement_status_') -%}\n  {%-\
          \ set reward_points = state_attr(overall_sensor, 'reward_points') | int(default=0)\
          \ -%}\n  {%- set status = ns.COMPLETED if award_status == 'true' else '⌛\
          \ ' ~ progress|round(0) ~ '%' -%}\n  {%- set ns.challenges = ns.challenges\
          \ + [\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\" ~ \"<ha-icon\
          \ icon='\" ~ icon ~ \"'></ha-icon>&nbsp;\" ~ name ~ \" (\" ~ status ~ \"\
          , \U0001F48E \" ~ reward_points ~ \")\"] -%}\n{%- endfor -%}\n\n{#-- Create\
          \ Content Variable --#}  \n\n{%- set ns.content = \n  \"## \U0001F44B \"\
          \ ~ ns.WELCOME ~ \", \" ~ ns.Kid_name ~ \"! \\n\"\n  \"#### \" ~ \"<ha-icon\
          \ icon=\" ~ ns.points_icon ~ \"></ha-icon>\" ~ \"&nbsp;&nbsp;\" ~ ns.points_label\
          \ ~ \": &nbsp;&nbsp;\" ~ ns.points ~ \"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"\
          \ ~ ns.badge_display_line ~ \" \\n\"\n  \"**\U0001F4C5 \" ~ ns.WEEKLY_COMPLETED\
          \ ~ \":** &nbsp;&nbsp;\" ~ ns.weekly_completed ~ \"  \\n\"\n  \"**☀️ \"\
          \ ~ ns.TODAYS_COMPLETED ~ \":** &nbsp;&nbsp;\" ~ ns.todays_completed ~ \"\
          \  \\n\\n\" \n-%} {%- if ns.achievements | length > 0 -%}\n  {%- set ns.content\
          \ = ns.content ~\n    \"**\U0001F3C6 \" ~ ns.ACHIEVEMENTS ~ \":** &nbsp;&nbsp;\
          \ \" ~ \n    ('\\n' ~ ('\\n'.join(ns.achievements)) if ns.achievements |\
          \ length > 0 else \"&nbsp;\" ~ ns.NONE) ~ \"  \\n\" -%}\n{%- endif -%} {%-\
          \ if ns.challenges | length > 0 -%}\n  {%- set ns.content = ns.content ~\n\
          \    \"**\U0001F3C1 \" ~ ns.CHALLENGES ~ \":** &nbsp;&nbsp; \" ~ \n    ('\\\
          n' ~ ('\\n'.join(ns.challenges)) if ns.challenges | length > 0 else \"&nbsp;\"\
          \ ~ ns.NONE) ~ \"  \\n\" -%}\n{%- endif -%}\n{{ ns.content }}"
        text_only: true
      layout: responsive
      badges_position: top
      badges_wrap: wrap
    visible:
      - user: ce9ee65ab49c4ca4af52496609016f1c
      - user: 092efcafdaeb41838fd9204177be8a43
      - user: f615672fc2554783beab56221097564e
    badges:
      - type: custom:mushroom-template-badge
        content: Settings
        icon: mdi:cog
        color: grey
        tap_action:
          action: navigate
          navigation_path: /config/integrations/integration/kidschores
        visibility:
          - condition: user
            users:
              - ce9ee65ab49c4ca4af52496609016f1c
              - f615672fc2554783beab56221097564e
  - title: Weather
    path: weather
    icon: mdi:umbrella-outline
    cards: []
    type: sections
    layout: {}
    max_columns: 3
    sections:
      - type: grid
        cards:
          - card_config_version: 8
            daily_forecast_days: 6
            entity_apparent_temp: sensor.ecowitt_feels_like_temperature
            entity_forecast_icon: weather.openweathermap
            entity_humidity: sensor.ecowitt_humidity
            entity_pressure: sensor.ecowitt_relative_pressure
            entity_rainfall: sensor.ecowitt_daily_rain_rate_piezo
            entity_summary: weather.openweathermap
            entity_temperature: sensor.ecowitt_outdoor_temperature
            entity_wind_bearing: sensor.ecowitt_wind_direction
            entity_wind_gust: sensor.ecowitt_wind_gust
            entity_wind_speed: sensor.ecowitt_wind_speed
            extended_name_attr: precipitation_unit
            extended_use_attr: false
            forecast_type: daily
            option_color_fire_danger: false
            option_show_overview_separator: false
            option_static_icons: false
            option_today_rainfall_decimals: false
            option_tooltips: false
            overview_layout: observations
            section_order:
              - overview
              - extended
              - slots
              - daily_forecast
            show_section_daily_forecast: false
            show_section_extended: false
            show_section_slots: true
            slot_l1: wind
            slot_l2: pressure
            slot_l3: remove
            slot_l4: remove
            slot_l5: remove
            slot_l6: remove
            slot_l7: remove
            slot_l8: remove
            slot_r1: rainfall
            slot_r2: humidity
            slot_r3: remove
            slot_r4: remove
            slot_r5: remove
            slot_r6: remove
            slot_r7: remove
            slot_r8: remove
            text_card_title: Ecowitt
            type: custom:platinum-weather-card
          - card_config_version: 8
            daily_forecast_days: 6
            entity_apparent_temp: sensor.openweathermap_feels_like_temperature
            entity_extended: sensor.forecast
            entity_forecast_icon: weather.openweathermap
            entity_forecast_icon_1: weather.openweathermap
            entity_forecast_max: weather.openweathermap
            entity_forecast_max_1: weather.openweathermap
            entity_forecast_min: weather.openweathermap
            entity_forecast_min_1: weather.openweathermap
            entity_humidity: sensor.openweathermap_humidity
            entity_pop: weather.openweathermap
            entity_pop_1: weather.openweathermap
            entity_pos: weather.openweathermap
            entity_pos_1: weather.openweathermap
            entity_pressure: sensor.openweathermap_pressure
            entity_summary: weather.openweathermap
            entity_summary_1: weather.openweathermap
            entity_sun: sun.sun
            entity_temperature: sensor.openweathermap_temperature
            entity_uv_alert_summary: sensor.openweathermap_uv_index
            entity_visibility: sensor.openweathermap_visibility
            entity_wind_bearing: sensor.openweathermap_wind_bearing
            entity_wind_speed: sensor.openweathermap_wind_speed
            extended_name_attr: precipitation_unit
            extended_use_attr: false
            forecast_type: daily
            option_color_fire_danger: false
            option_show_overview_separator: false
            option_static_icons: false
            option_tooltips: false
            section_order:
              - overview
              - extended
              - slots
              - daily_forecast
            show_section_daily_forecast: true
            show_section_slots: true
            slot_l1: forecast_max
            slot_l2: forecast_min
            slot_l3: wind
            slot_l4: pressure
            slot_l5: remove
            slot_l6: remove
            slot_l7: remove
            slot_l8: remove
            slot_r1: popforecast
            slot_r2: humidity
            slot_r3: uv_summary
            slot_r4: visibility
            slot_r5: remove
            slot_r6: remove
            slot_r7: remove
            slot_r8: remove
            text_card_title: OpenWeatherMap
            type: custom:platinum-weather-card
            weather_entity: weather.openweathermap
          - type: custom:hourly-weather
            entity: weather.openweathermap
            name: ' '
            icons: true
            label_spacing: '2'
            num_segments: '12'
            show_wind: barb-and-speed
            card_mod:
              style:
                weather-bar$: ".main {\n  --mush-rgb-red: 244, 67, 54;\n  --mush-rgb-pink:\
                  \ 233, 30, 99;\n  --mush-rgb-purple: 156, 39, 176;\n  --mush-rgb-deep-purple:\
                  \ 103, 58, 183;\n  --mush-rgb-indigo: 63, 81, 181;\n  --mush-rgb-blue:\
                  \ 33, 150, 243;\n  --mush-rgb-light-blue: 3, 169, 244;\n  --mush-rgb-cyan:\
                  \ 0, 188, 212;\n  --mush-rgb-teal: 0, 150, 136;\n  --mush-rgb-green:\
                  \ 76, 175, 80;\n  --mush-rgb-light-green: 139, 195, 74;\n  --mush-rgb-lime:\
                  \ 205, 220, 57;\n  --mush-rgb-yellow: 255, 235, 59;\n  --mush-rgb-amber:\
                  \ 255, 193, 7;\n  --mush-rgb-orange: 255, 152, 0;\n  --mush-rgb-deep-orange:\
                  \ 255, 87, 34;\n  --mush-rgb-brown: 121, 85, 72;\n  --mush-rgb-grey:\
                  \ 158, 158, 158;\n  --mush-rgb-blue-grey: 96, 125, 139;\n  --mush-rgb-black:\
                  \ 0, 0, 0;\n  --mush-rgb-white: 255, 255, 255;\n  --color-clear-night:\
                  \ rgba(var(--mush-rgb-black), 0.2) !important;\n  --color-cloudy:\
                  \ rgba(var(--mush-rgb-grey), 0.2) !important;\n  --color-fog: var(--color-cloudy);\n\
                  \  --color-hail: rgba(var(--mush-rgb-indigo), 0.2) !important;\n\
                  \  --color-lightning: var(--color-rainy);\n  --color-lightning-rainy:\
                  \ var(--color-rainy);\n  --color-partlycloudy: rgba(var(--mush-rgb-blue),\
                  \ 0.2) !important;\n  --color-pouring: var(--color-rainy);\n  --color-rainy:\
                  \ rgba(var(--mush-rgb-indigo), 0.2) !important;\n  --color-snowy:\
                  \ rgba(var(--mush-rgb-white), 0.2) !important;\n  --color-snowy-rainy:\
                  \ var(--color-partlycloudy);\n  --color-sunny: rgba(var(--mush-rgb-yellow),\
                  \ 0.2) !important;\n  --color-windy: var(--color-sunny);\n  --color-windy-variant:\
                  \ var(--color-sunny);\n  --color-exceptional: rgba(var(--mush-rgb-amber),\
                  \ 0.2) !important;\n}\n.bar > div {\n  height: 42px !important;\n\
                  }\n.bar > div:first-child {\n  border-top-left-radius: var(--ha-card-border-radius)\
                  \ !important;\n  border-bottom-left-radius: var(--ha-card-border-radius)\
                  \ !important;\n}\n.bar > div:last-child {\n  border-top-right-radius:\
                  \ var(--ha-card-border-radius) !important;\n  border-bottom-right-radius:\
                  \ var(--ha-card-border-radius) !important;\n}\n.bar > div > span\
                  \ {\n  text-shadow: none !important;\n  color: rgb(var(--primary-text-color));\n\
                  \  font-size: 14px;\n  font-weight: bold;\n}\n.axes > div > .bar-block-bottom\
                  \ > .hour {\n  font-size: 12px;\n  font-weight: bolder;\n}\n.axes\
                  \ > div > .bar-block-bottom > .temperature {\n  font-size: 12px;\n\
                  \  font-weight: bolder;\n}\n.axes {\n  margin-top: 10px !important;\n\
                  }\n"
          - type: custom:mini-graph-card
            name: Multi-Day Weather Trend
            hours_to_show: 36
            points_per_hour: 15
            line_width: 2
            decimals: 1
            show:
              labels: true
              labels_secondary: true
              extrema: true
              points: false
            entities:
              - entity: sensor.ecowitt_outdoor_temperature
                color: '#e74c3c'
                name: Temperature
                state_adaptive_color: true
              - entity: sensor.ecowitt_humidity
                color: '#3498db'
                name: Humidity
                y_axis: secondary
                show_state: true
                state_adaptive_color: true
      - type: grid
        cards:
          - type: iframe
            url: https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=in&metricTemp=°F&metricWind=mph&zoom=7&overlay=wind&product=ecmwf&level=surface&lat=42.926&lon=-112.462&message=true
          - type: custom:mini-graph-card
            name: Wind Speed
            icon: mdi:weather-windy
            hours_to_show: 24
            points_per_hour: 15
            line_width: 2
            decimals: 1
            show:
              labels: true
              icon: true
              state: true
              extrema: true
              points: false
            entities:
              - entity: sensor.ecowitt_wind_speed
                name: Speed
                state_adaptive_color: true
              - entity: sensor.ecowitt_wind_gust
                name: Gust
                color: '#c47910'
                show_state: true
                state_adaptive_color: true
          - type: custom:windrose-card
            title: Wind Direction - 24 hrs
            data_period:
              hours_to_show: 24
            max_width: 400
            refresh_interval: 30
            windspeed_bar_location: right
            windspeed_bar_full: true
            wind_direction_entity:
              entity: sensor.ecowitt_wind_direction
              direction_unit: degrees
              use_statistics: false
              direction_compensation: 0
            windspeed_entities:
              - entity: sensor.ecowitt_wind_speed
                speed_unit: mph
                use_statistics: false
                speed_range_beaufort: false
                dynamic_speed_ranges:
                  - average_above: 0
                    step: 2
                    max: 10
                  - average_above: 10
                    step: 4
                    max: 20
                  - average_above: 15
                    step: 8
                    max: 30
            output_speed_unit: mph
            matching_strategy: direction-first
            center_calm_percentage: true
            current_direction:
              show_arrow: true
      - type: grid
        cards:
          - type: custom:horizon-card
            fields:
              azimuth: true
              elevation: true
              moonrise: true
              moonset: true
              moon_phase: true
          - type: custom:mini-graph-card
            name: Rain
            hours_to_show: 24
            points_per_hour: 4
            decimals: 2
            entities:
              - entity: sensor.ecowitt_rain_rate_piezo
                name: Rain
                state_adaptive_color: true
              - entity: sensor.ecowitt_daily_rain_rate_piezo
                name: Daily Rain
                show_state: true
                show_graph: false
                state_adaptive_color: true
            show:
              labels: true
              icon: false
              state: true
              graph: bar
          - type: custom:mini-graph-card
            name: Pressure
            hours_to_show: 24
            points_per_hour: 15
            line_width: 2
            decimals: 2
            entities:
              - entity: sensor.ecowitt_relative_pressure
                show_state: true
                state_adaptive_color: true
            show:
              labels: true
              icon: true
              state: true
              extrema: true
              points: false
          - type: custom:mini-graph-card
            name: Solar
            hours_to_show: 48
            points_per_hour: 15
            line_width: 2
            decimals: 1
            entities:
              - entity: sensor.ecowitt_solar_radiation
                name: Solar
                color: var(--amber-color)
                show_state: true
                state_adaptive_color: true
            show:
              labels: true
              labels_secondary: true
              icon: false
              state: true
              points: false
          - type: gauge
            entity: sensor.ecowitt_wh90_battery
            name: Battery
            min: 0
            max: 5
            severity:
              green: 4
              yellow: 3
              red: 2
            needle: true
            grid_options:
              columns: 6
              rows: auto
          - type: gauge
            entity: sensor.ecowitt_wh90_capacitor
            name: Capacitor
            min: 0
            max: 5.5
            severity:
              green: 4
              yellow: 3
              red: 2
            needle: true
            grid_options:
              columns: 6
              rows: auto
          - type: custom:mushroom-template-card
            entity: sensor.ecowitt_wh90_battery
            primary: System Status
            secondary: "{% set battery = states('sensor.ecowitt_wh90_battery') | float\
              \ %} {% set capacitor = states('sensor.ecowitt_wh90_capacitor') | float\
              \ %} {% if battery >= 4 and capacitor >= 4 %}\n  All systems optimal\n\
              {% elif battery >= 3 and capacitor >= 3 %}\n  System functioning normally\n\
              {% elif battery >= 2 and capacitor >= 2 %}\n  Maintenance recommended\n\
              {% else %}\n  Immediate attention required\n{% endif %}\n"
            icon: "{% set battery = states('sensor.ecowitt_wh90_battery') | float\
              \ %} {% set capacitor = states('sensor.ecowitt_wh90_capacitor') | float\
              \ %} {% if battery >= 4 and capacitor >= 4 %}\n  mdi:check-circle\n\
              {% elif battery >= 3 and capacitor >= 3 %}\n  mdi:information\n{% elif\
              \ battery >= 2 and capacitor >= 2 %}\n  mdi:alert\n{% else %}\n  mdi:alert-circle\n\
              {% endif %}\n"
            icon_color: "{% set battery = states('sensor.ecowitt_wh90_battery') |\
              \ float %} {% set capacitor = states('sensor.ecowitt_wh90_capacitor')\
              \ | float %} {% if battery >= 4 and capacitor >= 4 %}\n  green\n{% elif\
              \ battery >= 3 and capacitor >= 3 %}\n  blue\n{% elif battery >= 2 and\
              \ capacitor >= 2 %}\n  orange\n{% else %}\n  red\n{% endif %}\n"
            tap_action:
              action: more-info
            grid_options:
              columns: full
    visible:
      - user: ce9ee65ab49c4ca4af52496609016f1c
      - user: f615672fc2554783beab56221097564e
      - user: 171eeb6104704b03afcad6553b7b793e
      - user: 6905264120304e96aa416e287aca5b80
  - title: Security
    path: security
    icon: mdi:shield
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:door
            heading: Doors
            heading_style: subtitle
            badges:
              - type: custom:mushroom-template-badge
                entity: input_boolean.door_open_alerts
                label: Door
                content: '{{ state_translated(entity) }}'
                icon: mdi:door
                color: "{% if is_state(entity, \"off\") %}\n  yellow\n{% else %}\n\
                  \  green\n{% endif %}"
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
              - type: custom:mushroom-template-badge
                entity: input_boolean.garage_door_open_alerts
                label: Garage
                content: '{{ state_translated(entity) }}'
                icon: mdi:garage-variant
                color: "{% if is_state(entity, \"off\") %}\n  yellow\n{% else %}\n\
                  \  green\n{% endif %}"
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
          - type: custom:vertical-stack-in-card
            cards:
              - type: custom:mushroom-template-card
                entity: binary_sensor.front_door_window_door_is_open
                primary: Front Door
                secondary: "{% from \"util.jinja\" import nominal_change_history %}\
                  \ {% if is_state(entity, \"on\") -%}\n  Open\n{% endif -%} {% if\
                  \ is_state(\"lock.front_door\", \"unlocked\") -%}\n  Unlocked\n\
                  {% else -%}\n  Locked\n{% endif -%} ⸱ {{ nominal_change_history(entity)\
                  \ }}"
                icon: "{% if is_state(entity, \"on\") %}\n  mdi:door-open\n{% elif\
                  \ is_state(\"lock.front_door\", \"unlocked\") and is_state(entity,\
                  \ \"off\") %}\n  mdi:door-closed\n{% elif is_state(\"lock.front_door\"\
                  , \"locked\") and is_state(entity, \"off\") %}\n  mdi:door-closed-lock\n\
                  {% else %}\n  mdi:help-circle\n{% endif %}"
                icon_color: "{% if is_state(entity, \"on\") %}\n  red\n{% elif is_state(\"\
                  lock.front_door\", \"unlocked\") and is_state(entity, \"off\") %}\n\
                  \  amber\n{% elif is_state(\"lock.front_door\", \"locked\") and\
                  \ is_state(entity, \"off\") %}\n  green\n{% endif %}"
                tap_action:
                  action: more-info
                hold_action:
                  action: fire-dom-event
                  browser_mod:
                    data:
                      entity: sensor.front_door_battery_level
                    service: browser_mod.more_info
                card_mod:
                  style:
                    mushroom-shape-icon$: "{% set battery_entity = \"sensor.front_door_battery_level\"\
                      \ %} {% if (states(battery_entity) | int) <= 40 %} {% from \"\
                      util.jinja\" import battery_color %} .shape {\n  /* Radial progress\
                      \ bar */\n  background:\n    radial-gradient(var(--card-background-color)\
                      \ 60%, transparent calc(60% + 1px)),\n    conic-gradient(var(--{{\
                      \ battery_color(battery_entity) }}-color) {{ states(battery_entity)\
                      \ }}% 0%, var(--card-background-color) 0% 100%\n  );\n} .shape:after\
                      \ {\n  /* Add back icon shape */\n  content: \"\";\n  height:\
                      \ 100%;\n  width: 100%;\n  position: absolute;\n  border-radius:\
                      \ var(--icon-border-radius);\n  background: var(--shape-color);\n\
                      } {% endif %}"
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 65px auto
                  grid-template-rows: auto
                  margin: 0 -2px -10px -2px
                  padding: 0
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.front_door_battery_level
                    icon: mdi:lock-smart
                    icon_color: disabled
                    tap_action:
                      action: navigate
                      navigation_path: /lock-admin/front-door
                    hold_action:
                      action: fire-dom-event
                      browser_mod:
                        data:
                          entity: sensor.front_door_battery_level
                        service: browser_mod.more_info
                    card_mod:
                      style:
                        .: "ha-card {\n  --icon-size: 42px;\n  --ha-card-box-shadow:\
                          \ none;\n  --ha-card-border-width: 0;\n}\n"
                        mushroom-shape-icon$: "{% set timer = \"timer.keymaster_front_door_autolock\"\
                          \ %} {% if state_attr(timer, \"finishes_at\") %} {% set\
                          \ remaining = (as_datetime(state_attr(timer, \"finishes_at\"\
                          )) - now()).total_seconds() | int %} {% set duration =\n\
                          \  (state_attr(timer, \"duration\").split(\":\")[0] | int\
                          \ * 60 * 60)\n  + (state_attr(timer, \"duration\").split(\"\
                          :\")[1] | int * 60)\n  + (state_attr(timer, \"duration\"\
                          ).split(\":\")[2] | int)\n%} .shape {\n  /* Radial progress\
                          \ bar */\n  background:\n    radial-gradient(var(--card-background-color)\
                          \ 60%, transparent calc(60% + 1px)),\n    conic-gradient(var(--red-color)\
                          \ {{ (remaining / duration * 100) | round() }}% 0%, var(--card-background-color)\
                          \ 0% 100%);\n} .shape:after {\n  /* Add back icon shape\
                          \ */\n  content: \"\";\n  height: 100%;\n  width: 100%;\n\
                          \  position: absolute;\n  border-radius: var(--icon-border-radius);\n\
                          \  background: var(--shape-color);\n} {%- endif -%}\n"
                  - type: custom:mushroom-lock-card
                    entity: lock.front_door
                    name: Front Door
                    primary_info: none
                    secondary_info: none
                    icon_type: none
                    card_mod:
                      style:
                        .: "ha-card {\n  --ha-card-box-shadow: none;\n  --ha-card-border-width:\
                          \ 0;\n  background: none;\n}\n"
                        mushroom-lock-buttons-control$:
                          mushroom-button:nth-child(1)$: ".button {\n  --bg-color:\
                            \ rgba(var(--rgb-disabled), 0.2);\n}\n"
            grid_options:
              columns: 6
              rows: auto
          - type: custom:vertical-stack-in-card
            cards:
              - type: custom:mushroom-template-card
                entity: binary_sensor.garage_entry_window_door_is_open
                primary: Garage Entry
                secondary: "{% from \"util.jinja\" import nominal_change_history %}\
                  \ {% if is_state(entity, \"on\") -%}\n  Open\n{% endif -%} {% if\
                  \ is_state(\"lock.garage_entry\", \"unlocked\") -%}\n  Unlocked\n\
                  {% else -%}\n  Locked\n{% endif -%} ⸱ {{ nominal_change_history(entity)\
                  \ }}"
                icon: "{% if is_state(entity, \"on\") %}\n  mdi:door-open\n{% elif\
                  \ is_state(\"lock.garage_entry\", \"unlocked\") and is_state(entity,\
                  \ \"off\") %}\n  mdi:door-closed\n{% elif is_state(\"lock.garage_entry\"\
                  , \"locked\") and is_state(entity, \"off\") %}\n  mdi:door-closed-lock\n\
                  {% else %}\n  mdi:help-circle\n{% endif %}"
                icon_color: "{% if is_state(entity, \"on\") %}\n  red\n{% elif is_state(\"\
                  lock.garage_entry\", \"unlocked\") and is_state(entity, \"off\"\
                  ) %}\n  amber\n{% elif is_state(\"lock.garage_entry\", \"locked\"\
                  ) and is_state(entity, \"off\") %}\n  green\n{% endif %}"
                tap_action:
                  action: more-info
                hold_action:
                  action: fire-dom-event
                  browser_mod:
                    data:
                      entity: sensor.garage_entry_battery_level
                    service: browser_mod.more_info
                card_mod:
                  style:
                    mushroom-shape-icon$: "{% set battery_entity = \"sensor.garage_entry_battery_level\"\
                      \ %} {% if (states(battery_entity) | int) <= 40 %} {% from \"\
                      util.jinja\" import battery_color %} .shape {\n  /* Radial progress\
                      \ bar */\n  background:\n    radial-gradient(var(--card-background-color)\
                      \ 60%, transparent calc(60% + 1px)),\n    conic-gradient(var(--{{\
                      \ battery_color(battery_entity) }}-color) {{ states(battery_entity)\
                      \ }}% 0%, var(--card-background-color) 0% 100%\n  );\n} .shape:after\
                      \ {\n  /* Add back icon shape */\n  content: \"\";\n  height:\
                      \ 100%;\n  width: 100%;\n  position: absolute;\n  border-radius:\
                      \ var(--icon-border-radius);\n  background: var(--shape-color);\n\
                      } {% endif %}"
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 65px auto
                  grid-template-rows: auto
                  margin: 0 -2px -10px -2px
                  padding: 0
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.garage_entry_battery_level
                    icon: mdi:lock-smart
                    icon_color: disabled
                    tap_action:
                      action: navigate
                      navigation_path: /lock-admin/garage-entry
                    hold_action:
                      action: fire-dom-event
                      browser_mod:
                        data:
                          entity: sensor.garage_entry_battery_level
                        service: browser_mod.more_info
                    card_mod:
                      style:
                        .: "ha-card {\n  --icon-size: 42px;\n  --ha-card-box-shadow:\
                          \ none;\n  --ha-card-border-width: 0;\n}\n"
                        mushroom-shape-icon$: "{% set timer = \"timer.keymaster_garage_entry_autolock\"\
                          \ %} {% if state_attr(timer, \"finishes_at\") %} {% set\
                          \ remaining = (as_datetime(state_attr(timer, \"finishes_at\"\
                          )) - now()).total_seconds() | int %} {% set duration =\n\
                          \  (state_attr(timer, \"duration\").split(\":\")[0] | int\
                          \ * 60 * 60)\n  + (state_attr(timer, \"duration\").split(\"\
                          :\")[1] | int * 60)\n  + (state_attr(timer, \"duration\"\
                          ).split(\":\")[2] | int)\n%} .shape {\n  /* Radial progress\
                          \ bar */\n  background:\n    radial-gradient(var(--card-background-color)\
                          \ 60%, transparent calc(60% + 1px)),\n    conic-gradient(var(--red-color)\
                          \ {{ (remaining / duration * 100) | round() }}% 0%, var(--card-background-color)\
                          \ 0% 100%);\n} .shape:after {\n  /* Add back icon shape\
                          \ */\n  content: \"\";\n  height: 100%;\n  width: 100%;\n\
                          \  position: absolute;\n  border-radius: var(--icon-border-radius);\n\
                          \  background: var(--shape-color);\n} {%- endif -%}\n"
                  - type: custom:mushroom-lock-card
                    entity: lock.garage_entry
                    name: Garage Entry
                    primary_info: none
                    secondary_info: none
                    icon_type: none
                    card_mod:
                      style:
                        .: "ha-card {\n  --ha-card-box-shadow: none;\n  --ha-card-border-width:\
                          \ 0;\n  background: none;\n}\n"
                        mushroom-lock-buttons-control$:
                          mushroom-button:nth-child(1)$: ".button {\n  --bg-color:\
                            \ rgba(var(--rgb-disabled), 0.2);\n}\n"
            grid_options:
              columns: 6
              rows: 1
          - type: custom:mushroom-template-card
            entity: binary_sensor.garage_side_door_contact
            primary: Garage Side Door
            secondary: '{% from "util.jinja" import nominal_change_history %} {{ state_translated(entity)
              }} ⸱ {{ nominal_change_history(entity) }}'
            icon: mdi:door{{ "-open" if is_state(entity, "on") }}
            icon_color: '{{ iif(is_state(entity, "on"), "red", "green") }}'
            tap_action:
              action: more-info
            hold_action:
              action: fire-dom-event
              browser_mod:
                service: browser_mod.more_info
                data:
                  entity: sensor.garage_side_door_battery
            card_mod:
              style:
                mushroom-shape-icon$: "{% set battery_entity = \"sensor.garage_side_door_battery\"\
                  %}\n{% if int(states(battery_entity), 0) <= 60 %}\n{% from \"util.jinja\"\
                  \ import battery_color %}\n.shape {\n  /* Radial progress bar */\n\
                  \  background:\n    radial-gradient(var(--card-background-color)\
                  \ 60%, transparent calc(60% + 1px)),\n    conic-gradient(var(--{{\
                  \ battery_color(battery_entity) }}-color) {{ states(battery_entity)\
                  \ }}% 0%, var(--card-background-color) 0% 100%\n  );\n}\n.shape:after\
                  \ {\n  /* Add back icon shape */\n  content: \"\";\n  height: 100%;\n\
                  \  width: 100%;\n  position: absolute;\n  border-radius: var(--icon-border-radius);\n\
                  \  background: var(--shape-color);\n}\n{% endif %}\n"
          - type: custom:mushroom-template-card
            entity: binary_sensor.sliding_door_contact
            primary: Sliding Door
            secondary: '{% from "util.jinja" import nominal_change_history %} {{ state_translated(entity)
              }} ⸱ {{ nominal_change_history(entity) }}'
            icon: mdi:door-sliding{{ "-open" if is_state(entity, "on") }}
            icon_color: '{{ iif(is_state(entity, "on"), "red", "green") }}'
            tap_action:
              action: more-info
            hold_action:
              action: fire-dom-event
              browser_mod:
                service: browser_mod.more_info
                data:
                  entity: sensor.sliding_door_battery
            card_mod:
              style:
                mushroom-shape-icon$: "{% set battery_entity = \"sensor.sliding_door_battery\"\
                  %}\n{% if int(states(battery_entity), 0) <= 60 %}\n{% from \"util.jinja\"\
                  \ import battery_color %}\n.shape {\n  /* Radial progress bar */\n\
                  \  background:\n    radial-gradient(var(--card-background-color)\
                  \ 60%, transparent calc(60% + 1px)),\n    conic-gradient(var(--{{\
                  \ battery_color(battery_entity) }}-color) {{ states(battery_entity)\
                  \ }}% 0%, var(--card-background-color) 0% 100%\n  );\n}\n.shape:after\
                  \ {\n  /* Add back icon shape */\n  content: \"\";\n  height: 100%;\n\
                  \  width: 100%;\n  position: absolute;\n  border-radius: var(--icon-border-radius);\n\
                  \  background: var(--shape-color);\n}\n{% endif %}\n"
          - type: custom:vertical-stack-in-card
            layout_options:
              grid_columns: 2
            cards:
              - type: custom:mushroom-template-card
                entity: cover.garage_door
                primary: Garage Door
                secondary: '{% from "util.jinja" import nominal_change_history %}
                  {{ state_translated(entity) }} ⸱ {{ nominal_change_history(entity)
                  }}'
                icon: "{% if is_state(entity, \"open\") %}\n  mdi:garage-open-variant\n\
                  {% elif states(entity) in [\"opening\", \"closing\"] %}\n  mdi:garage-alert-variant\n\
                  {% elif is_state(entity, \"closed\") %}\n  mdi:garage-variant\n\
                  {% else %}\n  mdi:garage-alert-variant\n{% endif %}"
                icon_color: "{% if is_state(entity, \"open\") %}\n  red\n{% elif states(entity)\
                  \ in [\"opening\", \"closing\"] %}\n  amber\n{% elif is_state(entity,\
                  \ \"closed\") %}\n  green\n{% else %}\n  red\n{% endif %}"
                tap_action:
                  action: more-info
              - type: custom:mushroom-cover-card
                entity: cover.garage_door
                name: Garage Door
                show_buttons_control: true
                primary_info: none
                secondary_info: none
                icon_type: none
                show_position_control: true
                card_mod:
                  style:
                    .: "ha-card {\n  --ha-card-box-shadow: none;\n  --ha-card-border-width:\
                      \ 0;\n  background: none;\n}\n"
                    mushroom-button$: ".button {\n  --bg-color: rgba(var(--rgb-disabled),\
                      \ 0.2);\n}\n"
                    mushroom-cover-buttons-control$:
                      mushroom-button$: ".button {\n  --bg-color: rgba(var(--rgb-disabled),\
                        \ 0.2);\n}\n"
          - type: custom:mushroom-template-card
            entity: binary_sensor.cold_storage_contact_contact
            primary: Cold Storage Door
            secondary: '{% from "util.jinja" import nominal_change_history %} {{ state_translated(entity)
              }} ⸱ {{ nominal_change_history(entity) }}'
            icon: mdi:door{{ "-open" if is_state(entity, "on") }}
            icon_color: '{{ iif(is_state(entity, "on"), "red", "green") }}'
            tap_action:
              action: more-info
            hold_action:
              action: fire-dom-event
              browser_mod:
                service: browser_mod.more_info
                data:
                  entity: sensor.cold_storage_contact_battery
            card_mod:
              style:
                mushroom-shape-icon$: "{% set battery_entity = \"sensor.cold_storage_contact_battery\"\
                  %}\n{% if int(states(battery_entity), 0) <= 60 %}\n{% from \"util.jinja\"\
                  \ import battery_color %}\n.shape {\n  /* Radial progress bar */\n\
                  \  background:\n    radial-gradient(var(--card-background-color)\
                  \ 60%, transparent calc(60% + 1px)),\n    conic-gradient(var(--{{\
                  \ battery_color(battery_entity) }}-color) {{ states(battery_entity)\
                  \ }}% 0%, var(--card-background-color) 0% 100%\n  );\n}\n.shape:after\
                  \ {\n  /* Add back icon shape */\n  content: \"\";\n  height: 100%;\n\
                  \  width: 100%;\n  position: absolute;\n  border-radius: var(--icon-border-radius);\n\
                  \  background: var(--shape-color);\n}\n{% endif %}\n"
      - type: grid
        cards:
          - type: heading
            icon: mdi:cctv
            heading: Cameras
            heading_style: subtitle
          - type: picture-elements
            camera_image: camera.doorbell
            elements:
              - type: icon
                icon: mdi:cctv
                style:
                  right: 0px
                  top: 20px
                  transform: translate(-50%, -50%) scale(150%)
                  background-color: rgba(28, 28, 28, 0.4)
                  --icon-primary-color: var(--grey-color)
                  border-radius: 24px
                  padding: 0 4px
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      title: Doorbell
                      size: fullscreen
                      content:
                        type: custom:streamline-card
                        template: camera_popup
                        variables:
                          - camera: camera.doorbell
                          - stream: doorbell
              - type: state-icon
                entity: sensor.doorbell_person_count
                icon: mdi:walk
                state_color: true
                style:
                  bottom: -20px
                  right: -20px
                  background-color: rgba(28, 28, 28, 0.4)
                  --icon-primary-color: var(--grey-color)
                  border-radius: 24px
                  padding: 0 4px
                tap_action:
                  action: more-info
              - type: state-icon
                entity: binary_sensor.doorbell_camera_motion
                icon: mdi:motion-sensor
                state_color: true
                style:
                  bottom: -20px
                  right: 30px
                  background-color: rgba(28, 28, 28, 0.4)
                  --icon-primary-color: var(--grey-color)
                  border-radius: 24px
                  padding: 0 4px
                tap_action:
                  action: more-info
            grid_options:
              columns: 9
              rows: auto
          - show_state: false
            show_name: false
            camera_view: auto
            type: picture-entity
            entity: camera.garage
            aspect_ratio: '16:9'
            tap_action:
              action: fire-dom-event
              browser_mod:
                service: browser_mod.popup
                data:
                  title: Garage
                  size: fullscreen
                  content:
                    type: custom:streamline-card
                    template: camera_popup
                    variables:
                      - camera: camera.garage
                      - stream: garage
            layout_options:
              grid_columns: 2
          - show_state: false
            show_name: false
            camera_view: auto
            type: picture-entity
            entity: camera.familyroom
            aspect_ratio: '16:9'
            tap_action:
              action: fire-dom-event
              browser_mod:
                service: browser_mod.popup
                data:
                  title: Family Room
                  size: fullscreen
                  content:
                    type: custom:streamline-card
                    template: camera_popup
                    variables:
                      - camera: camera.familyroom
                      - stream: familyroom
            layout_options:
              grid_columns: 2
          - show_state: false
            show_name: false
            camera_view: auto
            type: picture-entity
            entity: camera.livingroom
            aspect_ratio: '16:9'
            tap_action:
              action: fire-dom-event
              browser_mod:
                service: browser_mod.popup
                data:
                  title: Living Room
                  size: fullscreen
                  content:
                    type: custom:streamline-card
                    template: camera_popup
                    variables:
                      - camera: camera.livingroom
                      - stream: livingroom
            layout_options:
              grid_columns: 2
          - show_state: false
            show_name: false
            camera_view: auto
            type: picture-entity
            entity: camera.litterbox
            aspect_ratio: '16:9'
            tap_action:
              action: fire-dom-event
              browser_mod:
                service: browser_mod.popup
                data:
                  title: Litterbox
                  size: fullscreen
                  content:
                    type: custom:streamline-card
                    template: camera_popup
                    variables:
                      - camera: camera.litterbox
                      - stream: litterbox
            layout_options:
              grid_columns: 2
      - type: grid
        cards:
          - type: heading
            icon: mdi:motion-sensor
            heading: Occupancy
            heading_style: subtitle
          - type: custom:streamline-card
            template: motion_card
            variables:
              name: Living Room
              entity: binary_sensor.ecobee_occupancy
              entity_motion: binary_sensor.ecobee_motion
            grid_options:
              columns: 4
          - type: custom:streamline-card
            template: motion_card
            variables:
              name: Kitchen
              entity: binary_sensor.kitchen_occupancy
              entity_motion: binary_sensor.kitchen_motion
            grid_options:
              columns: 4
          - type: custom:streamline-card
            template: motion_card
            variables:
              name: M. Bed
              entity: binary_sensor.main_bedroom_occupancy
              entity_motion: binary_sensor.main_bedroom_motion
            grid_options:
              columns: 4
          - type: custom:streamline-card
            template: motion_card
            variables:
              name: Emma
              entity: binary_sensor.emma_bedroom_occupancy
              entity_motion: binary_sensor.emma_bedroom_motion
            grid_options:
              columns: 4
          - type: custom:streamline-card
            template: motion_card
            variables:
              name: Ethan
              entity: binary_sensor.ethan_bedroom_occupancy
              entity_motion: binary_sensor.ethan_bedroom_motion
            grid_options:
              columns: 4
          - type: custom:streamline-card
            template: motion_card
            variables:
              name: Amy Office
              entity: binary_sensor.amy_office_occupancy
              entity_motion: binary_sensor.amy_office_motion
            grid_options:
              columns: 4
          - type: custom:streamline-card
            template: motion_card
            variables:
              name: Family
              entity: binary_sensor.family_room_occupancy
              entity_motion: binary_sensor.family_room_motion
            grid_options:
              columns: 4
          - type: custom:streamline-card
            template: motion_card
            variables:
              name: Theater
              entity: binary_sensor.theater_room_occupancy
              entity_motion: binary_sensor.theater_room_motion
            grid_options:
              columns: 4
          - type: custom:streamline-card
            template: motion_card
            variables:
              entity: binary_sensor.basement_hallway_motion_occupancy
              name: Bsmt Hallway
            grid_options:
              columns: 4
          - type: custom:streamline-card
            template: motion_card
            variables:
              name: Josh Office
              entity: binary_sensor.apollo_msr_1_office_radar_target
              entity_motion: binary_sensor.apollo_msr_1_office_radar_moving_target
            grid_options:
              columns: 4
          - type: custom:streamline-card
            template: motion_card
            variables:
              name: Garage
              entity: binary_sensor.garage_multisensor_motion_detection
            grid_options:
              columns: 4
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#camera-doorbell'
                button_type: name
                name: Doorbell
                show_icon: false
                width_desktop: calc(100% - var(--mdc-drawer-width))
                margin_top_mobile: calc(0px - var(--header-height))
                modules:
                  - default
              - type: custom:advanced-camera-card
                cameras:
                  - camera_entity: camera.doorbell
                    live_provider: go2rtc
                    go2rtc:
                      modes:
                        - webrtc
                        - mse
                      stream: doorbell
                menu:
                  style: outside
                  buttons:
                    cameras:
                      enabled: false
                    media_player:
                      enabled: false
                    download:
                      enabled: false
                    microphone:
                      enabled: true
                      type: toggle
                      alignment: opposing
                    mute:
                      enabled: true
                      alignment: opposing
                    play:
                      enabled: true
                      alignment: opposing
                      priority: 45
                    fullscreen:
                      alignment: opposing
                      priority: 40
                    iris:
                      enabled: false
                live:
                  draggable: false
                  preload: true
                  controls:
                    builtin: false
                    ptz:
                      mode: 'off'
                      orientation: vertical
                      hide_zoom: true
                  lazy_load: true
                media_viewer:
                  transition_effect: slide
                timeline:
                  controls:
                    thumbnails:
                      mode: below
                dimensions:
                  aspect_ratio_mode: dynamic
                performance:
                  features:
                    media_chunk_size: 20
                view: {}
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        label: Security
        content: '{% from "util.jinja" import security_count %}

          {{ iif(security_count() | int == 0, "Secure", "Not Secure") }}'
        icon: '{% from "util.jinja" import security_count %}

          {{ iif(security_count() | int == 0, "mdi:shield-check",

          "mdi:shield-alert") }}'
        color: '{% from "util.jinja" import security_count %}

          {{ iif(security_count() | int == 0, "green", "red") }}'
      - type: custom:mushroom-template-badge
        entity: binary_sensor.all_doors
        label: Doors
        content: '{{ expand(entity) | selectattr(''state'', ''=='', ''on'') | list
          | count }}'
        icon: '{{ iif(is_state(entity, "on"), "mdi:door-open", "mdi:door") }}'
        color: '{{ iif(is_state(entity, "on"), "cyan", "grey") }}'
      - type: custom:mushroom-template-badge
        entity: input_boolean.guest_mode
        label: Guest Mode
        content: '{{ state_translated(entity) }}'
        icon: '{{ iif(is_state(entity, "on"), "mdi:account-question", "mdi:account-question-outline")
          }}'
        color: '{{ iif(is_state(entity, "on"), "green", "grey") }}'
        tap_action:
          action: more-info
        hold_action:
          action: toggle
      - type: custom:mushroom-template-badge
        entity: binary_sensor.doorbell_visitor
        label: Last Ring
        content: '{% from "util.jinja" import nominal_change_history %} {{ nominal_change_history(entity)
          }}'
        icon: mdi:bell-ring
        color: grey
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.doorbell_person_count
        label: Last Person
        content: '{% from "util.jinja" import nominal_change_history %} {{ nominal_change_history(entity)
          }}'
        icon: mdi:walk
        color: grey
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        icon: mdi:chart-gantt
        color: light-green
        tap_action:
          action: navigate
          navigation_path: frigate
        content: Timeline
    visible:
      - user: ce9ee65ab49c4ca4af52496609016f1c
      - user: f615672fc2554783beab56221097564e
      - user: 171eeb6104704b03afcad6553b7b793e
      - user: 6905264120304e96aa416e287aca5b80
  - title: Frigate Timeline
    path: frigate
    subview: true
    icon: mdi:timeline
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:advanced-camera-card
            cameras:
              - camera_entity: camera.doorbell
              - camera_entity: camera.garage
              - camera_entity: camera.livingroom
              - camera_entity: camera.familyroom
              - camera_entity: camera.litterbox
            view:
              default: timeline
              camera_select: current
            menu:
              style: outside
              buttons:
                recordings:
                  enabled: true
            timeline:
              style: ribbon
              show_recordings: true
              controls:
                thumbnails:
                  mode: below
              window_seconds: 21600
              events_media_type: all
            media_viewer:
              transition_effect: slide
              auto_unmute:
                - selected
            dimensions: {}
            performance:
              features:
                media_chunk_size: 20
                max_simultaneous_engine_requests: 100
            layout_options:
              grid_columns: full
        column_span: 4
    max_columns: 4
    cards: []
    badges: []
  - title: Climate
    path: climate
    icon: mdi:thermostat-box
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: custom:bubble-card
            card_type: climate
            entity: climate.ecobee
            card_layout: large
            show_state: true
            styles: "${card.querySelector('.bubble-name').innerText = [\n    (hass.formatEntityState(hass.states[\"\
              sensor.ecobee_mode\"]) || \"\"),\n    (hass.formatEntityAttributeValue(hass.states[entity],\
              \ \"current_temperature\") || \"\")\n  ].filter(n => n).join(\" ⸱ \"\
              )\n}"
            sub_button:
              - name: HVAC modes menu
                select_attribute: hvac_modes
                state_background: false
                show_arrow: false
              - name: Profile
                entity: climate.ecobee_cloud
                select_attribute: preset_modes
                state_background: false
                show_arrow: false
              - name: Fan modes menu
                entity: climate.ecobee
                select_attribute: fan_modes
                state_background: false
                show_arrow: false
          - type: heading
            icon: mdi:history
            heading: Running Mode History
            heading_style: subtitle
          - type: custom:history-explorer-card
            cardName: historycard-ecobee-mode
            header: hide
            uiLayout:
              toolbar: hide
              selector: hide
            labelsVisible: false
            labelAreaWidth: 0
            tooltipShowDuration: true
            tooltipSize: slim
            stateTextMode: auto
            stateColors:
              Idle: rgb(100,100,100)
              Cooling: rgb(33,150,243)
              Heating: rgb(244,67,54)
              Fan: rgb(255,235,59)
            graphs:
              - type: timeline
                entities:
                  - entity: sensor.ecobee_mode
          - type: custom:mushroom-template-card
            primary: '{%- from ''easy_time.jinja'' import big_time -%}

              {{ big_time(entity, short=true) }}'
            secondary: Heating Time
            icon: mdi:heating-coil
            tap_action:
              action: more-info
            entity: sensor.ecobee_heating_today
            visibility:
              - condition: numeric_state
                entity: sensor.ecobee_heating_today
                above: 0
            icon_color: red
          - type: custom:mushroom-template-card
            primary: '{%- from ''easy_time.jinja'' import big_time -%}

              {{ big_time(entity, short=true) }}'
            secondary: Cooling Time
            icon: mdi:air-conditioner
            tap_action:
              action: more-info
            icon_color: blue
            entity: sensor.ecobee_cooling_today
            visibility:
              - condition: numeric_state
                entity: sensor.ecobee_cooling_today
                above: 0
          - type: custom:mushroom-template-card
            primary: '{%- from ''easy_time.jinja'' import big_time -%}

              {{ big_time(entity, short=true) }}'
            secondary: Fan Time
            icon: mdi:fan
            tap_action:
              action: more-info
            entity: sensor.ecobee_fan_today
            visibility:
              - condition: numeric_state
                entity: sensor.ecobee_fan_today
                above: 0
            icon_color: amber
          - type: heading
            icon: mdi:chart-line
            heading: Thermostat
            heading_style: subtitle
          - type: custom:apexcharts-card
            apex_config:
              chart:
                foreColor: '#7B7B7B'
                toolbar:
                  show: false
              grid:
                borderColor: '#7B7B7B'
              xaxis:
                tooltip:
                  enabled: false
            header:
              show: true
              show_states: true
              colorize_states: true
            all_series_config:
              extend_to: now
              stroke_width: 2
              type: line
              group_by:
                func: avg
                duration: 5min
            span:
              end: minute
            graph_span: 1d
            yaxis:
              - id: temp
                decimals: 0
                min: ~65
                max: ~80
                apex_config:
                  tickAmount: 4
                  title:
                    text: °F
                    rotate: 0
              - id: perc
                opposite: true
                decimals: 0
                min: ~10
                max: ~50
                apex_config:
                  tickAmount: 4
                  forceNiceScale: true
                  title:
                    text: '%'
                    rotate: 0
            series:
              - entity: sensor.ecobee_current_temperature
                name: Indoor Temp
                yaxis_id: temp
                color: rgb(158,158,158)
              - entity: climate.ecobee
                attribute: target_temp_high
                name: Cool Setpoint
                yaxis_id: temp
                unit: °F
                color: rgb(33,150,243)
                stroke_width: 1
              - entity: climate.ecobee
                attribute: target_temp_low
                name: Heat Setpoint
                yaxis_id: temp
                unit: °F
                color: rgb(255,152,0)
                stroke_width: 1
              - entity: climate.ecobee
                attribute: temperature
                name: Setpoint
                yaxis_id: temp
                unit: °F
                color: rgb(33,150,243)
                stroke_width: 1
                type: area
                opacity: 0.2
              - entity: sensor.ecobee_current_humidity
                name: Indoor Humidity
                yaxis_id: perc
                color: rgb(0,150,136)
      - type: grid
        cards:
          - type: heading
            icon: mdi:thermometer-lines
            heading: Rooms
            heading_style: subtitle
          - type: custom:tabbed-card
            attributes:
              minWidth: true
            styles:
              --mdc-theme-primary: var(--state-active-color)
              --mdc-tab-color-default: var(--secondary-text-color)
              --mdc-tab-text-label-color-default: var(--secondary-text-color)
            tabs:
              - card:
                  type: custom:bar-card
                  positions:
                    icon: 'off'
                    indicator: inside
                  min: 40
                  max: 90
                  decimal: 1
                  target: 72
                  severity:
                    - color: '#1419b3'
                      from: -10
                      to: 40
                    - color: '#0c8fb3'
                      from: 40
                      to: 60
                    - color: '#3b9e09'
                      from: 60
                      to: 78
                    - color: '#d60427'
                      from: 78
                      to: 105
                  entities:
                    - entity: sensor.ecobee_current_temperature
                      height: 30px
                      name: Home
                      entity_row: true
                    - entity: sensor.kitchen_temperature
                      height: 30px
                      name: Kitchen
                      entity_row: true
                    - entity: sensor.main_bedroom_temperature
                      height: 30px
                      name: Main Bedroom
                      entity_row: truedroom
                    - entity: sensor.main_bathroom_sensor_temperature
                      height: 30px
                      name: Main Bath
                      entity_row: true
                    - entity: sensor.emma_bedroom_temperature
                      height: 30px
                      name: Emma Bedroom
                      entity_row: true
                    - entity: sensor.amy_office_temperature
                      height: 30px
                      name: Amy's Office
                      entity_row: true
                    - entity: sensor.ethan_bedroom_temperature
                      height: 30px
                      name: Ethan Bedroom
                      entity_row: true
                    - entity: sensor.family_room_temperature
                      height: 30px
                      name: Family Room
                      entity_row: true
                    - entity: sensor.joshua_office_temperature
                      height: 30px
                      name: Josh's Office
                      entity_row: true
                    - entity: sensor.theater_room_temperature
                      height: 30px
                      name: Theater
                      entity_row: true
                    - entity: sensor.cold_storage_temperature
                      height: 30px
                      min: 30
                      name: Cold Storage
                      target: 72
                      entity_row: true
                    - entity: sensor.garage_multisensor_air_temperature
                      height: 30px
                      min: 30
                      max: 105
                      name: Garage
                      target: 72
                      entity_row: true
                    - entity: sensor.ecowitt_outdoor_temperature
                      height: 30px
                      min: -10
                      max: 105
                      name: Outdoor
                      target: 72
                      entity_row: true
                  card_mod:
                    style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                      \  text-shadow: 1px 1px var(--primary-background-color);\n}\n\
                      bar-card-backgroundbar {\n  background-color: var(--primary-background-color);\n\
                      }\n"
                attributes:
                  label: Current
                  icon: mdi:home-thermometer
              - card:
                  type: custom:apexcharts-card
                  apex_config:
                    chart:
                      foreColor: '#7B7B7B'
                      toolbar:
                        show: false
                    grid:
                      borderColor: '#7B7B7B'
                    xaxis:
                      tooltip:
                        enabled: false
                  header:
                    show: true
                    show_states: true
                    colorize_states: true
                  all_series_config:
                    extend_to: now
                    stroke_width: 1
                    type: line
                    group_by:
                      func: avg
                      duration: 5min
                  span:
                    end: minute
                  graph_span: 1d
                  yaxis:
                    - decimals: 0
                      min: ~65
                      apex_config:
                        tickAmount: 4
                        title:
                          text: °F
                          rotate: 0
                  series:
                    - entity: sensor.ecobee_current_temperature
                      name: Home
                      color: rgb(255,152,0)
                    - entity: sensor.kitchen_temperature
                      name: Kitchen
                      color: rgb(205,220,57)
                    - entity: sensor.main_bedroom_temperature
                      name: Main
                      color: rgb(103,58,183)
                    - entity: sensor.main_bathroom_sensor_temperature
                      name: Main Bath
                      color: rgb(103,58,183)
                    - entity: sensor.emma_bedroom_temperature
                      name: Emma
                      color: rgb(156,39,176)
                    - entity: sensor.amy_office_temperature
                      name: Amy's Office
                      color: rgb(0,188,212)
                    - entity: sensor.ethan_bedroom_temperature
                      name: Ethan
                      color: rgb(76,175,80)
                    - entity: sensor.family_room_temperature
                      name: Family Room
                      color: rgb(255,235,59)
                    - entity: sensor.joshua_office_temperature
                      name: Josh's Office
                      color: rgb(33,150,243)
                    - entity: sensor.theater_room_temperature
                      name: Theater Room
                      color: rgb(255, 193, 7)
                attributes:
                  label: History
                  icon: mdi:history
              - card:
                  type: custom:apexcharts-card
                  apex_config:
                    chart:
                      foreColor: '#7B7B7B'
                      toolbar:
                        show: false
                    grid:
                      borderColor: '#7B7B7B'
                    xaxis:
                      tooltip:
                        enabled: false
                  header:
                    show: true
                    show_states: true
                    colorize_states: true
                  all_series_config:
                    extend_to: now
                    stroke_width: 1
                    type: line
                    group_by:
                      func: avg
                      duration: 5min
                  span:
                    end: minute
                  graph_span: 1d
                  yaxis:
                    - decimals: 0
                      apex_config:
                        tickAmount: 4
                        title:
                          text: °F
                          rotate: 0
                  series:
                    - entity: sensor.cold_storage_temperature
                      name: Cold Storage
                      color: rgb(156,39,176)
                    - entity: sensor.garage_multisensor_air_temperature
                      name: Garage
                      color: rgb(121,85,72)
                attributes:
                  label: Other
                  icon: mdi:pool-thermometer
      - type: grid
        cards:
          - type: heading
            icon: mdi:water-percent
            heading: Humidity
            heading_style: subtitle
          - type: custom:apexcharts-card
            apex_config:
              chart:
                foreColor: '#7B7B7B'
                toolbar:
                  show: false
              grid:
                borderColor: '#7B7B7B'
              xaxis:
                tooltip:
                  enabled: false
            header:
              show: true
              show_states: true
              colorize_states: true
            all_series_config:
              extend_to: now
              stroke_width: 2
              type: line
              group_by:
                func: avg
                duration: 5min
            span:
              end: minute
            graph_span: 1d
            yaxis:
              - decimals: 0
                min: ~10
                max: ~50
                apex_config:
                  tickAmount: 4
                  forceNiceScale: true
                  title:
                    text: '%'
                    rotate: 0
            series:
              - entity: sensor.ecowitt_humidity
                name: Outside
                color: rgb(0,188,212)
              - entity: sensor.cold_storage_humidity
                name: Cold Storage
                color: rgb(156,39,176)
              - entity: sensor.main_bathroom_sensor_humidity
                name: Main Bath
                color: rgb(103,58,183)
              - entity: sensor.garage_multisensor_humidity
                name: Garage
                color: rgb(121,85,72)
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: sensor.ecobee_mode
        content: '{{ states(entity) }}'
        icon: mdi:thermostat
        color: "{% if is_state(entity, \"Heating\") %}\n  red\n{% elif is_state(entity,\
          \ \"Cooling\") %}\n  light-blue\n{% elif is_state(entity, \"Fan\") %}\n\
          \  amber\n{% elif is_state(entity, \"Off\") %}\n  grey\n{% else %}\n  blue-grey\n\
          {% endif %}"
        tap_action:
          action: more-info
        label: Running
      - type: custom:mushroom-template-badge
        entity: climate.ecobee_cloud
        icon: mdi:thermostat-cog
        content: '{{ (state_attr(entity, "preset_mode") | replace("_", " ") | title)
          | default("Home", true) }}'
        tap_action:
          action: more-info
        label: Preset
      - type: custom:mushroom-template-badge
        entity: sensor.ecobee_current_temperature
        label: Temperature
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:thermometer
        color: '{% from "util.jinja" import room_temp %}

          {{ room_temp(entity) }}'
        tap_action:
          action: more-info
      - type: custom:mushroom-template-badge
        entity: sensor.ecobee_current_humidity
        label: Humidity
        content: '{{ states(entity) | round(0) }}{{ state_attr(entity, "unit_of_measurement")
          }}'
        icon: mdi:water-percent
        color: '{% from "util.jinja" import room_humidity %}

          {{ room_humidity(entity) }}'
        tap_action:
          action: more-info
    visible:
      - user: ce9ee65ab49c4ca4af52496609016f1c
      - user: f615672fc2554783beab56221097564e
      - user: 171eeb6104704b03afcad6553b7b793e
      - user: 6905264120304e96aa416e287aca5b80
  - title: Lights
    path: lights
    icon: mdi:lightbulb-group
    type: sections
    max_columns: 3
    sections:
      - type: grid
        cards:
          - type: custom:streamline-card
            template: light_group
            variables:
              entity: light.living_room_lights
              style: ''
      - type: grid
        cards:
          - type: custom:streamline-card
            template: light_group
            variables:
              entity: light.family_room_lights
              style: ''
      - type: grid
        cards:
          - type: custom:streamline-card
            template: light_group
            variables:
              entity: light.joshua_office_lights
              style: ''
      - type: grid
        cards:
          - type: custom:streamline-card
            template: light_group
            variables:
              entity: light.kitchen_lights
              style: ''
      - type: grid
        cards:
          - type: custom:streamline-card
            template: light_group
            variables:
              entity: light.amy_office_lights
              style: ''
      - type: grid
        cards:
          - type: custom:streamline-card
            template: light_group
            variables:
              entity: light.ethan_bedroom_lights
              style: ''
      - type: grid
        cards:
          - type: custom:streamline-card
            template: light_group
            variables:
              entity: light.emma_bedroom_lights
              style: ''
      - type: grid
        cards:
          - type: custom:streamline-card
            template: light_group
            variables:
              entity: light.main_bedroom_lights
              style: ''
      - type: grid
        cards:
          - type: custom:streamline-card
            template: light_group
            variables:
              entity: light.garage_lights
              style: ''
      - type: grid
        cards:
          - type: custom:streamline-card
            template: light_group
            variables:
              entity: light.outside_lights
              style: ''
      - type: grid
        cards:
          - type: custom:streamline-card
            template: light_group
            variables:
              entity: light.utility_lights
              style: ''
      - type: grid
        cards:
          - type: heading
            heading: Fans
            heading_style: subtitle
            icon: mdi:ceiling-fan
          - type: custom:streamline-card
            template: fan_group
            variables:
              entity: fan.all_fans
              style: ''
    cards: []
    badges:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: light.all_lights
            icon: '{{ iif(is_state(entity, "on"), "mdi:lightbulb-group", "mdi:lightbulb-group-off")
              }}'
            icon_color: '{{ iif(is_state(entity, ''on''), ''amber'', ''grey'') }}'
            hold_action:
              action: call-service
              service: light.turn_off
              target:
                entity_id: light.all_lights
            tap_action:
              action: none
            card_mod:
              style:
                .: "{% if is_state(config.entity, \"on\") %}\nha-card:after {\n  content:\
                  \ \"{{ expand(config.entity) | selectattr('state', '==', 'on') |\
                  \ list | count }}\";\n  position: absolute;\n  color: var(--amber-color);\n\
                  \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n  font-size:\
                  \ 12px;\n}\n{% endif %}\n"
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: fan.all_fans
            icon: '{{ iif(is_state(entity, "on"), "mdi:fan", "mdi:fan-off") }}'
            icon_color: '{{ iif(is_state(entity, "on"), "green", "grey") }}'
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: fan.turn_off
              target:
                entity_id: fan.all_fans
            card_mod:
              style:
                .: "{% if is_state(config.entity, \"on\") %}\nha-card:after {\n  content:\
                  \ \"{{ expand(config.entity) | selectattr('state', '==', 'on') |\
                  \ list | count }}\";\n  position: absolute;\n  color: var(--green-color);\n\
                  \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n  font-size:\
                  \ 12px;\n}\n{% endif %}\n.content {\n  {% if is_state(config.entity,\
                  \ 'on') %}\n    animation: rotation linear infinite;\n    animation-duration:\
                  \ 1s;\n  {% endif %}\n}\n@keyframes rotation {\n  100% {\n    transform:\
                  \ rotate(360deg);\n  }\n}\n"
    visible:
      - user: ce9ee65ab49c4ca4af52496609016f1c
      - user: f615672fc2554783beab56221097564e
      - user: 171eeb6104704b03afcad6553b7b793e
      - user: 6905264120304e96aa416e287aca5b80
  - title: Computer
    icon: mdi:desktop-tower
    path: computer
    type: sections
    max_columns: 1
    sections:
      - type: grid
        cards:
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: computer_tile
            name: Erebus
            icon: mdi:desktop-tower
            entity: binary_sensor.erebus_connected
            tap_action:
              action: navigate
              navigation_path: '#computer-erebus'
            variables:
              connected: binary_sensor.erebus_connected
              media: media_player.erebus
              cpu: sensor.erebus_cpu_usage
              ram: sensor.erebus_memory_usage
              gpu: sensor.erebus_gpu_amd_0
            triggers_update:
              - media_player.erebus
              - sensor.erebus_cpu_usage
              - sensor.erebus_memory_usage
              - sensor.erebus_gpu_amd_0
            custom_fields:
              info: "[[[\n  return `<img src=\"https://img.shields.io/badge/Ryzen_5_5600X-ED1C24?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4yIgogICB2aWV3Qm94PSIwIDAgMTUzMCAxNTMwIgogICB3aWR0aD0iMTUzMCIKICAgaGVpZ2h0PSIxNTMwIgogICBpZD0ic3ZnMSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iQU1ELnN2ZyIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMS40IChlN2MzZmViMTAwLCAyMDI0LTEwLTA5KSIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzMSIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9Im5hbWVkdmlldzEiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjMDAwMDAwIgogICAgIGJvcmRlcm9wYWNpdHk9IjAuMjUiCiAgICAgaW5rc2NhcGU6c2hvd3BhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSIwIgogICAgIGlua3NjYXBlOmRlc2tjb2xvcj0iI2QxZDFkMSIKICAgICBpbmtzY2FwZTp6b29tPSIwLjc1ODE2OTkzIgogICAgIGlua3NjYXBlOmN4PSI3NjUiCiAgICAgaW5rc2NhcGU6Y3k9Ijc2NS42NTk0OCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjIyMjYiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTI4NiIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMjYiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjIzIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMSIgLz4KICA8dGl0bGUKICAgICBpZD0idGl0bGUxIj5BTURfTG9nby1zdmc8L3RpdGxlPgogIDxzdHlsZQogICAgIGlkPSJzdHlsZTEiPgoJCXRzcGFuIHsgd2hpdGUtc3BhY2U6cHJlIH0KCQkuc2hwMCB7IGZpbGw6ICMwMDAwMDAgfSAKCTwvc3R5bGU+CiAgPHBhdGgKICAgICBpZD0iTGF5ZXIiCiAgICAgY2xhc3M9InNocDAiCiAgICAgZD0iTTQzMS4zNSA0MTYuMzlMMTUuMjggMEwxNTMwIDBMMTUzMCAxNTE1LjY2TDExMTMuOTIgMTA5OS4zMkwxMTEzLjkyIDQxNi4zOUw0MzEuMzUgNDE2LjM5Wk00MzAuODcgNDk5LjgzTDIuNDkgOTI4LjQ0TDIuNDkgMTUyOC40MUw2MDIuMDQgMTUyOC40MUwxMDMwLjM5IDEwOTkuODFMNDMwLjg3IDEwOTkuODFMNDMwLjg3IDQ5OS44M1oiCiAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MSIgLz4KPC9zdmc+Cg==&logoColor=white&logoSize=auto&labelColor=555555\"\
                ><br>\n  <img src=\"https://img.shields.io/badge/RX_6650_XT-ED1C24?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4yIgogICB2aWV3Qm94PSIwIDAgMTUzMCAxNTMwIgogICB3aWR0aD0iMTUzMCIKICAgaGVpZ2h0PSIxNTMwIgogICBpZD0ic3ZnMSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iQU1ELnN2ZyIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMS40IChlN2MzZmViMTAwLCAyMDI0LTEwLTA5KSIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzMSIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9Im5hbWVkdmlldzEiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjMDAwMDAwIgogICAgIGJvcmRlcm9wYWNpdHk9IjAuMjUiCiAgICAgaW5rc2NhcGU6c2hvd3BhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSIwIgogICAgIGlua3NjYXBlOmRlc2tjb2xvcj0iI2QxZDFkMSIKICAgICBpbmtzY2FwZTp6b29tPSIwLjc1ODE2OTkzIgogICAgIGlua3NjYXBlOmN4PSI3NjUiCiAgICAgaW5rc2NhcGU6Y3k9Ijc2NS42NTk0OCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjIyMjYiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTI4NiIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMjYiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjIzIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMSIgLz4KICA8dGl0bGUKICAgICBpZD0idGl0bGUxIj5BTURfTG9nby1zdmc8L3RpdGxlPgogIDxzdHlsZQogICAgIGlkPSJzdHlsZTEiPgoJCXRzcGFuIHsgd2hpdGUtc3BhY2U6cHJlIH0KCQkuc2hwMCB7IGZpbGw6ICMwMDAwMDAgfSAKCTwvc3R5bGU+CiAgPHBhdGgKICAgICBpZD0iTGF5ZXIiCiAgICAgY2xhc3M9InNocDAiCiAgICAgZD0iTTQzMS4zNSA0MTYuMzlMMTUuMjggMEwxNTMwIDBMMTUzMCAxNTE1LjY2TDExMTMuOTIgMTA5OS4zMkwxMTEzLjkyIDQxNi4zOUw0MzEuMzUgNDE2LjM5Wk00MzAuODcgNDk5LjgzTDIuNDkgOTI4LjQ0TDIuNDkgMTUyOC40MUw2MDIuMDQgMTUyOC40MUwxMDMwLjM5IDEwOTkuODFMNDMwLjg3IDEwOTkuODFMNDMwLjg3IDQ5OS44M1oiCiAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MSIgLz4KPC9zdmc+Cg==&logoColor=white&logoSize=auto&labelColor=555555\"\
                >`\n]]]"
              chips:
                card:
                  type: custom:mushroom-chips-card
                  card_mod:
                    style: "ha-card {\n  transition: all 0s;\n  --chip-background:\
                      \ var(--primary-background-color) !important;\n  --chip-box-shadow:\
                      \ none;\n  --chip-border-width: 0;\n  --chip-spacing: 0.1em;\n\
                      }\n"
                  chips:
                    - type: conditional
                      conditions:
                        - entity: binary_sensor.erebus_microphone_used
                          state: 'on'
                      chip:
                        type: entity
                        entity: binary_sensor.erebus_microphone_used
                        icon_color: red
                        content_info: none
                    - type: conditional
                      conditions:
                        - entity: binary_sensor.erebus_camera_used
                          state: 'on'
                      chip:
                        type: entity
                        entity: binary_sensor.erebus_camera_used
                        icon_color: red
                        content_info: none
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.erebus_system_updates_count
                          above: 0
                      chip:
                        type: template
                        entity: sensor.erebus_system_updates_count
                        icon: mdi:arrow-up-bold-circle
                        icon_color: red
                        card_mod:
                          style:
                            .: "{% if int(states(config.entity), 0) > 0 %}\nha-card:after\
                              \ {\n  content: \"{{ int(states(config.entity), 0) }}\"\
                              ;\n  position: absolute;\n  color: var(--red-color);\n\
                              \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n\
                              \  font-size: 12px;\n}\n{% endif %}\n"
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: System Updates
                              content:
                                type: custom:streamline-card
                                template: linux_updates_list
                                variables:
                                  - entity: sensor.erebus_system_updates_count
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: computer_tile
            name: Nasya
            icon: mdi:laptop
            entity: binary_sensor.nasya_connected
            show_state: true
            tap_action:
              action: navigate
              navigation_path: '#computer-nasya'
            variables:
              connected: binary_sensor.nasya_connected
              media: media_player.nasya
              cpu: sensor.nasya_cpu_load
              ram: sensor.nasya_memory_usage
              gpu: sensor.nasya_gpu_load
            triggers_update:
              - media_player.nasya
              - sensor.nasya_cpu_load
              - sensor.nasya_memory_usage
              - sensor.nasya_gpu_load
            custom_fields:
              info: "[[[\n  return `<img src=\"https://img.shields.io/badge/Core_i7_1260P-0071C5?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4yIgogICB2aWV3Qm94PSIwIDAgMTYwMCA2NzUiCiAgIHdpZHRoPSIxNjAwIgogICBoZWlnaHQ9IjY3NSIKICAgaWQ9InN2ZzEiCiAgIHNvZGlwb2RpOmRvY25hbWU9IklOVEMuc3ZnIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjQgKGU3YzNmZWIxMDAsIDIwMjQtMTAtMDkpIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0ibmFtZWR2aWV3MSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiMwMDAwMDAiCiAgICAgYm9yZGVyb3BhY2l0eT0iMC4yNSIKICAgICBpbmtzY2FwZTpzaG93cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjAiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjZDFkMWQxIgogICAgIGlua3NjYXBlOnpvb209IjEuNzE4NTE4NSIKICAgICBpbmtzY2FwZTpjeD0iODAwLjEwNzc2IgogICAgIGlua3NjYXBlOmN5PSIzMzcuNSIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjUxMjAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTM3MSIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9InN2ZzEiIC8+CiAgPHRpdGxlCiAgICAgaWQ9InRpdGxlMSI+SW50ZWxfbG9nb18oMjAyMCxfZGFya19ibHVlKS1zdmc8L3RpdGxlPgogIDxzdHlsZQogICAgIGlkPSJzdHlsZTEiPgoJCXRzcGFuIHsgd2hpdGUtc3BhY2U6cHJlIH0KCQkuc2hwMCB7IGZpbGw6ICMwMDY4YjUgfSAKCQkuc2hwMSB7IGZpbGw6ICMwMDAwMDAgfSAKCTwvc3R5bGU+CiAgPHBhdGgKICAgICBpZD0icmVjdDQiCiAgICAgY2xhc3M9InNocDAiCiAgICAgZD0iTTAgOS40MUwxMjUuOTQgOS40MUwxMjUuOTQgMTM1LjMxTDAgMTM1LjMxTDAgOS40MVoiCiAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MSIgLz4KICA8cGF0aAogICAgIGlkPSJwYXRoNiIKICAgICBmaWxsLXJ1bGU9ImV2ZW5vZGQiCiAgICAgY2xhc3M9InNocDEiCiAgICAgZD0iTSAzLjU5LDY2NS4zNSBWIDIxMS45MyBIIDEyMi44IHYgNDUzLjQyIHogbSA4OTUuOTEsNC40OCBjIC0zNi4zMSwwIC02Ni43OCwtMy4xNCAtOTAuOTgsLTkuODYgLTIzLjc2LC02LjcyIC00My40OCwtMTcuNDcgLTU4LjI3LC0zMi43IC0xNC43OSwtMTUuMjQgLTI1LjU0LC0zNS40IC0zMS44MiwtNjAuMDQgLTYuMjcsLTI1LjA5IC05LjQxLC01Ni40NiAtOS40MSwtOTMuNjQgViAzNC45NSBoIDExOS42NiB2IDE3Ni45OCBoIDg2LjUgdiAxMDIuMTUgaCAtODYuNSB2IDE1OC42MSBjIDAsMTcuOTIgMC45LDMyLjcxIDIuNjksNDMuOTEgMi4yNCwxMS42NSA2LjI4LDIwLjYxIDEyLjU1LDI2Ljg4IDYuMjgsNi4yNyAxNS42OSwxMC43NSAyOC4yNCwxMi41NSAxMC43NSwxLjc5IDI1LjU0LDIuNjggNDMuMDIsMi42OCB2IDExMS4xMiB6IG0gNTgwLjg0LC00LjQ4IFYgMCBIIDE2MDAgViA2NjUuMzUgWiBNIDY0My41OSw0MDcuNzIgViA2NjQuOSBIIDUyMy4wMyBWIDQyNC4zIGMgMCwtMzcuMTkgLTguOTcsLTY2LjMxIC0yNiwtODYuOTIgLTE3LjQ4LC0yMC42MSAtNDMuOTIsLTMxLjM2IC03OC40MywtMzEuMzYgLTI5LjEzLDAgLTU0LjY4LDEwLjc1IC03NS43NCwzMi4yNiAtMTkuNzIsMjAuMTYgLTMwLjAzLDUxLjUyIC0zMS4zOCw5NC4wOCBWIDY2NS4zNSBIIDE5Mi43MiBWIDIxMS45MyBoIDExNy44NyB2IDY0Ljk2IGwgNi43MiwtOC41MSBjIDE1LjY5LC0yMC42MSAzNS44NiwtMzYuNzQgNTkuMTYsLTQ4LjM5IDIzLjc1LC0xMS42NSA0OS43NSwtMTcuNDcgNzguNDMsLTE3LjQ3IDU5LjE2LDAgMTA1Ljc3LDE3LjkyIDEzOC45NCw1My43NiAzMy4xNiwzNS44NSA1MC4xOSw4Ni45MiA0OS43NSwxNTEuNDQgeiBtIDc3NC45LDcyLjU5IGggLTM1Ni4zMSBsIDEuMzUsNC4wMyBjIDcuNjIsMjYuNDMgMjEuOTYsNDcuOTQgNDMuMDIsNjMuMTcgMjEuMDcsMTUuNjggNDguODYsMjMuMyA4Mi40NywyMy4zIDUzLjc4LDAgOTYuODEsLTI5LjEyIDExNC43MywtNTAuNjMgbCA4Ni4wNSw2NS40MiBjIC0zNy42NCw0My4wMSAtMTAwLjM5LDg5LjE2IC0yMDEuNjgsODkuMTYgLTM0Ljk1LDAgLTY3LjY3LC02LjI3IC05Ny4yNSwtMTguODIgLTI5LjU4LC0xMi4xIC01NS4xMywtMjkuMTIgLTc1Ljc0LC01MC4xOCAtMjAuNjIsLTIxLjA2IC0zNy4yLC00Ni4xNSAtNDguODYsLTc0LjgyIC0xMS42NSwtMjguNjggLTE3LjQ3LC01OS42IC0xNy40NywtOTIuMyAwLC0zMi43MSA1LjgyLC02My42MyAxOC4zNywtOTIuMyAxMi4xLC0yOC42OCAyOS4xMywtNTMuNzcgNTAuMiwtNzQuODIgMjEuMDYsLTIxLjA2IDQ2LjE2LC0zNy42NCA3NC44NCwtNTAuMTkgMjguNjksLTEyLjA5IDU5LjYxLC0xOC4zNiA5Mi4zMywtMTguMzYgMzQuNTEsMCA2Ni4zMyw1LjgyIDk1LjAxLDE3LjkyIDI4LjY5LDEyLjA5IDUzLjM0LDI4LjY3IDczLjk1LDUwLjE4IDIwLjE3LDIxLjUgMzYuMyw0Ni41OSA0Ny45Niw3NC44MiAxMS4yLDI4LjY4IDE3LjAzLDU5LjE0IDE3LjAzLDkxLjg1IHogbSAtMTE0Ljc0LC04NC42OCBjIDAsLTMzLjE2IC0zOC41NCwtOTAuOTYgLTEyMC41NiwtOTAuOTYgLTgyLjAxLDAuNDUgLTEyMC4xMSw1OC4yNSAtMTIwLjExLDkxLjQgeiIKICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxIiAvPgo8L3N2Zz4K&logoColor=white&logoSize=auto&labelColor=555555\"\
                ><br>\n  <img src=\"https://img.shields.io/badge/RTX_3050_Ti-76B900?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4yIgogICB2aWV3Qm94PSIwIDAgMTU1OSAxMDMyIgogICB3aWR0aD0iMTU1OSIKICAgaGVpZ2h0PSIxMDMyIgogICBpZD0ic3ZnMSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iTlZEQS5zdmciCiAgIGlua3NjYXBlOnZlcnNpb249IjEuNCAoZTdjM2ZlYjEwMCwgMjAyNC0xMC0wOSkiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJuYW1lZHZpZXcxIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzAwMDAwMCIKICAgICBib3JkZXJvcGFjaXR5PSIwLjI1IgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZWNoZWNrZXJib2FyZD0iMCIKICAgICBpbmtzY2FwZTpkZXNrY29sb3I9IiNkMWQxZDEiCiAgICAgaW5rc2NhcGU6em9vbT0iMC41NjIwMTU1IgogICAgIGlua3NjYXBlOmN4PSI0NTkuMDYyMDciCiAgICAgaW5rc2NhcGU6Y3k9IjU3MC4yNjg5NyIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjI2NDIiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTM1MCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMjYiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjIzIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMSIgLz4KICA8dGl0bGUKICAgICBpZD0idGl0bGUxIj5OVklESUFfbG9nby1zdmc8L3RpdGxlPgogIDxzdHlsZQogICAgIGlkPSJzdHlsZTEiPgoJCXRzcGFuIHsgd2hpdGUtc3BhY2U6cHJlIH0KCQkuc2hwMCB7IGZpbGw6ICM3NmI5MDAgfSAKCTwvc3R5bGU+CiAgPHBhdGgKICAgICBpZD0iTGF5ZXIiCiAgICAgZmlsbC1ydWxlPSJldmVub2RkIgogICAgIGNsYXNzPSJzaHAwIgogICAgIGQ9Ik0xNTU3LjkgLTAuNUwxNTU3LjkgMTAyOS43OEw1ODEuOTkgMTAyOS43OEw1ODEuOTkgOTA4LjgxQzYwMi42MyA5MTEuMSA2MjMuMjggOTEyLjI1IDY0NS4wNiA5MTIuMjVDODcwLjk4IDkxMi4yNSAxMjY5LjQ5IDc5Ny4wMSAxNDQwLjM2IDY1My42N0MxNDE1LjEzIDYyOC40NSAxMjkyLjk5IDU3MC41NCAxMjYzLjE4IDU0Ni40NkMxMDgzLjEzIDcwMS4yNiA4OTcuMzYgODMyLjU1IDY0MC40OCA4MzIuNTVDNjIwLjk4IDgzMi41NSA2MDAuOTEgODMwLjgzIDU4MS40MiA4MjguNTRMNTgxLjQyIDc0Mi41NEM2MDQuOTMgNzQ2LjU1IDYyOC40NCA3NDguODUgNjUyLjUyIDc0OC44NUM5MjguMzIgNzQ4Ljg1IDExOTMuMjMgNDI2LjYzIDExOTMuMjMgNDI2LjYzQzExOTMuMjMgNDI2LjYzIDk2Mi4xNSAxMjQuNDkgNjA4LjM3IDEzNi41M0w1ODAuODQgMTM4LjI1TDU4MC44NCAtMC41TDE1NTcuOSAtMC41Wk02MDguMzcgMjEyLjc4Qzg2Mi45NSAyMDQuNzUgMTAyOS44MSA0MzEuNzkgMTAyOS44MSA0MzEuNzlDMTAyOS44MSA0MzEuNzkgODQ5Ljc2IDY4MS43NyA2NTYuNTMgNjgxLjc3QzYzMC43MyA2ODEuNzcgNjA1LjUgNjc3Ljc1IDU4MS40MiA2NjkuNzNMNTgxLjQyIDM4Ny42NUM2ODAuNjEgMzk5LjY5IDcwMC42OCA0NDMuMjYgNzU5Ljc0IDU0Mi40NUw4OTIuMiA0MzEuMjJDODkyLjIgNDMxLjIyIDc5NS4yOSAzMDQuNTEgNjMyLjQ1IDMwNC41MUM2MTUuMjUgMzAzLjk0IDU5OC4wNSAzMDUuMDkgNTgwLjg0IDMwNi44MUw1ODAuODQgMjEzLjk3QzI5OS42OSAyMzYgMTU5LjQgNDQzLjI2IDE1OS40IDQ0My4yNkMxNTkuNCA0NDMuMjYgMjY2LjYzIDc4OS41NSA1ODAuODQgODI4LjU0TDU4MC44NCA5MDguODFDMTUyLjUyIDg2OC42NyAwIDQyNy4yMSAwIDQyNy4yMUMwIDQyNy4yMSAyNjkuNDkgMTYzLjQ3IDU4MS40MiAxMzguMjVMNTgxLjQyIDIxMy44OUM1OTAuNCAyMTMuMzMgNTk5LjM4IDIxMi43OCA2MDguMzcgMjEyLjc4Wk01ODAuODQgNzQzLjExQzM0My40NiA3MDAuNjkgMjc3LjUyIDQ1My41OCAyNzcuNTIgNDUzLjU4QzI3Ny41MiA0NTMuNTggMzkxLjYzIDMyNy40NSA1ODAuODQgMzA2LjgxTDU4MC44NCAzODcuMDdMNTgwLjI3IDM4Ny4wN0M0ODEuMDcgMzc1LjAzIDQwMy4wOSA0NjcuOTEgNDAzLjA5IDQ2Ny45MUM0MDMuMDkgNDY3LjkxIDQ0Ny4yNCA2MjQuNDMgNTgwLjg0IDY2OS43M0w1ODAuODQgNzQzLjExWiIKICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxIiAvPgo8L3N2Zz4K&logoColor=white&logoSize=auto&labelColor=555555\"\
                >`\n]]]"
              chips:
                card:
                  type: custom:mushroom-chips-card
                  card_mod:
                    style: "ha-card {\n  transition: all 0s;\n  --chip-background:\
                      \ var(--primary-background-color) !important;\n  --chip-box-shadow:\
                      \ none;\n  --chip-border-width: 0;\n  --chip-spacing: 0.1em;\n\
                      }\n"
                  chips:
                    - type: conditional
                      conditions:
                        - entity: binary_sensor.nasya_mic_active
                          state: 'on'
                      chip:
                        type: entity
                        entity: binary_sensor.nasya_mic_active
                        icon_color: red
                        content_info: none
                    - type: conditional
                      conditions:
                        - entity: binary_sensor.nasya_webcam_active
                          state: 'on'
                      chip:
                        type: entity
                        entity: binary_sensor.nasya_webcam_active
                        icon_color: red
                        content_info: none
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.nasya_windows_updates_software_updates
                          above: 0
                      chip:
                        type: template
                        entity: sensor.nasya_windows_updates_software_updates
                        icon: mdi:arrow-up-bold-circle
                        icon_color: red
                        card_mod:
                          style:
                            .: "{% if int(states(config.entity), 0) > 0 %}\nha-card:after\
                              \ {\n  content: \"{{ int(states(config.entity), 0) }}\"\
                              ;\n  position: absolute;\n  color: var(--red-color);\n\
                              \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n\
                              \  font-size: 12px;\n}\n{% endif %}\n"
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Software Updates
                              content:
                                type: custom:streamline-card
                                template: windows_updates_list
                                variables:
                                  - entity: sensor.nasya_windows_updates_software_updates
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.nasya_windows_updates_driver_updates
                          above: 0
                      chip:
                        type: template
                        entity: sensor.nasya_windows_updates_driver_updates
                        icon: mdi:cog-refresh
                        icon_color: red
                        card_mod:
                          style:
                            .: "{% if int(states(config.entity), 0) > 0 %}\nha-card:after\
                              \ {\n  content: \"{{ int(states(config.entity), 0) }}\"\
                              ;\n  position: absolute;\n  color: var(--red-color);\n\
                              \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n\
                              \  font-size: 12px;\n}\n{% endif %}\n"
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Driver Updates
                              content:
                                type: custom:streamline-card
                                template: windows_updates_list
                                variables:
                                  - entity: sensor.nasya_windows_updates_driver_updates
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: computer_tile
            name: Cartago
            icon: mdi:laptop
            entity: binary_sensor.cartago_connected
            tap_action:
              action: navigate
              navigation_path: '#computer-cartago'
            variables:
              connected: binary_sensor.cartago_connected
              media: media_player.cartago
              cpu: sensor.cartago_cpu_usage
              ram: sensor.cartago_memory_usage
              gpu: sensor.cartago_gpu_amd_0
            custom_fields:
              info: "[[[\n  return `<img src=\"https://img.shields.io/badge/Ryzen_9_4900HS-ED1C24?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4yIgogICB2aWV3Qm94PSIwIDAgMTUzMCAxNTMwIgogICB3aWR0aD0iMTUzMCIKICAgaGVpZ2h0PSIxNTMwIgogICBpZD0ic3ZnMSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iQU1ELnN2ZyIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMS40IChlN2MzZmViMTAwLCAyMDI0LTEwLTA5KSIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzMSIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9Im5hbWVkdmlldzEiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjMDAwMDAwIgogICAgIGJvcmRlcm9wYWNpdHk9IjAuMjUiCiAgICAgaW5rc2NhcGU6c2hvd3BhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSIwIgogICAgIGlua3NjYXBlOmRlc2tjb2xvcj0iI2QxZDFkMSIKICAgICBpbmtzY2FwZTp6b29tPSIwLjc1ODE2OTkzIgogICAgIGlua3NjYXBlOmN4PSI3NjUiCiAgICAgaW5rc2NhcGU6Y3k9Ijc2NS42NTk0OCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjIyMjYiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTI4NiIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMjYiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjIzIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMSIgLz4KICA8dGl0bGUKICAgICBpZD0idGl0bGUxIj5BTURfTG9nby1zdmc8L3RpdGxlPgogIDxzdHlsZQogICAgIGlkPSJzdHlsZTEiPgoJCXRzcGFuIHsgd2hpdGUtc3BhY2U6cHJlIH0KCQkuc2hwMCB7IGZpbGw6ICMwMDAwMDAgfSAKCTwvc3R5bGU+CiAgPHBhdGgKICAgICBpZD0iTGF5ZXIiCiAgICAgY2xhc3M9InNocDAiCiAgICAgZD0iTTQzMS4zNSA0MTYuMzlMMTUuMjggMEwxNTMwIDBMMTUzMCAxNTE1LjY2TDExMTMuOTIgMTA5OS4zMkwxMTEzLjkyIDQxNi4zOUw0MzEuMzUgNDE2LjM5Wk00MzAuODcgNDk5LjgzTDIuNDkgOTI4LjQ0TDIuNDkgMTUyOC40MUw2MDIuMDQgMTUyOC40MUwxMDMwLjM5IDEwOTkuODFMNDMwLjg3IDEwOTkuODFMNDMwLjg3IDQ5OS44M1oiCiAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MSIgLz4KPC9zdmc+Cg==&logoColor=white&logoSize=auto&labelColor=555555\"\
                ><br>\n  <img src=\"https://img.shields.io/badge/RTX_2060_Q-76B900?style=flat-square&logo=nvidia&logoColor=white&logoSize=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4yIgogICB2aWV3Qm94PSIwIDAgMTU1OSAxMDMyIgogICB3aWR0aD0iMTU1OSIKICAgaGVpZ2h0PSIxMDMyIgogICBpZD0ic3ZnMSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iTlZEQS5zdmciCiAgIGlua3NjYXBlOnZlcnNpb249IjEuNCAoZTdjM2ZlYjEwMCwgMjAyNC0xMC0wOSkiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJuYW1lZHZpZXcxIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzAwMDAwMCIKICAgICBib3JkZXJvcGFjaXR5PSIwLjI1IgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZWNoZWNrZXJib2FyZD0iMCIKICAgICBpbmtzY2FwZTpkZXNrY29sb3I9IiNkMWQxZDEiCiAgICAgaW5rc2NhcGU6em9vbT0iMC41NjIwMTU1IgogICAgIGlua3NjYXBlOmN4PSI0NTkuMDYyMDciCiAgICAgaW5rc2NhcGU6Y3k9IjU3MC4yNjg5NyIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjI2NDIiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTM1MCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMjYiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjIzIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMSIgLz4KICA8dGl0bGUKICAgICBpZD0idGl0bGUxIj5OVklESUFfbG9nby1zdmc8L3RpdGxlPgogIDxzdHlsZQogICAgIGlkPSJzdHlsZTEiPgoJCXRzcGFuIHsgd2hpdGUtc3BhY2U6cHJlIH0KCQkuc2hwMCB7IGZpbGw6ICM3NmI5MDAgfSAKCTwvc3R5bGU+CiAgPHBhdGgKICAgICBpZD0iTGF5ZXIiCiAgICAgZmlsbC1ydWxlPSJldmVub2RkIgogICAgIGNsYXNzPSJzaHAwIgogICAgIGQ9Ik0xNTU3LjkgLTAuNUwxNTU3LjkgMTAyOS43OEw1ODEuOTkgMTAyOS43OEw1ODEuOTkgOTA4LjgxQzYwMi42MyA5MTEuMSA2MjMuMjggOTEyLjI1IDY0NS4wNiA5MTIuMjVDODcwLjk4IDkxMi4yNSAxMjY5LjQ5IDc5Ny4wMSAxNDQwLjM2IDY1My42N0MxNDE1LjEzIDYyOC40NSAxMjkyLjk5IDU3MC41NCAxMjYzLjE4IDU0Ni40NkMxMDgzLjEzIDcwMS4yNiA4OTcuMzYgODMyLjU1IDY0MC40OCA4MzIuNTVDNjIwLjk4IDgzMi41NSA2MDAuOTEgODMwLjgzIDU4MS40MiA4MjguNTRMNTgxLjQyIDc0Mi41NEM2MDQuOTMgNzQ2LjU1IDYyOC40NCA3NDguODUgNjUyLjUyIDc0OC44NUM5MjguMzIgNzQ4Ljg1IDExOTMuMjMgNDI2LjYzIDExOTMuMjMgNDI2LjYzQzExOTMuMjMgNDI2LjYzIDk2Mi4xNSAxMjQuNDkgNjA4LjM3IDEzNi41M0w1ODAuODQgMTM4LjI1TDU4MC44NCAtMC41TDE1NTcuOSAtMC41Wk02MDguMzcgMjEyLjc4Qzg2Mi45NSAyMDQuNzUgMTAyOS44MSA0MzEuNzkgMTAyOS44MSA0MzEuNzlDMTAyOS44MSA0MzEuNzkgODQ5Ljc2IDY4MS43NyA2NTYuNTMgNjgxLjc3QzYzMC43MyA2ODEuNzcgNjA1LjUgNjc3Ljc1IDU4MS40MiA2NjkuNzNMNTgxLjQyIDM4Ny42NUM2ODAuNjEgMzk5LjY5IDcwMC42OCA0NDMuMjYgNzU5Ljc0IDU0Mi40NUw4OTIuMiA0MzEuMjJDODkyLjIgNDMxLjIyIDc5NS4yOSAzMDQuNTEgNjMyLjQ1IDMwNC41MUM2MTUuMjUgMzAzLjk0IDU5OC4wNSAzMDUuMDkgNTgwLjg0IDMwNi44MUw1ODAuODQgMjEzLjk3QzI5OS42OSAyMzYgMTU5LjQgNDQzLjI2IDE1OS40IDQ0My4yNkMxNTkuNCA0NDMuMjYgMjY2LjYzIDc4OS41NSA1ODAuODQgODI4LjU0TDU4MC44NCA5MDguODFDMTUyLjUyIDg2OC42NyAwIDQyNy4yMSAwIDQyNy4yMUMwIDQyNy4yMSAyNjkuNDkgMTYzLjQ3IDU4MS40MiAxMzguMjVMNTgxLjQyIDIxMy44OUM1OTAuNCAyMTMuMzMgNTk5LjM4IDIxMi43OCA2MDguMzcgMjEyLjc4Wk01ODAuODQgNzQzLjExQzM0My40NiA3MDAuNjkgMjc3LjUyIDQ1My41OCAyNzcuNTIgNDUzLjU4QzI3Ny41MiA0NTMuNTggMzkxLjYzIDMyNy40NSA1ODAuODQgMzA2LjgxTDU4MC44NCAzODcuMDdMNTgwLjI3IDM4Ny4wN0M0ODEuMDcgMzc1LjAzIDQwMy4wOSA0NjcuOTEgNDAzLjA5IDQ2Ny45MUM0MDMuMDkgNDY3LjkxIDQ0Ny4yNCA2MjQuNDMgNTgwLjg0IDY2OS43M0w1ODAuODQgNzQzLjExWiIKICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxIiAvPgo8L3N2Zz4K&labelColor=555555\"\
                >`\n]]]"
              chips:
                card:
                  type: custom:mushroom-chips-card
                  card_mod:
                    style: "ha-card {\n  transition: all 0s;\n  --chip-background:\
                      \ var(--primary-background-color) !important;\n  --chip-box-shadow:\
                      \ none;\n  --chip-border-width: 0;\n  --chip-spacing: 0.1em;\n\
                      }\n"
                  chips:
                    - type: conditional
                      conditions:
                        - entity: binary_sensor.cartago_microphone_used
                          state: 'on'
                      chip:
                        type: entity
                        entity: binary_sensor.cartago_microphone_used
                        icon_color: red
                        content_info: none
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.cartago_system_updates_count
                          above: 0
                      chip:
                        type: template
                        entity: sensor.cartago_system_updates_count
                        icon: mdi:arrow-up-bold-circle
                        icon_color: red
                        card_mod:
                          style:
                            .: "{% if int(states(config.entity), 0) > 0 %}\nha-card:after\
                              \ {\n  content: \"{{ int(states(config.entity), 0) }}\"\
                              ;\n  position: absolute;\n  color: var(--red-color);\n\
                              \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n\
                              \  font-size: 12px;\n}\n{% endif %}\n"
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: System Updates
                              content:
                                type: custom:streamline-card
                                template: linux_updates_list
                                variables:
                                  - entity: sensor.cartago_system_updates_count
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: computer_tile
            name: Ardena
            icon: fab:steam-symbol
            entity: binary_sensor.ardena_connected
            show_state: true
            tap_action:
              action: navigate
              navigation_path: '#computer-ardena'
            variables:
              connected: binary_sensor.ardena_connected
              media: media_player.ardena
              cpu: sensor.ardena_cpu_load
              ram: sensor.ardena_memory_usage
              gpu: sensor.ardena_gpu_load
            triggers_update:
              - media_player.ardena
              - sensor.ardena_cpu_load
              - sensor.ardena_memory_usage
              - sensor.ardena_gpu_load
            custom_fields:
              info: "[[[\n  return `<img src=\"https://img.shields.io/badge/Ryzen_5_5600X-ED1C24?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4yIgogICB2aWV3Qm94PSIwIDAgMTUzMCAxNTMwIgogICB3aWR0aD0iMTUzMCIKICAgaGVpZ2h0PSIxNTMwIgogICBpZD0ic3ZnMSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iQU1ELnN2ZyIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMS40IChlN2MzZmViMTAwLCAyMDI0LTEwLTA5KSIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzMSIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9Im5hbWVkdmlldzEiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjMDAwMDAwIgogICAgIGJvcmRlcm9wYWNpdHk9IjAuMjUiCiAgICAgaW5rc2NhcGU6c2hvd3BhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSIwIgogICAgIGlua3NjYXBlOmRlc2tjb2xvcj0iI2QxZDFkMSIKICAgICBpbmtzY2FwZTp6b29tPSIwLjc1ODE2OTkzIgogICAgIGlua3NjYXBlOmN4PSI3NjUiCiAgICAgaW5rc2NhcGU6Y3k9Ijc2NS42NTk0OCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjIyMjYiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTI4NiIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMjYiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjIzIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMSIgLz4KICA8dGl0bGUKICAgICBpZD0idGl0bGUxIj5BTURfTG9nby1zdmc8L3RpdGxlPgogIDxzdHlsZQogICAgIGlkPSJzdHlsZTEiPgoJCXRzcGFuIHsgd2hpdGUtc3BhY2U6cHJlIH0KCQkuc2hwMCB7IGZpbGw6ICMwMDAwMDAgfSAKCTwvc3R5bGU+CiAgPHBhdGgKICAgICBpZD0iTGF5ZXIiCiAgICAgY2xhc3M9InNocDAiCiAgICAgZD0iTTQzMS4zNSA0MTYuMzlMMTUuMjggMEwxNTMwIDBMMTUzMCAxNTE1LjY2TDExMTMuOTIgMTA5OS4zMkwxMTEzLjkyIDQxNi4zOUw0MzEuMzUgNDE2LjM5Wk00MzAuODcgNDk5LjgzTDIuNDkgOTI4LjQ0TDIuNDkgMTUyOC40MUw2MDIuMDQgMTUyOC40MUwxMDMwLjM5IDEwOTkuODFMNDMwLjg3IDEwOTkuODFMNDMwLjg3IDQ5OS44M1oiCiAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MSIgLz4KPC9zdmc+Cg==&logoColor=white&logoSize=auto&labelColor=555555\"\
                ><br>\n  <img src=\"https://img.shields.io/badge/RTX_3080-76B900?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4yIgogICB2aWV3Qm94PSIwIDAgMTU1OSAxMDMyIgogICB3aWR0aD0iMTU1OSIKICAgaGVpZ2h0PSIxMDMyIgogICBpZD0ic3ZnMSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iTlZEQS5zdmciCiAgIGlua3NjYXBlOnZlcnNpb249IjEuNCAoZTdjM2ZlYjEwMCwgMjAyNC0xMC0wOSkiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJuYW1lZHZpZXcxIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzAwMDAwMCIKICAgICBib3JkZXJvcGFjaXR5PSIwLjI1IgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZWNoZWNrZXJib2FyZD0iMCIKICAgICBpbmtzY2FwZTpkZXNrY29sb3I9IiNkMWQxZDEiCiAgICAgaW5rc2NhcGU6em9vbT0iMC41NjIwMTU1IgogICAgIGlua3NjYXBlOmN4PSI0NTkuMDYyMDciCiAgICAgaW5rc2NhcGU6Y3k9IjU3MC4yNjg5NyIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjI2NDIiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTM1MCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMjYiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjIzIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMSIgLz4KICA8dGl0bGUKICAgICBpZD0idGl0bGUxIj5OVklESUFfbG9nby1zdmc8L3RpdGxlPgogIDxzdHlsZQogICAgIGlkPSJzdHlsZTEiPgoJCXRzcGFuIHsgd2hpdGUtc3BhY2U6cHJlIH0KCQkuc2hwMCB7IGZpbGw6ICM3NmI5MDAgfSAKCTwvc3R5bGU+CiAgPHBhdGgKICAgICBpZD0iTGF5ZXIiCiAgICAgZmlsbC1ydWxlPSJldmVub2RkIgogICAgIGNsYXNzPSJzaHAwIgogICAgIGQ9Ik0xNTU3LjkgLTAuNUwxNTU3LjkgMTAyOS43OEw1ODEuOTkgMTAyOS43OEw1ODEuOTkgOTA4LjgxQzYwMi42MyA5MTEuMSA2MjMuMjggOTEyLjI1IDY0NS4wNiA5MTIuMjVDODcwLjk4IDkxMi4yNSAxMjY5LjQ5IDc5Ny4wMSAxNDQwLjM2IDY1My42N0MxNDE1LjEzIDYyOC40NSAxMjkyLjk5IDU3MC41NCAxMjYzLjE4IDU0Ni40NkMxMDgzLjEzIDcwMS4yNiA4OTcuMzYgODMyLjU1IDY0MC40OCA4MzIuNTVDNjIwLjk4IDgzMi41NSA2MDAuOTEgODMwLjgzIDU4MS40MiA4MjguNTRMNTgxLjQyIDc0Mi41NEM2MDQuOTMgNzQ2LjU1IDYyOC40NCA3NDguODUgNjUyLjUyIDc0OC44NUM5MjguMzIgNzQ4Ljg1IDExOTMuMjMgNDI2LjYzIDExOTMuMjMgNDI2LjYzQzExOTMuMjMgNDI2LjYzIDk2Mi4xNSAxMjQuNDkgNjA4LjM3IDEzNi41M0w1ODAuODQgMTM4LjI1TDU4MC44NCAtMC41TDE1NTcuOSAtMC41Wk02MDguMzcgMjEyLjc4Qzg2Mi45NSAyMDQuNzUgMTAyOS44MSA0MzEuNzkgMTAyOS44MSA0MzEuNzlDMTAyOS44MSA0MzEuNzkgODQ5Ljc2IDY4MS43NyA2NTYuNTMgNjgxLjc3QzYzMC43MyA2ODEuNzcgNjA1LjUgNjc3Ljc1IDU4MS40MiA2NjkuNzNMNTgxLjQyIDM4Ny42NUM2ODAuNjEgMzk5LjY5IDcwMC42OCA0NDMuMjYgNzU5Ljc0IDU0Mi40NUw4OTIuMiA0MzEuMjJDODkyLjIgNDMxLjIyIDc5NS4yOSAzMDQuNTEgNjMyLjQ1IDMwNC41MUM2MTUuMjUgMzAzLjk0IDU5OC4wNSAzMDUuMDkgNTgwLjg0IDMwNi44MUw1ODAuODQgMjEzLjk3QzI5OS42OSAyMzYgMTU5LjQgNDQzLjI2IDE1OS40IDQ0My4yNkMxNTkuNCA0NDMuMjYgMjY2LjYzIDc4OS41NSA1ODAuODQgODI4LjU0TDU4MC44NCA5MDguODFDMTUyLjUyIDg2OC42NyAwIDQyNy4yMSAwIDQyNy4yMUMwIDQyNy4yMSAyNjkuNDkgMTYzLjQ3IDU4MS40MiAxMzguMjVMNTgxLjQyIDIxMy44OUM1OTAuNCAyMTMuMzMgNTk5LjM4IDIxMi43OCA2MDguMzcgMjEyLjc4Wk01ODAuODQgNzQzLjExQzM0My40NiA3MDAuNjkgMjc3LjUyIDQ1My41OCAyNzcuNTIgNDUzLjU4QzI3Ny41MiA0NTMuNTggMzkxLjYzIDMyNy40NSA1ODAuODQgMzA2LjgxTDU4MC44NCAzODcuMDdMNTgwLjI3IDM4Ny4wN0M0ODEuMDcgMzc1LjAzIDQwMy4wOSA0NjcuOTEgNDAzLjA5IDQ2Ny45MUM0MDMuMDkgNDY3LjkxIDQ0Ny4yNCA2MjQuNDMgNTgwLjg0IDY2OS43M0w1ODAuODQgNzQzLjExWiIKICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxIiAvPgo8L3N2Zz4K&logoColor=white&logoSize=auto&labelColor=555555\"\
                >`\n]]]"
              chips:
                card:
                  type: custom:mushroom-chips-card
                  card_mod:
                    style: "ha-card {\n  transition: all 0s;\n  --chip-background:\
                      \ var(--primary-background-color) !important;\n  --chip-box-shadow:\
                      \ none;\n  --chip-border-width: 0;\n  --chip-spacing: 0.1em;\n\
                      }\n"
                  chips:
                    - type: conditional
                      conditions:
                        - entity: binary_sensor.ardena_mic_active
                          state: 'on'
                      chip:
                        type: entity
                        entity: binary_sensor.ardena_mic_active
                        icon_color: red
                        content_info: none
                    - type: conditional
                      conditions:
                        - entity: binary_sensor.ardena_webcam_active
                          state: 'on'
                      chip:
                        type: entity
                        entity: binary_sensor.ardena_webcam_active
                        icon_color: red
                        content_info: none
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.ardena_windows_updates_software_updates
                          above: 0
                      chip:
                        type: template
                        entity: sensor.ardena_windows_updates_software_updates
                        icon: mdi:arrow-up-bold-circle
                        icon_color: red
                        card_mod:
                          style:
                            .: "{% if int(states(config.entity), 0) > 0 %}\nha-card:after\
                              \ {\n  content: \"{{ int(states(config.entity), 0) }}\"\
                              ;\n  position: absolute;\n  color: var(--red-color);\n\
                              \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n\
                              \  font-size: 12px;\n}\n{% endif %}\n"
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Software Updates
                              content:
                                type: custom:streamline-card
                                template: windows_updates_list
                                variables:
                                  - entity: sensor.ardena_windows_updates_software_updates
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.ardena_windows_updates_driver_updates
                          above: 0
                      chip:
                        type: template
                        entity: sensor.ardena_windows_updates_driver_updates
                        icon: mdi:cog-refresh
                        icon_color: red
                        card_mod:
                          style:
                            .: "{% if int(states(config.entity), 0) > 0 %}\nha-card:after\
                              \ {\n  content: \"{{ int(states(config.entity), 0) }}\"\
                              ;\n  position: absolute;\n  color: var(--red-color);\n\
                              \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n\
                              \  font-size: 12px;\n}\n{% endif %}\n"
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Driver Updates
                              content:
                                type: custom:streamline-card
                                template: windows_updates_list
                                variables:
                                  - entity: sensor.ardena_windows_updates_driver_updates
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: computer_tile
            name: Athos
            icon: mdi:gamepad
            entity: binary_sensor.athos_connected
            show_state: true
            tap_action:
              action: navigate
              navigation_path: '#computer-athos'
            variables:
              connected: binary_sensor.athos_connected
              media: media_player.athos
              cpu: sensor.athos_cpu_load
              ram: sensor.athos_memory_usage
              gpu: sensor.athos_gpu_load
            triggers_update:
              - media_player.athos
              - sensor.athos_cpu_load
              - sensor.athos_memory_usage
              - sensor.athos_gpu_load
            custom_fields:
              info: "[[[\n  return `<img src=\"https://img.shields.io/badge/Core_i7_11700-0071C5?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4yIgogICB2aWV3Qm94PSIwIDAgMTYwMCA2NzUiCiAgIHdpZHRoPSIxNjAwIgogICBoZWlnaHQ9IjY3NSIKICAgaWQ9InN2ZzEiCiAgIHNvZGlwb2RpOmRvY25hbWU9IklOVEMuc3ZnIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjQgKGU3YzNmZWIxMDAsIDIwMjQtMTAtMDkpIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0ibmFtZWR2aWV3MSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiMwMDAwMDAiCiAgICAgYm9yZGVyb3BhY2l0eT0iMC4yNSIKICAgICBpbmtzY2FwZTpzaG93cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjAiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjZDFkMWQxIgogICAgIGlua3NjYXBlOnpvb209IjEuNzE4NTE4NSIKICAgICBpbmtzY2FwZTpjeD0iODAwLjEwNzc2IgogICAgIGlua3NjYXBlOmN5PSIzMzcuNSIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjUxMjAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTM3MSIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9InN2ZzEiIC8+CiAgPHRpdGxlCiAgICAgaWQ9InRpdGxlMSI+SW50ZWxfbG9nb18oMjAyMCxfZGFya19ibHVlKS1zdmc8L3RpdGxlPgogIDxzdHlsZQogICAgIGlkPSJzdHlsZTEiPgoJCXRzcGFuIHsgd2hpdGUtc3BhY2U6cHJlIH0KCQkuc2hwMCB7IGZpbGw6ICMwMDY4YjUgfSAKCQkuc2hwMSB7IGZpbGw6ICMwMDAwMDAgfSAKCTwvc3R5bGU+CiAgPHBhdGgKICAgICBpZD0icmVjdDQiCiAgICAgY2xhc3M9InNocDAiCiAgICAgZD0iTTAgOS40MUwxMjUuOTQgOS40MUwxMjUuOTQgMTM1LjMxTDAgMTM1LjMxTDAgOS40MVoiCiAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MSIgLz4KICA8cGF0aAogICAgIGlkPSJwYXRoNiIKICAgICBmaWxsLXJ1bGU9ImV2ZW5vZGQiCiAgICAgY2xhc3M9InNocDEiCiAgICAgZD0iTSAzLjU5LDY2NS4zNSBWIDIxMS45MyBIIDEyMi44IHYgNDUzLjQyIHogbSA4OTUuOTEsNC40OCBjIC0zNi4zMSwwIC02Ni43OCwtMy4xNCAtOTAuOTgsLTkuODYgLTIzLjc2LC02LjcyIC00My40OCwtMTcuNDcgLTU4LjI3LC0zMi43IC0xNC43OSwtMTUuMjQgLTI1LjU0LC0zNS40IC0zMS44MiwtNjAuMDQgLTYuMjcsLTI1LjA5IC05LjQxLC01Ni40NiAtOS40MSwtOTMuNjQgViAzNC45NSBoIDExOS42NiB2IDE3Ni45OCBoIDg2LjUgdiAxMDIuMTUgaCAtODYuNSB2IDE1OC42MSBjIDAsMTcuOTIgMC45LDMyLjcxIDIuNjksNDMuOTEgMi4yNCwxMS42NSA2LjI4LDIwLjYxIDEyLjU1LDI2Ljg4IDYuMjgsNi4yNyAxNS42OSwxMC43NSAyOC4yNCwxMi41NSAxMC43NSwxLjc5IDI1LjU0LDIuNjggNDMuMDIsMi42OCB2IDExMS4xMiB6IG0gNTgwLjg0LC00LjQ4IFYgMCBIIDE2MDAgViA2NjUuMzUgWiBNIDY0My41OSw0MDcuNzIgViA2NjQuOSBIIDUyMy4wMyBWIDQyNC4zIGMgMCwtMzcuMTkgLTguOTcsLTY2LjMxIC0yNiwtODYuOTIgLTE3LjQ4LC0yMC42MSAtNDMuOTIsLTMxLjM2IC03OC40MywtMzEuMzYgLTI5LjEzLDAgLTU0LjY4LDEwLjc1IC03NS43NCwzMi4yNiAtMTkuNzIsMjAuMTYgLTMwLjAzLDUxLjUyIC0zMS4zOCw5NC4wOCBWIDY2NS4zNSBIIDE5Mi43MiBWIDIxMS45MyBoIDExNy44NyB2IDY0Ljk2IGwgNi43MiwtOC41MSBjIDE1LjY5LC0yMC42MSAzNS44NiwtMzYuNzQgNTkuMTYsLTQ4LjM5IDIzLjc1LC0xMS42NSA0OS43NSwtMTcuNDcgNzguNDMsLTE3LjQ3IDU5LjE2LDAgMTA1Ljc3LDE3LjkyIDEzOC45NCw1My43NiAzMy4xNiwzNS44NSA1MC4xOSw4Ni45MiA0OS43NSwxNTEuNDQgeiBtIDc3NC45LDcyLjU5IGggLTM1Ni4zMSBsIDEuMzUsNC4wMyBjIDcuNjIsMjYuNDMgMjEuOTYsNDcuOTQgNDMuMDIsNjMuMTcgMjEuMDcsMTUuNjggNDguODYsMjMuMyA4Mi40NywyMy4zIDUzLjc4LDAgOTYuODEsLTI5LjEyIDExNC43MywtNTAuNjMgbCA4Ni4wNSw2NS40MiBjIC0zNy42NCw0My4wMSAtMTAwLjM5LDg5LjE2IC0yMDEuNjgsODkuMTYgLTM0Ljk1LDAgLTY3LjY3LC02LjI3IC05Ny4yNSwtMTguODIgLTI5LjU4LC0xMi4xIC01NS4xMywtMjkuMTIgLTc1Ljc0LC01MC4xOCAtMjAuNjIsLTIxLjA2IC0zNy4yLC00Ni4xNSAtNDguODYsLTc0LjgyIC0xMS42NSwtMjguNjggLTE3LjQ3LC01OS42IC0xNy40NywtOTIuMyAwLC0zMi43MSA1LjgyLC02My42MyAxOC4zNywtOTIuMyAxMi4xLC0yOC42OCAyOS4xMywtNTMuNzcgNTAuMiwtNzQuODIgMjEuMDYsLTIxLjA2IDQ2LjE2LC0zNy42NCA3NC44NCwtNTAuMTkgMjguNjksLTEyLjA5IDU5LjYxLC0xOC4zNiA5Mi4zMywtMTguMzYgMzQuNTEsMCA2Ni4zMyw1LjgyIDk1LjAxLDE3LjkyIDI4LjY5LDEyLjA5IDUzLjM0LDI4LjY3IDczLjk1LDUwLjE4IDIwLjE3LDIxLjUgMzYuMyw0Ni41OSA0Ny45Niw3NC44MiAxMS4yLDI4LjY4IDE3LjAzLDU5LjE0IDE3LjAzLDkxLjg1IHogbSAtMTE0Ljc0LC04NC42OCBjIDAsLTMzLjE2IC0zOC41NCwtOTAuOTYgLTEyMC41NiwtOTAuOTYgLTgyLjAxLDAuNDUgLTEyMC4xMSw1OC4yNSAtMTIwLjExLDkxLjQgeiIKICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxIiAvPgo8L3N2Zz4K&logoColor=white&logoSize=auto&labelColor=555555\"\
                ><br>\n  <img src=\"https://img.shields.io/badge/GTX_1070-76B900?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4yIgogICB2aWV3Qm94PSIwIDAgMTU1OSAxMDMyIgogICB3aWR0aD0iMTU1OSIKICAgaGVpZ2h0PSIxMDMyIgogICBpZD0ic3ZnMSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iTlZEQS5zdmciCiAgIGlua3NjYXBlOnZlcnNpb249IjEuNCAoZTdjM2ZlYjEwMCwgMjAyNC0xMC0wOSkiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJuYW1lZHZpZXcxIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzAwMDAwMCIKICAgICBib3JkZXJvcGFjaXR5PSIwLjI1IgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZWNoZWNrZXJib2FyZD0iMCIKICAgICBpbmtzY2FwZTpkZXNrY29sb3I9IiNkMWQxZDEiCiAgICAgaW5rc2NhcGU6em9vbT0iMC41NjIwMTU1IgogICAgIGlua3NjYXBlOmN4PSI0NTkuMDYyMDciCiAgICAgaW5rc2NhcGU6Y3k9IjU3MC4yNjg5NyIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjI2NDIiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTM1MCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMjYiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjIzIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMSIgLz4KICA8dGl0bGUKICAgICBpZD0idGl0bGUxIj5OVklESUFfbG9nby1zdmc8L3RpdGxlPgogIDxzdHlsZQogICAgIGlkPSJzdHlsZTEiPgoJCXRzcGFuIHsgd2hpdGUtc3BhY2U6cHJlIH0KCQkuc2hwMCB7IGZpbGw6ICM3NmI5MDAgfSAKCTwvc3R5bGU+CiAgPHBhdGgKICAgICBpZD0iTGF5ZXIiCiAgICAgZmlsbC1ydWxlPSJldmVub2RkIgogICAgIGNsYXNzPSJzaHAwIgogICAgIGQ9Ik0xNTU3LjkgLTAuNUwxNTU3LjkgMTAyOS43OEw1ODEuOTkgMTAyOS43OEw1ODEuOTkgOTA4LjgxQzYwMi42MyA5MTEuMSA2MjMuMjggOTEyLjI1IDY0NS4wNiA5MTIuMjVDODcwLjk4IDkxMi4yNSAxMjY5LjQ5IDc5Ny4wMSAxNDQwLjM2IDY1My42N0MxNDE1LjEzIDYyOC40NSAxMjkyLjk5IDU3MC41NCAxMjYzLjE4IDU0Ni40NkMxMDgzLjEzIDcwMS4yNiA4OTcuMzYgODMyLjU1IDY0MC40OCA4MzIuNTVDNjIwLjk4IDgzMi41NSA2MDAuOTEgODMwLjgzIDU4MS40MiA4MjguNTRMNTgxLjQyIDc0Mi41NEM2MDQuOTMgNzQ2LjU1IDYyOC40NCA3NDguODUgNjUyLjUyIDc0OC44NUM5MjguMzIgNzQ4Ljg1IDExOTMuMjMgNDI2LjYzIDExOTMuMjMgNDI2LjYzQzExOTMuMjMgNDI2LjYzIDk2Mi4xNSAxMjQuNDkgNjA4LjM3IDEzNi41M0w1ODAuODQgMTM4LjI1TDU4MC44NCAtMC41TDE1NTcuOSAtMC41Wk02MDguMzcgMjEyLjc4Qzg2Mi45NSAyMDQuNzUgMTAyOS44MSA0MzEuNzkgMTAyOS44MSA0MzEuNzlDMTAyOS44MSA0MzEuNzkgODQ5Ljc2IDY4MS43NyA2NTYuNTMgNjgxLjc3QzYzMC43MyA2ODEuNzcgNjA1LjUgNjc3Ljc1IDU4MS40MiA2NjkuNzNMNTgxLjQyIDM4Ny42NUM2ODAuNjEgMzk5LjY5IDcwMC42OCA0NDMuMjYgNzU5Ljc0IDU0Mi40NUw4OTIuMiA0MzEuMjJDODkyLjIgNDMxLjIyIDc5NS4yOSAzMDQuNTEgNjMyLjQ1IDMwNC41MUM2MTUuMjUgMzAzLjk0IDU5OC4wNSAzMDUuMDkgNTgwLjg0IDMwNi44MUw1ODAuODQgMjEzLjk3QzI5OS42OSAyMzYgMTU5LjQgNDQzLjI2IDE1OS40IDQ0My4yNkMxNTkuNCA0NDMuMjYgMjY2LjYzIDc4OS41NSA1ODAuODQgODI4LjU0TDU4MC44NCA5MDguODFDMTUyLjUyIDg2OC42NyAwIDQyNy4yMSAwIDQyNy4yMUMwIDQyNy4yMSAyNjkuNDkgMTYzLjQ3IDU4MS40MiAxMzguMjVMNTgxLjQyIDIxMy44OUM1OTAuNCAyMTMuMzMgNTk5LjM4IDIxMi43OCA2MDguMzcgMjEyLjc4Wk01ODAuODQgNzQzLjExQzM0My40NiA3MDAuNjkgMjc3LjUyIDQ1My41OCAyNzcuNTIgNDUzLjU4QzI3Ny41MiA0NTMuNTggMzkxLjYzIDMyNy40NSA1ODAuODQgMzA2LjgxTDU4MC44NCAzODcuMDdMNTgwLjI3IDM4Ny4wN0M0ODEuMDcgMzc1LjAzIDQwMy4wOSA0NjcuOTEgNDAzLjA5IDQ2Ny45MUM0MDMuMDkgNDY3LjkxIDQ0Ny4yNCA2MjQuNDMgNTgwLjg0IDY2OS43M0w1ODAuODQgNzQzLjExWiIKICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxIiAvPgo8L3N2Zz4K&logoColor=white&logoSize=auto&labelColor=555555\"\
                >`\n]]]"
              chips:
                card:
                  type: custom:mushroom-chips-card
                  card_mod:
                    style: "ha-card {\n  transition: all 0s;\n  --chip-background:\
                      \ var(--primary-background-color) !important;\n  --chip-box-shadow:\
                      \ none;\n  --chip-border-width: 0;\n  --chip-spacing: 0.1em;\n\
                      }\n"
                  chips:
                    - type: conditional
                      conditions:
                        - entity: binary_sensor.athos_mic_active
                          state: 'on'
                      chip:
                        type: entity
                        entity: binary_sensor.athos_mic_active
                        icon_color: red
                        content_info: none
                    - type: conditional
                      conditions:
                        - entity: binary_sensor.athos_webcam_active
                          state: 'on'
                      chip:
                        type: entity
                        entity: binary_sensor.athos_webcam_active
                        icon_color: red
                        content_info: none
                    - type: conditional
                      conditions:
                        - entity: sensor.athos_windows_updates_software_updates
                          state_not: '0'
                        - entity: sensor.athos_windows_updates_software_updates
                          state_not: unavailable
                        - entity: sensor.athos_windows_updates_software_updates
                          state_not: unknown
                      chip:
                        type: template
                        entity: sensor.athos_windows_updates_software_updates
                        icon: mdi:arrow-up-bold-circle
                        icon_color: red
                        card_mod:
                          style:
                            .: "{% if int(states(config.entity), 0) > 0 %}\nha-card:after\
                              \ {\n  content: \"{{ int(states(config.entity), 0) }}\"\
                              ;\n  position: absolute;\n  color: var(--red-color);\n\
                              \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n\
                              \  font-size: 12px;\n}\n{% endif %}\n"
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Software Updates
                              content:
                                type: custom:streamline-card
                                template: windows_updates_list
                                variables:
                                  - entity: sensor.athos_windows_updates_software_updates
                    - type: conditional
                      conditions:
                        - entity: sensor.athos_windows_updates_driver_updates
                          state_not: '0'
                        - entity: sensor.athos_windows_updates_driver_updates
                          state_not: unavailable
                        - entity: sensor.athos_windows_updates_driver_updates
                          state_not: unknown
                      chip:
                        type: template
                        entity: sensor.athos_windows_updates_driver_updates
                        icon: mdi:cog-refresh
                        icon_color: red
                        card_mod:
                          style:
                            .: "{% if int(states(config.entity), 0) > 0 %}\nha-card:after\
                              \ {\n  content: \"{{ int(states(config.entity), 0) }}\"\
                              ;\n  position: absolute;\n  color: var(--red-color);\n\
                              \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n\
                              \  font-size: 12px;\n}\n{% endif %}\n"
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Driver Updates
                              content:
                                type: custom:streamline-card
                                template: windows_updates_list
                                variables:
                                  - entity: sensor.athos_windows_updates_driver_updates
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            template: computer_tile
            name: Work Josh
            icon: mdi:laptop
            entity: binary_sensor.workjosh_connected
            show_state: true
            tap_action:
              action: navigate
              navigation_path: '#computer-workjosh'
            variables:
              connected: binary_sensor.workjosh_connected
              media: media_player.workjosh
              cpu: sensor.workjosh_cpu_load
              ram: sensor.workjosh_memory_usage
              gpu: sensor.workjosh_gpu_load
            triggers_update:
              - media_player.workjosh
              - sensor.workjosh_cpu_load
              - sensor.workjosh_memory_usage
              - sensor.workjosh_gpu_load
            custom_fields:
              info: "[[[\n  return `<img src=\"https://img.shields.io/badge/Core_i7_10510U-0071C5?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4yIgogICB2aWV3Qm94PSIwIDAgMTYwMCA2NzUiCiAgIHdpZHRoPSIxNjAwIgogICBoZWlnaHQ9IjY3NSIKICAgaWQ9InN2ZzEiCiAgIHNvZGlwb2RpOmRvY25hbWU9IklOVEMuc3ZnIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjQgKGU3YzNmZWIxMDAsIDIwMjQtMTAtMDkpIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0ibmFtZWR2aWV3MSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiMwMDAwMDAiCiAgICAgYm9yZGVyb3BhY2l0eT0iMC4yNSIKICAgICBpbmtzY2FwZTpzaG93cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjAiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjZDFkMWQxIgogICAgIGlua3NjYXBlOnpvb209IjEuNzE4NTE4NSIKICAgICBpbmtzY2FwZTpjeD0iODAwLjEwNzc2IgogICAgIGlua3NjYXBlOmN5PSIzMzcuNSIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjUxMjAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTM3MSIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9InN2ZzEiIC8+CiAgPHRpdGxlCiAgICAgaWQ9InRpdGxlMSI+SW50ZWxfbG9nb18oMjAyMCxfZGFya19ibHVlKS1zdmc8L3RpdGxlPgogIDxzdHlsZQogICAgIGlkPSJzdHlsZTEiPgoJCXRzcGFuIHsgd2hpdGUtc3BhY2U6cHJlIH0KCQkuc2hwMCB7IGZpbGw6ICMwMDY4YjUgfSAKCQkuc2hwMSB7IGZpbGw6ICMwMDAwMDAgfSAKCTwvc3R5bGU+CiAgPHBhdGgKICAgICBpZD0icmVjdDQiCiAgICAgY2xhc3M9InNocDAiCiAgICAgZD0iTTAgOS40MUwxMjUuOTQgOS40MUwxMjUuOTQgMTM1LjMxTDAgMTM1LjMxTDAgOS40MVoiCiAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MSIgLz4KICA8cGF0aAogICAgIGlkPSJwYXRoNiIKICAgICBmaWxsLXJ1bGU9ImV2ZW5vZGQiCiAgICAgY2xhc3M9InNocDEiCiAgICAgZD0iTSAzLjU5LDY2NS4zNSBWIDIxMS45MyBIIDEyMi44IHYgNDUzLjQyIHogbSA4OTUuOTEsNC40OCBjIC0zNi4zMSwwIC02Ni43OCwtMy4xNCAtOTAuOTgsLTkuODYgLTIzLjc2LC02LjcyIC00My40OCwtMTcuNDcgLTU4LjI3LC0zMi43IC0xNC43OSwtMTUuMjQgLTI1LjU0LC0zNS40IC0zMS44MiwtNjAuMDQgLTYuMjcsLTI1LjA5IC05LjQxLC01Ni40NiAtOS40MSwtOTMuNjQgViAzNC45NSBoIDExOS42NiB2IDE3Ni45OCBoIDg2LjUgdiAxMDIuMTUgaCAtODYuNSB2IDE1OC42MSBjIDAsMTcuOTIgMC45LDMyLjcxIDIuNjksNDMuOTEgMi4yNCwxMS42NSA2LjI4LDIwLjYxIDEyLjU1LDI2Ljg4IDYuMjgsNi4yNyAxNS42OSwxMC43NSAyOC4yNCwxMi41NSAxMC43NSwxLjc5IDI1LjU0LDIuNjggNDMuMDIsMi42OCB2IDExMS4xMiB6IG0gNTgwLjg0LC00LjQ4IFYgMCBIIDE2MDAgViA2NjUuMzUgWiBNIDY0My41OSw0MDcuNzIgViA2NjQuOSBIIDUyMy4wMyBWIDQyNC4zIGMgMCwtMzcuMTkgLTguOTcsLTY2LjMxIC0yNiwtODYuOTIgLTE3LjQ4LC0yMC42MSAtNDMuOTIsLTMxLjM2IC03OC40MywtMzEuMzYgLTI5LjEzLDAgLTU0LjY4LDEwLjc1IC03NS43NCwzMi4yNiAtMTkuNzIsMjAuMTYgLTMwLjAzLDUxLjUyIC0zMS4zOCw5NC4wOCBWIDY2NS4zNSBIIDE5Mi43MiBWIDIxMS45MyBoIDExNy44NyB2IDY0Ljk2IGwgNi43MiwtOC41MSBjIDE1LjY5LC0yMC42MSAzNS44NiwtMzYuNzQgNTkuMTYsLTQ4LjM5IDIzLjc1LC0xMS42NSA0OS43NSwtMTcuNDcgNzguNDMsLTE3LjQ3IDU5LjE2LDAgMTA1Ljc3LDE3LjkyIDEzOC45NCw1My43NiAzMy4xNiwzNS44NSA1MC4xOSw4Ni45MiA0OS43NSwxNTEuNDQgeiBtIDc3NC45LDcyLjU5IGggLTM1Ni4zMSBsIDEuMzUsNC4wMyBjIDcuNjIsMjYuNDMgMjEuOTYsNDcuOTQgNDMuMDIsNjMuMTcgMjEuMDcsMTUuNjggNDguODYsMjMuMyA4Mi40NywyMy4zIDUzLjc4LDAgOTYuODEsLTI5LjEyIDExNC43MywtNTAuNjMgbCA4Ni4wNSw2NS40MiBjIC0zNy42NCw0My4wMSAtMTAwLjM5LDg5LjE2IC0yMDEuNjgsODkuMTYgLTM0Ljk1LDAgLTY3LjY3LC02LjI3IC05Ny4yNSwtMTguODIgLTI5LjU4LC0xMi4xIC01NS4xMywtMjkuMTIgLTc1Ljc0LC01MC4xOCAtMjAuNjIsLTIxLjA2IC0zNy4yLC00Ni4xNSAtNDguODYsLTc0LjgyIC0xMS42NSwtMjguNjggLTE3LjQ3LC01OS42IC0xNy40NywtOTIuMyAwLC0zMi43MSA1LjgyLC02My42MyAxOC4zNywtOTIuMyAxMi4xLC0yOC42OCAyOS4xMywtNTMuNzcgNTAuMiwtNzQuODIgMjEuMDYsLTIxLjA2IDQ2LjE2LC0zNy42NCA3NC44NCwtNTAuMTkgMjguNjksLTEyLjA5IDU5LjYxLC0xOC4zNiA5Mi4zMywtMTguMzYgMzQuNTEsMCA2Ni4zMyw1LjgyIDk1LjAxLDE3LjkyIDI4LjY5LDEyLjA5IDUzLjM0LDI4LjY3IDczLjk1LDUwLjE4IDIwLjE3LDIxLjUgMzYuMyw0Ni41OSA0Ny45Niw3NC44MiAxMS4yLDI4LjY4IDE3LjAzLDU5LjE0IDE3LjAzLDkxLjg1IHogbSAtMTE0Ljc0LC04NC42OCBjIDAsLTMzLjE2IC0zOC41NCwtOTAuOTYgLTEyMC41NiwtOTAuOTYgLTgyLjAxLDAuNDUgLTEyMC4xMSw1OC4yNSAtMTIwLjExLDkxLjQgeiIKICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxIiAvPgo8L3N2Zz4K&logoColor=white&logoSize=auto&labelColor=555555\"\
                ><br>\n  <img src=\"https://img.shields.io/badge/Intel_UHD-0071C5?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4yIgogICB2aWV3Qm94PSIwIDAgMTYwMCA2NzUiCiAgIHdpZHRoPSIxNjAwIgogICBoZWlnaHQ9IjY3NSIKICAgaWQ9InN2ZzEiCiAgIHNvZGlwb2RpOmRvY25hbWU9IklOVEMuc3ZnIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjQgKGU3YzNmZWIxMDAsIDIwMjQtMTAtMDkpIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0ibmFtZWR2aWV3MSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiMwMDAwMDAiCiAgICAgYm9yZGVyb3BhY2l0eT0iMC4yNSIKICAgICBpbmtzY2FwZTpzaG93cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjAiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjZDFkMWQxIgogICAgIGlua3NjYXBlOnpvb209IjEuNzE4NTE4NSIKICAgICBpbmtzY2FwZTpjeD0iODAwLjEwNzc2IgogICAgIGlua3NjYXBlOmN5PSIzMzcuNSIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjUxMjAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTM3MSIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9InN2ZzEiIC8+CiAgPHRpdGxlCiAgICAgaWQ9InRpdGxlMSI+SW50ZWxfbG9nb18oMjAyMCxfZGFya19ibHVlKS1zdmc8L3RpdGxlPgogIDxzdHlsZQogICAgIGlkPSJzdHlsZTEiPgoJCXRzcGFuIHsgd2hpdGUtc3BhY2U6cHJlIH0KCQkuc2hwMCB7IGZpbGw6ICMwMDY4YjUgfSAKCQkuc2hwMSB7IGZpbGw6ICMwMDAwMDAgfSAKCTwvc3R5bGU+CiAgPHBhdGgKICAgICBpZD0icmVjdDQiCiAgICAgY2xhc3M9InNocDAiCiAgICAgZD0iTTAgOS40MUwxMjUuOTQgOS40MUwxMjUuOTQgMTM1LjMxTDAgMTM1LjMxTDAgOS40MVoiCiAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MSIgLz4KICA8cGF0aAogICAgIGlkPSJwYXRoNiIKICAgICBmaWxsLXJ1bGU9ImV2ZW5vZGQiCiAgICAgY2xhc3M9InNocDEiCiAgICAgZD0iTSAzLjU5LDY2NS4zNSBWIDIxMS45MyBIIDEyMi44IHYgNDUzLjQyIHogbSA4OTUuOTEsNC40OCBjIC0zNi4zMSwwIC02Ni43OCwtMy4xNCAtOTAuOTgsLTkuODYgLTIzLjc2LC02LjcyIC00My40OCwtMTcuNDcgLTU4LjI3LC0zMi43IC0xNC43OSwtMTUuMjQgLTI1LjU0LC0zNS40IC0zMS44MiwtNjAuMDQgLTYuMjcsLTI1LjA5IC05LjQxLC01Ni40NiAtOS40MSwtOTMuNjQgViAzNC45NSBoIDExOS42NiB2IDE3Ni45OCBoIDg2LjUgdiAxMDIuMTUgaCAtODYuNSB2IDE1OC42MSBjIDAsMTcuOTIgMC45LDMyLjcxIDIuNjksNDMuOTEgMi4yNCwxMS42NSA2LjI4LDIwLjYxIDEyLjU1LDI2Ljg4IDYuMjgsNi4yNyAxNS42OSwxMC43NSAyOC4yNCwxMi41NSAxMC43NSwxLjc5IDI1LjU0LDIuNjggNDMuMDIsMi42OCB2IDExMS4xMiB6IG0gNTgwLjg0LC00LjQ4IFYgMCBIIDE2MDAgViA2NjUuMzUgWiBNIDY0My41OSw0MDcuNzIgViA2NjQuOSBIIDUyMy4wMyBWIDQyNC4zIGMgMCwtMzcuMTkgLTguOTcsLTY2LjMxIC0yNiwtODYuOTIgLTE3LjQ4LC0yMC42MSAtNDMuOTIsLTMxLjM2IC03OC40MywtMzEuMzYgLTI5LjEzLDAgLTU0LjY4LDEwLjc1IC03NS43NCwzMi4yNiAtMTkuNzIsMjAuMTYgLTMwLjAzLDUxLjUyIC0zMS4zOCw5NC4wOCBWIDY2NS4zNSBIIDE5Mi43MiBWIDIxMS45MyBoIDExNy44NyB2IDY0Ljk2IGwgNi43MiwtOC41MSBjIDE1LjY5LC0yMC42MSAzNS44NiwtMzYuNzQgNTkuMTYsLTQ4LjM5IDIzLjc1LC0xMS42NSA0OS43NSwtMTcuNDcgNzguNDMsLTE3LjQ3IDU5LjE2LDAgMTA1Ljc3LDE3LjkyIDEzOC45NCw1My43NiAzMy4xNiwzNS44NSA1MC4xOSw4Ni45MiA0OS43NSwxNTEuNDQgeiBtIDc3NC45LDcyLjU5IGggLTM1Ni4zMSBsIDEuMzUsNC4wMyBjIDcuNjIsMjYuNDMgMjEuOTYsNDcuOTQgNDMuMDIsNjMuMTcgMjEuMDcsMTUuNjggNDguODYsMjMuMyA4Mi40NywyMy4zIDUzLjc4LDAgOTYuODEsLTI5LjEyIDExNC43MywtNTAuNjMgbCA4Ni4wNSw2NS40MiBjIC0zNy42NCw0My4wMSAtMTAwLjM5LDg5LjE2IC0yMDEuNjgsODkuMTYgLTM0Ljk1LDAgLTY3LjY3LC02LjI3IC05Ny4yNSwtMTguODIgLTI5LjU4LC0xMi4xIC01NS4xMywtMjkuMTIgLTc1Ljc0LC01MC4xOCAtMjAuNjIsLTIxLjA2IC0zNy4yLC00Ni4xNSAtNDguODYsLTc0LjgyIC0xMS42NSwtMjguNjggLTE3LjQ3LC01OS42IC0xNy40NywtOTIuMyAwLC0zMi43MSA1LjgyLC02My42MyAxOC4zNywtOTIuMyAxMi4xLC0yOC42OCAyOS4xMywtNTMuNzcgNTAuMiwtNzQuODIgMjEuMDYsLTIxLjA2IDQ2LjE2LC0zNy42NCA3NC44NCwtNTAuMTkgMjguNjksLTEyLjA5IDU5LjYxLC0xOC4zNiA5Mi4zMywtMTguMzYgMzQuNTEsMCA2Ni4zMyw1LjgyIDk1LjAxLDE3LjkyIDI4LjY5LDEyLjA5IDUzLjM0LDI4LjY3IDczLjk1LDUwLjE4IDIwLjE3LDIxLjUgMzYuMyw0Ni41OSA0Ny45Niw3NC44MiAxMS4yLDI4LjY4IDE3LjAzLDU5LjE0IDE3LjAzLDkxLjg1IHogbSAtMTE0Ljc0LC04NC42OCBjIDAsLTMzLjE2IC0zOC41NCwtOTAuOTYgLTEyMC41NiwtOTAuOTYgLTgyLjAxLDAuNDUgLTEyMC4xMSw1OC4yNSAtMTIwLjExLDkxLjQgeiIKICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxIiAvPgo8L3N2Zz4K&logoColor=white&logoSize=auto&labelColor=555555\"\
                >`\n]]]"
              chips:
                card:
                  type: custom:mushroom-chips-card
                  card_mod:
                    style: "ha-card {\n  transition: all 0s;\n  --chip-background:\
                      \ var(--primary-background-color) !important;\n  --chip-box-shadow:\
                      \ none;\n  --chip-border-width: 0;\n  --chip-spacing: 0.1em;\n\
                      }\n"
                  chips:
                    - type: conditional
                      conditions:
                        - entity: binary_sensor.workjosh_mic_active
                          state: 'on'
                      chip:
                        type: entity
                        entity: binary_sensor.workjosh_mic_active
                        icon_color: red
                        content_info: none
                    - type: conditional
                      conditions:
                        - entity: binary_sensor.workjosh_webcam_active
                          state: 'on'
                      chip:
                        type: entity
                        entity: binary_sensor.workjosh_webcam_active
                        icon_color: red
                        content_info: none
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.workjosh_windows_updates_software_updates
                          above: 0
                      chip:
                        type: template
                        entity: sensor.workjosh_windows_updates_software_updates
                        icon: mdi:arrow-up-bold-circle
                        icon_color: red
                        card_mod:
                          style:
                            .: "{% if int(states(config.entity), 0) > 0 %}\nha-card:after\
                              \ {\n  content: \"{{ int(states(config.entity), 0) }}\"\
                              ;\n  position: absolute;\n  color: var(--red-color);\n\
                              \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n\
                              \  font-size: 12px;\n}\n{% endif %}\n"
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Software Updates
                              content:
                                type: custom:streamline-card
                                template: windows_updates_list
                                variables:
                                  - entity: sensor.workjosh_windows_updates_software_updates
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.workjosh_windows_updates_driver_updates
                          above: 0
                      chip:
                        type: template
                        entity: sensor.workjosh_windows_updates_driver_updates
                        icon: mdi:cog-refresh
                        icon_color: red
                        card_mod:
                          style:
                            .: "{% if int(states(config.entity), 0) > 0 %}\nha-card:after\
                              \ {\n  content: \"{{ int(states(config.entity), 0) }}\"\
                              ;\n  position: absolute;\n  color: var(--red-color);\n\
                              \  font-weight: bolder;\n  top: -2px;\n  right: 2px;\n\
                              \  font-size: 12px;\n}\n{% endif %}\n"
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Driver Updates
                              content:
                                type: custom:streamline-card
                                template: windows_updates_list
                                variables:
                                  - entity: sensor.workjosh_windows_updates_driver_updates
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            name: MagicMirror
            icon: mdi:apps
            entity: binary_sensor.magicmirror_connected
            show_state: true
            tap_action:
              action: navigate
              navigation_path: '#computer-magicmirror'
            triggers_update:
              - sensor.magicmirror_cpu_usage
              - sensor.magicmirror_memory_usage
              - sensor.magicmirror_cpu_thermal_1_temperature
            custom_fields:
              stat1: "[[[\n  var entity_id = 'sensor.magicmirror_cpu_usage';\n  return\
                \ `<ha-icon icon=\"mdi:cpu-64-bit\" style=\"width: 24px; height: 24px;\
                \ color: var(--green-color);\"></ha-icon>\n    <span> CPU: <span style=\"\
                color: var(--text-color-sensor);\">${states[entity_id].state !== 'unavailable'\
                \ ? helpers.localize(states[entity_id], undefined, 0) : '-'}</span></span>`\n\
                ]]]"
              stat2: "[[[\n  var entity_id = 'sensor.magicmirror_memory_usage';\n\
                \  return `<ha-icon icon=\"mdi:memory\" style=\"width: 24px; height:\
                \ 24px; color: var(--green-color);\"></ha-icon>\n    <span> RAM: <span\
                \ style=\"color: var(--text-color-sensor);\">${states[entity_id].state\
                \ !== 'unavailable' ? helpers.localize(states[entity_id], undefined,\
                \ 0) : '-'}</span></span>`\n]]]"
              stat3: "[[[\n  var entity_id = 'sensor.magicmirror_cpu_thermal_1_temperature';\n\
                \  return `<ha-icon icon=\"mdi:thermometer\" style=\"width: 24px;\
                \ height: 24px; color: var(--green-color);\"></ha-icon>\n    <span>\
                \ Temp: <span style=\"color: var(--text-color-sensor);\">${states[entity_id].state\
                \ !== 'unavailable' ? helpers.localize(states[entity_id], undefined,\
                \ 0) : '-'}</span></span>`\n]]]"
              info: "[[[\n  return `<img src=\"https://img.shields.io/badge/Raspberry_Pi_5-C7053D?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgcm9sZT0iaW1nIgogICB2aWV3Qm94PSIwIDAgMjQgMjQiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzEiCiAgIHNvZGlwb2RpOmRvY25hbWU9InJhc3BiZXJyeXBpLnN2ZyIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMS40IChlN2MzZmViMTAwLCAyMDI0LTEwLTA5KSIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzMSIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9Im5hbWVkdmlldzEiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjMDAwMDAwIgogICAgIGJvcmRlcm9wYWNpdHk9IjAuMjUiCiAgICAgaW5rc2NhcGU6c2hvd3BhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSIwIgogICAgIGlua3NjYXBlOmRlc2tjb2xvcj0iI2QxZDFkMSIKICAgICBpbmtzY2FwZTp6b29tPSI0OC4zMzMzMzMiCiAgICAgaW5rc2NhcGU6Y3g9IjEyIgogICAgIGlua3NjYXBlOmN5PSIxMiIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjUxMjAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTM3MSIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9InN2ZzEiIC8+CiAgPHRpdGxlCiAgICAgaWQ9InRpdGxlMSI+UmFzcGJlcnJ5IFBpPC90aXRsZT4KICA8cGF0aAogICAgIGQ9Ik0gMTkuODk1NSwxMC44OTYxIDE5LjcyMjksMTAuNTkzMyBDIDE5LjcyOTcsOC40MTg3IDE4LjcyMDcsNy41MzIzIDE3LjU0NDEsNi44NTg1IDE3LjkwMDEsNi43NjQ3IDE4LjI2NzgsNi42ODc0IDE4LjM2ODYsNi4yNDAzIDE4Ljk4MDQsNi4wODM3IDE5LjEwODMsNS44MDA1IDE5LjE2OTcsNS41MDA1IDE5LjMyOTcsNS4zOTM5IDE5Ljg2NTIsNS4wOTQ0IDE5LjgwOTEsNC41Nzk0IDIwLjEwODksNC4zNzI1IDIwLjI3Niw0LjEwNjkgMjAuMTkxLDMuNzMwNyAyMC41MTMyLDMuMzc5MiAyMC41OTgsMy4wODg4IDIwLjQ2MTIsMi44MjExIDIwLjg0OCwyLjM0MDYgMjAuNjc2NCwyLjA5MTYgMjAuNTExMiwxLjgzOTQgMjAuODAwOSwxLjMxNCAyMC41NDUzLDAuNzUwNyAxOS43MzU0LDAuODQ1IDE5LjQxMzMsMC4zNzE3IDE4LjcxMSwwLjQ3OTEgMTguNjAyNCwwLjQ4MTMgMTguNDgwOSwwLjMyOTQgMTguMzIwNSwwLjE5OTIgMTcuODI2OSwwLjI2MjMgMTcuNTA3MiwtMC4wMjI4IDE3LjE0OTgsMC4wMjU5IDE2Ljc4MTEsMC4xNjU5IDE2LjM0MzMsLTAuMTc0NCAxNi4wNTM2LDAuMDk4NCAxNS43MjI3LDAuMjAxNSAxNS4xOTI3LDAuMDMwOSAxNS4wNzE0LDAuMjY0NiAxNC44MTEsMC4zNTk4IDE0LjIzMjksMC4yMzk1IDE0LjA1NzIsMC41MDE0IDEzLjc4MDEsMC43NzggTCAxMy40NTc3LDAuNzcxNyBDIDEyLjU4NTgsMS4yNzc4IDEyLjE1MjcsMi4zMDgzIDExLjk5OTIsMi44MzgxIDExLjg0NTYsMi4zMDgyIDExLjQxMzQsMS4yNzc3IDEwLjU0MTcsMC43NzE3IEwgMTAuMjE5NCwwLjc3OCBDIDkuOTQyLDAuNTAxNCA5Ljc2NjMsMC4yMzk0IDkuMTg4MywwLjM1OTcgOC45Mjc5LDAuMjY0NiA4LjgwNywwLjAzMDkgOC4yNzY2LDAuMjAxNSA4LjA1OTQsMC4xMzM4IDcuODU5NiwtMC4wMDY5IDcuNjI0NCwzZS00IGwgNGUtNCwyZS00IEMgNy41MDE3LDAuMDA0MSA3LjM2OSwwLjA0OSA3LjIxODUsMC4xNjYgNi44NDk3LDAuMDI1OSA2LjQ5MjMsLTAuMDIyNyA2LjE3MjYsMC4yNjI0IDUuNjc5LDAuMTk5MyA1LjUxODYsMC4zMjk1IDUuMzk3LDAuNDgxNCA1LjI4ODcsMC40NzkxIDQuNTg2MiwwLjM3MTcgNC4yNjQsMC44NDUgMy40NTQ0LDAuNzUwNyAzLjE5ODUsMS4zMTQxIDMuNDg4NCwxLjgzOTQgMy4zMjMxLDIuMDkxNSAzLjE1MTgsMi4zNDA3IDMuNTM4NCwyLjgyMTMgMy40MDE3LDMuMDg5IDMuNDg2NSwzLjM3OTQgMy44MDg3LDMuNzMwOSAzLjcyMzcsNC4xMDcyIDMuODkwOSw0LjM3MjcgNC4xOTA2LDQuNTc5NiA0LjEzNDUsNS4wOTQ2IDQuNjcwMSw1LjM5NCA0LjgzLDUuNTAwNyA0Ljg5MTQsNS44MDA4IDUuMDE5NCw2LjA4MzkgNS42MzExLDYuMjQwNSA1LjczMTksNi42ODc3IDYuMDk5Niw2Ljc2NDkgNi40NTU2LDYuODU4OCA1LjI3OSw3LjUzMjUgNC4yNyw4LjQxODggNC4yNzY4LDEwLjU5MzYgbCAtMC4xNzI0LDAuMzAyOCBjIC0xLjM0OTEsMC44MDgyIC0yLjU2MjksMy40MDU2IC0wLjY2NDgsNS41MTY3IDAuMTI0LDAuNjYwOSAwLjMzMTksMS4xMzU1IDAuNTE3MSwxLjY2MDkgMC4yNzY5LDIuMTE3IDIuMDg0MSwzLjEwODIgMi41NjA4LDMuMjI1NSAwLjY5ODQsMC41MjQgMS40NDIzLDEuMDIxMiAyLjQ0OSwxLjM2OTYgMC45NDksMC45NjQgMS45NzcsMS4zMzE0IDMuMDEwNywxLjMzMDggMC4wMTUyLDAgMC4wMzA2LDJlLTQgMC4wNDU3LDAgMS4wMzM3LDZlLTQgMi4wNjE4LC0wLjM2NjggMy4wMTA3LC0xLjMzMDggMS4wMDY3LC0wLjM0ODMgMS43NTA2LC0wLjg0NTYgMi40NDkxLC0xLjM2OTYgMC40NzY2LC0wLjExNzMgMi4yODM4LC0xLjEwODUgMi41NjA3LC0zLjIyNTUgMC4xODUxLC0wLjUyNTMgMC4zOTMxLC0xIDAuNTE3LC0xLjY2MDkgMS44OTgxLC0yLjExMTMgMC42ODQzLC00LjcwODkgLTAuNjY0OSwtNS41MTcgeiBtIC0xLjAzODYsLTAuMzcxNSBjIC0wLjA3MDQsMC44NzU5IC00LjYzNTQsLTMuMDUwNCAtMy44NDcyLC0zLjE4MDggMi4xMzkxLC0wLjM1NTggMy45MTkxLDAuODk2IDMuODQ3MiwzLjE4MDggeiBtIC0yLjAxNTUsNC4zNjQ5IGMgLTEuMTQ4MSwwLjc0MDkgLTIuODAyNSwwLjI2MjYgLTMuNjk1MywtMS4wNjgxIC0wLjg5MjgsLTEuMzMwNiAtMC42ODU4LC0zLjAxMDEgMC40NjIzLC0zLjc1MDkgMS4xNDgxLC0wLjc0MDkgMi44MDI1LC0wLjI2MjcgMy42OTUzLDEuMDY4IDAuODkyNywxLjMzMDcgMC42ODU4LDMuMDEwMSAtMC40NjIzLDMuNzUxIHogTSAxMy42NTkxLDEuMzcyMSBjIDAuMDM5NiwwLjE5NjcgMC4wODQzLDAuMzIxIDAuMTM1NCwwLjM1NzcgMC4yNTM3LC0wLjI3MiAwLjQ2MTEsLTAuNTUwNiAwLjc4NzgsLTAuODEyMyAwLjAwMTEsMC4xNTM3IC0wLjA3NzYsMC4zMjA1IDAuMTE2OSwwLjQ0MjUgMC4xNzUyLC0wLjIzNTYgMC40MTE5LC0wLjQ0NTkgMC43MjYzLC0wLjYyNDQgLTAuMTUxNCwwLjI2MTEgLTAuMDI2LDAuMzQwNCAwLjA1NTQsMC40NDg2IDAuMjQsLTAuMjA1OSAwLjQ2ODEsLTAuNDE0NCAwLjkxMDksLTAuNTc1OSAtMC4xMjEsMC4xNDc0IC0wLjI5MDIsMC4yOTE0IC0wLjExMDgsMC40NjA3IDAuMjQ3MywtMC4xNTQ0IDAuNDk2LC0wLjMwODYgMS4wODMzLC0wLjQxODMgLTAuMTMyMywwLjE0NzUgLTAuNDA1OSwwLjI5NSAtMC4yNDAxLDAuNDQyNiAwLjMxMDQsLTAuMTE4NiAwLjY1MzksLTAuMjA0NyAxLjAzNCwtMC4yNTQ2IC0wLjE4MiwwLjE0OTYgLTAuMzMzNywwLjI5NjMgLTAuMTg0NiwwLjQxMjIgMC4zMzIzLC0wLjEwMjIgMC43ODk5LC0wLjIzOTggMS4yMzcyLC0wLjEyMTIgbCAtMC4yODMyLDAuMjg0OSBjIC0wLjAzMTQsMC4wMzgyIDAuNjYyMywwLjAyOTcgMS4xMjAyLDAuMDM2NCAtMC4xNjcsMC4yMzIxIC0wLjMzNzUsMC40NTYyIC0wLjQzNywwLjg1NDggMC4wNDU0LDAuMDQ1OSAwLjI3MjMsMC4wMjA0IDAuNDg2MiwwIC0wLjIxOTQsMC40NjE4IC0wLjYwMDQsMC41NzgzIC0wLjY4OTMsMC43NzYgMC4xMzQsMC4xMDE1IDAuMzIsMC4wNzUgMC41MjMyLDAuMDA2IC0wLjE1OCwwLjMyNTQgLTAuNDg5MiwwLjU0ODQgLTAuNzUwOSwwLjgxMjMgMC4wNjYyLDAuMDQ3IDAuMTgxOCwwLjA3NSAwLjQ1NTUsMC4wNDI1IC0wLjI0MTgsMC4yNTcgLTAuNTMzOSwwLjQ5MiAtMC44ODAyLDAuNzAzMiAwLjA2MTQsMC4wNzA4IDAuMjcyMiwwLjA2ODEgMC40Njc4LDAuMDcyNyAtMC4zMTM2LDAuMzA2OSAtMC43MTczLDAuNDY2IC0xLjA5NTUsMC42NjY4IDAuMTg4NSwwLjEyODggMC4zMjM0LDAuMDk4OCAwLjQ2NzgsMC4wOTcgLTAuMjY3NiwwLjIxOTggLTAuNzIyNSwwLjMzNDIgLTEuMTQ0OCwwLjQ2NjggMC4wODAzLDAuMTI0OSAwLjE2MDcsMC4xNTg5IDAuMzMyNCwwLjE5NCAtMC40NDcsMC4yNDczIC0xLjA4NzMsMC4xMzQzIC0xLjI2NzksMC4yNjA3IDAuMDQzNSwwLjEyNDMgMC4xNjY1LDAuMjA1MyAwLjMxMzksMC4yNzI4IEMgMTYuMTA5Myw2LjcxODQgMTQuMTQxMSw2LjY1MDQgMTMuNzYzOCw1LjE2MSAxNC41MDA1LDQuMzUxNiAxNS44NDUxLDMuNDAxNyAxOC4xNTc4LDIuMjI3IDE2LjM1ODQsMi44MjkyIDE0LjczNDksMy42MzIgMTMuMzc2MSw0LjczNjYgMTEuNzc4MywzLjk5MyAxMi44Nzk2LDIuMTE2OSAxMy42NTkxLDEuMzcyMSBaIG0gLTEuNjEyNiw1LjM3MTggYyAxLjEzMjksLTAuMDEyMyAyLjUzNTYsMC44MzI1IDIuNTMsMS42Mjg2IEMgMTQuNTcxNSw5LjA3NTIgMTMuNTkxNCw5LjY0NCAxMi4wNTUyLDkuNjMzMiAxMC41NTA5LDkuNjE1NSA5LjUzOCw4LjkxODQgOS41NDE1LDguMjM3NSA5LjU0NDUsNy42NzcyIDEwLjc2OTcsNi43MTEyIDEyLjA0NjUsNi43NDM5IFogTSA2LjI4MTksNi4xNDMzIEMgNi40NTM2LDYuMTA4MiA2LjUzMzksNi4wNzQxIDYuNjE0Miw1Ljk0OTMgNi4xOTE5LDUuODE2NiA1LjczNyw1LjcwMjMgNS40Njk0LDUuNDgyNSA1LjYxMzgsNS40ODQzIDUuNzQ4Niw1LjUxNDMgNS45MzcyLDUuMzg1NSA1LjU1ODksNS4xODQ3IDUuMTU1Miw1LjAyNTYgNC44NDE2LDQuNzE4NyA1LjAzNzEsNC43MTM5IDUuMjQ4LDQuNzE2NyA1LjMwOTMsNC42NDU5IDQuOTYzMSw0LjQzNDYgNC42NzEsNC4xOTk2IDQuNDI5MiwzLjk0MjYgNC43MDMsMy45NzUxIDQuODE4NSwzLjk0NzEgNC44ODQ3LDMuOTAwMSA0LjYyMywzLjYzNjEgNC4yOTE3LDMuNDEzMSA0LjEzMzgsMy4wODc4IDQuMzM3LDMuMTU2OCA0LjUyMywzLjE4MzIgNC42NTcsMy4wODE4IDQuNTY4LDIuODg0MSA0LjE4NywyLjc2NzYgMy45Njc2LDIuMzA1OCBjIDAuMjE0LDAuMDIwNCAwLjQ0MDksMC4wNDU5IDAuNDg2MywwIEMgNC4zNTQ1LDEuOTA3MyA0LjE4NDEsMS42ODMyIDQuMDE3LDEuNDUxMSA0LjQ3NDksMS40NDQ0IDUuMTY4NiwxLjQ1MjkgNS4xMzcyLDEuNDE0NyBMIDQuODU0MSwxLjEyOTggQyA1LjMwMTMsMS4wMTEyIDUuNzU5LDEuMTQ4OCA2LjA5MTIsMS4yNTExIDYuMjQwNCwxLjEzNTIgNi4wODg2LDAuOTg4NSA1LjkwNjUsMC44Mzg4IDYuMjg2NiwwLjg4ODggNi42MzAxLDAuOTc0OSA2Ljk0MDUsMS4wOTM1IDcuMTA2NCwwLjk0NTkgNi44MzI5LDAuNzk4NCA2LjcwMDUsMC42NTA5IDcuMjg3NywwLjc2MDYgNy41MzY2LDAuOTE0OCA3Ljc4MzgsMS4wNjkyIDcuOTYzMiwwLjg5OTggNy43OTQxLDAuNzU1OSA3LjY3MywwLjYwODUgOC4xMTU4LDAuNzcgOC4zNDM5LDAuOTc4NSA4LjU4NCwxLjE4NDQgOC42NjU0LDEuMDc2MiA4Ljc5MDgsMC45OTY5IDguNjM5NCwwLjczNTggOC45NTM3LDAuOTE0MyA5LjE5MDUsMS4xMjQ2IDkuMzY1NywxLjM2MDIgOS41NjAyLDEuMjM4MiA5LjQ4MTYsMS4wNzE0IDkuNDgyNiwwLjkxNzYgOS44MDkzLDEuMTc5NCAxMC4wMTY2LDEuNDU4IDEwLjI3MDUsMS43MyAxMC4zMjE2LDEuNjkzNCAxMC4zNjY0LDEuNTY5IDEwLjQwNTksMS4zNzIzIDExLjE4NTMsMi4xMTcxIDEyLjI4NjYsMy45OTMxIDEwLjY4OSw0LjczNjkgOS4zMzAxLDMuNjMzIDcuNzA3MywyLjgzMDUgNS45MDksMi4yMjgzIDguMjIwNSwzLjQwMjMgOS41NjQ2LDQuMzUyMiAxMC4zMDEsNS4xNjExIDkuOTIzNyw2LjY1MDYgNy45NTU1LDYuNzE4NiA3LjIzNTksNi42NzY4IDcuMzgzMiw2LjYwOTIgNy41MDYyLDYuNTI4MyA3LjU0OTgsNi40MDQgNy4zNjkyLDYuMjc3NiA2LjcyODksNi4zOTA2IDYuMjgxOSw2LjE0MzMgWiBNIDkuMDk5NCw3LjI3NjcgQyA5Ljg4NzUsNy40MDcxIDUuMzIyNSwxMS4zMzM0IDUuMjUyMiwxMC40NTc2IDUuMTgwMyw4LjE3MyA2Ljk2MDEsNi45MjA5IDkuMDk5NCw3LjI3NjcgWiBtIC00Ljg0Nyw4Ljc1NjcgQyAzLjE0MywxNS4xNTQ1IDIuNzg1NiwxMi41ODA1IDQuODQyNSwxMS40MjM3IDYuMDgxOSwxMS4wOTY0IDUuMjYwOSwxNi40NzQ3IDQuMjUyNCwxNi4wMzM0IFogTSA4LjUxOCwyMC42MzIzIEMgNy44OTIzLDIxLjAwNDIgNi4zNzI4LDIwLjg1MSA1LjI5MjgsMTkuMzIyOCA0LjU2NDUsMTguMDQwNSA0LjY1ODMsMTYuNzM1NiA1LjE2OTgsMTYuMzUyMyBjIDAuNzY0OCwtMC40NTg5IDEuOTQ2NCwwLjE2MDkgMi44NTU5LDEuMjAwMyAwLjc5MjMsMC45NDA1IDEuMTUzNiwyLjU5MjcgMC40OTIzLDMuMDc5NyB6IE0gNy4yNzY1LDE1LjAyMzcgQyA2LjEyODQsMTQuMjgyOCA1LjkyMTQsMTIuNjAzNCA2LjgxNDIsMTEuMjcyNiA3LjcwNyw5Ljk0MTkgOS4zNjE0LDkuNDYzNyAxMC41MDk0LDEwLjIwNDYgYyAxLjE0ODEsMC43NDA5IDEuMzU1MSwyLjQyMDMgMC40NjIzLDMuNzUwOSAtMC44OTI2LDEuMzMwOCAtMi41NDcxLDEuODA5IC0zLjY5NTIsMS4wNjgyIHogbSA0Ljc5NDgsOC4yMjc5IEMgMTAuNjk1LDIzLjMxIDkuMzQ1NSwyMi4xNDExIDkuMzYzMiwyMS43MzU5IGMgLTAuMDIwNiwtMC41OTQgMS42NzU4LC0xLjA1NzggMi43ODIsLTEuMDMwNiAxLjExMzEsLTAuMDQ3OSAyLjYwNjgsMC4zNTMxIDIuNjA5NywwLjg4NTEgMC4wMTg0LDAuNTE2NiAtMS4zNTQ3LDEuNjgzOCAtMi42ODM2LDEuNjYxMiB6IG0gMi43NTg0LC01Ljg1NzggYyAwLjAwODEsMS4zODk5IC0xLjIyNiwyLjUyMjUgLTIuNzU2MiwyLjUyOTkgLTEuNTMwMiwwLjAwNzMgLTIuNzc3MywtMS4xMTM1IC0yLjc4NTQsLTIuNTAzMyB2IC0wLjAyNjUgYyAtMC4wMDgsLTEuMzg5OSAxLjIyNTksLTIuNTIyNiAyLjc1NjIsLTIuNTI5OSAxLjUzMDIsLTAuMDA3MyAyLjc3NzMsMS4xMTM0IDIuNzg1MywyLjUwMzMgMS44NGUtNCwwLjAwODggMi4xN2UtNCwwLjAxNzY3IDFlLTQsMC4wMjY1IHogbSAzLjg1NSwyLjAwMjkgYyAtMS4xODYsMS42MjA4IC0yLjc5MTYsMS42ODQgLTMuMzg5NiwxLjIzMjUgLTAuNjI1NSwtMC41ODExIC0wLjE0OCwtMi4zODU0IDAuNzA5NCwtMy4zNzQ3IHYgLTNlLTQgYyAwLjk4MTIsLTEuMDkxMiAyLjAzMDIsLTEuODAzNyAyLjc2MDksLTEuMjQ2OSAwLjQ5MTksMC40ODI4IDAuNzgwNSwyLjMwMDggLTAuMDgwNywzLjM4OTQgeiBtIDEuMDcyNCwtMy40MzAxIGMgLTEuMDA4NiwwLjQ0MTMgLTEuODI5OCwtNC45MzcyIC0wLjU5MDEsLTQuNjEgMi4wNTY4LDEuMTU2OSAxLjY5OTQsMy43MzEgMC41OTAxLDQuNjEgeiIKICAgICBpZD0icGF0aDEiCiAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NzY2Njc2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY3NjY2NjY2NjY2NjYyIKICAgICBzdHlsZT0ic3Ryb2tlOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjEiIC8+Cjwvc3ZnPgo=&logoColor=white&logoSize=auto&labelColor=555555\"\
                >`\n]]]"
              chips:
                card:
                  type: custom:mushroom-chips-card
                  card_mod:
                    style: "ha-card {\n  transition: all 0s;\n  --chip-background:\
                      \ var(--primary-background-color) !important;\n  --chip-box-shadow:\
                      \ none;\n  --chip-border-width: 0;\n  --chip-spacing: 0.1em;\n\
                      }\n"
                  chips: []
            styles:
              grid:
                - grid-template-columns: 1fr min-content
                - grid-template-rows: min-content min-content min-content min-content
                    min-content min-content min-content;
                - grid-template-areas: '"n i" "s chips" "info chips" "stat1 chips"
                    "stat2 chips" "stat3 chips" "stat4 chips"'
              card:
                - padding: 22px 8px 22px 22px
              img_cell:
                - justify-content: start
                - align-self: start
                - position: absolute
                - width: 100px
                - height: 100px
                - right: -20px
                - top: -20px
                - border-radius: 50%
                - background: '[[[ if (states["binary_sensor.magicmirror_connected"].state
                    == "off") return "var(--red-color)"; else return "var(--green-color)"
                    ]]]'
              icon:
                - width: 60px
                - color: rgba(0, 0, 0, 0.6)
              name:
                - justify-self: start
                - align-self: start
                - font-size: 20px
                - font-weight: 500
                - color: var(--primary-text-color)
              state:
                - min-height: 30px
                - justify-self: start
                - align-self: start
                - font-size: 14px
                - opacity: '0.7'
              custom_fields:
                stat1:
                  - padding-bottom: 2px
                  - align-self: start
                  - justify-self: start
                  - font-size: 14px
                  - --text-color-sensor: '[[[ if (states[''sensor.magicmirror_cpu_usage''].state
                      > 80) return "var(--red-color)"; ]]]'
                stat2:
                  - padding-bottom: 2px
                  - align-self: start
                  - justify-self: start
                  - font-size: 14px
                  - --text-color-sensor: '[[[ if (states[''sensor.magicmirror_memory_usage''].state
                      > 80) return "var(--red-color)"; ]]]'
                stat3:
                  - align-self: start
                  - justify-self: start
                  - font-size: 14px
                  - --text-color-sensor: '[[[ if (states[''sensor.magicmirror_cpu_thermal_1_temperature''].state
                      > 80) return "var(--red-color)"; ]]]'
                info:
                  - align-self: end
                  - justify-self: start
                  - text-align: left
                chips:
                  - margin-top: 15px
                  - justify-content: end
                  - align-self: start
          - type: custom:button-card
            layout_options:
              grid_columns: 2
            name: Quest 2
            icon: fab:meta
            entity: binary_sensor.quest_in_use
            show_state: true
            tap_action:
              action: navigate
              navigation_path: '#computer-quest'
            triggers_update:
              - sensor.quest_battery_level
              - sensor.quest_wi_fi_link_speed
              - sensor.quest_battery_temperature
            custom_fields:
              stat1: "[[[\n  var entity_id = 'sensor.quest_battery_level';\n  return\
                \ `<ha-icon icon=\"mdi:battery\" style=\"width: 24px; height: 24px;\
                \ color: var(--green-color);\"></ha-icon>\n    <span> Battery: <span\
                \ style=\"color: var(--text-color-sensor);\">${states[entity_id].state\
                \ !== 'unavailable' ? helpers.localize(states[entity_id], undefined,\
                \ 0) : '-'}</span></span>`\n]]]"
              stat2: "[[[\n  var entity_id = 'sensor.quest_wi_fi_link_speed';\n  return\
                \ `<ha-icon icon=\"mdi:wifi\" style=\"width: 24px; height: 24px; color:\
                \ var(--green-color);\"></ha-icon>\n    <span> WiFi: <span style=\"\
                color: var(--text-color-sensor);\">${states[entity_id].state !== 'unavailable'\
                \ ? helpers.localize(states[entity_id], undefined, 0) : '-'}</span></span>`\n\
                ]]]"
              stat3: "[[[\n  var entity_id = 'sensor.quest_battery_temperature';\n\
                \  return `<ha-icon icon=\"mdi:thermometer\" style=\"width: 24px;\
                \ height: 24px; color: var(--green-color);\"></ha-icon>\n    <span>\
                \ Temp: <span style=\"color: var(--text-color-sensor);\">${states[entity_id].state\
                \ !== 'unavailable' ? helpers.localize(states[entity_id], undefined,\
                \ 0) : '-'}</span></span>`\n]]]"
              info: "[[[\n  return `<img src=\"https://img.shields.io/badge/Meta_Quest_2-0668E1?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgcm9sZT0iaW1nIgogICB2aWV3Qm94PSIwIDAgMjQgMjQiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzEiCiAgIHNvZGlwb2RpOmRvY25hbWU9Im1ldGEuc3ZnIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjQgKGU3YzNmZWIxMDAsIDIwMjQtMTAtMDkpIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0ibmFtZWR2aWV3MSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiMwMDAwMDAiCiAgICAgYm9yZGVyb3BhY2l0eT0iMC4yNSIKICAgICBpbmtzY2FwZTpzaG93cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjAiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjZDFkMWQxIgogICAgIGlua3NjYXBlOnpvb209IjQ4LjMzMzMzMyIKICAgICBpbmtzY2FwZTpjeD0iMTIiCiAgICAgaW5rc2NhcGU6Y3k9IjEyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iNTEyMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSIxMzcxIgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMSIgLz4KICA8dGl0bGUKICAgICBpZD0idGl0bGUxIj5NZXRhPC90aXRsZT4KICA8cGF0aAogICAgIGQ9Ik02LjkxNSA0LjAzYy0xLjk2OCAwLTMuNjgzIDEuMjgtNC44NzEgMy4xMTNDLjcwNCA5LjIwOCAwIDExLjg4MyAwIDE0LjQ0OWMwIC43MDYuMDcgMS4zNjkuMjEgMS45NzNhNi42MjQgNi42MjQgMCAwIDAgLjI2NS44NiA1LjI5NyA1LjI5NyAwIDAgMCAuMzcxLjc2MWMuNjk2IDEuMTU5IDEuODE4IDEuOTI3IDMuNTkzIDEuOTI3IDEuNDk3IDAgMi42MzMtLjY3MSAzLjk2NS0yLjQ0NC43Ni0xLjAxMiAxLjE0NC0xLjYyNiAyLjY2My00LjMybC43NTYtMS4zMzkuMTg2LS4zMjVjLjA2MS4xLjEyMS4xOTYuMTgzLjNsMi4xNTIgMy41OTVjLjcyNCAxLjIxIDEuNjY1IDIuNTU2IDIuNDcgMy4zMTQgMS4wNDYuOTg3IDEuOTkyIDEuMjIgMy4wNiAxLjIyIDEuMDc1IDAgMS44NzYtLjM1NSAyLjQ1NS0uODQzYTMuNzQzIDMuNzQzIDAgMCAwIC44MS0uOTczYy41NDItLjkzOS44NjEtMi4xMjcuODYxLTMuNzQ1IDAtMi43Mi0uNjgxLTUuMzU3LTIuMDg0LTcuNDUtMS4yODItMS45MTItMi45NTctMi45My00LjcxNi0yLjkzLTEuMDQ3IDAtMi4wODguNDY3LTMuMDUzIDEuMzA4LS42NTIuNTctMS4yNTcgMS4yOS0xLjgyIDIuMDUtLjY5LS44NzUtMS4zMzUtMS41NDctMS45NTgtMi4wNTYtMS4xODItLjk2Ni0yLjMxNS0xLjMwMy0zLjQ1NC0xLjMwM3ptMTAuMTYgMi4wNTNjMS4xNDcgMCAyLjE4OC43NTggMi45OTIgMS45OTkgMS4xMzIgMS43NDggMS42NDcgNC4xOTUgMS42NDcgNi40IDAgMS41NDgtLjM2OCAyLjktMS44MzkgMi45LS41OCAwLTEuMDI3LS4yMy0xLjY2NC0xLjAwNC0uNDk2LS42MDEtMS4zNDMtMS44NzgtMi44MzItNC4zNThsLS42MTctMS4wMjhhNDQuOTA4IDQ0LjkwOCAwIDAgMC0xLjI1NS0xLjk4Yy4wNy0uMTA5LjE0MS0uMjI0LjIxMS0uMzI3IDEuMTItMS42NjcgMi4xMTgtMi42MDIgMy4zNTgtMi42MDJ6bS0xMC4yMDEuNTUzYzEuMjY1IDAgMi4wNTguNzkxIDIuNjc1IDEuNDQ2LjMwNy4zMjcuNzM3Ljg3MSAxLjIzNCAxLjU3OWwtMS4wMiAxLjU2NmMtLjc1NyAxLjE2My0xLjg4MiAzLjAxNy0yLjgzNyA0LjMzOC0xLjE5MSAxLjY0OS0xLjgxIDEuODE3LTIuNDg2IDEuODE3LS41MjQgMC0xLjAzOC0uMjM3LTEuMzgzLS43OTQtLjI2My0uNDI2LS40NjQtMS4xMy0uNDY0LTIuMDQ2IDAtMi4yMjEuNjMtNC41MzUgMS42Ni02LjA4OC40NTQtLjY4Ny45NjQtMS4yMjYgMS41MzMtMS41MzNhMi4yNjQgMi4yNjQgMCAwIDEgMS4wODgtLjI4NXoiCiAgICAgaWQ9InBhdGgxIgogICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjEiIC8+Cjwvc3ZnPgo=&logoColor=white&logoSize=auto&labelColor=555555\"\
                >`\n]]]"
              chips:
                card:
                  type: custom:mushroom-chips-card
                  card_mod:
                    style: "ha-card {\n  transition: all 0s;\n  --chip-background:\
                      \ var(--primary-background-color) !important;\n  --chip-box-shadow:\
                      \ none;\n  --chip-border-width: 0;\n  --chip-spacing: 0.1em;\n\
                      }\n"
                  chips: []
            styles:
              grid:
                - grid-template-columns: 1fr min-content
                - grid-template-rows: min-content min-content min-content min-content
                    min-content min-content min-content;
                - grid-template-areas: '"n i" "s chips" "info chips" "stat1 chips"
                    "stat2 chips" "stat3 chips" "stat4 chips"'
              card:
                - padding: 22px 8px 22px 22px
              img_cell:
                - justify-content: start
                - align-self: start
                - position: absolute
                - width: 100px
                - height: 100px
                - right: -20px
                - top: -20px
                - border-radius: 50%
                - background: '[[[ if (states["binary_sensor.quest_in_use"].state
                    == "off") return "var(--red-color)"; else return "var(--green-color)"
                    ]]]'
              icon:
                - width: 60px
                - color: rgba(0, 0, 0, 0.6)
              name:
                - justify-self: start
                - align-self: start
                - font-size: 20px
                - font-weight: 500
                - color: var(--primary-text-color)
              state:
                - min-height: 30px
                - justify-self: start
                - align-self: start
                - font-size: 14px
                - opacity: '0.7'
              custom_fields:
                stat1:
                  - padding-bottom: 2px
                  - align-self: start
                  - justify-self: start
                  - font-size: 14px
                  - --text-color-sensor: '[[[ if (states[''sensor.quest_battery_level''].state
                      < 16) return "var(--red-color)"; ]]]'
                stat2:
                  - padding-bottom: 2px
                  - align-self: start
                  - justify-self: start
                  - font-size: 14px
                  - --text-color-sensor: '[[[ if (states[''sensor.quest_wi_fi_link_speed''].state
                      < 800) return "var(--red-color)"; ]]]'
                stat3:
                  - align-self: start
                  - justify-self: start
                  - font-size: 14px
                  - --text-color-sensor: '[[[ if (states[''sensor.quest_battery_temperature''].state
                      > 80) return "var(--red-color)"; ]]]'
                info:
                  - align-self: end
                  - justify-self: start
                  - text-align: left
                chips:
                  - margin-top: 15px
                  - justify-content: end
                  - align-self: start
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#computer-erebus'
                name: Erebus
                icon: mdi:desktop-tower
                button_type: name
                margin_top_desktop: 20vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                styles: ".bubble-sub-button-1 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}\n.bubble-sub-button-2 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}\n.bubble-sub-button-3 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}"
                sub_button:
                  - entity: binary_sensor.erebus_microphone_used
                    name: Mic Active
                    show_background: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.erebus_microphone_used
                        state: 'on'
                  - entity: binary_sensor.erebus_camera_used
                    name: Webcam Active
                    show_background: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.erebus_camera_used
                        state: 'on'
                  - entity: sensor.erebus_system_updates_count
                    name: System Updates
                    show_background: false
                    show_state: true
                    icon: mdi:arrow-up-bold-circle
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: System Updates
                          content:
                            type: custom:streamline-card
                            template: linux_updates_list
                            variables:
                              - entity: sensor.erebus_system_updates_count
                    visibility:
                      - condition: numeric_state
                        entity: sensor.erebus_system_updates_count
                        above: 0
                  - entity: sensor.erebus_battery_pixel_buds_pro_7474461e2c1f
                    name: Pixel Buds Battery
                    icon: mdi:earbuds
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.erebus_battery_pixel_buds_pro_7474461e2c1f
                        state_not: unavailable
                      - condition: state
                        entity: sensor.erebus_battery_pixel_buds_pro_7474461e2c1f
                        state_not: unknown
                  - entity: sensor.erebus_battery_surface_headphones_f01dbcf96a24
                    name: Surface Headphones Battery
                    icon: mdi:headphones
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.erebus_battery_surface_headphones_f01dbcf96a24
                        state_not: unavailable
                      - condition: state
                        entity: sensor.erebus_battery_surface_headphones_f01dbcf96a24
                        state_not: unknown
                  - entity: sensor.erebus_battery_stadia8qzk_3fe5_cee2d5b33fe5
                    name: Stadia Controller Battery
                    icon: mdi:controller
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.erebus_battery_stadia8qzk_3fe5_cee2d5b33fe5
                        state_not: unavailable
                      - condition: state
                        entity: sensor.erebus_battery_stadia8qzk_3fe5_cee2d5b33fe5
                        state_not: unknown
                  - entity: sensor.erebus_battery_logitech_mx_master_3_fe_60_d4_68
                    name: Logitech MX Master Battery
                    icon: mdi:mouse-scroll-wheel
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.erebus_battery_logitech_mx_master_3_fe_60_d4_68
                        state_not: unavailable
                      - condition: state
                        entity: sensor.erebus_battery_logitech_mx_master_3_fe_60_d4_68
                        state_not: unknown
                  - entity: sensor.erebus_battery_american_power_conversion_back_ups_xs_1300g_4b1346p25103
                    name: Battery
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.erebus_battery_american_power_conversion_back_ups_xs_1300g_4b1346p25103
                        state_not: unavailable
                      - condition: state
                        entity: sensor.erebus_battery_american_power_conversion_back_ups_xs_1300g_4b1346p25103
                        state_not: unknown
                modules:
                  - default
              - type: custom:streamline-card
                template: computer_power
                variables:
                  computer: erebus
              - type: custom:bubble-card
                card_type: select
                entity: select.erebus_steam_game_select
                name: Steam
                card_layout: normal
                show_state: true
                show_last_changed: true
                show_icon: true
                show_attribute: false
                modules:
                  - default
              - type: conditional
                conditions:
                  - entity: media_player.erebus
                    state_not: unavailable
                  - entity: media_player.erebus
                    state_not: unknown
                  - entity: media_player.erebus
                    state_not: 'off'
                card:
                  type: custom:bubble-card
                  card_type: media-player
                  card_layout: large
                  cover_background: true
                  entity: media_player.erebus
                  hide:
                    power_button: true
                  modules:
                    - default
              - type: custom:streamline-card
                template: uptime_card
                variables:
                  entity: binary_sensor.erebus_connected
                  name: Erebus Up-Time
                  icon: mdi:connection
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: CPU
                      icon: mdi:cpu-64-bit
                      entities:
                        - entity: sensor.erebus_cpu_usage
                          name: Usage
                          color: var(--amber-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.erebus_temperature_nct6798_cputin
                          name: Temperature
                          color: var(--pink-color)
                          show_state: true
                          show_points: false
                          y_axis: secondary
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: GPU
                      icon: mdi:expansion-card
                      entities:
                        - entity: sensor.erebus_gpu_amd_0
                          name: Load
                          color: var(--green-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.erebus_temperature_amdgpu_edge
                          name: Temperature
                          color: var(--pink-color)
                          show_state: true
                          show_points: false
                          y_axis: secondary
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: Storage
                      icon: mdi:harddisk
                      entities:
                        - entity: sensor.erebus_disk_dev_nvme1n1p2
                          unit: '%'
                          name: /
                          color: var(--blue-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.erebus_disk_dev_nvme0n1p1
                          unit: '%'
                          name: DevDrive
                          color: var(--green-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.erebus_disk_dev_sda1
                          unit: '%'
                          name: Backup
                          color: var(--indigo-color)
                          show_state: true
                          show_points: false
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: RAM
                      icon: mdi:memory
                      entities:
                        - entity: sensor.erebus_memory_usage
                          name: Usage
                          color: var(--purple-color)
                          show_state: true
                          show_points: false
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#computer-nasya'
                name: Nasya
                icon: mdi:laptop
                button_type: name
                margin_top_desktop: 20vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: perform-action
                  data:
                    entity:
                      - media_player.nasya
                  target: {}
                  perform_action: script.hass_publish_sensors
                styles: "bubble-card::after {\n  display: none !important;\n}\n.bubble-sub-button-1\
                  \ > ha-icon {\n  color: var(--red-color) !important;\n}\n.bubble-sub-button-2\
                  \ > ha-icon {\n  color: var(--red-color) !important;\n}\n.bubble-sub-button-3\
                  \ > ha-icon {\n  color: var(--red-color) !important;\n}\n.bubble-sub-button-4\
                  \ > ha-icon {\n  color: var(--red-color) !important;\n}"
                sub_button:
                  - entity: binary_sensor.nasya_mic_active
                    name: Mic Active
                    show_background: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.nasya_mic_active
                        state: 'on'
                  - entity: binary_sensor.nasya_webcam_active
                    name: Webcam Active
                    show_background: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.nasya_webcam_active
                        state: 'on'
                  - entity: sensor.nasya_windows_updates_software_updates
                    name: Software Updates
                    show_background: false
                    show_state: true
                    icon: mdi:arrow-up-bold-circle
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: Software Updates
                          content:
                            type: custom:streamline-card
                            template: windows_updates_list
                            variables:
                              - entity: sensor.nasya_windows_updates_software_updates
                    visibility:
                      - condition: numeric_state
                        entity: sensor.nasya_windows_updates_software_updates
                        above: 0
                  - entity: sensor.nasya_windows_updates_driver_updates
                    name: Driver Updates
                    show_background: false
                    show_state: true
                    icon: mdi:cog-refresh
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: Driver Updates
                          content:
                            type: custom:streamline-card
                            template: windows_updates_list
                            variables:
                              - computer: nasya
                              - entity: sensor.nasya_windows_updates_driver_updates
                    visibility:
                      - condition: numeric_state
                        entity: sensor.nasya_windows_updates_driver_updates
                        above: 0
                  - entity: sensor.nasya_battery_charge_remaining_percentage
                    name: Battery
                    show_state: true
                    show_background: false
                    visibility:
                      - condition: state
                        entity: sensor.nasya_battery_charge_remaining_percentage
                        state_not: unavailable
                      - condition: state
                        entity: sensor.nasya_battery_charge_remaining_percentage
                        state_not: unknown
                modules:
                  - default
              - type: custom:streamline-card
                template: computer_power
                variables:
                  - computer: nasya
              - type: conditional
                conditions:
                  - entity: binary_sensor.nasya_connected
                    state_not: unavailable
                  - entity: binary_sensor.nasya_connected
                    state_not: unknown
                  - entity: binary_sensor.nasya_connected
                    state_not: 'off'
                card:
                  type: custom:streamline-card
                  template: computer_apps
                  variables:
                    - computer: nasya
              - type: conditional
                conditions:
                  - entity: media_player.nasya
                    state_not: unavailable
                  - entity: media_player.nasya
                    state_not: unknown
                  - entity: media_player.nasya
                    state_not: 'off'
                card:
                  type: custom:bubble-card
                  card_type: media-player
                  card_layout: large
                  cover_background: true
                  entity: media_player.nasya
                  hide:
                    power_button: true
              - type: custom:streamline-card
                template: uptime_card
                variables:
                  - entity: binary_sensor.nasya_connected
                  - name: Nasya Up-Time
                  - icon: mdi:connection
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: CPU
                      icon: mdi:cpu-64-bit
                      entities:
                        - entity: sensor.nasya_cpu_load
                          name: Usage
                          color: var(--amber-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.nasya_cpu_clock_speed
                          name: Speed
                          color: var(--lime-color)
                          show_state: true
                          show_points: false
                          y_axis: secondary
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: GPU
                      icon: mdi:expansion-card
                      entities:
                        - entity: sensor.nasya_gpu_load
                          name: Load
                          color: var(--green-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.nasya_gpu_temperature
                          name: Temperature
                          color: var(--pink-color)
                          show_state: true
                          show_points: false
                          y_axis: secondary
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: Storage
                      icon: mdi:harddisk
                      entities:
                        - entity: sensor.nasya_storage_c
                          attribute: UsedSpacePercentage
                          unit: '%'
                          name: Win11
                          color: var(--blue-color)
                          show_state: true
                          show_points: false
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: RAM
                      icon: mdi:memory
                      entities:
                        - entity: sensor.nasya_memory_usage
                          name: Usage
                          color: var(--purple-color)
                          show_state: true
                          show_points: false
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#computer-cartago'
                name: Cartago
                icon: mdi:desktop-tower
                button_type: name
                margin_top_desktop: 20vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                styles: ".bubble-sub-button-1 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}\n.bubble-sub-button-2 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}\n.bubble-sub-button-3 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}"
                sub_button:
                  - entity: binary_sensor.cartago_microphone_used
                    name: Mic Active
                    show_background: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.cartago_microphone_used
                        state: 'on'
                  - entity: binary_sensor.cartago_camera_used
                    name: Webcam Active
                    show_background: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.cartago_camera_used
                        state: 'on'
                  - entity: sensor.cartago_system_updates_count
                    name: System Updates
                    show_background: false
                    show_state: true
                    icon: mdi:arrow-up-bold-circle
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: System Updates
                          content:
                            type: custom:streamline-card
                            template: linux_updates_list
                            variables:
                              - entity: sensor.cartago_system_updates_count
                    visibility:
                      - condition: numeric_state
                        entity: sensor.cartago_system_updates_count
                        above: 0
                  - entity: sensor.cartago_battery_pixel_buds_pro_7474461e2c1f
                    name: Pixel Buds Battery
                    icon: mdi:earbuds
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.cartago_battery_pixel_buds_pro_7474461e2c1f
                        state_not: unavailable
                      - condition: state
                        entity: sensor.cartago_battery_pixel_buds_pro_7474461e2c1f
                        state_not: unknown
                  - entity: sensor.cartago_battery_mx_anywhere_2_e7da93535ebb
                    name: Logitech MX Master Battery
                    icon: mdi:mouse-scroll-wheel
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.cartago_battery_mx_anywhere_2_e7da93535ebb
                        state_not: unavailable
                      - condition: state
                        entity: sensor.cartago_battery_mx_anywhere_2_e7da93535ebb
                        state_not: unknown
                  - entity: sensor.cartago_battery_asustek_asus_battery
                    name: Battery
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.cartago_battery_asustek_asus_battery
                        state_not: unavailable
                      - condition: state
                        entity: sensor.cartago_battery_asustek_asus_battery
                        state_not: unknown
                modules:
                  - default
              - type: custom:streamline-card
                template: computer_power
                variables:
                  computer: cartago
              - type: custom:bubble-card
                card_type: select
                entity: select.cartago_steam_game_select
                name: Steam
                card_layout: normal
                show_state: true
                show_last_changed: true
                show_icon: true
                show_attribute: false
              - type: conditional
                conditions:
                  - entity: media_player.cartago
                    state_not: unavailable
                  - entity: media_player.cartago
                    state_not: unknown
                  - entity: media_player.cartago
                    state_not: 'off'
                card:
                  type: custom:bubble-card
                  card_type: media-player
                  card_layout: large
                  cover_background: true
                  entity: media_player.cartago
                  hide:
                    power_button: true
              - type: custom:streamline-card
                template: uptime_card
                variables:
                  entity: binary_sensor.cartago_connected
                  name: Cartago Up-Time
                  icon: mdi:connection
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: CPU
                      icon: mdi:cpu-64-bit
                      entities:
                        - entity: sensor.cartago_cpu_usage
                          name: Usage
                          color: var(--amber-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.cartago_temperature_k10temp_tctl
                          name: Temperature
                          color: var(--pink-color)
                          show_state: true
                          show_points: false
                          y_axis: secondary
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: GPU
                      icon: mdi:expansion-card
                      entities:
                        - entity: sensor.cartago_gpu_amd_0
                          name: Load
                          color: var(--green-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.cartago_temperature_amdgpu_edge
                          name: Temperature
                          color: var(--pink-color)
                          show_state: true
                          show_points: false
                          y_axis: secondary
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: Storage
                      icon: mdi:harddisk
                      entities:
                        - entity: sensor.cartago_disk_dev_nvme0n1p2
                          unit: '%'
                          name: /
                          color: var(--blue-color)
                          show_state: true
                          show_points: false
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: RAM
                      icon: mdi:memory
                      entities:
                        - entity: sensor.cartago_memory_usage
                          name: Usage
                          color: var(--purple-color)
                          show_state: true
                          show_points: false
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#computer-ardena'
                name: Ardena
                icon: mdi:steam
                button_type: name
                margin_top_desktop: 20vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: perform-action
                  data:
                    entity:
                      - media_player.ardena
                  target: {}
                  perform_action: script.hass_publish_sensors
                styles: ".bubble-sub-button-1 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}\n.bubble-sub-button-2 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}\n.bubble-sub-button-3 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}\n.bubble-sub-button-4 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}"
                sub_button:
                  - entity: binary_sensor.ardena_mic_active
                    name: Mic Active
                    show_background: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.ardena_mic_active
                        state: 'on'
                  - entity: binary_sensor.ardena_webcam_active
                    name: Webcam Active
                    show_background: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.ardena_webcam_active
                        state: 'on'
                  - entity: sensor.ardena_windows_updates_software_updates
                    name: Software Updates
                    show_background: false
                    show_state: true
                    icon: mdi:arrow-up-bold-circle
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: Software Updates
                          content:
                            type: custom:streamline-card
                            template: windows_updates_list
                            variables:
                              - entity: sensor.ardena_windows_updates_software_updates
                    visibility:
                      - condition: numeric_state
                        entity: sensor.ardena_windows_updates_software_updates
                        above: 0
                  - entity: sensor.ardena_windows_updates_driver_updates
                    name: Driver Updates
                    show_background: false
                    show_state: true
                    icon: mdi:cog-refresh
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: Driver Updates
                          content:
                            type: custom:streamline-card
                            template: windows_updates_list
                            variables:
                              - computer: ardena
                              - entity: sensor.ardena_windows_updates_driver_updates
                    visibility:
                      - condition: numeric_state
                        entity: sensor.ardena_windows_updates_driver_updates
                        above: 0
                  - entity: sensor.ardena_battery_charge_remaining_percentage
                    name: Battery
                    show_background: false
                    show_state: true
                    visibility:
                      - condition: state
                        entity: sensor.ardena_battery_charge_remaining_percentage
                        state_not: unavailable
                modules:
                  - default
              - type: custom:streamline-card
                template: computer_power
                variables:
                  computer: ardena
              - type: conditional
                conditions:
                  - entity: binary_sensor.ardena_connected
                    state_not: unavailable
                  - entity: binary_sensor.ardena_connected
                    state_not: unknown
                  - entity: binary_sensor.ardena_connected
                    state_not: 'off'
                card:
                  type: custom:streamline-card
                  template: computer_apps
                  variables:
                    - computer: ardena
              - type: conditional
                conditions:
                  - entity: media_player.ardena
                    state_not: unavailable
                  - entity: media_player.ardena
                    state_not: unknown
                  - entity: media_player.ardena
                    state_not: 'off'
                card:
                  type: custom:bubble-card
                  card_type: media-player
                  cover_background: true
                  card_layout: large
                  entity: media_player.ardena
                  hide:
                    power_button: true
              - type: custom:streamline-card
                template: uptime_card
                variables:
                  - entity: binary_sensor.ardena_connected
                  - name: Ardena Up-Time
                  - icon: mdi:connection
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: CPU
                      icon: mdi:cpu-64-bit
                      entities:
                        - entity: sensor.ardena_cpu_load
                          name: Usage
                          color: var(--amber-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.ardena_cpu_clock_speed
                          name: Speed
                          color: var(--lime-color)
                          show_state: true
                          show_points: false
                          y_axis: secondary
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: GPU
                      icon: mdi:expansion-card
                      entities:
                        - entity: sensor.ardena_gpu_load
                          name: Load
                          color: var(--green-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.ardena_gpu_temperature
                          name: Temperature
                          color: var(--pink-color)
                          show_state: true
                          show_points: false
                          y_axis: secondary
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: Storage
                      icon: mdi:harddisk
                      entities:
                        - entity: sensor.ardena_storage_c
                          attribute: UsedSpacePercentage
                          unit: '%'
                          name: Win11
                          color: var(--blue-color)
                          show_state: true
                          show_points: false
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: RAM
                      icon: mdi:memory
                      entities:
                        - entity: sensor.ardena_memory_usage
                          name: Usage
                          color: var(--purple-color)
                          show_state: true
                          show_points: false
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#computer-athos'
                name: Athos
                icon: mdi:gamepad
                button_type: name
                margin_top_desktop: 20vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: perform-action
                  data:
                    entity:
                      - media_player.athos
                  target: {}
                  perform_action: script.hass_publish_sensors
                styles: ".bubble-sub-button-1 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}\n.bubble-sub-button-2 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}\n.bubble-sub-button-3 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}\n.bubble-sub-button-4 > ha-icon {\n  color: var(--red-color)\
                  \ !important;\n}"
                sub_button:
                  - entity: binary_sensor.athos_mic_active
                    name: Mic Active
                    show_background: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.athos_mic_active
                        state: 'on'
                  - entity: binary_sensor.athos_webcam_active
                    name: Webcam Active
                    show_background: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.athos_webcam_active
                        state: 'on'
                  - entity: sensor.athos_windows_updates_software_updates
                    name: Software Updates
                    show_background: false
                    show_state: true
                    icon: mdi:arrow-up-bold-circle
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: Software Updates
                          content:
                            type: custom:streamline-card
                            template: windows_updates_list
                            variables:
                              - entity: sensor.athos_windows_updates_software_updates
                    visibility:
                      - condition: numeric_state
                        entity: sensor.athos_windows_updates_software_updates
                        above: 0
                  - entity: sensor.athos_windows_updates_driver_updates
                    name: Driver Updates
                    show_background: false
                    show_state: true
                    icon: mdi:cog-refresh
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: Driver Updates
                          content:
                            type: custom:streamline-card
                            template: windows_updates_list
                            variables:
                              - computer: athos
                              - entity: sensor.athos_windows_updates_driver_updates
                    visibility:
                      - condition: numeric_state
                        entity: sensor.athos_windows_updates_driver_updates
                        above: 0
                modules:
                  - default
              - type: custom:streamline-card
                template: computer_power
                variables:
                  computer: athos
              - type: conditional
                conditions:
                  - entity: binary_sensor.athos_connected
                    state_not: unavailable
                  - entity: binary_sensor.athos_connected
                    state_not: unknown
                  - entity: binary_sensor.athos_connected
                    state_not: 'off'
                card:
                  type: custom:streamline-card
                  template: computer_apps
                  variables:
                    - computer: athos
              - type: conditional
                conditions:
                  - entity: media_player.athos
                    state_not: unavailable
                  - entity: media_player.athos
                    state_not: unknown
                  - entity: media_player.athos
                    state_not: 'off'
                card:
                  type: custom:bubble-card
                  card_type: media-player
                  cover_background: true
                  card_layout: large
                  entity: media_player.athos
                  hide:
                    power_button: true
              - type: custom:streamline-card
                template: uptime_card
                variables:
                  - entity: binary_sensor.athos_connected
                  - name: Athos Up-Time
                  - icon: mdi:connection
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: CPU
                      icon: mdi:cpu-64-bit
                      entities:
                        - entity: sensor.athos_cpu_load
                          name: Usage
                          color: var(--amber-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.athos_cpu_clock_speed
                          name: Speed
                          color: var(--lime-color)
                          show_state: true
                          show_points: false
                          y_axis: secondary
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: GPU
                      icon: mdi:expansion-card
                      entities:
                        - entity: sensor.athos_gpu_load
                          name: Load
                          color: var(--green-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.athos_gpu_temperature
                          name: Temperature
                          color: var(--pink-color)
                          show_state: true
                          show_points: false
                          y_axis: secondary
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: Storage
                      icon: mdi:harddisk
                      entities:
                        - entity: sensor.athos_storage_c
                          attribute: UsedSpacePercentage
                          unit: '%'
                          name: Win11
                          color: var(--blue-color)
                          show_state: true
                          show_points: false
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: RAM
                      icon: mdi:memory
                      entities:
                        - entity: sensor.athos_memory_usage
                          name: Usage
                          color: var(--purple-color)
                          show_state: true
                          show_points: false
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#computer-workjosh'
                name: Work Josh
                icon: mdi:laptop
                button_type: name
                margin_top_desktop: 20vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: perform-action
                  data:
                    entity:
                      - media_player.workjosh
                  target: {}
                  perform_action: script.hass_publish_sensors
                styles: "bubble-card::after {\n  display: none !important;\n}\n.bubble-sub-button-1\
                  \ > ha-icon {\n  color: var(--red-color) !important;\n}\n.bubble-sub-button-2\
                  \ > ha-icon {\n  color: var(--red-color) !important;\n}\n.bubble-sub-button-3\
                  \ > ha-icon {\n  color: var(--red-color) !important;\n}\n.bubble-sub-button-4\
                  \ > ha-icon {\n  color: var(--red-color) !important;\n}"
                sub_button:
                  - entity: binary_sensor.workjosh_mic_active
                    name: Mic Active
                    show_background: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.workjosh_mic_active
                        state: 'on'
                  - entity: binary_sensor.workjosh_webcam_active
                    name: Webcam Active
                    show_background: false
                    visibility:
                      - condition: state
                        entity: binary_sensor.workjosh_webcam_active
                        state: 'on'
                  - entity: sensor.workjosh_windows_updates_software_updates
                    name: Software Updates
                    show_background: false
                    show_state: true
                    icon: mdi:arrow-up-bold-circle
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: Software Updates
                          content:
                            type: custom:streamline-card
                            template: windows_updates_list
                            variables:
                              - entity: sensor.workjosh_windows_updates_software_updates
                    visibility:
                      - condition: numeric_state
                        entity: sensor.workjosh_windows_updates_software_updates
                        above: 0
                  - entity: sensor.workjosh_windows_updates_driver_updates
                    name: Driver Updates
                    show_background: false
                    show_state: true
                    icon: mdi:cog-refresh
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: Driver Updates
                          content:
                            type: custom:streamline-card
                            template: windows_updates_list
                            variables:
                              - computer: workjosh
                              - entity: sensor.workjosh_windows_updates_driver_updates
                    visibility:
                      - condition: numeric_state
                        entity: sensor.workjosh_windows_updates_driver_updates
                        above: 0
                  - entity: sensor.workjosh_battery_charge_remaining_percentage
                    name: Battery
                    show_state: true
                    show_background: false
                    visibility:
                      - condition: state
                        entity: sensor.workjosh_battery_charge_remaining_percentage
                        state_not: unavailable
                      - condition: state
                        entity: sensor.workjosh_battery_charge_remaining_percentage
                        state_not: unknown
                modules:
                  - default
              - type: custom:streamline-card
                template: computer_power
                variables:
                  - computer: workjosh
              - type: conditional
                conditions:
                  - entity: media_player.workjosh
                    state_not: unavailable
                  - entity: media_player.workjosh
                    state_not: unknown
                  - entity: media_player.workjosh
                    state_not: 'off'
                card:
                  type: custom:bubble-card
                  card_type: media-player
                  card_layout: large
                  cover_background: true
                  entity: media_player.workjosh
                  hide:
                    power_button: true
              - type: custom:streamline-card
                template: uptime_card
                variables:
                  entity: binary_sensor.workjosh_connected
                  name: Work Josh Up-Time
                  icon: mdi:connection
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: CPU
                      icon: mdi:cpu-64-bit
                      entities:
                        - entity: sensor.workjosh_cpu_load
                          name: Usage
                          color: var(--amber-color)
                          show_state: true
                          show_points: false
                        - entity: sensor.workjosh_cpu_clock_speed
                          name: Speed
                          color: var(--lime-color)
                          show_state: true
                          show_points: false
                          y_axis: secondary
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: GPU
                      icon: mdi:expansion-card
                      entities:
                        - entity: sensor.workjosh_gpu_load
                          name: Load
                          color: var(--green-color)
                          show_state: true
                          show_points: false
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: Storage
                      icon: mdi:harddisk
                      entities:
                        - entity: sensor.workjosh_storage_c
                          attribute: UsedSpacePercentage
                          unit: '%'
                          name: Win11
                          color: var(--blue-color)
                          show_state: true
                          show_points: false
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: RAM
                      icon: mdi:memory
                      entities:
                        - entity: sensor.workjosh_memory_usage
                          name: Usage
                          color: var(--purple-color)
                          show_state: true
                          show_points: false
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#computer-magicmirror'
                name: MagicMirror
                icon: mdi:apps
                button_type: slider
                use_accent_color: true
                entity: light.magicmirror_monitor
                show_state: true
                show_attribute: true
                show_last_changed: false
                attribute: brightness
                margin_top_desktop: 30vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                sub_button:
                  - entity: light.magicmirror_monitor
                    name: More Info
                    icon: mdi:palette
                    state_background: false
                tap_action:
                  action: toggle
                double_tap_action:
                  action: none
                hold_action:
                  action: more-info
                modules:
                  - default
              - type: horizontal-stack
                cards:
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.magicmirror_connected
                        state: 'on'
                    card:
                      type: custom:mushroom-template-card
                      entity: button.magicmirror_shutdown
                      layout: vertical
                      primary: Power
                      icon: mdi:power
                      icon_color: '{{ is_state(entity, "on") | iif("green", "grey")
                        }}'
                      tap_action:
                        action: none
                      hold_action:
                        action: call-service
                        service: button.press
                        target:
                          entity_id: button.magicmirror_shutdown
                      card_mod:
                        style: "ha-card {\n  margin-left: auto;\n  margin-right: auto;\n\
                          }\n"
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.magicmirror_connected
                        state: 'on'
                    card:
                      type: custom:mushroom-template-card
                      entity: button.magicmirror_reboot
                      layout: vertical
                      primary: Reboot
                      icon: mdi:refresh
                      icon_color: '{{ is_state(entity, "on") | iif("green", "grey")
                        }}'
                      tap_action:
                        action: none
                      hold_action:
                        action: call-service
                        service: button.press
                        target:
                          entity_id: button.magicmirror_reboot
                      card_mod:
                        style: "ha-card {\n  margin-left: auto;\n  margin-right: auto;\n\
                          }\n"
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.magicmirror_connected
                        state: 'on'
                    card:
                      type: custom:mushroom-template-card
                      entity: button.magicmirror_refresh
                      layout: vertical
                      primary: Refresh
                      icon: mdi:web-refresh
                      icon_color: '{{ is_state(entity, "on") | iif("green", "grey")
                        }}'
                      tap_action:
                        action: none
                      hold_action:
                        action: call-service
                        service: button.press
                        target:
                          entity_id: button.magicmirror_refresh
                      card_mod:
                        style: "ha-card {\n  margin-left: auto;\n  margin-right: auto;\n\
                          }\n"
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.magicmirror_connected
                        state: 'on'
                    card:
                      type: custom:mushroom-template-card
                      entity: button.magicmirror_restart
                      layout: vertical
                      primary: Restart
                      icon: mdi:table-refresh
                      icon_color: '{{ is_state(entity, "on") | iif("green", "grey")
                        }}'
                      tap_action:
                        action: none
                      hold_action:
                        action: call-service
                        service: button.press
                        target:
                          entity_id: button.magicmirror_restart
                      card_mod:
                        style: "ha-card {\n  margin-left: auto;\n  margin-right: auto;\n\
                          }\n"
              - type: custom:streamline-card
                template: uptime_card
                variables:
                  - entity: binary_sensor.magicmirror_connected
                  - name: MagicMirror Up-Time
                  - icon: mdi:connection
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: CPU
                      icon: mdi:cpu-64-bit
                      entities:
                        - entity: sensor.magicmirror_cpu_usage
                          name: Usage
                          color: var(--amber-color)
                          show_state: true
                          show_points: false
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: CPU Temp
                      icon: mdi:thermometer-lines
                      entities:
                        - entity: sensor.magicmirror_cpu_thermal_1_temperature
                          name: Temperature
                          color: var(--pink-color)
                          show_state: true
                          show_points: false
                          y_axis: secondary
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: Storage
                      icon: mdi:sd
                      entities:
                        - entity: sensor.magicmirror_disk_usage
                          name: Storage
                          color: var(--blue-color)
                          show_state: true
                          show_points: false
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: RAM
                      icon: mdi:memory
                      entities:
                        - entity: sensor.magicmirror_memory_usage
                          name: Usage
                          color: var(--purple-color)
                          show_state: true
                          show_points: false
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#computer-quest'
                name: Meta Quest 2
                icon: fab:meta
                button_type: state
                entity: binary_sensor.quest_in_use
                show_state: true
                margin_top_desktop: 30vh
                width_desktop: 40vw
                margin_top_mobile: calc(0px - var(--header-height))
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                modules:
                  - default
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                name: Quest 2 Battery Level
                entities:
                  - entity: sensor.quest_battery_level
                animation:
                  state: 'on'
                positions:
                  indicator: inside
                decimal: 0
                severity:
                  - color: var(--red-color)
                    from: 0
                    to: 10
                  - color: var(--orange-color)
                    from: 10
                    to: 30
                  - color: var(--amber-color)
                    from: 30
                    to: 50
                  - color: var(--light-green-color)
                    from: 50
                    to: 80
                  - color: var(--green-color)
                    from: 80
                    to: 100
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: WiFi Speed
                      icon: mdi:wifi-arrow-left-right
                      entities:
                        - entity: sensor.quest_wi_fi_link_speed
                          color: var(--green-color)
                          show_state: false
                          show_points: false
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: WiFi Signal
                      icon: mdi:wifi
                      entities:
                        - entity: sensor.quest_wi_fi_signal_strength
                          color: var(--yellow-color)
                          show_state: false
                          show_points: false
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: Storage
                      icon: mdi:sd
                      entities:
                        - entity: sensor.quest_internal_storage
                          name: Storage
                          color: var(--blue-color)
                          show_state: true
                          show_points: false
                  - type: custom:streamline-card
                    template: mini_graph
                    variables:
                      name: Battery Temp
                      icon: mdi:battery-alert
                      entities:
                        - entity: sensor.quest_battery_temperature
                          name: Battery Temp
                          color: var(--red-color)
                          show_state: true
                          show_points: false
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.computers
        icon: mdi:desktop-tower
        color: '{{ "teal" if is_state(entity, "on") else "grey" }}'
        content: '{{ expand(config.entity) | selectattr("state", "==", "on") | list
          | count }}'
      - type: custom:button-card
        template: badge
        entity: sensor.steam_zanix
        name: zanix
        show_entity_picture: true
        label: '[[[ return entity.state === ''online'' ? ''Online'' : ''Offline''
          ]]]'
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Steam
              content:
                type: custom:kb-steam-card
                entity: sensor.steam_zanix
                game_background: true
                card_mod:
                  style: "ha-card {\n  background: none;\n}\n"
        state:
          - value: online
            styles:
              card:
                - background: var(--green-color)
              name:
                - color: var(--black-color)
              label:
                - color: var(--black-color)
          - value: offline
            styles:
              icon:
                - filter: grayscale(100%)
        extra_styles: "@media (hover: hover) {\n  ha-card:hover {\n    background:\
          \ color-mix(in srgb, var(--grey-color) 4%, var(--card-background-color)\
          \ 100%);\n  }\n}\n]]]\n"
      - type: custom:button-card
        template: badge
        entity: sensor.steam_starchild
        name: starchild
        show_entity_picture: true
        label: '[[[ return entity.state === ''online'' ? ''Online'' : ''Offline''
          ]]]'
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Steam
              content:
                type: custom:kb-steam-card
                entity: sensor.steam_starchild
                game_background: true
                card_mod:
                  style: "ha-card {\n  background: none;\n}\n"
        state:
          - value: online
            styles:
              card:
                - background: var(--green-color)
              name:
                - color: var(--black-color)
              label:
                - color: var(--black-color)
          - value: offline
            styles:
              icon:
                - filter: grayscale(100%)
        extra_styles: "@media (hover: hover) {\n  ha-card:hover {\n    background:\
          \ color-mix(in srgb, var(--grey-color) 4%, var(--card-background-color)\
          \ 100%);\n  }\n}\n]]]\n"
    visible:
      - user: ce9ee65ab49c4ca4af52496609016f1c
      - user: f615672fc2554783beab56221097564e
      - user: 171eeb6104704b03afcad6553b7b793e
      - user: 6905264120304e96aa416e287aca5b80
  - title: Bambu
    path: bambu
    icon: mdi:printer-3d
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: fapro:bambu-lab
            heading: Bambu P1S
            heading_style: title
            badges:
              - type: entity
                entity: sensor.bambu_p1s_power
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-badge
                entity: switch.bambu_p1s
                icon: mdi:power{{ "-off" if is_state(entity, "off") }}
                label: Power
                content: '{{ state_translated(entity) }}'
                tap_action:
                  action: none
                hold_action:
                  action: toggle
                color: '{{ iif(is_state(entity, "on"), "green", "red") }}'
              - type: custom:button-card
                view_layout:
                  grid-area: light
                template: badge
                entity: light.bambu_p1s_chamber_light
                name: Light
                icon: mdi:led-strip-variant-off
                label: "[[[\n  return entity.state === 'unavailable' ? 'Off' : helpers.localize(entity);\n\
                  ]]]\n"
                tap_action:
                  action: call-service
                  service: light.toggle
                  target:
                    entity_id: light.bambu_p1s_chamber_light
                variables:
                  color: "[[[\n  if (entity.state === 'on') return 'var(--amber-color)';\n\
                    \  else return 'var(--grey-color)';\n]]]\n"
                state:
                  - value: 'on'
                    icon: mdi:led-strip-variant
                    styles:
                      icon:
                        - color: var(--amber-color)
                extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                  \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                  \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
              - type: custom:mushroom-template-badge
                entity: binary_sensor.bambu_p1s_hms_errors
                icon: mdi:information
                tap_action:
                  action: navigate
                  navigation_path: '#printer-info'
        column_span: 2
      - type: grid
        cards:
          - type: custom:tabbed-card
            styles:
              --mdc-theme-primary: var(--state-active-color)
              --mdc-tab-color-default: var(--secondary-text-color)
              --mdc-tab-text-label-color-default: var(--secondary-text-color)
            attributes:
              minWidth: true
            tabs:
              - card:
                  type: picture-elements
                  camera_image: camera.bambu_p1s_camera
                  camera_view: live
                  card_mod:
                    style: "ha-card {\n  border: none;\n}\n"
                  elements:
                    - type: custom:hui-element
                      card_type: horizontal-stack
                      style:
                        top: 52%
                        left: 49%
                        width: 100%
                        height: 100%
                        display: flex
                        justify-content: flex-end
                      cards:
                        - type: conditional
                          conditions:
                            - condition: state
                              entity: binary_sensor.bambu_p1s_recording_timelapse
                              state: 'on'
                          card:
                            type: custom:button-card
                            entity: binary_sensor.bambu_p1s_recording_timelapse
                            show_name: false
                            show_state: false
                            icon: mdi:circle
                            tap_action:
                              action: none
                            styles:
                              card:
                                - width: 35px
                                - height: 35px
                                - border-radius: 24px
                                - background-color: rgb(28, 28, 28)
                              icon:
                                - width: 50%
                                - color: var(--red-color)
                        - type: custom:button-card
                          entity: sensor.bambu_p1s_nozzle_temperature
                          show_name: false
                          show_state: false
                          icon: "[[[\n  return variables.is_heating_up ? 'mdi:printer-3d-nozzle-heat'\
                            \ : 'mdi:printer-3d-nozzle'\n]]]\n"
                          tap_action:
                            action: navigate
                            navigation_path: '#temperature-nozzle'
                          variables:
                            target_temp: "[[[\n  let target = states['sensor.bambu_p1s_nozzle_target_temperature']?.state\n\
                              \  return (target ? `<span>${target}</span><span style=\"\
                              font-size: 8px;\"> °C</span>` : '')\n]]]\n"
                            is_heating_up: "[[[\n  return parseInt(states['sensor.bambu_p1s_nozzle_temperature'].state)\
                              \ < parseInt(states['sensor.bambu_p1s_nozzle_target_temperature'].state)\n\
                              ]]]\n"
                            is_cooling_down: "[[[\n  return parseInt(states['sensor.bambu_p1s_nozzle_target_temperature'].state)\
                              \ !== 0\n    && (parseInt(states['sensor.bambu_p1s_nozzle_temperature'].state)\
                              \ - 3) > parseInt(states['sensor.bambu_p1s_nozzle_target_temperature'].state)\n\
                              ]]]\n"
                          custom_fields:
                            target: '[[[ return variables.target_temp ]]]'
                            target_icon: "[[[\n  return '<ha-icon icon=\"mdi:target\"\
                              \ style=\"width: 10px;\"></ha-icon>'\n]]]\n"
                            temp: "[[[\n  return entity.state === 'unavailable' ?\
                              \ 'Off' : `<span>${entity.state}</span><span style=\"\
                              font-size: 10px;\"> °C</span>`\n]]]\n"
                          styles:
                            card:
                              - width: 75px
                              - height: 35px
                              - border-top-left-radius: 24px
                              - border-bottom-left-radius: 24px
                              - border-top-right-radius: 24px
                              - border-bottom-right-radius: 24px
                              - transition: background-color 1.5s ease, color 1.5s
                                  ease
                              - background-color: "[[[\n  if (variables.is_heating_up)\
                                  \ {\n    return 'rgb(88, 33, 41)'\n  } else if (variables.is_cooling_down)\
                                  \ {\n    return 'rgb(24, 34, 54)'\n  } else {\n\
                                  \    return 'rgb(28, 28, 28)'\n  }\n]]]\n"
                              - color: "[[[\n  if (variables.is_heating_up) {\n  \
                                  \  return 'rgb(208, 66, 93)'\n  } else if (variables.is_cooling_down)\
                                  \ {\n    return 'rgb(77, 113, 206)'\n  } else {\n\
                                  \    return 'grey'\n  }\n]]]\n"
                            grid:
                              - grid-template-areas: "[[[\n  if (variables.is_heating_up\
                                  \ || variables.is_cooling_down) {\n    return '\"\
                                  i i temp temp\" \"i i target_icon target\"'\n  }\
                                  \ else {\n    return '\"i temp\" \"i temp\"'\n \
                                  \ }\n]]]\n"
                              - grid-template-columns: auto
                              - grid-template-rows: auto
                            img_cell:
                              - align-self: center
                              - text-align: center
                              - margin-left: 7.5px
                            name:
                              - justify-self: center
                              - font-size: 12px
                            icon:
                              - width: 80%
                              - transition: color 1.5s ease
                              - color: "[[[\n  if (variables.is_heating_up) {\n  \
                                  \  return 'rgb(208, 66, 93)'\n  } else if (variables.is_cooling_down)\
                                  \ {\n    return 'rgb(77, 113, 206)'\n  } else {\n\
                                  \    return 'grey'\n  }\n]]]\n"
                            state:
                              - justify-self: center
                              - font-size: 12px
                            custom_fields:
                              target:
                                - justify-self: left
                                - font-size: 10px
                                - display: "[[[\n  return (variables.is_heating_up\
                                    \ || variables.is_cooling_down) ? '' : 'none';\n\
                                    ]]]\n"
                              target_icon:
                                - display: "[[[\n  return (variables.is_heating_up\
                                    \ || variables.is_cooling_down) ? '' : 'none';\n\
                                    ]]]\n"
                        - type: custom:button-card
                          entity: sensor.bambu_p1s_bed_temperature
                          show_name: false
                          show_state: false
                          icon: mdi:radiator
                          tap_action:
                            action: navigate
                            navigation_path: '#temperature-bed'
                          variables:
                            target_temp: "[[[\n  let target = states['sensor.bambu_p1s_target_bed_temperature']?.state\n\
                              \  return (target ? `<span>${target}</span><span style=\"\
                              font-size: 8px;\"> °C</span>` : '')\n]]]\n"
                            is_heating_up: "[[[\n  return parseInt(states['sensor.bambu_p1s_bed_temperature'].state)\
                              \ < parseInt(states['sensor.bambu_p1s_target_bed_temperature'].state)\n\
                              ]]]\n"
                            is_cooling_down: "[[[\n  return parseInt(states['sensor.bambu_p1s_target_bed_temperature'].state)\
                              \ !== 0\n    && (parseInt(states['sensor.bambu_p1s_bed_temperature'].state)\
                              \ - 3) > parseInt(states['sensor.bambu_p1s_target_bed_temperature'].state)\n\
                              ]]]\n"
                          custom_fields:
                            target: '[[[ return variables.target_temp ]]]'
                            target_icon: "[[[\n  return '<ha-icon icon=\"mdi:target\"\
                              \ style=\"width: 10px;\"></ha-icon>'\n]]]\n"
                            temp: "[[[\n  return entity.state === 'unavailable' ?\
                              \ 'Off' : `<span>${entity.state}</span><span style=\"\
                              font-size: 10px;\"> °C</span>`\n]]]\n"
                          styles:
                            card:
                              - width: 75px
                              - height: 35px
                              - border-top-left-radius: 24px
                              - border-bottom-left-radius: 24px
                              - border-top-right-radius: 24px
                              - border-bottom-right-radius: 24px
                              - transition: background-color 1.5s ease, color 1.5s
                                  ease
                              - background-color: "[[[\n  if (variables.is_heating_up)\
                                  \ {\n    return 'rgb(88, 33, 41)'\n  } else if (variables.is_cooling_down)\
                                  \ {\n    return 'rgb(24, 34, 54)'\n  } else {\n\
                                  \    return 'rgb(28, 28, 28)'\n  }\n]]]\n"
                              - color: "[[[\n  if (variables.is_heating_up) {\n  \
                                  \  return 'rgb(208, 66, 93)'\n  } else if (variables.is_cooling_down)\
                                  \ {\n    return 'rgb(77, 113, 206)'\n  } else {\n\
                                  \    return 'grey'\n  }\n]]]\n"
                            grid:
                              - grid-template-areas: "[[[\n  if (variables.is_heating_up\
                                  \ || variables.is_cooling_down) {\n    return '\"\
                                  i i temp temp\" \"i i target_icon target\"'\n  }\
                                  \ else {\n    return '\"i temp\" \"i temp\"'\n \
                                  \ }\n]]]\n"
                              - grid-template-columns: auto
                              - grid-template-rows: auto
                            img_cell:
                              - align-self: center
                              - text-align: center
                              - margin-left: 7.5px
                            name:
                              - justify-self: center
                              - font-size: 12px
                            icon:
                              - width: 80%
                              - transition: color 1.5s ease
                              - color: "[[[\n  if (variables.is_heating_up) {\n  \
                                  \  return 'rgb(208, 66, 93)'\n  } else if (variables.is_cooling_down)\
                                  \ {\n    return 'rgb(77, 113, 206)'\n  } else {\n\
                                  \    return 'grey'\n  }\n]]]\n"
                            state:
                              - justify-self: center
                              - font-size: 12px
                            custom_fields:
                              target:
                                - justify-self: left
                                - font-size: 10px
                                - display: "[[[\n  return (variables.is_heating_up\
                                    \ || variables.is_cooling_down) ? '' : 'none';\n\
                                    ]]]\n"
                              target_icon:
                                - display: "[[[\n  return (variables.is_heating_up\
                                    \ || variables.is_cooling_down) ? '' : 'none';\n\
                                    ]]]\n"
                attributes:
                  icon: mdi:camera-document
                  label: Camera
              - card:
                  type: picture-entity
                  entity: image.bambu_p1s_cover_image
                  camera_view: live
                  show_name: false
                  show_state: false
                attributes:
                  icon: mdi:cube-outline
                  label: Model
          - type: conditional
            conditions:
              - condition: or
                conditions:
                  - condition: state
                    entity: sensor.bambu_p1s_print_status
                    state: running
                  - condition: state
                    entity: sensor.bambu_p1s_print_status
                    state: pause
            card:
              type: horizontal-stack
              cards:
                - type: conditional
                  conditions:
                    - condition: state
                      entity: sensor.bambu_p1s_print_status
                      state: running
                  card:
                    type: custom:mushroom-template-card
                    entity: sensor.bambu_p1s_print_status
                    icon: mdi:pause
                    icon_color: amber
                    layout: vertical
                    tap_action:
                      action: call-service
                      confirmation:
                        text: Are you sure you want to pause this print?
                      service: button.press
                      target:
                        entity_id: button.bambu_p1s_pause_printing
                    hold_action:
                      action: call-service
                      service: button.press
                      data: {}
                      target:
                        entity_id: button.bambu_p1s_pause_printing
                    card_mod:
                      style:
                        .: "ha-card {\n  --ha-card-background: none;\n  --ha-card-box-shadow:\
                          \ none;\n  --ha-card-border-width: 0;\n  --icon-size: 48px;\n\
                          \  margin-top: 10px;\n}\n"
                        mushroom-shape-icon$: ".shape {\n  box-shadow: 0 0 1px 15px\
                          \ rgba(var(--rgb-amber), 0.1) !important;\n}\n"
                - type: conditional
                  conditions:
                    - condition: state
                      entity: sensor.bambu_p1s_print_status
                      state: pause
                  card:
                    type: custom:mushroom-template-card
                    entity: sensor.bambu_p1s_print_status
                    icon: mdi:play
                    icon_color: green
                    layout: vertical
                    tap_action:
                      action: call-service
                      confirmation:
                        text: Are you sure you want to resume this print?
                      service: button.press
                      target:
                        entity_id: button.bambu_p1s_resume_printing
                    hold_action:
                      action: call-service
                      service: button.press
                      data: {}
                      target:
                        entity_id: button.bambu_p1s_resume_printing
                    card_mod:
                      style:
                        .: "ha-card {\n    --ha-card-background: none;\n    --ha-card-box-shadow:\
                          \ none;\n    --ha-card-border-width: 0;\n    --icon-size:\
                          \ 48px;\n    margin-top: 10px;\n}\n"
                        mushroom-shape-icon$: ".shape {\n  box-shadow: 0 0 1px 15px\
                          \ rgba(var(--rgb-green), 0.1) !important;\n}\n"
                - type: conditional
                  conditions:
                    - condition: or
                      conditions:
                        - condition: state
                          entity: sensor.bambu_p1s_print_status
                          state: running
                        - condition: state
                          entity: sensor.bambu_p1s_print_status
                          state: pause
                  card:
                    type: custom:mushroom-template-card
                    entity: sensor.bambu_p1s_print_status
                    icon: mdi:stop
                    icon_color: red
                    layout: vertical
                    tap_action:
                      action: call-service
                      confirmation:
                        text: Are you sure you want to stop this print?
                      service: button.press
                      target:
                        entity_id: button.bambu_p1s_stop_printing
                    hold_action:
                      action: call-service
                      service: button.press
                      data: {}
                      target:
                        entity_id: button.bambu_p1s_stop_printing
                    card_mod:
                      style:
                        .: "ha-card {\n    --ha-card-background: none;\n    --ha-card-box-shadow:\
                          \ none;\n    --ha-card-border-width: 0;\n    --icon-size:\
                          \ 48px;\n    margin-top: 10px;\n}\n"
                        mushroom-shape-icon$: ".shape {\n  box-shadow: 0 0 1px 15px\
                          \ rgba(var(--rgb-red), 0.1) !important;\n}\n"
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: 1fr 1fr 1fr . 1fr
              grid-template-rows: auto
              grid-template-areas: '"part aux cham . speed"

                '
            cards:
              - type: custom:button-card
                view_layout:
                  grid-area: part
                template: badge
                entity: fan.bambu_p1s_cooling_fan
                name: Part
                icon: mdi:fan-off
                label: "[[[\n  let speed = entity.attributes.percentage;\n  return\
                  \ speed ? speed + '%' : 'Off';\n]]]\n"
                tap_action:
                  action: more-info
                variables:
                  color: "[[[\n  if (entity.state === 'on') return 'var(--green-color)';\n\
                    \  else return 'var(--grey-color)';\n]]]\n"
                state:
                  - value: 'on'
                    icon: mdi:fan
                    styles:
                      icon:
                        - color: var(--green-color)
                        - animation: "[[[\n  return 'fan-on ' + (2 - (entity.attributes.percentage\
                            \ / 100)).toFixed(2) + 's linear infinite';\n]]]\n"
                        - transition: animation-duration 1s ease-in-out
                extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                  \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                  \ var(--card-background-color) 100%);\n    }\n  }\n  @keyframes\
                  \ fan-on {\n    from { transform: rotate(0deg); }\n    to { transform:\
                  \ rotate(360deg); }\n  }\n  `\n  ]]]\n"
              - type: custom:button-card
                view_layout:
                  grid-area: aux
                template: badge
                entity: fan.bambu_p1s_aux_fan
                name: Aux
                icon: mdi:fan-off
                label: "[[[\n  let speed = entity.attributes.percentage;\n  return\
                  \ speed ? speed + '%' : 'Off';\n]]]\n"
                tap_action:
                  action: more-info
                variables:
                  color: "[[[\n  if (entity.state === 'on') return 'var(--green-color)';\n\
                    \  else return 'var(--grey-color)';\n]]]\n"
                state:
                  - value: 'on'
                    icon: mdi:fan
                    styles:
                      icon:
                        - color: var(--green-color)
                        - animation: "[[[\n  return 'fan-on ' + (2 - (entity.attributes.percentage\
                            \ / 100)).toFixed(2) + 's linear infinite';\n]]]\n"
                        - transition: animation-duration 1s ease-in-out
                extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                  \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                  \ var(--card-background-color) 100%);\n    }\n  }\n  @keyframes\
                  \ fan-on {\n    from { transform: rotate(0deg); }\n    to { transform:\
                  \ rotate(360deg); }\n  }\n  `\n  ]]]\n"
              - type: custom:button-card
                view_layout:
                  grid-area: cham
                template: badge
                entity: fan.bambu_p1s_chamber_fan
                name: Cham
                icon: mdi:fan-off
                label: "[[[\n  let speed = entity.attributes.percentage;\n  return\
                  \ speed ? speed + '%' : 'Off';\n]]]\n"
                tap_action:
                  action: more-info
                variables:
                  color: "[[[\n  if (entity.state === 'on') return 'var(--green-color)';\n\
                    \  else return 'var(--grey-color)';\n]]]\n"
                state:
                  - value: 'on'
                    icon: mdi:fan
                    styles:
                      icon:
                        - color: var(--green-color)
                        - animation: "[[[\n  return 'fan-on ' + (2 - (entity.attributes.percentage\
                            \ / 100)).toFixed(2) + 's linear infinite';\n]]]\n"
                        - transition: animation-duration 1s ease-in-out
                extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                  \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                  \ var(--card-background-color) 100%);\n    }\n  }\n  @keyframes\
                  \ fan-on {\n    from { transform: rotate(0deg); }\n    to { transform:\
                  \ rotate(360deg); }\n  }\n  `\n  ]]]\n"
              - type: custom:button-card
                view_layout:
                  grid-area: speed
                template: badge
                entity: sensor.bambu_p1s_speed_profile
                name: Speed
                icon: mdi:gauge-empty
                label: "[[[\n  return entity.state === 'unavailable' ? 'Off' : helpers.localize(entity);\n\
                  ]]]\n"
                tap_action:
                  action: navigate
                  navigation_path: '#settings-speed'
                variables:
                  color: "[[[\n  if (entity.state === 'silent') return 'var(--blue-color)';\n\
                    \  else if (entity.state === 'standard') return 'var(--green-color)';\n\
                    \  else if (entity.state === 'sport') return 'var(--orange-color)';\n\
                    \  else if (entity.state === 'ludicrous') return 'var(--red-color)';\n\
                    \  else return 'var(--grey-color)';\n]]]\n"
                state:
                  - value: silent
                    icon: mdi:gauge-empty
                    styles:
                      icon:
                        - color: var(--blue-color)
                  - value: standard
                    icon: mdi:gauge-low
                    styles:
                      icon:
                        - color: var(--green-color)
                  - value: sport
                    icon: mdi:gauge
                    styles:
                      icon:
                        - color: var(--orange-color)
                  - value: ludicrous
                    icon: mdi:gauge-full
                    styles:
                      icon:
                        - color: var(--red-color)
                  - value: unavailable
                    icon: mdi:gauge-empty
                extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                  \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                  \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
          - type: custom:bubble-card
            card_type: button
            button_type: state
            card_layout: large-2-rows
            name: Bambu P1S
            entity: sensor.bambu_p1s_task_name
            show_icon: false
            show_state: true
            button_action:
              tap_action:
                action: none
            sub_button:
              - entity: sensor.bambu_p1s_print_progress
                name: Print Progress
                icon: mdi:progress-clock
                show_background: false
                show_state: true
              - entity: sensor.bambu_p1s_current_stage
                name: Current Stage
                show_background: false
                show_state: true
                icon: mdi:printer-pos-wrench
              - entity: sensor.bambu_p1s_current_layer
                name: Current Layer
                icon: mdi:layers
                show_state: true
                show_background: false
              - entity: sensor.bambu_p1s_remaining_time
                name: Remaining Time
                icon: mdi:clock-end
                show_state: false
                show_background: false
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  target:
                    entity_id: input_boolean.bambu_p1s_end_time_switch
                visibility:
                  - condition: state
                    entity: sensor.bambu_p1s_current_stage
                    state_not: idle
            styles: "${card.querySelector('.bubble-name').innerText =\n  hass.states['sensor.bambu_p1s_status']?.state\
              \ !== 'offline'\n  ? hass.states['sensor.bambu_p1s_task_name']?.state\
              \ : 'Bambu P1S'}\n\n${card.querySelector('.bubble-state').innerText\
              \ =\n  hass.states['sensor.bambu_p1s_current_stage']?.state === 'changing_filament'\n\
              \  ? 'Changing Filament' : ''}\n\n${card.querySelector('.bubble-sub-button-3\n\
              .bubble-sub-button-name-container').innerText =\n  hass.states['sensor.bambu_p1s_status']?.state\
              \ !== 'offline'\n  ? hass.states['sensor.bambu_p1s_current_layer']?.state\
              \ + \" / \"\n  + hass.states['sensor.bambu_p1s_total_layer_count']?.state\
              \ :\n  'Off'}"
            modules:
              - default
            card_mod:
              style: "{% set progress = states('sensor.bambu_p1s_print_progress')\
                \ | float / 100 %}\n\n{% set pct_diff = 1.0 - progress %} {% set r\
                \ = min(255, pct_diff * 2 *\n255) | round(0) %} {% set g = min(255,\
                \ progress * 2 * 255) | round(0) %}\n{% set font_color = (r, g, 0,\
                \ 1) %} {% set bg_color = (r, g, 0, 0.4) %}\n\n.bubble-button-background::before\
                \ {\n  content: \"\";\n  height: 100%;\n  width: {{ progress * 100\
                \ }}%;\n  background-color: rgba{{ bg_color }};\n}\n\n{% if has_value('sensor.bambu_p1s_end_time')\
                \ %}\n  {% set toggle_state = states('input_boolean.bambu_p1s_end_time_switch')\
                \ %}\n\n  {% set end_time = states('sensor.bambu_p1s_end_time') |\
                \ as_timestamp %}\n  {% set time_to_end = states('sensor.bambu_p1s_remaining_time')\
                \ | int %}\n  {% set hours = (time_to_end / 60) | int %}\n  {% set\
                \ minutes = (time_to_end % 60) %}\n\n  .bubble-sub-button-4::before\
                \ {\n    {% if toggle_state == 'on' %}\n      {% if end_time | timestamp_custom('%Y-%m-%d')\
                \ == now().date() | string %}\n        content: \"{{ end_time | timestamp_custom('%-I:%M\
                \ %p') }}\";\n      {% else %}\n        content: \"{{ end_time | timestamp_custom('%m/%d\
                \ %-I:%M %p') }}\";\n      {% endif %}\n    {% else %}\n      content:\
                \ \"{{ '{:01}h {:01}m'.format(hours, minutes) }}\";\n    {% endif\
                \ %}\n    margin-left: 3px;\n  }\n{% endif %}"
      - type: grid
        cards:
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: 20% 80%
              grid-template-rows: auto
              grid-template-areas: '"ext ams"'
            cards:
              - type: heading
                heading: EXT
                heading_style: subtitle
                badges:
                  - type: custom:mushroom-template-badge
              - type: heading
                heading: AMS
                heading_style: subtitle
                badges:
                  - type: custom:mushroom-template-badge
                    entity: sensor.bambu_p1s_ams_humidity_index
                    content: '{{ states(entity) }}'
                    icon: mdi:water
                    color: "{% if is_state(entity, \"1\") %}\n  green\n{% elif is_state(entity,\
                      \ \"2\") %}\n  light-green\n{% elif is_state(entity, \"3\")\
                      \ %}\n  yellow\n{% elif is_state(entity, \"4\") %}\n  orange\n\
                      {% elif is_state(entity, \"5\") %}\n  red\n{% else %}\n  grey\n\
                      {% endif %}"
                    tap_action:
                      action: more-info
          - type: custom:vertical-stack-in-card
            cards:
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: repeat(5, 20%)
                  grid-template-rows: auto
                  grid-template-areas: '"ext slot1 slot2 slot3 slot4"

                    '
                cards:
                  - type: custom:button-card
                    template: bambu_spool
                    entity: sensor.bambu_p1s_external_spool_external_spool
                    view_layout:
                      grid-area: ext
                    tap_action:
                      action: navigate
                      navigation_path: '#filament-external'
                  - type: custom:button-card
                    template: bambu_spool
                    entity: sensor.bambu_p1s_ams_tray_1
                    view_layout:
                      grid-area: slot1
                    tap_action:
                      action: navigate
                      navigation_path: '#filament-ams-1-slot-1'
                  - type: custom:button-card
                    template: bambu_spool
                    entity: sensor.bambu_p1s_ams_tray_2
                    view_layout:
                      grid-area: slot2
                    tap_action:
                      action: navigate
                      navigation_path: '#filament-ams-1-slot-2'
                  - type: custom:button-card
                    template: bambu_spool
                    entity: sensor.bambu_p1s_ams_tray_3
                    view_layout:
                      grid-area: slot3
                    tap_action:
                      action: navigate
                      navigation_path: '#filament-ams-1-slot-3'
                  - type: custom:button-card
                    template: bambu_spool
                    entity: sensor.bambu_p1s_ams_tray_4
                    view_layout:
                      grid-area: slot4
                    tap_action:
                      action: navigate
                      navigation_path: '#filament-ams-1-slot-4'
      - type: grid
        cards:
          - type: heading
            heading: Default Cards
            heading_style: title
          - type: custom:ha-bambulab-print_status-card
            printer: b9e70ce89bcabdccae4b86eeae1918f2
            custom_power: switch.bambu_p1s
            style: simple
          - type: custom:ha-bambulab-print_control-card
            printer: b9e70ce89bcabdccae4b86eeae1918f2
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#printer-info'
                button_type: name
                name: General Info
                show_icon: false
                margin_top_desktop: 50vh
                width_desktop: 50vw
                margin_top_mobile: calc(0px - var(--header-height))
              - type: custom:button-card
                show_state: false
                show_label: false
                tap_action:
                  action: none
                variables:
                  value_font_color: grey
                custom_fields:
                  printer_image: "[[[\n  return `\n    <div style=\"display: flex;\
                    \ justify-content: flex-end;\">\n      <img\n        src=\"/local/logos/p1s.png\"\
                    \n        style=\"width: 100px;\"\n      />\n    </div>\n  `;\n\
                    ]]]\n"
                  printer_serial: "[[[\n  let state = states['sensor.bambu_p1s_serial']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <span style=\"display: block;\"\
                    >Printer Serial</span>\n      <span style=\"overflow: show; color:\
                    \ ${variables.value_font_color}\">${state === 'unavailable' ?\
                    \ 'Unknown' : state}</span>\n    </div>\n  `;\n]]]\n"
                  ams_serial: "[[[\n  let state = states['sensor.bambu_p1s_ams_serial']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <span style=\"display: block;\"\
                    >AMS Serial</span>\n      <span style=\"display: block; color:\
                    \ ${variables.value_font_color}\">${state === 'unavailable' ?\
                    \ 'Unknown' : state}</span>\n    </div>\n  `;\n]]]\n"
                  printer_fw_v: "[[[\n  let state = states['sensor.bambu_p1s_sw_version']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <span style=\"display: block;\"\
                    >Printer Firmware</span>\n      <span style=\"display: block;\
                    \ color: ${variables.value_font_color}\">${state === 'unavailable'\
                    \ ? 'Unknown' : state}</span>\n    </div>\n  `;\n]]]\n"
                  ams_fw_v: "[[[\n  let state = states['sensor.bambu_p1s_ams_sw_version']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <span style=\"display: block;\"\
                    >AMS Firmware</span>\n      <span style=\"display: block; color:\
                    \ ${variables.value_font_color}\">${state === 'unavailable' ?\
                    \ 'Unknown' : state}</span>\n    </div>\n  `;\n]]]\n"
                  nozzle_type: "[[[\n  const titleCase = (s) => s.replace(/^_*(.)|_+(.)/g,\
                    \ (s, c, d) => c ? c.toUpperCase() : ' ' + d.toUpperCase())\n\
                    \  let state = states['sensor.bambu_p1s_nozzle_type']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <span style=\"display: block;\"\
                    >Nozzle Type</span>\n      <span style=\"display: block; color:\
                    \ ${variables.value_font_color}\">${state === 'unavailable' ?\
                    \ 'Unknown' : titleCase(state)}</span>\n    </div>\n  `;\n]]]\n"
                  nozzle_diameter: "[[[\n  let state = states['sensor.bambu_p1s_nozzle_size']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <span style=\"display: block;\"\
                    >Nozzle Diameter</span>\n      <span style=\"display: block; color:\
                    \ ${variables.value_font_color}\">${state === 'unavailable' ?\
                    \ 'Unknown' : state + 'mm'}</span>\n    </div>\n  `;\n]]]\n"
                  wifi_strength: "[[[\n  let state = states['sensor.bambu_p1s_wi_fi_signal']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <span style=\"display: block;\"\
                    >WiFi Signal</span>\n      <span style=\"display: block; color:\
                    \ ${variables.value_font_color}\">${state === 'unavailable' ?\
                    \ 'Unknown' : state + 'dBm'}</span>\n    </div>\n  `;\n]]]\n"
                  power_used: "[[[\n  let state = states['sensor.bambu_p1s_energy']?.state;\n\
                    \  return `\n    <div style=\"text-align: center; font-size: 12px;\
                    \ justify-self: center;\">\n      <span style=\"display: block;\"\
                    >Power Used</span>\n      <span style=\"display: block; color:\
                    \ ${variables.value_font_color}\">${state === 'unavailable' ?\
                    \ 'Unknown' : state + 'kWh'}</span>\n    </div>\n  `;\n]]]\n"
                styles:
                  card:
                    - background-color: color-mix(in srgb, var(--disabled-color) 12%,
                        var(--card-background-color) 100%)
                    - padding-left: 10px
                    - padding-right: 10px
                  grid:
                    - grid-template-areas: '"nozzle_type . nozzle_diameter . printer_image"

                        "wifi_strength . power_used . printer_image"

                        "printer_fw_v . ams_fw_v . printer_image"

                        "printer_serial . ams_serial . printer_image"

                        '
                    - grid-template-columns: auto 1fr auto 1fr 100px
                    - grid-template-rows: auto
                    - text-align: start
                  custom_fields:
                    printer_image:
                      - justify-self: right
                      - width: 150px
                      - height: 150px
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#hms'
                button_type: name
                name: Health Management System
                show_icon: false
                margin_top_desktop: 50vh
                width_desktop: 50vw
                margin_top_mobile: calc(0px - var(--header-height))
              - type: markdown
                card_mod:
                  style: "ha-card {\n  --ha-card-background: color-mix(in srgb, var(--disabled-color)\
                    \ 12%, var(--card-background-color) 100%);\n}\n"
                content: "{%- set entity_id = \"binary_sensor.bambu_p1s_hms_errors\"\
                  \ -%}\n{%- set errors = namespace(message=[],severity=[],url=[])\
                  \ -%}\n{%- for attribute, value in states[entity_id].attributes.items()\
                  \ -%}\n  {%- if attribute.split('-') | count > 1 -%}\n    {%- set\
                  \ id, type = attribute.split('-') -%}\n    {%- if type | count >\
                  \ 1 -%}\n      {%- if type == \"Error\" -%}\n        {% set errors.message\
                  \ = dict(errors.message, **{id: value}) %}\n      {%- endif -%}\n\
                  \      {%- if type == \"Severity\" -%}\n        {% set errors.severity\
                  \ = dict(errors.severity, **{id: value}) %}\n      {%- endif -%}\n\
                  \      {%- if type == \"Wiki\" -%}\n        {% set errors.url =\
                  \ dict(errors.url, **{id: value}) %}\n      {%- endif -%}\n    {%-\
                  \ endif -%}\n  {%- endif -%}\n{%- endfor -%}\n{%- set levels = {\n\
                  \  \"fatal\": \"mdi:alert-decagram\",\n  \"serious\": \"mdi:alert-circle\"\
                  ,\n  \"common\": \"mdi:minus-circle\",\n  \"info\": \"mdi:information\"\
                  ,\n  \"unknown\": \"mdi:help-circle\"\n} -%}\n{%- if errors.message|count\
                  \ == 0 -%}\n  No Problems\n{%- endif -%}\n{% for id in errors.message\
                  \ %}\n<ha-icon icon=\"{{ levels[errors.severity[id]] }}\"></ha-icon>\
                  \ {{ errors.message[id] }}\n<a href=\"{{ errors.url[id] }}\">Support</a>\n\
                  {% endfor %}"
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#temperature-nozzle'
                button_type: name
                name: Nozzle Temperature
                show_icon: false
                margin_top_desktop: 50vh
                width_desktop: 50vw
                margin_top_mobile: 30vh
                modules:
                  - default
              - type: custom:bubble-card
                card_type: button
                button_type: slider
                name: Nozzle
                entity: sensor.bambu_p1s_nozzle_temperature
                show_state: true
                sub_button:
                  - name: Target
                    entity: sensor.bambu_p1s_nozzle_target_temperature
                    icon: mdi:printer-3d-nozzle-heat
                    show_background: false
                    show_state: true
                    tap_action:
                      action: none
                  - name: Decrement
                    entity: sensor.bambu_p1s_nozzle_temperature
                    icon: mdi:minus
                    show_background: false
                    tap_action:
                      action: perform-action
                      perform_action: number.decrement
                      target:
                        entity_id:
                          - number.bambu_p1s_nozzle_target_temperature
                      data:
                        amount: 1
                    visibility:
                      - condition: state
                        entity: number.bambu_p1s_nozzle_target_temperature
                        state_not: unavailable
                  - name: Increment
                    entity: sensor.bambu_p1s_nozzle_temperature
                    icon: mdi:plus
                    show_background: false
                    tap_action:
                      action: perform-action
                      perform_action: number.increment
                      target:
                        entity_id: number.bambu_p1s_nozzle_target_temperature
                      data:
                        amount: 1
                    visibility:
                      - condition: state
                        entity: number.bambu_p1s_nozzle_target_temperature
                        state_not: unavailable
                styles: ".bubble-name, .bubble-state {\n  font-weight: bold;\n}\n\
                  .bubble-icon {\n  color: var(--red-color) !important;\n}\n.bubble-range-fill\
                  \ {\n  background: rgba(200, 25, 25, .5) !important;\n}\n"
                modules:
                  - default
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 1fr auto 1fr auto 1fr
                  grid-template-rows: auto
                  grid-template-areas: '". off . changing ."

                    '
                cards:
                  - type: custom:button-card
                    view_layout:
                      grid-area: 'off'
                    name: 'Off'
                    show_state: false
                    icon: mdi:printer-3d-nozzle-off
                    tap_action:
                      action: call-service
                      service: number.set_value
                      data:
                        value: '0'
                      target:
                        entity_id: number.bambu_p1s_nozzle_target_temperature
                    custom_fields:
                      temp: 0°
                    styles:
                      card:
                        - border-radius: 24px
                        - background-color: color-mix(in srgb, var(--disabled-color)
                            12%, var(--card-background-color) 100%)
                        - color: grey
                        - padding: 5px
                        - width: 75px
                      grid:
                        - grid-template-areas: '"i n" "i temp"'
                        - grid-template-columns: auto
                        - grid-template-rows: auto
                      img_cell:
                        - align-self: center
                        - text-align: start
                      name:
                        - justify-self: left
                        - font-size: 12px
                      icon:
                        - width: 20px
                        - color: grey
                      state:
                        - justify-self: center
                        - font-size: 12px
                      custom_fields:
                        temp:
                          - justify-self: left
                          - font-size: 10px
                  - type: custom:button-card
                    view_layout:
                      grid-area: changing
                    name: Changing
                    show_state: false
                    icon: mdi:circle-slice-6
                    tap_action:
                      action: call-service
                      service: number.set_value
                      data:
                        value: '250'
                      target:
                        entity_id: number.bambu_p1s_nozzle_target_temperature
                    custom_fields:
                      temp: 250°
                    styles:
                      card:
                        - border-radius: 24px
                        - background-color: color-mix(in srgb, var(--disabled-color)
                            12%, var(--card-background-color) 100%)
                        - color: grey
                        - padding: 5px
                        - width: 100px
                      grid:
                        - grid-template-areas: '"i n" "i temp"'
                        - grid-template-columns: auto
                        - grid-template-rows: auto
                      img_cell:
                        - align-self: center
                        - text-align: start
                      name:
                        - justify-self: left
                        - font-size: 12px
                      icon:
                        - width: 20px
                        - color: grey
                      custom_fields:
                        temp:
                          - justify-self: left
                          - font-size: 10px
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 1fr auto 1fr auto 1fr auto 1fr
                  grid-template-rows: auto
                  grid-template-areas: '". pla . tpu . abs ."

                    '
                cards:
                  - type: custom:button-card
                    view_layout:
                      grid-area: pla
                    name: PLA
                    show_state: false
                    icon: mdi:thermometer-low
                    tap_action:
                      action: call-service
                      service: number.set_value
                      data:
                        value: '220'
                      target:
                        entity_id: number.bambu_p1s_nozzle_target_temperature
                    custom_fields:
                      temp: 220°
                    styles:
                      card:
                        - border-radius: 24px
                        - background-color: color-mix(in srgb, var(--disabled-color)
                            12%, var(--card-background-color) 100%)
                        - color: grey
                        - padding: 5px
                        - width: 100px
                      grid:
                        - grid-template-areas: '"i n" "i temp"'
                        - grid-template-columns: auto
                        - grid-template-rows: auto
                      img_cell:
                        - align-self: center
                        - text-align: start
                      name:
                        - justify-self: left
                        - font-size: 12px
                      icon:
                        - width: 20px
                        - color: grey
                      state:
                        - justify-self: center
                        - font-size: 12px
                      custom_fields:
                        temp:
                          - justify-self: left
                          - font-size: 10px
                  - type: custom:button-card
                    view_layout:
                      grid-area: tpu
                    name: TPU/PETG
                    show_state: false
                    icon: mdi:thermometer
                    tap_action:
                      action: call-service
                      service: number.set_value
                      data:
                        value: '250'
                      target:
                        entity_id: number.bambu_p1s_nozzle_target_temperature
                    custom_fields:
                      temp: 250°
                    styles:
                      card:
                        - border-radius: 24px
                        - background-color: color-mix(in srgb, var(--disabled-color)
                            12%, var(--card-background-color) 100%)
                        - color: grey
                        - padding: 5px
                        - width: 100px
                      grid:
                        - grid-template-areas: '"i n" "i temp"'
                        - grid-template-columns: auto
                        - grid-template-rows: auto
                      img_cell:
                        - align-self: center
                        - text-align: start
                      name:
                        - justify-self: left
                        - font-size: 12px
                      icon:
                        - width: 20px
                        - color: grey
                      state:
                        - justify-self: center
                        - font-size: 12px
                      custom_fields:
                        temp:
                          - justify-self: left
                          - font-size: 10px
                  - type: custom:button-card
                    view_layout:
                      grid-area: abs
                    name: ABS/ASA
                    show_state: false
                    icon: mdi:thermometer-high
                    tap_action:
                      action: call-service
                      service: number.set_value
                      data:
                        value: '275'
                      target:
                        entity_id: number.bambu_p1s_nozzle_target_temperature
                    custom_fields:
                      temp: 275°
                    styles:
                      card:
                        - border-top-left-radius: 24px
                        - border-bottom-left-radius: 24px
                        - border-top-right-radius: 24px
                        - border-bottom-right-radius: 24px
                        - background-color: color-mix(in srgb, var(--disabled-color)
                            12%, var(--card-background-color) 100%)
                        - color: grey
                        - padding: 5px
                        - width: 100px
                      grid:
                        - grid-template-areas: '"i n" "i temp"'
                        - grid-template-columns: auto
                        - grid-template-rows: auto
                      img_cell:
                        - align-self: center
                        - text-align: start
                      name:
                        - justify-self: left
                        - font-size: 12px
                      icon:
                        - width: 20px
                        - color: grey
                      state:
                        - justify-self: center
                        - font-size: 12px
                      custom_fields:
                        temp:
                          - justify-self: left
                          - font-size: 10px
              - type: custom:mini-graph-card
                entities:
                  - entity: sensor.bambu_p1s_nozzle_temperature
                  - entity: sensor.bambu_p1s_nozzle_target_temperature
                    color: var(--red-color)
                    show_state: false
                    show_legend: false
                    show_fill: false
                name: Nozzle Temperature
                icon: mdi:printer-3d-nozzle
                hours_to_show: 12
                points_per_hour: 60
                lower_bound: 0
                aggregate_func: max
                font_size_header: 12
                font_size: 70
                line_width: 2
                smoothing: false
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#temperature-bed'
                button_type: name
                name: Bed Temperature
                show_icon: false
                margin_top_desktop: 50vh
                width_desktop: 50vw
                margin_top_mobile: 40vh
                modules:
                  - default
              - type: custom:bubble-card
                card_type: button
                button_type: slider
                name: Bed
                entity: sensor.bambu_p1s_bed_temperature
                show_state: true
                sub_button:
                  - name: Target
                    icon: mdi:target
                    show_background: false
                    show_name: false
                    show_state: true
                    entity: sensor.bambu_p1s_target_bed_temperature
                    tap_action:
                      action: none
                  - name: Decrement
                    entity: sensor.bambu_p1s_target_bed_temperature
                    icon: mdi:minus
                    show_background: false
                    tap_action:
                      action: perform-action
                      perform_action: number.decrement
                      target:
                        entity_id:
                          - number.bambu_p1s_bed_target_temperature
                      data:
                        amount: 1
                    visibility:
                      - condition: state
                        entity: number.bambu_p1s_bed_target_temperature
                        state_not: unavailable
                  - name: Increment
                    entity: sensor.bambu_p1s_target_bed_temperature
                    icon: mdi:plus
                    show_background: false
                    tap_action:
                      action: perform-action
                      perform_action: number.increment
                      target:
                        entity_id: number.bambu_p1s_bed_target_temperature
                      data:
                        amount: 1
                    visibility:
                      - condition: state
                        entity: number.bambu_p1s_bed_target_temperature
                        state_not: unavailable
                styles: ".bubble-name, .bubble-state {\n  font-weight: bold;\n}\n\
                  .bubble-range-fill {\n  background: rgba(200, 25, 25, .5) !important;\n\
                  }\n.bubble-sub-button-1 {\n  display: ${hass.states['sensor.bambu_p1s_target_bed_temperature'].state\
                  \ !== hass.states['sensor.bambu_p1s_bed_temperature'].state ? ''\
                  \ : 'none'} !important;\n}\n"
                modules:
                  - default
              - type: custom:mini-graph-card
                entities:
                  - entity: sensor.bambu_p1s_bed_temperature
                  - entity: sensor.bambu_p1s_target_bed_temperature
                    color: var(--red-color)
                    show_state: false
                    show_legend: false
                    show_fill: false
                name: Bed Temperature
                icon: mdi:radiator
                hours_to_show: 12
                points_per_hour: 60
                lower_bound: 0
                aggregate_func: max
                font_size_header: 12
                font_size: 70
                line_width: 2
                smoothing: false
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#settings-speed'
                button_type: name
                name: Speed
                show_icon: false
                margin_top_desktop: 50vh
                width_desktop: 50vw
                margin_top_mobile: 70vh
                modules:
                  - default
              - type: custom:mod-card
                style:
                  hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                    \ wrap;\n  justify-content: space-around;\n}\n"
                card:
                  type: grid
                  square: false
                  cards:
                    - type: custom:button-card
                      template: button
                      entity: sensor.bambu_p1s_speed_profile
                      name: Silent
                      icon: mdi:gauge-empty
                      tap_action:
                        action: perform-action
                        perform_action: select.select_option
                        target:
                          entity_id: select.bambu_p1s_printing_speed
                        data:
                          option: silent
                      variables:
                        color: "[[[\n  return entity.state === 'silent'\n    ? 'var(--state-active-color)'\n\
                          \    : 'var(--grey-color)';\n]]]\n"
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
                    - type: custom:button-card
                      template: button
                      entity: sensor.bambu_p1s_speed_profile
                      name: Standard
                      show_state: false
                      icon: mdi:gauge-low
                      tap_action:
                        action: perform-action
                        perform_action: select.select_option
                        target:
                          entity_id: select.bambu_p1s_printing_speed
                        data:
                          option: standard
                      variables:
                        color: "[[[\n  return entity.state === 'standard'\n    ? 'var(--state-active-color)'\n\
                          \    : 'var(--grey-color)';\n]]]\n"
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
                    - type: custom:button-card
                      template: button
                      entity: sensor.bambu_p1s_speed_profile
                      name: Sport
                      icon: mdi:gauge
                      tap_action:
                        action: perform-action
                        perform_action: select.select_option
                        target:
                          entity_id: select.bambu_p1s_printing_speed
                        data:
                          option: sport
                      variables:
                        color: "[[[\n  return entity.state === 'sport'\n    ? 'var(--state-active-color)'\n\
                          \    : 'var(--grey-color)';\n]]]\n"
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
                    - type: custom:button-card
                      template: button
                      entity: sensor.bambu_p1s_speed_profile
                      name: Ludicrous
                      icon: mdi:gauge-full
                      tap_action:
                        action: perform-action
                        perform_action: select.select_option
                        target:
                          entity_id: select.bambu_p1s_printing_speed
                        data:
                          option: ludicrous
                      variables:
                        color: "[[[\n  return entity.state === 'ludicrous'\n    ?\
                          \ 'var(--state-active-color)'\n    : 'var(--grey-color)';\n\
                          ]]]\n"
                      extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n\
                        \    ha-card:hover {\n      background: color-mix(in srgb,\
                        \ ${variables.color}, transparent 80%) !important;\n    }\n\
                        \  }\n  `\n]]]\n"
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#filament-external'
                button_type: name
                name: External Filament
                show_icon: false
                margin_top_desktop: 50vh
                width_desktop: 50vw
                margin_top_mobile: 50vh
                modules:
                  - default
                sub_button:
                  - entity: sensor.bambu_p1s_external_spool_external_spool
                    name: Type
                    show_state: false
                    show_background: false
                    show_attribute: true
                    attribute: type
                    show_icon: false
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_external_spool_external_spool
                        state_not: unknown
                  - entity: sensor.bambu_p1s_external_spool_external_spool
                    name: Name
                    show_state: false
                    show_background: false
                    show_attribute: true
                    attribute: name
                    show_icon: false
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_external_spool_external_spool
                        state_not: unknown
                  - entity: sensor.bambu_p1s_external_spool_external_spool
                    name: Color
                    show_state: false
                    show_background: false
                    icon: mdi:circle
                    show_icon: true
                styles: ".bubble-sub-button-3 {\n  color: ${hass.states['sensor.bambu_p1s_external_spool_external_spool'].attributes.color}\
                  \ !important;\n}\n"
              - type: custom:bubble-card
                card_type: button
                button_type: state
                name: Temperature
                entity: sensor.bambu_p1s_external_spool_external_spool
                icon: mdi:printer-3d-nozzle-heat
                show_attribute: false
                show_state: false
                show_icon: false
                button_action:
                  tap_action:
                    action: none
                sub_button:
                  - entity: sensor.bambu_p1s_external_spool_external_spool
                    show_state: false
                    show_attribute: true
                    attribute: nozzle_temp_min
                    icon: mdi:thermometer-low
                    show_background: false
                  - entity: sensor.bambu_p1s_external_spool_external_spool
                    show_state: false
                    show_attribute: true
                    attribute: nozzle_temp_max
                    icon: mdi:thermometer-high
                    show_background: false
                modules:
                  - default
              - type: custom:bubble-card
                card_type: button
                button_type: state
                name: Drying
                entity: sensor.bambu_p1s_external_spool_external_spool
                icon: mdi:printer-3d-nozzle-heat
                show_attribute: false
                show_state: false
                show_icon: false
                button_action:
                  tap_action:
                    action: none
                sub_button:
                  - entity: sensor.bambu_p1s_external_spool_external_spool
                    show_state: false
                    show_attribute: true
                    attribute: drying_temp
                    icon: mdi:thermometer
                    show_background: false
                  - entity: sensor.bambu_p1s_external_spool_external_spool
                    show_state: false
                    show_attribute: true
                    attribute: drying_time
                    icon: mdi:clock
                    show_background: false
                modules:
                  - default
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 1fr auto 1fr auto 1fr
                  grid-template-rows: auto
                  grid-template-areas: '". load . unload ."

                    '
                cards:
                  - type: custom:button-card
                    template: button
                    view_layout:
                      grid-area: load
                    name: Load
                    show_state: false
                    icon: mdi:download
                    tap_action:
                      action: call-service
                      service: bambu_lab.load_filament
                      target:
                        device_id: b9e70ce89bcabdccae4b86eeae1918f2
                      data:
                        external_spool: 1
                  - type: custom:button-card
                    template: button
                    view_layout:
                      grid-area: unload
                    name: Unload
                    show_state: false
                    icon: mdi:upload
                    tap_action:
                      action: call-service
                      service: bambu_lab.unload_filament
                      target:
                        device_id: b9e70ce89bcabdccae4b86eeae1918f2
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#filament-ams-1-slot-1'
                button_type: name
                name: AMS Slot 1
                show_icon: false
                margin_top_desktop: 50vh
                width_desktop: 50vw
                margin_top_mobile: 50vh
                modules:
                  - default
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_1
                    show_state: false
                    show_attribute: true
                    attribute: type
                    show_icon: false
                    name: Type
                  - entity: sensor.bambu_p1s_ams_tray_1
                    show_state: false
                    show_attribute: true
                    attribute: name
                    show_icon: false
                    name: Name
                  - entity: sensor.bambu_p1s_ams_tray_1
                    show_state: false
                    icon: mdi:circle
                    show_icon: true
                    name: Color
                styles: ".bubble-sub-button-3 {\n  color: ${hass.states['sensor.bambu_p1s_ams_tray_1'].attributes.color}\
                  \ !important;\n}\n"
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Temperature
                icon: mdi:printer-3d-nozzle-heat
                show_attribute: false
                show_state: false
                show_icon: false
                button_action:
                  tap_action:
                    action: none
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_1
                    show_state: false
                    show_attribute: true
                    attribute: nozzle_temp_min
                    icon: mdi:thermometer-low
                    show_background: false
                  - entity: sensor.bambu_p1s_ams_tray_1
                    show_state: false
                    show_attribute: true
                    attribute: nozzle_temp_max
                    icon: mdi:thermometer-high
                    show_background: false
                modules:
                  - default
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Drying
                icon: mdi:printer-3d-nozzle-heat
                show_attribute: false
                show_state: false
                show_icon: false
                button_action:
                  tap_action:
                    action: none
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_1
                    show_state: false
                    show_attribute: true
                    icon: mdi:thermometer
                    show_background: false
                  - entity: sensor.bambu_p1s_ams_tray_1
                    show_state: false
                    show_attribute: true
                    icon: mdi:clock
                    show_background: false
                modules:
                  - default
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Drying
                icon: mdi:printer-3d-nozzle-heat
                show_attribute: false
                show_state: false
                show_icon: false
                button_action:
                  tap_action:
                    action: none
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_1
                    show_state: false
                    show_attribute: true
                    icon: mdi:thermometer
                    show_background: false
                  - entity: sensor.bambu_p1s_ams_tray_1
                    show_state: false
                    show_attribute: true
                    icon: mdi:clock
                    show_background: false
                modules:
                  - default
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 1fr auto 1fr auto 1fr
                  grid-template-rows: auto
                  grid-template-areas: '". load . unload ."

                    '
                cards:
                  - type: custom:button-card
                    template: button
                    view_layout:
                      grid-area: load
                    name: Load
                    show_state: false
                    icon: mdi:download
                    tap_action:
                      action: call-service
                      service: bambu_lab.load_filament
                      target:
                        device_id: b9e70ce89bcabdccae4b86eeae1918f2
                      data:
                        tray: 1
                  - type: custom:button-card
                    template: button
                    view_layout:
                      grid-area: unload
                    name: Unload
                    show_state: false
                    icon: mdi:upload
                    tap_action:
                      action: call-service
                      service: bambu_lab.unload_filament
                      target:
                        device_id: b9e70ce89bcabdccae4b86eeae1918f2
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#filament-ams-1-slot-2'
                button_type: name
                name: AMS Slot 2
                show_icon: false
                margin_top_desktop: 50vh
                width_desktop: 50vw
                margin_top_mobile: 50vh
                modules:
                  - default
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_2
                    name: Type
                    show_state: false
                    show_background: false
                    show_attribute: true
                    attribute: type
                    show_icon: false
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_ams_tray_2
                        state_not: unknown
                  - entity: sensor.bambu_p1s_ams_tray_2
                    name: Name
                    show_state: false
                    show_background: false
                    show_attribute: true
                    attribute: name
                    show_icon: false
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_ams_tray_2
                        state_not: unknown
                  - entity: sensor.bambu_p1s_ams_tray_2
                    name: Color
                    show_state: false
                    show_background: false
                    icon: mdi:circle
                    show_icon: true
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_ams_tray_2
                        state_not: unknown
                styles: ".bubble-sub-button-3 {\n  color: ${hass.states['sensor.bambu_p1s_ams_tray_2'].attributes.color}\
                  \ !important;\n}\n"
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Temperature
                icon: mdi:printer-3d-nozzle-heat
                show_attribute: false
                show_state: false
                show_icon: false
                button_action:
                  tap_action:
                    action: none
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_2
                    show_state: false
                    show_attribute: true
                    attribute: nozzle_temp_min
                    icon: mdi:thermometer-low
                    show_background: false
                  - entity: sensor.bambu_p1s_ams_tray_2
                    show_state: false
                    show_attribute: true
                    attribute: nozzle_temp_max
                    icon: mdi:thermometer-high
                    show_background: false
                modules:
                  - default
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Drying
                icon: mdi:printer-3d-nozzle-heat
                show_attribute: false
                show_state: false
                show_icon: false
                button_action:
                  tap_action:
                    action: none
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_2
                    show_state: false
                    show_attribute: true
                    attribute: drying_temp
                    icon: mdi:thermometer
                    show_background: false
                  - entity: sensor.bambu_p1s_ams_tray_2
                    show_state: false
                    show_attribute: true
                    attribute: drying_time
                    icon: mdi:clock
                    show_background: false
                modules:
                  - default
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Serial
                icon: phu:3d-filament
                show_icon: false
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_2
                    show_state: false
                    show_attribute: true
                    attribute: tray_uuid
                    show_icon: false
                    show_background: false
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_ams_tray_2
                        state_not: unknown
                modules:
                  - default
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 1fr auto 1fr auto 1fr
                  grid-template-rows: auto
                  grid-template-areas: '". load . unload ."

                    '
                cards:
                  - type: custom:button-card
                    template: button
                    view_layout:
                      grid-area: load
                    name: Load
                    show_state: false
                    icon: mdi:download
                    tap_action:
                      action: call-service
                      service: bambu_lab.load_filament
                      target:
                        device_id: b9e70ce89bcabdccae4b86eeae1918f2
                      data:
                        tray: 2
                  - type: custom:button-card
                    template: button
                    view_layout:
                      grid-area: unload
                    name: Unload
                    show_state: false
                    icon: mdi:upload
                    tap_action:
                      action: call-service
                      service: bambu_lab.unload_filament
                      target:
                        device_id: b9e70ce89bcabdccae4b86eeae1918f2
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#filament-ams-1-slot-3'
                button_type: name
                name: AMS Slot 3
                show_icon: false
                margin_top_desktop: 50vh
                width_desktop: 50vw
                margin_top_mobile: 50vh
                modules:
                  - default
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_3
                    name: Type
                    show_state: false
                    show_background: false
                    show_attribute: true
                    attribute: type
                    show_icon: false
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_ams_tray_3
                        state_not: unknown
                  - entity: sensor.bambu_p1s_ams_tray_3
                    name: Name
                    show_state: false
                    show_background: false
                    show_attribute: true
                    attribute: name
                    show_icon: false
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_ams_tray_3
                        state_not: unknown
                  - entity: sensor.bambu_p1s_ams_tray_3
                    name: Color
                    show_state: false
                    show_background: false
                    icon: mdi:circle
                    show_icon: true
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_ams_tray_3
                        state_not: unknown
                styles: ".bubble-sub-button-3 {\n  color: ${hass.states['sensor.bambu_p1s_ams_tray_3'].attributes.color}\
                  \ !important;\n}\n"
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Temperature
                icon: mdi:printer-3d-nozzle-heat
                show_attribute: false
                show_state: false
                show_icon: false
                button_action:
                  tap_action:
                    action: none
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_3
                    show_state: false
                    show_attribute: true
                    attribute: nozzle_temp_min
                    icon: mdi:thermometer-low
                    show_background: false
                  - entity: sensor.bambu_p1s_ams_tray_3
                    show_state: false
                    show_attribute: true
                    attribute: nozzle_temp_max
                    icon: mdi:thermometer-high
                    show_background: false
                modules:
                  - default
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Drying
                icon: mdi:printer-3d-nozzle-heat
                show_attribute: false
                show_state: false
                show_icon: false
                button_action:
                  tap_action:
                    action: none
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_3
                    show_state: false
                    show_attribute: true
                    attribute: drying_temp
                    icon: mdi:thermometer
                    show_background: false
                  - entity: sensor.bambu_p1s_ams_tray_3
                    show_state: false
                    show_attribute: true
                    attribute: drying_time
                    icon: mdi:clock
                    show_background: false
                modules:
                  - default
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Serial
                icon: phu:3d-filament
                show_icon: false
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_3
                    show_state: false
                    show_attribute: true
                    attribute: tray_uuid
                    show_icon: false
                    show_background: false
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_ams_tray_3
                        state_not: unknown
                modules:
                  - default
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 1fr auto 1fr auto 1fr
                  grid-template-rows: auto
                  grid-template-areas: '". load . unload ."

                    '
                cards:
                  - type: custom:button-card
                    template: button
                    view_layout:
                      grid-area: load
                    name: Load
                    show_state: false
                    icon: mdi:download
                    tap_action:
                      action: call-service
                      service: bambu_lab.load_filament
                      target:
                        device_id: b9e70ce89bcabdccae4b86eeae1918f2
                      data:
                        tray: 3
                  - type: custom:button-card
                    template: button
                    view_layout:
                      grid-area: unload
                    name: Unload
                    show_state: false
                    icon: mdi:upload
                    tap_action:
                      action: call-service
                      service: bambu_lab.unload_filament
                      target:
                        device_id: b9e70ce89bcabdccae4b86eeae1918f2
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#filament-ams-1-slot-4'
                button_type: name
                name: AMS Slot 4
                show_icon: false
                margin_top_desktop: 50vh
                width_desktop: 50vw
                margin_top_mobile: 50vh
                modules:
                  - default
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_4
                    name: Type
                    show_state: false
                    show_background: false
                    show_attribute: true
                    attribute: type
                    show_icon: false
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_ams_tray_4
                        state_not: unknown
                  - entity: sensor.bambu_p1s_ams_tray_4
                    name: Name
                    show_state: false
                    show_background: false
                    show_attribute: true
                    attribute: name
                    show_icon: false
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_ams_tray_4
                        state_not: unknown
                  - entity: sensor.bambu_p1s_ams_tray_4
                    name: Color
                    show_state: false
                    show_background: false
                    icon: mdi:circle
                    show_icon: true
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_ams_tray_4
                        state_not: unknown
                styles: ".bubble-sub-button-3 {\n  color: ${hass.states['sensor.bambu_p1s_ams_tray_4'].attributes.color}\
                  \ !important;\n}\n"
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Temperature
                icon: mdi:printer-3d-nozzle-heat
                show_attribute: false
                show_state: false
                show_icon: false
                button_action:
                  tap_action:
                    action: none
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_4
                    show_state: false
                    show_attribute: true
                    attribute: nozzle_temp_min
                    icon: mdi:thermometer-low
                    show_background: false
                  - entity: sensor.bambu_p1s_ams_tray_4
                    show_state: false
                    show_attribute: true
                    attribute: nozzle_temp_max
                    icon: mdi:thermometer-high
                    show_background: false
                modules:
                  - default
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Drying
                icon: mdi:printer-3d-nozzle-heat
                show_attribute: false
                show_state: false
                show_icon: false
                button_action:
                  tap_action:
                    action: none
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_4
                    show_state: false
                    show_attribute: true
                    attribute: drying_temp
                    icon: mdi:thermometer
                    show_background: false
                  - entity: sensor.bambu_p1s_ams_tray_4
                    show_state: false
                    show_attribute: true
                    attribute: drying_time
                    icon: mdi:clock
                    show_background: false
                modules:
                  - default
              - type: custom:bubble-card
                card_type: button
                button_type: name
                name: Serial
                icon: phu:3d-filament
                show_icon: false
                sub_button:
                  - entity: sensor.bambu_p1s_ams_tray_4
                    show_state: false
                    show_attribute: true
                    attribute: tray_uuid
                    show_icon: false
                    show_background: false
                    visibility:
                      - condition: state
                        entity: sensor.bambu_p1s_ams_tray_4
                        state_not: unknown
                modules:
                  - default
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 1fr auto 1fr auto 1fr
                  grid-template-rows: auto
                  grid-template-areas: '". load . unload ."

                    '
                cards:
                  - type: custom:button-card
                    template: button
                    view_layout:
                      grid-area: load
                    name: Load
                    show_state: false
                    icon: mdi:download
                    tap_action:
                      action: call-service
                      service: bambu_lab.load_filament
                      target:
                        device_id: b9e70ce89bcabdccae4b86eeae1918f2
                      data:
                        tray: 4
                  - type: custom:button-card
                    template: button
                    view_layout:
                      grid-area: unload
                    name: Unload
                    show_state: false
                    icon: mdi:upload
                    tap_action:
                      action: call-service
                      service: bambu_lab.unload_filament
                      target:
                        device_id: b9e70ce89bcabdccae4b86eeae1918f2
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: binary_sensor.bambu_p1s_hms_errors
        label: Errors
        content: '{{ state_translated(entity) }}'
        icon: mdi:{{ iif(is_state(entity, "on"), "alert-circle", "check-circle") }}
        color: '{{ iif(is_state(entity, "on"), "red", "green") }}'
        tap_action:
          action: navigate
          navigation_path: '#hms'
        visibility:
          - condition: state
            entity: binary_sensor.bambu_p1s_hms_errors
            state: 'on'
    visible:
      - user: ce9ee65ab49c4ca4af52496609016f1c
      - user: f615672fc2554783beab56221097564e
      - user: 171eeb6104704b03afcad6553b7b793e
      - user: 6905264120304e96aa416e287aca5b80
  - title: Power
    path: power
    icon: mdi:power-plug
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: heading
            icon: mdi:directions-fork
            heading: Energy Distribution
            heading_style: subtitle
          - type: custom:power-flow-card-plus
            entities:
              grid:
                entity: sensor.emporiavue_main_total_power
                secondary_info: {}
              fossil_fuel_percentage:
                entity: sensor.electricity_maps_grid_fossil_fuel_percentage
                color_value: false
                secondary_info:
                  entity: sensor.electricity_maps_grid_low_carbon_percentage
                  unit_of_measurement: '%'
                color_icon: true
              home:
                color_icon: true
                secondary_info:
                  template: ''
                subtract_individual: false
                use_metadata: false
              individual:
                - entity: sensor.emporiavue_sub_total_power
                  name: Sub Panel
                  secondary_info: {}
                - entity: sensor.emporiavue_main_a_c_power
                  name: A/C
                  icon: mdi:air-conditioner
                  display_zero_tolerance: 10
                  secondary_info: {}
                - entity: sensor.emporiavue_main_range_power
                  name: Range
                  icon: mdi:stove
                  display_zero_tolerance: 10
                - entity: sensor.emporiavue_sub_furnace_power
                  name: Furnace
                  icon: mdi:hvac
                  display_zero_tolerance: 10
                - entity: sensor.emporiavue_main_dryer_power
                  name: Dryer
                  icon: mdi:tumble-dryer
                  display_zero_tolerance: 10
            clickable_entities: true
            display_zero_lines:
              mode: show
              transparency: 50
              grey_color:
                - 189
                - 189
                - 189
            use_new_flow_rate_model: true
            w_decimals: 0
            kw_decimals: 1
            min_flow_rate: 0.75
            max_flow_rate: 6
            max_expected_power: 2000
            min_expected_power: 0.01
            watt_threshold: 1000
            transparency_zero_lines: 0
            dashboard_link: /energy
      - type: grid
        cards:
          - type: heading
            icon: mdi:currency-usd
            heading: Cost
            heading_style: subtitle
          - type: grid
            square: false
            columns: 3
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.minute_power_cost
                primary: '{{ "${:.2f}".format(float(states(entity), 0)) }}'
                secondary: Minute
                tap_action:
                  action: more-info
                card_mod:
                  style:
                    mushroom-state-info$: ".container {\n  --card-primary-line-height:\
                      \ 1em;\n  --card-primary-font-size: 30px;\n}\n.primary {\n \
                      \ /*font-family: \"Segoe UI Variable Static Text\", \"Segoe\
                      \ UI\", SegoeUI, -apple-system, BlinkMacSystemFont, system-ui,\
                      \ sans-serif;*/\n  font-weight: 100 !important;\n}\n"
              - type: custom:mushroom-template-card
                entity: sensor.day_power_cost
                primary: '{{ "${:.2f}".format(float(states(entity), 0)) }}'
                secondary: Day
                tap_action:
                  action: more-info
                card_mod:
                  style:
                    mushroom-state-info$: ".container {\n  --card-primary-line-height:\
                      \ 1em;\n  --card-primary-font-size: 30px;\n}\n.primary {\n \
                      \ /*font-family: \"Segoe UI Variable Static Text\", \"Segoe\
                      \ UI\", SegoeUI, -apple-system, BlinkMacSystemFont, system-ui,\
                      \ sans-serif;*/\n  font-weight: 100 !important;\n}\n"
              - type: custom:mushroom-template-card
                entity: sensor.month_power_cost
                primary: '{{ "${:.2f}".format(float(states(entity), 0)) }}'
                secondary: Month
                tap_action:
                  action: more-info
                card_mod:
                  style:
                    mushroom-state-info$: ".container {\n  --card-primary-line-height:\
                      \ 1em;\n  --card-primary-font-size: 30px;\n}\n.primary {\n \
                      \ /*font-family: \"Segoe UI Variable Static Text\", \"Segoe\
                      \ UI\", SegoeUI, -apple-system, BlinkMacSystemFont, system-ui,\
                      \ sans-serif;*/\n  font-weight: 100 !important;\n}\n"
          - type: custom:mushroom-template-card
            entity: select.monthly_energy
            primary: "{%- set tariffs = {\n  \"summer_tier_1\": \"Summer Tier 1\"\
              ,\n  \"summer_tier_2\": \"Summer Tier 2\",\n  \"summer_tier_3\": \"\
              Summer Tier 3\",\n  \"winter_tier_1\": \"Winter Tier 1\",\n  \"winter_tier_2\"\
              : \"Winter Tier 2\",\n  \"winter_tier_3\": \"Winter Tier 3\",\n} -%}\n\
              {% set value = states(entity) %}\n{{ tariffs[value] }}"
            secondary: '{{ states("sensor.tariff_price", with_unit=True) }}'
            icon: mdi:transmission-tower
            icon_color: "{%- set tariffs = {\n  \"summer_tier_1\": \"yellow\",\n \
              \ \"summer_tier_2\": \"orange\",\n  \"summer_tier_3\": \"red\",\n  \"\
              winter_tier_1\": \"purple\",\n  \"winter_tier_2\": \"blue\",\n  \"winter_tier_3\"\
              : \"cyan\",\n} -%}\n{% set value = states(entity) %}\n{{ tariffs[value]\
              \ }}"
            tap_action:
              action: more-info
            layout_options:
              grid_columns: full
        column_span: 1
      - type: grid
        cards:
          - type: heading
            icon: mdi:flash
            heading: Realtime Power
            heading_style: title
          - type: heading
            heading: System
            heading_style: subtitle
          - type: custom:bar-card
            card_mod:
              style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n  text-shadow:\
                \ 1px 1px var(--primary-background-color);\n}\n"
            min: 0
            height: 30px
            positions:
              indicator: inside
            entities:
              - entity: sensor.emporiavue_main_total_power
                name: Total Power
                icon: mdi:transmission-tower
                min: 0
                max: 48000
                severity:
                  - color: var(--green-color)
                    from: 0
                    to: 9600
                  - color: var(--light-green-color)
                    from: 9600
                    to: 19200
                  - color: var(--amber-color)
                    from: 19200
                    to: 28800
                  - color: var(--orange-color)
                    from: 28800
                    to: 38400
                  - color: var(--red-color)
                    from: 38400
                    to: 48000
              - entity: sensor.emporiavue_main_phase_a_power
                name: Main Phase A
                icon: mdi:home-analytics
                max: 24000
                severity:
                  - color: var(--green-color)
                    from: 0
                    to: 4800
                  - color: var(--light-green-color)
                    from: 4800
                    to: 9600
                  - color: var(--amber-color)
                    from: 9600
                    to: 14400
                  - color: var(--orange-color)
                    from: 14400
                    to: 19200
                  - color: var(--red-color)
                    from: 19200
                    to: 24000
              - entity: sensor.emporiavue_main_phase_b_power
                name: Main Phase B
                icon: mdi:home-analytics
                max: 24000
                severity:
                  - color: var(--green-color)
                    from: 0
                    to: 4800
                  - color: var(--light-green-color)
                    from: 4800
                    to: 9600
                  - color: var(--amber-color)
                    from: 9600
                    to: 14400
                  - color: var(--orange-color)
                    from: 14400
                    to: 19200
                  - color: var(--red-color)
                    from: 19200
                    to: 24000
          - type: custom:bar-card
            card_mod:
              style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n  text-shadow:\
                \ 1px 1px var(--primary-background-color);\n}\n"
            min: 0
            height: 30px
            positions:
              indicator: inside
            entities:
              - entity: sensor.emporiavue_sub_total_power
                name: Sub Total Power
                icon: mdi:transmission-tower
                max: 19200
                severity:
                  - color: var(--green-color)
                    from: 0
                    to: 3840
                  - color: var(--light-green-color)
                    from: 3840
                    to: 7680
                  - color: var(--amber-color)
                    from: 7680
                    to: 11520
                  - color: var(--orange-color)
                    from: 11520
                    to: 15360
                  - color: var(--red-color)
                    from: 15360
                    to: 19200
              - entity: sensor.emporiavue_sub_phase_a_power
                name: Sub Phase A
                icon: mdi:home-analytics
                max: 9600
                severity:
                  - color: var(--green-color)
                    from: 0
                    to: 1920
                  - color: var(--light-green-color)
                    from: 1920
                    to: 3840
                  - color: var(--amber-color)
                    from: 3840
                    to: 5760
                  - color: var(--orange-color)
                    from: 5760
                    to: 7680
                  - color: var(--red-color)
                    from: 7680
                    to: 9600
              - entity: sensor.emporiavue_sub_phase_b_power
                name: Sub Phase B
                icon: mdi:home-analytics
                max: 9600
                severity:
                  - color: var(--green-color)
                    from: 0
                    to: 1920
                  - color: var(--light-green-color)
                    from: 1920
                    to: 3840
                  - color: var(--amber-color)
                    from: 3840
                    to: 5760
                  - color: var(--orange-color)
                    from: 5760
                    to: 7680
                  - color: var(--red-color)
                    from: 7680
                    to: 9600
          - type: vertical-stack
            cards:
              - type: heading
                heading: Main
                heading_style: subtitle
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                min: 0
                max: 2400
                decimal: 1
                height: 30px
                positions:
                  indicator: inside
                severity:
                  - color: var(--green-color)
                    from: 0
                    to: 480
                  - color: var(--light-green-color)
                    from: 480
                    to: 960
                  - color: var(--amber-color)
                    from: 960
                    to: 1440
                  - color: var(--orange-color)
                    from: 1440
                    to: 1920
                  - color: var(--red-color)
                    from: 1920
                    to: 2400
                entities:
                  - entity: sensor.emporiavue_main_actual_balance_power
                    name: Main Balance
                    icon: mdi:home-analytics
                    max: 9600
                    severity:
                      - color: var(--green-color)
                        from: 0
                        to: 1920
                      - color: var(--light-green-color)
                        from: 1920
                        to: 3840
                      - color: var(--amber-color)
                        from: 3840
                        to: 5760
                      - color: var(--orange-color)
                        from: 5760
                        to: 7680
                      - color: var(--red-color)
                        from: 7680
                        to: 9600
                  - entity: sensor.emporiavue_main_a_c_power
                    name: Air Conditioner
                    icon: mdi:air-conditioner
                    max: 7200
                    severity:
                      - color: var(--green-color)
                        from: 0
                        to: 1440
                      - color: var(--light-green-color)
                        from: 1440
                        to: 2880
                      - color: var(--amber-color)
                        from: 2880
                        to: 4320
                      - color: var(--orange-color)
                        from: 4320
                        to: 5760
                      - color: var(--red-color)
                        from: 5760
                        to: 7200
                  - entity: sensor.emporiavue_main_dryer_power
                    name: Dryer
                    icon: mdi:tumble-dryer
                    max: 7200
                    severity:
                      - color: var(--green-color)
                        from: 0
                        to: 1440
                      - color: var(--light-green-color)
                        from: 1440
                        to: 2880
                      - color: var(--amber-color)
                        from: 2880
                        to: 4320
                      - color: var(--orange-color)
                        from: 4320
                        to: 5760
                      - color: var(--red-color)
                        from: 5760
                        to: 7200
                  - entity: sensor.emporiavue_main_dishwasher_disposal_power
                    name: Dishwasher / Disposal
                    icon: mdi:dishwasher
                  - entity: sensor.emporiavue_main_garage_laundry_outside_lights_power
                    name: Garage, Laundry, Outside Lights
                    icon: mdi:lightbulb-group
                    max: 1800
                    severity:
                      - color: var(--green-color)
                        from: 0
                        to: 360
                      - color: var(--light-green-color)
                        from: 360
                        to: 720
                      - color: var(--amber-color)
                        from: 720
                        to: 1080
                      - color: var(--orange-color)
                        from: 1080
                        to: 1440
                      - color: var(--red-color)
                        from: 1440
                        to: 1800
                  - entity: sensor.emporiavue_main_garage_outlets_power
                    name: Garage Outlets
                    icon: mdi:power-plug
                  - entity: sensor.emporiavue_main_kitchen_dining_lights_power
                    name: Kitchen, Dining Lights
                    icon: mdi:lightbulb-group
                    max: 1800
                    severity:
                      - color: var(--green-color)
                        from: 0
                        to: 360
                      - color: var(--light-green-color)
                        from: 360
                        to: 720
                      - color: var(--amber-color)
                        from: 720
                        to: 1080
                      - color: var(--orange-color)
                        from: 1080
                        to: 1440
                      - color: var(--red-color)
                        from: 1440
                        to: 1800
                  - entity: sensor.emporiavue_main_kitchen_outlets_1_power
                    name: Kitchen Outlets 1
                    icon: mdi:power-plug
                  - entity: sensor.emporiavue_main_kitchen_outlets_2_power
                    name: Kitchen Outlets 2
                    icon: mdi:power-plug
                  - entity: sensor.emporiavue_main_microwave_power
                    name: Microwave
                    icon: mdi:microwave
                  - entity: sensor.emporiavue_main_outside_outlet_power
                    name: Outside Outlet
                    icon: mdi:power-plug
                    max: 1800
                    severity:
                      - color: var(--green-color)
                        from: 0
                        to: 360
                      - color: var(--light-green-color)
                        from: 360
                        to: 720
                      - color: var(--amber-color)
                        from: 720
                        to: 1080
                      - color: var(--orange-color)
                        from: 1080
                        to: 1440
                      - color: var(--red-color)
                        from: 1440
                        to: 1800
                  - entity: sensor.emporiavue_main_range_power
                    name: Range
                    icon: mdi:stove
                    max: 9600
                    severity:
                      - color: var(--green-color)
                        from: 0
                        to: 1920
                      - color: var(--light-green-color)
                        from: 1920
                        to: 3840
                      - color: var(--amber-color)
                        from: 3840
                        to: 5760
                      - color: var(--orange-color)
                        from: 5760
                        to: 7680
                      - color: var(--red-color)
                        from: 7680
                        to: 9600
                  - entity: sensor.emporiavue_main_washer_power
                    name: Washer
                    icon: mdi:washing-machine
              - type: custom:mod-card
                style:
                  hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                    \ wrap;\n  justify-content: space-between;\n}\nmushroom-template-badge,\
                    \ hui-conditional-card {\n  flex: 0 0 auto !important;\n}\n"
                card:
                  type: grid
                  square: false
                  cards:
                    - type: custom:mushroom-template-badge
                      entity: sensor.emporiavue_main_phase_a_voltage
                      label: Phase A voltage
                      icon: mdi:sine-wave
                      color: blue
                      content: '{{ states(entity, with_unit=true) }}'
                      tap_action:
                        action: more-info
                    - type: custom:mushroom-template-badge
                      entity: sensor.emporiavue_main_phase_a_current
                      label: Phase A current
                      icon: mdi:current-ac
                      color: green
                      content: '{{ states(entity, with_unit=true) }}'
                      tap_action:
                        action: more-info
                    - type: custom:mushroom-template-badge
                      entity: sensor.emporiavue_main_phase_a_frequency
                      label: Phase A frequency
                      icon: mdi:waveform
                      color: amber
                      content: '{{ states(entity, with_unit=true) }}'
                      tap_action:
                        action: more-info
                    - type: custom:mushroom-template-badge
                      entity: sensor.emporiavue_main_phase_b_voltage
                      label: Phase B voltage
                      icon: mdi:sine-wave
                      color: blue
                      content: '{{ states(entity, with_unit=true) }}'
                      tap_action:
                        action: more-info
                    - type: custom:mushroom-template-badge
                      entity: sensor.emporiavue_main_phase_b_current
                      label: Phase B current
                      icon: mdi:current-ac
                      color: green
                      content: '{{ states(entity, with_unit=true) }}'
                      tap_action:
                        action: more-info
                    - type: custom:mushroom-template-badge
                      entity: sensor.emporiavue_main_phase_b_phase_angle
                      label: Phase B phase
                      icon: mdi:cosine-wave
                      color: amber
                      content: '{{ states(entity, with_unit=true) }}'
                      tap_action:
                        action: more-info
          - type: vertical-stack
            cards:
              - type: heading
                heading: Sub
                heading_style: subtitle
              - type: custom:bar-card
                card_mod:
                  style: "bar-card-name,\nbar-card-value {\n  font-weight: 500;\n\
                    \  text-shadow: 1px 1px var(--primary-background-color);\n}\n"
                min: 0
                max: 1800
                decimal: 1
                height: 30px
                positions:
                  indicator: inside
                severity:
                  - color: var(--green-color)
                    from: 0
                    to: 360
                  - color: var(--light-green-color)
                    from: 360
                    to: 720
                  - color: var(--amber-color)
                    from: 720
                    to: 1080
                  - color: var(--orange-color)
                    from: 1080
                    to: 1440
                  - color: var(--red-color)
                    from: 1440
                    to: 1800
                entities:
                  - entity: sensor.emporiavue_sub_balance_power
                    name: Sub Balance
                    icon: mdi:home-analytics
                    max: 9600
                    severity:
                      - color: var(--green-color)
                        from: 0
                        to: 1920
                      - color: var(--light-green-color)
                        from: 1920
                        to: 3840
                      - color: var(--amber-color)
                        from: 3840
                        to: 5760
                      - color: var(--orange-color)
                        from: 5760
                        to: 7680
                      - color: var(--red-color)
                        from: 7680
                        to: 9600
                  - entity: sensor.emporiavue_sub_basement_bath_outlet_power
                    name: Basement Bath Outlet
                    icon: mdi:hair-dryer
                    max: 2400
                    severity:
                      - color: var(--green-color)
                        from: 0
                        to: 480
                      - color: var(--light-green-color)
                        from: 480
                        to: 960
                      - color: var(--amber-color)
                        from: 960
                        to: 1440
                      - color: var(--orange-color)
                        from: 1440
                        to: 1920
                      - color: var(--red-color)
                        from: 1920
                        to: 2400
                  - entity: sensor.emporiavue_sub_basement_bedrooms_power
                    name: Basement Bedrooms
                    icon: mdi:home-floor-0
                  - entity: sensor.emporiavue_sub_basement_lights_utility_room_power
                    name: Basement Lights/Utility Room
                    icon: mdi:progress-wrench
                  - entity: sensor.emporiavue_sub_bathroom_outlets_power
                    name: Bathroom Outlets
                    icon: mdi:hair-dryer
                    max: 2400
                    severity:
                      - color: var(--green-color)
                        from: 0
                        to: 480
                      - color: var(--light-green-color)
                        from: 480
                        to: 960
                      - color: var(--amber-color)
                        from: 960
                        to: 1440
                      - color: var(--orange-color)
                        from: 1440
                        to: 1920
                      - color: var(--red-color)
                        from: 1920
                        to: 2400
                  - entity: sensor.emporiavue_sub_bedroom_lights_power
                    name: Bedroom Lights
                    icon: mdi:lightbulb-group
                  - entity: sensor.emporiavue_sub_eve_outlet_power
                    name: Eve Outlet
                    icon: mdi:rounded-corner
                    max: 2400
                    severity:
                      - color: var(--green-color)
                        from: 0
                        to: 480
                      - color: var(--light-green-color)
                        from: 480
                        to: 960
                      - color: var(--amber-color)
                        from: 960
                        to: 1440
                      - color: var(--orange-color)
                        from: 1440
                        to: 1920
                      - color: var(--red-color)
                        from: 1920
                        to: 2400
                  - entity: sensor.emporiavue_sub_family_room_power
                    name: Family Room
                    icon: mdi:gamepad-circle
                  - entity: sensor.emporiavue_sub_furnace_power
                    name: Furnace
                    icon: mdi:hvac
                  - entity: sensor.emporiavue_sub_hall_bath_lights_main_bed_outlets_power
                    name: Hall, Bath Lights/Main Bed Outlets
                    icon: mdi:home-floor-1
                  - entity: sensor.emporiavue_sub_hall_bedroom_outlets_entry_outside_lights_power
                    name: Hall, Bedroom Outlets/Entry, Outside Lights
                    icon: mdi:home-floor-1
                  - entity: sensor.emporiavue_sub_kitchen_island_power
                    name: Kitchen Island
                    icon: mdi:table-chair
                    max: 2400
                    severity:
                      - color: var(--green-color)
                        from: 0
                        to: 480
                      - color: var(--light-green-color)
                        from: 480
                        to: 960
                      - color: var(--amber-color)
                        from: 960
                        to: 1440
                      - color: var(--orange-color)
                        from: 1440
                        to: 1920
                      - color: var(--red-color)
                        from: 1920
                        to: 2400
                  - entity: sensor.emporiavue_sub_living_room_power
                    name: Living Room
                    icon: mdi:sofa-single
                  - entity: sensor.emporiavue_sub_theater_family_room_outlets_basement_lighting_power
                    name: Theater, Family Outlets/Basement Lighting
                    icon: mdi:theater
              - type: custom:mod-card
                style:
                  hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                    \ wrap;\n  justify-content: space-between;\n}\nmushroom-template-badge,\
                    \ hui-conditional-card {\n  flex: 0 0 auto !important;\n}\n"
                card:
                  type: grid
                  square: false
                  cards:
                    - type: custom:mushroom-template-badge
                      entity: sensor.emporiavue_sub_phase_a_voltage
                      label: Phase A voltage
                      icon: mdi:sine-wave
                      color: blue
                      content: '{{ states(entity, with_unit=true) }}'
                      tap_action:
                        action: more-info
                    - type: custom:mushroom-template-badge
                      entity: sensor.emporiavue_sub_phase_a_current
                      label: Phase A current
                      icon: mdi:current-ac
                      color: green
                      content: '{{ states(entity, with_unit=true) }}'
                      tap_action:
                        action: more-info
                    - type: custom:mushroom-template-badge
                      entity: sensor.emporiavue_sub_phase_a_frequency
                      label: Phase A frequency
                      icon: mdi:waveform
                      color: amber
                      tap_action:
                        action: more-info
                      content: '{{ states(entity, with_unit=true) }}'
                    - type: custom:mushroom-template-badge
                      entity: sensor.emporiavue_sub_phase_b_voltage
                      label: Phase B voltage
                      icon: mdi:sine-wave
                      color: blue
                      content: '{{ states(entity, with_unit=true) }}'
                      tap_action:
                        action: more-info
                    - type: custom:mushroom-template-badge
                      entity: sensor.emporiavue_sub_phase_b_current
                      label: Phase B current
                      icon: mdi:current-ac
                      color: green
                      content: '{{ states(entity, with_unit=true) }}'
                      tap_action:
                        action: more-info
                    - type: custom:mushroom-template-badge
                      entity: sensor.emporiavue_sub_phase_b_phase_angle
                      label: Phase B phase
                      icon: mdi:cosine-wave
                      color: amber
                      content: '{{ states(entity, with_unit=true) }}'
                      tap_action:
                        action: more-info
        column_span: 2
    dense_section_placement: true
    cards: []
    badges:
      - type: custom:mushroom-template-badge
        entity: sensor.emporiavue_main_total_daily
        content: '{{ int(states(entity), 0) }} kWh'
        icon: mdi:calendar-today
        tap_action:
          action: more-info
        label: Today
      - type: custom:mushroom-template-badge
        entity: sensor.emporiavue_main_total_monthly
        content: '{{ int(states(entity), 0) }} kWh'
        icon: mdi:calendar-month
        tap_action:
          action: more-info
        label: This Month
      - type: custom:mushroom-template-badge
        content: Stats
        icon: mdi:chart-sankey-variant
        color: pink
        tap_action:
          action: navigate
          navigation_path: power-stats
    visible:
      - user: ce9ee65ab49c4ca4af52496609016f1c
      - user: f615672fc2554783beab56221097564e
      - user: 171eeb6104704b03afcad6553b7b793e
      - user: 6905264120304e96aa416e287aca5b80
  - type: sections
    max_columns: 3
    title: Power Stats
    path: power-stats
    subview: true
    sections:
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:tabbed-card
                styles:
                  --mdc-theme-primary: var(--state-active-color)
                  --mdc-tab-color-default: var(--secondary-text-color)
                  --mdc-tab-text-label-color-default: var(--secondary-text-color)
                tabs:
                  - card:
                      type: custom:vertical-stack-in-card
                      cards:
                        - type: horizontal-stack
                          cards:
                            - type: custom:apexcharts-card
                              card_mod:
                                style: "ha-card {\n  padding: 0px;\n  border: none;\n\
                                  \  box-shadow: none;\n  margin-bottom: -15px;\n\
                                  }\n#state__value > #state {\n  font-size: 1.2em\
                                  \ !important;\n}\n.apexcharts-tooltip-series-group\
                                  \ {\n  padding-top: 0px !important;\n  padding-bottom:\
                                  \ 0px !important;\n  margin-top: 0px !important;\n\
                                  \  margin-bottom: 0px !important;\n  display: none;\n\
                                  \  text-align: left;\n  justify-content: left;\n\
                                  \  align-items: center;\n}\n"
                              apex_config:
                                chart:
                                  height: 250px
                                  toolbar:
                                    show: false
                                grid:
                                  borderColor: '#7B7B7B'
                                legend:
                                  show: false
                                tooltip:
                                  shared: true
                                title:
                                  text: Current Power
                                  align: center
                                  margin: 10
                                  offsetX: 0
                                  offsetY: 10
                                  floating: true
                                  style:
                                    fontSize: 1rem
                                    fontWeight: bold
                                    color: var(--primary-text-color)
                                xaxis:
                                  tooltip:
                                    enabled: false
                              header:
                                show: false
                                show_states: true
                                colorize_states: true
                                standard_format: true
                              all_series_config:
                                stroke_width: 2
                                float_precision: 0
                                show:
                                  in_header: raw
                                  legend_value: false
                                type: area
                                opacity: 0.2
                                group_by:
                                  func: avg
                                  duration: 5min
                              span:
                                end: minute
                              graph_span: 24h
                              yaxis:
                                - min: ~-500
                                  max: ~500
                                  decimals: 0
                                  apex_config:
                                    tickAmount: 3
                                    forceNiceScale: true
                                    title:
                                      text: W
                                      rotate: 0
                              series:
                                - entity: sensor.emporiavue_main_total_power
                                  name: Home
                                  color: var(--grey-color)
                            - type: custom:button-card
                              tap_action:
                                action: navigate
                                navigation_path: /energy
                              icon: mdi:magnify-expand
                              styles:
                                card:
                                  - width: 3.5rem
                                  - border: none
                                  - background: none
                                  - box-shadow: none
                                  - margin-left: -40px
                        - type: custom:sankey-chart
                          layout: horizontal
                          show_names: true
                          show_icons: true
                          wide: true
                          min_state: 1
                          throttle: 1000
                          round: 0
                          height: 500
                          show_units: true
                          min_box_size: 16
                          card_mod:
                            style: "ha-card {\n  margin: 5px;\n  padding: 0px;\n \
                              \ font-size: 0.8rem;\n  font-weight: bold;\n  border:\
                              \ none;\n  box-shadow: none;\n  overflow-x: clip !important;\n\
                              }\n.container {\n  padding: 0px !important;\n}\n.box\
                              \ div:first-child {\n  color: white;\n}\n"
                          sections:
                            - entities:
                                - entity_id: sensor.emporiavue_main_total_power
                                  color: var(--cyan-color)
                                  name: Home
                                  icon: mdi:home-import-outline
                                  children:
                                    - sensor.emporiavue_sub_total_power
                                    - sensor.emporiavue_main_a_c_power
                                    - sensor.emporiavue_main_dryer_power
                                    - sensor.emporiavue_main_dishwasher_disposal_power
                                    - sensor.emporiavue_main_garage_laundry_outside_lights_power
                                    - sensor.emporiavue_main_garage_outlets_power
                                    - sensor.emporiavue_main_kitchen_dining_lights_power
                                    - sensor.emporiavue_main_kitchen_outlets_1_power
                                    - sensor.emporiavue_main_kitchen_outlets_2_power
                                    - sensor.emporiavue_main_microwave_power
                                    - sensor.emporiavue_main_outside_outlet_power
                                    - sensor.emporiavue_main_range_power
                                    - sensor.emporiavue_main_washer_power
                                    - sensor.remaining
                            - entities:
                                - entity_id: sensor.emporiavue_sub_total_power
                                  name: Sub Panel
                                  icon: mdi:transmission-tower
                                  children:
                                    - sensor.emporiavue_sub_balance_power
                                    - sensor.emporiavue_sub_basement_bath_outlet_power
                                    - sensor.emporiavue_sub_basement_bedrooms_power
                                    - sensor.emporiavue_sub_basement_lights_utility_room_power
                                    - sensor.emporiavue_sub_bathroom_outlets_power
                                    - sensor.emporiavue_sub_bedroom_lights_power
                                    - sensor.emporiavue_sub_eve_outlet_power
                                    - sensor.emporiavue_sub_family_room_power
                                    - sensor.emporiavue_sub_furnace_power
                                    - sensor.emporiavue_sub_hall_bath_lights_main_bed_outlets_power
                                    - sensor.emporiavue_sub_hall_bedroom_outlets_entry_outside_lights_power
                                    - sensor.emporiavue_sub_kitchen_island_power
                                    - sensor.emporiavue_sub_living_room_power
                                    - sensor.emporiavue_sub_theater_family_room_outlets_basement_lighting_power
                                    - sensor.remaining_sub
                                - entity_id: sensor.emporiavue_main_a_c_power
                                  name: Air Conditioner
                                  icon: mdi:air-conditioner
                                - entity_id: sensor.emporiavue_main_dryer_power
                                  name: Dryer
                                  icon: mdi:tumble-dryer
                                - entity_id: sensor.emporiavue_main_dishwasher_disposal_power
                                  name: Dishwasher / Disposal
                                  icon: mdi:dishwasher
                                - entity_id: sensor.emporiavue_main_garage_laundry_outside_lights_power
                                  name: Garage, Laundry, Outside Lights
                                  icon: mdi:lightbulb-group
                                - entity_id: sensor.emporiavue_main_garage_outlets_power
                                  name: Garage Outlets
                                  icon: mdi:power-plug
                                - entity_id: sensor.emporiavue_main_kitchen_dining_lights_power
                                  name: Kitchen, Dining Lights
                                  icon: mdi:lightbulb-group
                                - entity_id: sensor.emporiavue_main_kitchen_outlets_1_power
                                  name: Kitchen Outlets 1
                                  icon: mdi:power-plug
                                - entity_id: sensor.emporiavue_main_kitchen_outlets_2_power
                                  name: Kitchen Outlets 2
                                  icon: mdi:power-plug
                                - entity_id: sensor.emporiavue_main_microwave_power
                                  name: Microwave
                                  icon: mdi:microwave
                                - entity_id: sensor.emporiavue_main_outside_outlet_power
                                  name: Outside Outlet
                                  icon: mdi:power-plug
                                - entity_id: sensor.emporiavue_main_range_power
                                  name: Range
                                  icon: mdi:stove
                                - entity_id: sensor.emporiavue_main_washer_power
                                  name: Washer
                                  icon: mdi:washing-machine
                                - entity_id: sensor.remaining
                                  type: remaining_parent_state
                                  name: Other < 1W
                                  color: var(--grey-color)
                            - entities:
                                - entity_id: sensor.emporiavue_sub_balance_power
                                  name: Sub Balance
                                  icon: mdi:home-analytics
                                - entity_id: sensor.emporiavue_sub_basement_bath_outlet_power
                                  name: Basement Bath Outlet
                                  icon: mdi:hair-dryer
                                - entity_id: sensor.emporiavue_sub_basement_bedrooms_power
                                  name: Basement Bedrooms
                                  icon: mdi:home-floor-0
                                - entity_id: sensor.emporiavue_sub_basement_lights_utility_room_power
                                  name: Basement Lights/Utility Room
                                  icon: mdi:progress-wrench
                                - entity_id: sensor.emporiavue_sub_bathroom_outlets_power
                                  name: Bathroom Outlets
                                  icon: mdi:hair-dryer
                                - entity_id: sensor.emporiavue_sub_bedroom_lights_power
                                  name: Bedroom Lights
                                  icon: mdi:lightbulb-group
                                - entity_id: sensor.emporiavue_sub_eve_outlet_power
                                  name: Eve Outlet
                                  icon: mdi:rounded-corner
                                - entity_id: sensor.emporiavue_sub_family_room_power
                                  name: Family Room
                                  icon: mdi:gamepad-circle
                                - entity_id: sensor.emporiavue_sub_furnace_power
                                  name: Furnace
                                  icon: mdi:hvac
                                - entity_id: sensor.emporiavue_sub_hall_bath_lights_main_bed_outlets_power
                                  name: Hall, Bath Lights/Main Bed Outlets
                                  icon: mdi:home-floor-1
                                - entity_id: sensor.emporiavue_sub_hall_bedroom_outlets_entry_outside_lights_power
                                  name: Hall, Bedroom Outlets/Entry, Outside Lights
                                  icon: mdi:home-floor-1
                                - entity_id: sensor.emporiavue_sub_kitchen_island_power
                                  name: Kitchen Island
                                  icon: mdi:table-chair
                                - entity_id: sensor.emporiavue_sub_living_room_power
                                  name: Living Room
                                  icon: mdi:sofa-single
                                - entity_id: sensor.emporiavue_sub_theater_family_room_outlets_basement_lighting_power
                                  name: Theater, Family Outlets/Basement Lighting
                                  icon: mdi:theater
                                - entity_id: sensor.remaining_sub
                                  type: remaining_parent_state
                                  name: Other < 1W
                                  color: var(--grey-color)
                      card_mod:
                        style: "ha-card {\n  padding: 0px;\n  border: none;\n  box-shadow:\
                          \ none;\n}\n"
                    attributes:
                      minWidth: true
                      label: Current
                      icon: mdi:clock-outline
                  - card:
                      type: custom:vertical-stack-in-card
                      cards:
                        - type: custom:tabbed-card
                          styles:
                            --mdc-theme-primary: var(--state-active-color)
                            --mdc-tab-color-default: var(--secondary-text-color)
                            --mdc-tab-text-label-color-default: var(--secondary-text-color)
                          tabs:
                            - card:
                                type: vertical-stack
                                cards:
                                  - type: horizontal-stack
                                    cards:
                                      - type: custom:apexcharts-card
                                        card_mod:
                                          style: "ha-card {\n  padding: 0px;\n  border:\
                                            \ none;\n  box-shadow: none;\n}\n#state__value\
                                            \ > #state {\n  font-size: 1.2em !important;\n\
                                            }\n"
                                        stacked: true
                                        apex_config:
                                          chart:
                                            height: 200px
                                            toolbar:
                                              show: false
                                          grid:
                                            borderColor: '#7B7B7B'
                                          legend:
                                            show: false
                                          tooltip:
                                            shared: true
                                          xaxis:
                                            tooltip:
                                              enabled: false
                                        span:
                                          start: day
                                        graph_span: 1d
                                        header:
                                          show: false
                                          show_states: true
                                          colorize_states: true
                                          standard_format: true
                                        all_series_config:
                                          stroke_width: 2
                                          opacity: 0.2
                                          float_precision: 1
                                          show:
                                            in_header: raw
                                            legend_value: false
                                          type: column
                                          statistics:
                                            type: sum
                                          group_by:
                                            func: diff
                                            start_with_last: true
                                            duration: 1hour
                                        yaxis:
                                          - min: ~1
                                            max: ~1
                                            apex_config:
                                              tickAmount: 4
                                              forceNiceScale: true
                                              title:
                                                text: kWh
                                        series:
                                          - entity: sensor.emporiavue_main_total_daily
                                            type: area
                                            opacity: 0.2
                                            name: Home
                                            color: var(--grey-color)
                                      - type: custom:button-card
                                        tap_action:
                                          action: navigate
                                          navigation_path: /energy
                                        icon: mdi:magnify-expand
                                        styles:
                                          card:
                                            - width: 3.5rem
                                            - border: none
                                            - background: none
                                            - box-shadow: none
                                            - margin-left: -40px
                                  - type: custom:sankey-chart
                                    layout: horizontal
                                    show_names: true
                                    show_icons: true
                                    unit_prefix: k
                                    wide: true
                                    throttle: 1000
                                    round: 2
                                    height: 500
                                    show_units: true
                                    min_box_size: 16
                                    card_mod:
                                      style: "ha-card {\n  margin: 5px;\n  padding:\
                                        \ 0px;\n  font-size: 0.8rem;\n  font-weight:\
                                        \ bold;\n  border: none;\n  box-shadow: none;\n\
                                        \  overflow-x: clip !important;\n}\n.container\
                                        \ {\n  padding: 0px !important;\n}\n.box div:first-child\
                                        \ {\n  color: white;\n}\n"
                                    sections:
                                      - entities:
                                          - entity_id: sensor.emporiavue_main_total_daily
                                            color: var(--cyan-color)
                                            name: Home
                                            icon: mdi:home-import-outline
                                            children:
                                              - sensor.emporiavue_sub_total_daily
                                              - sensor.emporiavue_main_a_c_daily
                                              - sensor.emporiavue_main_dryer_daily
                                              - sensor.emporiavue_main_dishwasher_disposal_daily
                                              - sensor.emporiavue_main_garage_laundry_outside_lights_daily
                                              - sensor.emporiavue_main_garage_outlets_daily
                                              - sensor.emporiavue_main_kitchen_dining_lights_daily
                                              - sensor.emporiavue_main_kitchen_outlets_1_daily
                                              - sensor.emporiavue_main_kitchen_outlets_2_daily
                                              - sensor.emporiavue_main_microwave_daily
                                              - sensor.emporiavue_main_outside_outlet_daily
                                              - sensor.emporiavue_main_range_daily
                                              - sensor.emporiavue_main_washer_daily
                                              - sensor.remaining
                                      - entities:
                                          - entity_id: sensor.emporiavue_sub_total_daily
                                            name: Sub Panel
                                            icon: mdi:transmission-tower
                                            children:
                                              - sensor.emporiavue_sub_balance_daily
                                              - sensor.emporiavue_sub_basement_bath_outlet_daily
                                              - sensor.emporiavue_sub_basement_bedrooms_daily
                                              - sensor.emporiavue_sub_basement_lights_utility_room_daily
                                              - sensor.emporiavue_sub_bathroom_outlets_daily
                                              - sensor.emporiavue_sub_bedroom_lights_daily
                                              - sensor.emporiavue_sub_eve_outlet_daily
                                              - sensor.emporiavue_sub_family_room_daily
                                              - sensor.emporiavue_sub_furnace_daily
                                              - sensor.emporiavue_sub_hall_bath_lights_main_bed_outlets_daily
                                              - sensor.emporiavue_sub_hall_bedroom_outlets_entry_outside_lights_daily
                                              - sensor.emporiavue_sub_kitchen_island_daily
                                              - sensor.emporiavue_sub_living_room_daily
                                              - sensor.emporiavue_sub_theater_family_room_outlets_basement_lighting_daily
                                              - sensor.remaining_sub
                                          - entity_id: sensor.emporiavue_main_a_c_daily
                                            name: Air Conditioner
                                            icon: mdi:air-conditioner
                                          - entity_id: sensor.emporiavue_main_dryer_daily
                                            name: Dryer
                                            icon: mdi:tumble-dryer
                                          - entity_id: sensor.emporiavue_main_dishwasher_disposal_daily
                                            name: Dishwasher / Disposal
                                            icon: mdi:dishwasher
                                          - entity_id: sensor.emporiavue_main_garage_laundry_outside_lights_daily
                                            name: Garage, Laundry, Outside Lights
                                            icon: mdi:lightbulb-group
                                          - entity_id: sensor.emporiavue_main_garage_outlets_daily
                                            name: Garage Outlets
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_kitchen_dining_lights_daily
                                            name: Kitchen, Dining Lights
                                            icon: mdi:lightbulb-group
                                          - entity_id: sensor.emporiavue_main_kitchen_outlets_1_daily
                                            name: Kitchen Outlets 1
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_kitchen_outlets_2_daily
                                            name: Kitchen Outlets 2
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_microwave_daily
                                            name: Microwave
                                            icon: mdi:microwave
                                          - entity_id: sensor.emporiavue_main_outside_outlet_daily
                                            name: Outside Outlet
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_range_daily
                                            name: Range
                                            icon: mdi:stove
                                          - entity_id: sensor.emporiavue_main_washer_daily
                                            name: Washer
                                            icon: mdi:washing-machine
                                          - entity_id: sensor.remaining
                                            type: remaining_parent_state
                                            name: Other < 1W
                                            color: var(--grey-color)
                                      - entities:
                                          - entity_id: sensor.emporiavue_sub_balance_daily
                                            name: Sub Balance
                                            icon: mdi:home-analytics
                                          - entity_id: sensor.emporiavue_sub_basement_bath_outlet_daily
                                            name: Basement Bath Outlet
                                            icon: mdi:hair-dryer
                                          - entity_id: sensor.emporiavue_sub_basement_bedrooms_daily
                                            name: Basement Bedrooms
                                            icon: mdi:home-floor-0
                                          - entity_id: sensor.emporiavue_sub_basement_lights_utility_room_daily
                                            name: Basement Lights/Utility Room
                                            icon: mdi:progress-wrench
                                          - entity_id: sensor.emporiavue_sub_bathroom_outlets_daily
                                            name: Bathroom Outlets
                                            icon: mdi:hair-dryer
                                          - entity_id: sensor.emporiavue_sub_bedroom_lights_daily
                                            name: Bedroom Lights
                                            icon: mdi:lightbulb-group
                                          - entity_id: sensor.emporiavue_sub_eve_outlet_daily
                                            name: Eve Outlet
                                            icon: mdi:rounded-corner
                                          - entity_id: sensor.emporiavue_sub_family_room_daily
                                            name: Family Room
                                            icon: mdi:gamepad-circle
                                          - entity_id: sensor.emporiavue_sub_furnace_daily
                                            name: Furnace
                                            icon: mdi:hvac
                                          - entity_id: sensor.emporiavue_sub_hall_bath_lights_main_bed_outlets_daily
                                            name: Hall, Bath Lights/Main Bed Outlets
                                            icon: mdi:home-floor-1
                                          - entity_id: sensor.emporiavue_sub_hall_bedroom_outlets_entry_outside_lights_daily
                                            name: Hall, Bedroom Outlets/Entry, Outside
                                              Lights
                                            icon: mdi:home-floor-1
                                          - entity_id: sensor.emporiavue_sub_kitchen_island_daily
                                            name: Kitchen Island
                                            icon: mdi:table-chair
                                          - entity_id: sensor.emporiavue_sub_living_room_daily
                                            name: Living Room
                                            icon: mdi:sofa-single
                                          - entity_id: sensor.emporiavue_sub_theater_family_room_outlets_basement_lighting_daily
                                            name: Theater, Family Outlets/Basement
                                              Lighting
                                            icon: mdi:theater
                                          - entity_id: sensor.remaining_sub
                                            type: remaining_parent_state
                                            name: Other < 1W
                                            color: var(--grey-color)
                              attributes:
                                minWidth: true
                                stacked: false
                                label: Today
                                icon: mdi:calendar-today-outline
                            - card:
                                type: vertical-stack
                                cards:
                                  - type: horizontal-stack
                                    cards:
                                      - type: custom:apexcharts-card
                                        card_mod:
                                          style: "ha-card {\n  padding: 0px;\n  border:\
                                            \ none;\n  box-shadow: none;\n}\n#state__value\
                                            \ > #state {\n  font-size: 1.2em !important;\n\
                                            }\n"
                                        stacked: true
                                        apex_config:
                                          chart:
                                            height: 200px
                                            toolbar:
                                              show: false
                                          grid:
                                            borderColor: '#7B7B7B'
                                          legend:
                                            show: false
                                          tooltip:
                                            shared: true
                                          xaxis:
                                            tooltip:
                                              enabled: false
                                        span:
                                          end: day
                                        graph_span: 7d
                                        header:
                                          show: false
                                          show_states: true
                                          colorize_states: true
                                          standard_format: true
                                        all_series_config:
                                          stroke_width: 2
                                          opacity: 0.2
                                          float_precision: 1
                                          show:
                                            in_header: raw
                                            legend_value: false
                                          type: column
                                          statistics:
                                            type: sum
                                          group_by:
                                            func: diff
                                            start_with_last: true
                                            duration: 1day
                                        yaxis:
                                          - min: ~1
                                            max: ~70
                                            apex_config:
                                              tickAmount: 4
                                              forceNiceScale: true
                                              title:
                                                text: kWh
                                        series:
                                          - entity: sensor.emporiavue_main_total_weekly
                                            opacity: 0.2
                                            name: Home
                                            color: var(--grey-color)
                                      - type: custom:button-card
                                        tap_action:
                                          action: navigate
                                          navigation_path: /energy
                                        icon: mdi:magnify-expand
                                        styles:
                                          card:
                                            - width: 3.5rem
                                            - border: none
                                            - background: none
                                            - box-shadow: none
                                            - margin-left: -40px
                                  - type: custom:sankey-chart
                                    layout: horizontal
                                    show_names: true
                                    show_icons: true
                                    wide: true
                                    unit_prefix: k
                                    round: 2
                                    height: 300
                                    show_units: true
                                    min_box_size: 16
                                    card_mod:
                                      style: "ha-card {\n  margin: 5px;\n  padding:\
                                        \ 0px;\n  font-size: 0.8rem;\n  font-weight:\
                                        \ bold;\n  border: none;\n  box-shadow: none;\n\
                                        \  overflow-x: clip !important;\n}\n.container\
                                        \ {\n  padding: 0px !important;\n}\n.box div:first-child\
                                        \ {\n  color: white;\n}\n"
                                    sections:
                                      - entities:
                                          - entity_id: sensor.emporiavue_main_total_weekly
                                            color: var(--cyan-color)
                                            name: Home
                                            icon: mdi:home-import-outline
                                            children:
                                              - sensor.emporiavue_sub_total_weekly
                                              - sensor.emporiavue_main_a_c_weekly
                                              - sensor.emporiavue_main_dryer_weekly
                                              - sensor.emporiavue_main_dishwasher_disposal_weekly
                                              - sensor.emporiavue_main_garage_laundry_outside_lights_weekly
                                              - sensor.emporiavue_main_garage_outlets_weekly
                                              - sensor.emporiavue_main_kitchen_dining_lights_weekly
                                              - sensor.emporiavue_main_kitchen_outlets_1_weekly
                                              - sensor.emporiavue_main_kitchen_outlets_2_weekly
                                              - sensor.emporiavue_main_microwave_weekly
                                              - sensor.emporiavue_main_outside_outlet_weekly
                                              - sensor.emporiavue_main_range_weekly
                                              - sensor.emporiavue_main_washer_weekly
                                              - sensor.remaining
                                      - entities:
                                          - entity_id: sensor.emporiavue_sub_total_weekly
                                            name: Sub Panel
                                            icon: mdi:transmission-tower
                                            children:
                                              - sensor.emporiavue_sub_balance_weekly
                                              - sensor.emporiavue_sub_basement_bath_outlet_weekly
                                              - sensor.emporiavue_sub_basement_bedrooms_weekly
                                              - sensor.emporiavue_sub_basement_lights_utility_room_weekly
                                              - sensor.emporiavue_sub_bathroom_outlets_weekly
                                              - sensor.emporiavue_sub_bedroom_lights_weekly
                                              - sensor.emporiavue_sub_eve_outlet_weekly
                                              - sensor.emporiavue_sub_family_room_weekly
                                              - sensor.emporiavue_sub_furnace_weekly
                                              - sensor.emporiavue_sub_hall_bath_lights_main_bed_outlets_weekly
                                              - sensor.emporiavue_sub_hall_bedroom_outlets_entry_outside_lights_weekly
                                              - sensor.emporiavue_sub_kitchen_island_weekly
                                              - sensor.emporiavue_sub_living_room_weekly
                                              - sensor.emporiavue_sub_theater_family_room_outlets_basement_lighting_weekly
                                              - sensor.remaining_sub
                                          - entity_id: sensor.emporiavue_main_a_c_weekly
                                            name: Air Conditioner
                                            icon: mdi:air-conditioner
                                          - entity_id: sensor.emporiavue_main_dryer_weekly
                                            name: Dryer
                                            icon: mdi:tumble-dryer
                                          - entity_id: sensor.emporiavue_main_dishwasher_disposal_weekly
                                            name: Dishwasher / Disposal
                                            icon: mdi:dishwasher
                                          - entity_id: sensor.emporiavue_main_garage_laundry_outside_lights_weekly
                                            name: Garage, Laundry, Outside Lights
                                            icon: mdi:lightbulb-group
                                          - entity_id: sensor.emporiavue_main_garage_outlets_weekly
                                            name: Garage Outlets
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_kitchen_dining_lights_weekly
                                            name: Kitchen, Dining Lights
                                            icon: mdi:lightbulb-group
                                          - entity_id: sensor.emporiavue_main_kitchen_outlets_1_weekly
                                            name: Kitchen Outlets 1
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_kitchen_outlets_2_weekly
                                            name: Kitchen Outlets 2
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_microwave_weekly
                                            name: Microwave
                                            icon: mdi:microwave
                                          - entity_id: sensor.emporiavue_main_outside_outlet_weekly
                                            name: Outside Outlet
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_range_weekly
                                            name: Range
                                            icon: mdi:stove
                                          - entity_id: sensor.emporiavue_main_washer_weekly
                                            name: Washer
                                            icon: mdi:washing-machine
                                          - entity_id: sensor.remaining
                                            type: remaining_parent_state
                                            name: Other < 1W
                                            color: var(--grey-color)
                                      - entities:
                                          - entity_id: sensor.emporiavue_sub_balance_weekly
                                            name: Sub Balance
                                            icon: mdi:home-analytics
                                          - entity_id: sensor.emporiavue_sub_basement_bath_outlet_weekly
                                            name: Basement Bath Outlet
                                            icon: mdi:hair-dryer
                                          - entity_id: sensor.emporiavue_sub_basement_bedrooms_weekly
                                            name: Basement Bedrooms
                                            icon: mdi:home-floor-0
                                          - entity_id: sensor.emporiavue_sub_basement_lights_utility_room_weekly
                                            name: Basement Lights/Utility Room
                                            icon: mdi:progress-wrench
                                          - entity_id: sensor.emporiavue_sub_bathroom_outlets_weekly
                                            name: Bathroom Outlets
                                            icon: mdi:hair-dryer
                                          - entity_id: sensor.emporiavue_sub_bedroom_lights_weekly
                                            name: Bedroom Lights
                                            icon: mdi:lightbulb-group
                                          - entity_id: sensor.emporiavue_sub_eve_outlet_weekly
                                            name: Eve Outlet
                                            icon: mdi:rounded-corner
                                          - entity_id: sensor.emporiavue_sub_family_room_weekly
                                            name: Family Room
                                            icon: mdi:gamepad-circle
                                          - entity_id: sensor.emporiavue_sub_furnace_weekly
                                            name: Furnace
                                            icon: mdi:hvac
                                          - entity_id: sensor.emporiavue_sub_hall_bath_lights_main_bed_outlets_weekly
                                            name: Hall, Bath Lights/Main Bed Outlets
                                            icon: mdi:home-floor-1
                                          - entity_id: sensor.emporiavue_sub_hall_bedroom_outlets_entry_outside_lights_weekly
                                            name: Hall, Bedroom Outlets/Entry, Outside
                                              Lights
                                            icon: mdi:home-floor-1
                                          - entity_id: sensor.emporiavue_sub_kitchen_island_weekly
                                            name: Kitchen Island
                                            icon: mdi:table-chair
                                          - entity_id: sensor.emporiavue_sub_living_room_weekly
                                            name: Living Room
                                            icon: mdi:sofa-single
                                          - entity_id: sensor.emporiavue_sub_theater_family_room_outlets_basement_lighting_weekly
                                            name: Theater, Family Outlets/Basement
                                              Lighting
                                            icon: mdi:theater
                                          - entity_id: sensor.remaining_sub
                                            type: remaining_parent_state
                                            name: Other < 1W
                                            color: var(--grey-color)
                              attributes:
                                minWidth: true
                                stacked: false
                                label: Week
                                icon: mdi:calendar-week-outline
                            - card:
                                type: vertical-stack
                                cards:
                                  - type: horizontal-stack
                                    cards:
                                      - type: custom:apexcharts-card
                                        card_mod:
                                          style: "ha-card {\n  padding: 0px;\n  border:\
                                            \ none;\n  box-shadow: none;\n}\n#state__value\
                                            \ > #state {\n  font-size: 1.2em !important;\n\
                                            }\n"
                                        stacked: true
                                        apex_config:
                                          chart:
                                            height: 200px
                                            toolbar:
                                              show: false
                                          grid:
                                            borderColor: '#7B7B7B'
                                          legend:
                                            show: false
                                          tooltip:
                                            shared: true
                                          xaxis:
                                            tooltip:
                                              enabled: false
                                        span:
                                          end: day
                                        graph_span: 30d
                                        header:
                                          show: false
                                          show_states: true
                                          colorize_states: true
                                          standard_format: true
                                        all_series_config:
                                          stroke_width: 2
                                          opacity: 0.2
                                          float_precision: 1
                                          show:
                                            in_header: raw
                                            legend_value: false
                                          type: column
                                          statistics:
                                            type: sum
                                          group_by:
                                            func: diff
                                            start_with_last: true
                                            duration: 1day
                                        yaxis:
                                          - min: ~1
                                            max: ~70
                                            apex_config:
                                              tickAmount: 4
                                              forceNiceScale: true
                                              title:
                                                text: kWh
                                        series:
                                          - entity: sensor.emporiavue_main_total_monthly
                                            opacity: 0.2
                                            name: Home
                                            color: var(--grey-color)
                                      - type: custom:button-card
                                        tap_action:
                                          action: navigate
                                          navigation_path: /energy
                                        icon: mdi:magnify-expand
                                        styles:
                                          card:
                                            - width: 3.5rem
                                            - border: none
                                            - background: none
                                            - box-shadow: none
                                            - margin-left: -40px
                                  - type: custom:sankey-chart
                                    layout: horizontal
                                    show_names: true
                                    show_icons: true
                                    wide: true
                                    unit_prefix: k
                                    round: 2
                                    height: 300
                                    show_units: true
                                    min_box_size: 16
                                    card_mod:
                                      style: "ha-card {\n  margin: 5px;\n  padding:\
                                        \ 0px;\n  font-size: 0.8rem;\n  font-weight:\
                                        \ bold;\n  border: none;\n  box-shadow: none;\n\
                                        \  overflow-x: clip !important;\n}\n.container\
                                        \ {\n  padding: 0px !important;\n}\n.box div:first-child\
                                        \ {\n  color: white;\n}\n"
                                    sections:
                                      - entities:
                                          - entity_id: sensor.emporiavue_main_total_monthly
                                            color: var(--cyan-color)
                                            name: Home
                                            icon: mdi:home-import-outline
                                            children:
                                              - sensor.emporiavue_sub_total_monthly
                                              - sensor.emporiavue_main_a_c_monthly
                                              - sensor.emporiavue_main_dryer_monthly
                                              - sensor.emporiavue_main_dishwasher_disposal_monthly
                                              - sensor.emporiavue_main_garage_laundry_outside_lights_monthly
                                              - sensor.emporiavue_main_garage_outlets_monthly
                                              - sensor.emporiavue_main_kitchen_dining_lights_monthly
                                              - sensor.emporiavue_main_kitchen_outlets_1_monthly
                                              - sensor.emporiavue_main_kitchen_outlets_2_monthly
                                              - sensor.emporiavue_main_microwave_monthly
                                              - sensor.emporiavue_main_outside_outlet_monthly
                                              - sensor.emporiavue_main_range_monthly
                                              - sensor.emporiavue_main_washer_monthly
                                              - sensor.remaining
                                      - entities:
                                          - entity_id: sensor.emporiavue_sub_total_monthly
                                            name: Sub Panel
                                            icon: mdi:transmission-tower
                                            children:
                                              - sensor.emporiavue_sub_balance_monthly
                                              - sensor.emporiavue_sub_basement_bath_outlet_monthly
                                              - sensor.emporiavue_sub_basement_bedrooms_monthly
                                              - sensor.emporiavue_sub_basement_lights_utility_room_monthly
                                              - sensor.emporiavue_sub_bathroom_outlets_monthly
                                              - sensor.emporiavue_sub_bedroom_lights_monthly
                                              - sensor.emporiavue_sub_eve_outlet_monthly
                                              - sensor.emporiavue_sub_family_room_monthly
                                              - sensor.emporiavue_sub_furnace_monthly
                                              - sensor.emporiavue_sub_hall_bath_lights_main_bed_outlets_monthly
                                              - sensor.emporiavue_sub_hall_bedroom_outlets_entry_outside_lights_monthly
                                              - sensor.emporiavue_sub_kitchen_island_monthly
                                              - sensor.emporiavue_sub_living_room_monthly
                                              - sensor.emporiavue_sub_theater_family_room_outlets_basement_lighting_monthly
                                              - sensor.remaining_sub
                                          - entity_id: sensor.emporiavue_main_a_c_monthly
                                            name: Air Conditioner
                                            icon: mdi:air-conditioner
                                          - entity_id: sensor.emporiavue_main_dryer_monthly
                                            name: Dryer
                                            icon: mdi:tumble-dryer
                                          - entity_id: sensor.emporiavue_main_dishwasher_disposal_monthly
                                            name: Dishwasher / Disposal
                                            icon: mdi:dishwasher
                                          - entity_id: sensor.emporiavue_main_garage_laundry_outside_lights_monthly
                                            name: Garage, Laundry, Outside Lights
                                            icon: mdi:lightbulb-group
                                          - entity_id: sensor.emporiavue_main_garage_outlets_monthly
                                            name: Garage Outlets
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_kitchen_dining_lights_monthly
                                            name: Kitchen, Dining Lights
                                            icon: mdi:lightbulb-group
                                          - entity_id: sensor.emporiavue_main_kitchen_outlets_1_monthly
                                            name: Kitchen Outlets 1
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_kitchen_outlets_2_monthly
                                            name: Kitchen Outlets 2
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_microwave_monthly
                                            name: Microwave
                                            icon: mdi:microwave
                                          - entity_id: sensor.emporiavue_main_outside_outlet_monthly
                                            name: Outside Outlet
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_range_monthly
                                            name: Range
                                            icon: mdi:stove
                                          - entity_id: sensor.emporiavue_main_washer_monthly
                                            name: Washer
                                            icon: mdi:washing-machine
                                          - entity_id: sensor.remaining
                                            type: remaining_parent_state
                                            name: Other < 1W
                                            color: var(--grey-color)
                                      - entities:
                                          - entity_id: sensor.emporiavue_sub_balance_monthly
                                            name: Sub Balance
                                            icon: mdi:home-analytics
                                          - entity_id: sensor.emporiavue_sub_basement_bath_outlet_monthly
                                            name: Basement Bath Outlet
                                            icon: mdi:hair-dryer
                                          - entity_id: sensor.emporiavue_sub_basement_bedrooms_monthly
                                            name: Basement Bedrooms
                                            icon: mdi:home-floor-0
                                          - entity_id: sensor.emporiavue_sub_basement_lights_utility_room_monthly
                                            name: Basement Lights/Utility Room
                                            icon: mdi:progress-wrench
                                          - entity_id: sensor.emporiavue_sub_bathroom_outlets_monthly
                                            name: Bathroom Outlets
                                            icon: mdi:hair-dryer
                                          - entity_id: sensor.emporiavue_sub_bedroom_lights_monthly
                                            name: Bedroom Lights
                                            icon: mdi:lightbulb-group
                                          - entity_id: sensor.emporiavue_sub_eve_outlet_monthly
                                            name: Eve Outlet
                                            icon: mdi:rounded-corner
                                          - entity_id: sensor.emporiavue_sub_family_room_monthly
                                            name: Family Room
                                            icon: mdi:gamepad-circle
                                          - entity_id: sensor.emporiavue_sub_furnace_monthly
                                            name: Furnace
                                            icon: mdi:hvac
                                          - entity_id: sensor.emporiavue_sub_hall_bath_lights_main_bed_outlets_monthly
                                            name: Hall, Bath Lights/Main Bed Outlets
                                            icon: mdi:home-floor-1
                                          - entity_id: sensor.emporiavue_sub_hall_bedroom_outlets_entry_outside_lights_monthly
                                            name: Hall, Bedroom Outlets/Entry, Outside
                                              Lights
                                            icon: mdi:home-floor-1
                                          - entity_id: sensor.emporiavue_sub_kitchen_island_monthly
                                            name: Kitchen Island
                                            icon: mdi:table-chair
                                          - entity_id: sensor.emporiavue_sub_living_room_monthly
                                            name: Living Room
                                            icon: mdi:sofa-single
                                          - entity_id: sensor.emporiavue_sub_theater_family_room_outlets_basement_lighting_monthly
                                            name: Theater, Family Outlets/Basement
                                              Lighting
                                            icon: mdi:theater
                                          - entity_id: sensor.remaining_sub
                                            type: remaining_parent_state
                                            name: Other < 1W
                                            color: var(--grey-color)
                              attributes:
                                minWidth: true
                                stacked: false
                                label: Month
                                icon: mdi:calendar-month-outline
                            - card:
                                type: vertical-stack
                                cards:
                                  - type: horizontal-stack
                                    cards:
                                      - type: custom:apexcharts-card
                                        card_mod:
                                          style: "ha-card {\n  padding: 0px;\n  border:\
                                            \ none;\n  box-shadow: none;\n}\n#state__value\
                                            \ > #state {\n  font-size: 1.2em !important;\n\
                                            }\n"
                                        stacked: true
                                        apex_config:
                                          chart:
                                            height: 200px
                                            toolbar:
                                              show: false
                                          grid:
                                            borderColor: '#7B7B7B'
                                          legend:
                                            show: false
                                          tooltip:
                                            shared: true
                                          xaxis:
                                            tooltip:
                                              enabled: false
                                        span:
                                          end: month
                                        graph_span: 1year
                                        header:
                                          show: false
                                          show_states: true
                                          colorize_states: true
                                          standard_format: true
                                        all_series_config:
                                          stroke_width: 2
                                          opacity: 0.2
                                          float_precision: 1
                                          show:
                                            in_header: raw
                                            legend_value: false
                                          type: column
                                          statistics:
                                            type: sum
                                          group_by:
                                            func: diff
                                            start_with_last: true
                                            duration: 30day
                                        yaxis:
                                          - min: ~-500
                                            max: ~1500
                                            apex_config:
                                              tickAmount: 4
                                              forceNiceScale: true
                                              title:
                                                text: kWh
                                        series:
                                          - entity: sensor.emporiavue_main_total_yearly
                                            opacity: 0.2
                                            name: Home
                                            color: var(--grey-color)
                                      - type: custom:button-card
                                        tap_action:
                                          action: navigate
                                          navigation_path: /energy
                                        icon: mdi:magnify-expand
                                        styles:
                                          card:
                                            - width: 3.5rem
                                            - border: none
                                            - background: none
                                            - box-shadow: none
                                            - margin-left: -40px
                                  - type: custom:sankey-chart
                                    layout: horizontal
                                    show_names: true
                                    show_icons: true
                                    wide: true
                                    unit_prefix: k
                                    round: 2
                                    height: 300
                                    show_units: true
                                    min_box_size: 16
                                    card_mod:
                                      style: "ha-card {\n  margin: 5px;\n  padding:\
                                        \ 0px;\n  font-size: 0.8rem;\n  font-weight:\
                                        \ bold;\n  border: none;\n  box-shadow: none;\n\
                                        \  overflow-x: clip !important;\n}\n.container\
                                        \ {\n  padding: 0px !important;\n}\n.box div:first-child\
                                        \ {\n  color: white;\n}\n"
                                    sections:
                                      - entities:
                                          - entity_id: sensor.emporiavue_main_total_yearly
                                            color: var(--cyan-color)
                                            name: Home
                                            icon: mdi:home-import-outline
                                            children:
                                              - sensor.emporiavue_sub_total_yearly
                                              - sensor.emporiavue_main_a_c_yearly
                                              - sensor.emporiavue_main_dryer_yearly
                                              - sensor.emporiavue_main_dishwasher_disposal_yearly
                                              - sensor.emporiavue_main_garage_laundry_outside_lights_yearly
                                              - sensor.emporiavue_main_garage_outlets_yearly
                                              - sensor.emporiavue_main_kitchen_dining_lights_yearly
                                              - sensor.emporiavue_main_kitchen_outlets_1_yearly
                                              - sensor.emporiavue_main_kitchen_outlets_2_yearly
                                              - sensor.emporiavue_main_microwave_yearly
                                              - sensor.emporiavue_main_outside_outlet_yearly
                                              - sensor.emporiavue_main_range_yearly
                                              - sensor.emporiavue_main_washer_yearly
                                              - sensor.remaining
                                      - entities:
                                          - entity_id: sensor.emporiavue_sub_total_yearly
                                            name: Sub Panel
                                            icon: mdi:transmission-tower
                                            children:
                                              - sensor.emporiavue_sub_balance_yearly
                                              - sensor.emporiavue_sub_basement_bath_outlet_yearly
                                              - sensor.emporiavue_sub_basement_bedrooms_yearly
                                              - sensor.emporiavue_sub_basement_lights_utility_room_yearly
                                              - sensor.emporiavue_sub_bathroom_outlets_yearly
                                              - sensor.emporiavue_sub_bedroom_lights_yearly
                                              - sensor.emporiavue_sub_eve_outlet_yearly
                                              - sensor.emporiavue_sub_family_room_yearly
                                              - sensor.emporiavue_sub_furnace_yearly
                                              - sensor.emporiavue_sub_hall_bath_lights_main_bed_outlets_yearly
                                              - sensor.emporiavue_sub_hall_bedroom_outlets_entry_outside_lights_yearly
                                              - sensor.emporiavue_sub_kitchen_island_yearly
                                              - sensor.emporiavue_sub_living_room_yearly
                                              - sensor.emporiavue_sub_theater_family_room_outlets_basement_lighting_yearly
                                              - sensor.remaining_sub
                                          - entity_id: sensor.emporiavue_main_a_c_yearly
                                            name: Air Conditioner
                                            icon: mdi:air-conditioner
                                          - entity_id: sensor.emporiavue_main_dryer_yearly
                                            name: Dryer
                                            icon: mdi:tumble-dryer
                                          - entity_id: sensor.emporiavue_main_dishwasher_disposal_yearly
                                            name: Dishwasher / Disposal
                                            icon: mdi:dishwasher
                                          - entity_id: sensor.emporiavue_main_garage_laundry_outside_lights_yearly
                                            name: Garage, Laundry, Outside Lights
                                            icon: mdi:lightbulb-group
                                          - entity_id: sensor.emporiavue_main_garage_outlets_yearly
                                            name: Garage Outlets
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_kitchen_dining_lights_yearly
                                            name: Kitchen, Dining Lights
                                            icon: mdi:lightbulb-group
                                          - entity_id: sensor.emporiavue_main_kitchen_outlets_1_yearly
                                            name: Kitchen Outlets 1
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_kitchen_outlets_2_yearly
                                            name: Kitchen Outlets 2
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_microwave_yearly
                                            name: Microwave
                                            icon: mdi:microwave
                                          - entity_id: sensor.emporiavue_main_outside_outlet_yearly
                                            name: Outside Outlet
                                            icon: mdi:power-plug
                                          - entity_id: sensor.emporiavue_main_range_yearly
                                            name: Range
                                            icon: mdi:stove
                                          - entity_id: sensor.emporiavue_main_washer_yearly
                                            name: Washer
                                            icon: mdi:washing-machine
                                          - entity_id: sensor.remaining
                                            type: remaining_parent_state
                                            name: Other < 1W
                                            color: var(--grey-color)
                                      - entities:
                                          - entity_id: sensor.emporiavue_sub_balance_yearly
                                            name: Sub Balance
                                            icon: mdi:home-analytics
                                          - entity_id: sensor.emporiavue_sub_basement_bath_outlet_yearly
                                            name: Basement Bath Outlet
                                            icon: mdi:hair-dryer
                                          - entity_id: sensor.emporiavue_sub_basement_bedrooms_yearly
                                            name: Basement Bedrooms
                                            icon: mdi:home-floor-0
                                          - entity_id: sensor.emporiavue_sub_basement_lights_utility_room_yearly
                                            name: Basement Lights/Utility Room
                                            icon: mdi:progress-wrench
                                          - entity_id: sensor.emporiavue_sub_bathroom_outlets_yearly
                                            name: Bathroom Outlets
                                            icon: mdi:hair-dryer
                                          - entity_id: sensor.emporiavue_sub_bedroom_lights_yearly
                                            name: Bedroom Lights
                                            icon: mdi:lightbulb-group
                                          - entity_id: sensor.emporiavue_sub_eve_outlet_yearly
                                            name: Eve Outlet
                                            icon: mdi:rounded-corner
                                          - entity_id: sensor.emporiavue_sub_family_room_yearly
                                            name: Family Room
                                            icon: mdi:gamepad-circle
                                          - entity_id: sensor.emporiavue_sub_furnace_yearly
                                            name: Furnace
                                            icon: mdi:hvac
                                          - entity_id: sensor.emporiavue_sub_hall_bath_lights_main_bed_outlets_yearly
                                            name: Hall, Bath Lights/Main Bed Outlets
                                            icon: mdi:home-floor-1
                                          - entity_id: sensor.emporiavue_sub_hall_bedroom_outlets_entry_outside_lights_yearly
                                            name: Hall, Bedroom Outlets/Entry, Outside
                                              Lights
                                            icon: mdi:home-floor-1
                                          - entity_id: sensor.emporiavue_sub_kitchen_island_yearly
                                            name: Kitchen Island
                                            icon: mdi:table-chair
                                          - entity_id: sensor.emporiavue_sub_living_room_yearly
                                            name: Living Room
                                            icon: mdi:sofa-single
                                          - entity_id: sensor.emporiavue_sub_theater_family_room_outlets_basement_lighting_yearly
                                            name: Theater, Family Outlets/Basement
                                              Lighting
                                            icon: mdi:theater
                                          - entity_id: sensor.remaining_sub
                                            type: remaining_parent_state
                                            name: Other < 1W
                                            color: var(--grey-color)
                              attributes:
                                minWidth: true
                                stacked: false
                                label: Year
                                icon: mdi:calendar-multiple
                          options:
                            defaultTabIndex: 0
                      card_mod:
                        style: "ha-card {\n  padding: 0px;\n  border: none;\n  box-shadow:\
                          \ none;\n}\n"
                    attributes:
                      minWidth: true
                      stacked: false
                      label: Consumption
                      icon: mdi:counter
                options:
                  defaultTabIndex: 0
            grid_options:
              columns: full
        column_span: 3
    icon: mdi:chart-sankey-variant
    cards: []
  - type: sections
    max_columns: 2
    title: R2Dee2
    path: r2dee2
    icon: mdi:robot-vacuum
    subview: true
    sections:
      - type: grid
        cards:
          - type: heading
            heading: Controls and History
            heading_style: title
            icon: mdi:map-marker-radius
          - type: custom:tabbed-card
            attributes:
              minWidth: true
            styles:
              --mdc-theme-primary: var(--state-active-color)
              --mdc-tab-color-default: var(--secondary-text-color)
              --mdc-tab-text-label-color-default: var(--secondary-text-color)
            tabs:
              - card:
                  type: custom:xiaomi-vacuum-map-card
                  map_source:
                    camera: camera.r2dee2_map
                  calibration_source:
                    camera: true
                  entity: vacuum.r2dee2
                  vacuum_platform: Tasshack/dreame-vacuum
                  tiles:
                    - tile_id: status
                      entity: vacuum.r2dee2
                      attribute: status
                      icon: mdi:robot-vacuum
                    - tile_id: drying_progress
                      entity: vacuum.r2dee2
                      attribute: drying_progress
                      icon: mdi:heat-wave
                      unit: '%'
                      conditions:
                        - entity: vacuum.r2dee2
                          attribute: drying_progress
                          value_not: '0'
                    - tile_id: cleaning_progress
                      entity: vacuum.r2dee2
                      attribute: cleaning_progress
                      icon: mdi:progress-helper
                      unit: '%'
                      conditions:
                        - entity: vacuum.r2dee2
                          attribute: cleaning_progress
                          value_not: '0'
                    - tile_id: battery_level
                      entity: vacuum.r2dee2
                      attribute: battery_level
                      icon_source: vacuum.r2dee2.attributes.battery_icon
                      unit: '%'
                    - tile_id: fan_speed
                      entity: vacuum.r2dee2
                      attribute: fan_speed
                      icon: mdi:fan
                    - tile_id: mop_pad_humidity
                      attribute: mop_pad_humidity
                      label: Mop pad
                      icon: mdi:water-percent
                      entity: vacuum.r2dee2
                      precision: 0
                    - tile_id: cleaned_area
                      attribute: cleaned_area
                      icon: mdi:ruler-square
                      multiplier: 10.764
                      unit: ft²
                      entity: vacuum.r2dee2
                      precision: 0
                    - tile_id: cleaning_time
                      attribute: cleaning_time
                      icon: mdi:timer-sand
                      unit: min
                      entity: vacuum.r2dee2
                      precision: 0
                    - tile_id: cleaning_mode
                      attribute: cleaning_mode
                      entity: vacuum.r2dee2
                    - tile_id: cleaning_count
                      attribute: cleaning_count
                      icon: mdi:counter
                      unit: x
                      entity: vacuum.r2dee2
                      precision: 0
                    - tile_id: total_cleaned_area
                      attribute: total_cleaned_area
                      icon: mdi:set-square
                      multiplier: 10.764
                      unit: ft²
                      entity: vacuum.r2dee2
                      precision: 0
                  map_modes:
                    - template: vacuum_clean_zone
                    - template: vacuum_clean_point
                    - template: vacuum_clean_segment
                      predefined_selections:
                        - id: '1'
                          icon:
                            name: mdi:toilet
                            x: -1050
                            y: 9150
                          label:
                            text: Main Bathroom
                            x: -1050
                            y: 9150
                            offset_y: 35
                          outline:
                            - - -2300
                              - 7900
                            - - 200
                              - 7900
                            - - 200
                              - 9600
                            - - -2300
                              - 9600
                        - id: '2'
                          icon:
                            name: mdi:chair-rolling
                            x: -6150
                            y: 9250
                          label:
                            text: Amy's Office
                            x: -6150
                            y: 9250
                            offset_y: 35
                          outline:
                            - - -7650
                              - 7600
                            - - -4750
                              - 7600
                            - - -4350
                              - 8150
                            - - -4350
                              - 10650
                            - - -7650
                              - 10650
                        - id: '3'
                          icon:
                            name: mdi:bed-double
                            x: 2400
                            y: 7850
                          label:
                            text: Main Bedroom
                            x: 2400
                            y: 7850
                            offset_y: 35
                          outline:
                            - - -800
                              - 6800
                            - - 4550
                              - 6800
                            - - 4550
                              - 10700
                            - - 200
                              - 10700
                            - - 200
                              - 7900
                            - - -800
                              - 7900
                        - id: '4'
                          icon:
                            name: mdi:bed
                            x: -6200
                            y: 6500
                          label:
                            text: Emma's Bedroom
                            x: -6200
                            y: 6500
                            offset_y: 35
                          outline:
                            - - -8250
                              - 4900
                            - - -4100
                              - 4900
                            - - -4100
                              - 6600
                            - - -4750
                              - 7600
                            - - -8250
                              - 7600
                        - id: '5'
                          icon:
                            name: mdi:toilet
                            x: -2700
                            y: 5850
                          label:
                            text: Bathroom
                            x: -2700
                            y: 5850
                            offset_y: 35
                          outline:
                            - - -3250
                              - 5000
                            - - -2250
                              - 5000
                            - - -2250
                              - 6600
                            - - -3250
                              - 6600
                        - id: '6'
                          icon:
                            name: mdi:walk
                            x: -2750
                            y: 7200
                          label:
                            text: Hallway
                            x: -2750
                            y: 7200
                            offset_y: 35
                          outline:
                            - - -4100
                              - 6600
                            - - -800
                              - 6600
                            - - -800
                              - 7850
                            - - -3650
                              - 7850
                            - - -4350
                              - 8150
                            - - -4750
                              - 7600
                        - id: '7'
                          icon:
                            name: mdi:home-outline
                            x: -4800
                            y: 3200
                          label:
                            text: Entryway
                            x: -4800
                            y: 3200
                            offset_y: 35
                          outline:
                            - - -5500
                              - 2250
                            - - -4050
                              - 2250
                            - - -4050
                              - 4050
                            - - -5500
                              - 4050
                        - id: '8'
                          icon:
                            name: mdi:hanger
                            x: -1700
                            y: 850
                          label:
                            text: Mud Room
                            x: -1700
                            y: 850
                            offset_y: 35
                          outline:
                            - - -2450
                              - -100
                            - - -850
                              - -100
                            - - -850
                              - 1650
                            - - -2450
                              - 1650
                        - id: '9'
                          icon:
                            name: mdi:table-chair
                            x: 1650
                            y: 200
                          label:
                            text: Dining Room
                            x: 1650
                            y: 200
                            offset_y: 35
                          outline:
                            - - -850
                              - -1450
                            - - 4250
                              - -1450
                            - - 4250
                              - 1850
                            - - -850
                              - 1850
                        - id: '10'
                          icon:
                            name: mdi:tshirt-v
                            x: -2800
                            y: 9000
                          label:
                            text: Main Closet
                            x: -2800
                            y: 9000
                            offset_y: 35
                          outline:
                            - - -3650
                              - 7850
                            - - -2300
                              - 7850
                            - - -2300
                              - 10300
                            - - -3650
                              - 10300
                        - id: '11'
                          icon:
                            name: mdi:washing-machine
                            x: -1800
                            y: -600
                          label:
                            text: Laundry
                            x: -1800
                            y: -600
                            offset_y: 35
                          outline:
                            - - -2450
                              - -1100
                            - - -1050
                              - -1100
                            - - -1050
                              - -100
                            - - -2450
                              - -100
                        - id: '12'
                          icon:
                            name: mdi:chef-hat
                            x: 1750
                            y: -2600
                          label:
                            text: Kitchen
                            x: 1750
                            y: -2600
                            offset_y: 35
                          outline:
                            - - 0
                              - -3150
                            - - 3350
                              - -3150
                            - - 3350
                              - -1450
                            - - 0
                              - -1450
                        - id: '13'
                          icon:
                            name: mdi:sofa-outline
                            x: -850
                            y: 4250
                          label:
                            text: Living Room
                            x: -850
                            y: 4250
                            offset_y: 35
                          outline:
                            - - 4100
                              - 1850
                            - - -4000
                              - 1850
                            - - -4000
                              - 4200
                            - - -2150
                              - 4200
                            - - -2150
                              - 6700
                            - - 4100
                              - 6700
                attributes:
                  label: Controls
                  icon: mdi:map-marker-radius
              - card:
                  type: custom:button-card
                  entity: camera.r2dee2_map
                  icon: mdi:clipboard-text-clock
                  tap_action:
                    action: none
                  entity_picture: '[[[ return function(t){const e=t._config;if(t.shadowRoot.querySelector("hui-error-card")&&!t._u)return
                    t._u=!0,t.style.opacity=0,void setTimeout((function(){t.style.opacity=1,t.update()}),0);if(!t.__shouldUpdate){t._u=!1;const
                    i=/v=([^&]*)/,o=/index=([^&]*)/;t.__shouldUpdate=t.shouldUpdate,t.shouldUpdate=function(t){const
                    e=this;let o=e.__shouldUpdate(t);if(t&&t.has("_config"))return
                    e.shouldUpdate=e.__shouldUpdate,e.__shouldUpdate=null,e._s=null,!0;const
                    a=e._config,n=e._hass.states[a.entity],l=t.get("_hass"),s=l?l.states[a.entity]:null;if(o=l&&s!=n,!o)return!1;e._l&&(e._l.stateObj=n);let
                    r=e.__items(e._hass);const c=e.__items(l)[0].join(",")!==r[0].join(",");if(e._i&&n&&!c){if(!c&&e._i&&n&&e._a){const
                    t=n.attributes.access_token;if(t!=e._a&&(e._config.hold_action.url_path=e._i[1].replace(e._a,t),e._a=t,this._config.custom_fields))return!0}return
                    e.hass=e._hass,!1}let d=0;const u=e._s;if(n){const t=n.attributes.access_token;if(!c&&t!=e._a){let
                    i=n.attributes[a.picture_list+"_picture"];if(i)if("string"==typeof
                    i||i instanceof String)i=i.replace(e._a,t);else for(let o=0;o<r[0].length;o++)i[r[0][o]]=i[r[0][o]].replace(e._a,t)}if(e._a=t,d=u&&""===u.value?0:parseInt(u.value),d<0||d>=r[0].length)d=0;else
                    if(d>0&&r[0].length>0&&(d=0,e._i&&(d=r[0].indexOf(e._i[0]),-1===d))){d=0;let
                    t=e._i[1].match(i)[1];for(let e=0;e<r[1].length;e++)if(t==r[1][e].match(i)[1]){d=e;break}}}return
                    u.label=!(!a.label||!n)&&a.label,e.__populate(d,r[0],u),u.dispatchEvent(new
                    Event("change")),o},t.__items=function(t){if(t){const e=t.states[this._config.entity];if(e&&e.attributes){const
                    t=e.attributes[this._config.picture_list+"_picture"];if(t){if("string"==typeof
                    t||t instanceof String)return[[""],[t]];{const e=Object.values(t);if(e.length)return[Object.keys(t),e]}}}}return[[],[]]},t.__populate=function(t,e,i){const
                    o={"(Completed)":"✔️","(Interrupted)":"❌","(Manually Ignored)":"⛔","(Automatically
                    Ignored)":"⭕","(Edited)":"📝","(Original)":"✅","(Backup)":"💾"},a=new
                    RegExp(Object.keys(o).join("|").replaceAll(")","\\)").replaceAll("(","\\("),"g"),n=function(t){return
                    t&&t.length?t.replace(a,(t=>o[t])):""};(t<0||t>=e.length)&&(t=0);let
                    l="";for(let s=0;s<e.length;s++)l+=''<mwc-list-item value="''+s+''"''+(t==s?"
                    selected activated":"")+">"+n(e[s])+"</mwc-list-item>";i.innerHTML=l,i.value=t+"",i.selectedText=n(e[t])};const
                    a="picture-selector",n=t.shadowRoot.querySelector("ha-card#"+a);n&&n.remove();const
                    l=document.createElement("ha-card");let s;l.id=a,l.style.cssText="cursor:default;display:block;padding:12px
                    16px 16px;overflow:visible;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:none;",t.shadowRoot.children.length?t.shadowRoot.insertBefore(l,t.shadowRoot.children[0]):t.shadowRoot.appendChild(l),e.title&&e.title.length&&("
                    "!==e.title&&(s=document.createElement("h1"),s.className="card-header",s.style.padding="0
                    0 4px 0",s.innerHTML=''<div class="name">''+e.title+"</div>",l.appendChild(s)),e.styles.grid||(e.styles.grid=[]),e.styles.grid=e.styles.grid.concat([{cursor:"default"},{display:"block"},{margin:"0
                    16px 16px"},{overflow:"hidden"},{"border-radius":"var(--ha-card-border-radius,12px)"},{"border-width":"var(--ha-card-border-width,1px)"},{"border-style":"solid"},{"border-color":"var(--ha-card-border-color,var(--divider-color,#e0e0e0))"},{background:"var(--input-disabled-fill-color);"}]));const
                    r=t._hass.states[e.entity];t._a=r?r.attributes.access_token:"";const
                    c=t.__items(t._hass),d=document.createElement("ha-select");if(d.style.cssText="width:auto;display:block;",e.icon&&e.icon.length){d.style.cssText+="margin:4px
                    0 0 40px;";const i=document.createElement("state-badge");i.stateObj=r,i.overrideIcon=e.icon,i.style.cssText="float:left;margin-top:12px;",l.appendChild(i),t._l=i}d.label=!(!e.label||!r)&&e.label,d.value="0",d.naturalMenuWidth=!0,1==c[0].length&&0==c[0][0].length&&(s?(d.style.display="none",t._l&&(t._l.style.display="none"),s.style.padding="0"):l.style.display="none"),t.__populate(0,c[0],d),l.appendChild(d),t._s=d;const
                    u=function(e){const i=function(i){if(!i)return;const o=function(t){const
                    e=t.target.parentElement.querySelectorAll("ha-circular-progress").forEach((t=>t.remove()));e&&e.remove(),t.target.style.cursor=""};i.onload=function(t){i.style.height="",t.target.style.opacity=1,o(t),t.target.onload=null},i.onerror=function(e){t._i=!1,o(e),t.update()},i.style.opacity=0,i.style.cursor="wait",e&&0==i.naturalHeight&&i.width&&(i.style.height=i.width+"px");const
                    a=document.createElement("ha-circular-progress");a.active=!0,a.size="large",a.style.position="absolute",i.parentElement.appendChild(a)},o=t.shadowRoot.querySelector("#icon");o&&"IMG"==o.tagName?i(o):setTimeout((function(){const
                    e=t.shadowRoot.querySelector("#icon");e&&0==e.naturalHeight&&e.width&&(e.style.height=e.width+"px"),i(e)}),0)};d.addEventListener(''closed'',function(e){e.stopPropagation()});if(d.onchange=function(e){if(""!=e.target.value){const
                    a=t.__items(t._hass);if(0===a[1].length)return void(t._i=!1);const
                    n=parseInt(e.target.value);if(n>=0&&n<a[1].length&&(!t._i||t._i[0]!=a[0][n]&&t._i[1]!=a[1][n])){if(t._i){if(t._i[0]=a[0][n],t._i[1].match(i)[1]===a[1][n].match(i)[1])return;t._i[1]=a[1][n]}else
                    t._i=[a[0][n],a[1][n]];t._config.hold_action.url_path=t._i[1];const
                    e=t._i[1].match(o);t._x=e&&e.length>1?e[1]:"",u(),t.update()}}},t._i=!1,t._config.hold_action={action:"url"},c[0].length){t._config.hold_action.url_path=c[1][0];const
                    e=c[1][0].match(o);t._x=e&&e.length>1?e[1]:"";const i=t.shadowRoot.querySelector("#icon");i&&"IMG"==i.tagName?t._i=[c[0][0],c[1][0]]:(t.style.opacity=0,setTimeout((function(){t._i=[c[0][0],c[1][0]],u(!0),t.update(),t.style.opacity=1}),0))}}return
                    t._i?t._i[1]+(e.extra_params&&e.extra_params.length?"&"+e.extra_params:""):void
                    0}(this) ]]]

                    '
                  picture_list: cleaning_history
                  size: 100%
                  show_name: false
                  show_entity_picture: true
                  styles:
                    icon:
                      - transition: opacity 180ms ease-in-out 0s
                    card:
                      - --mdc-ripple-color: rgba(0,0,0,0)
                      - padding: 0
                      - border-top-left-radius: 0
                      - border-top-right-radius: 0
                      - border-top: none
                attributes:
                  label: Cleaning History
                  icon: mdi:clock
      - type: grid
        cards:
          - type: custom:tabbed-card
            attributes:
              minWidth: true
            styles:
              --mdc-theme-primary: var(--state-active-color)
              --mdc-tab-color-default: var(--secondary-text-color)
              --mdc-tab-text-label-color-default: var(--secondary-text-color)
            tabs:
              - card:
                  type: custom:button-card
                  entity: camera.r2dee2_map
                  icon: mdi:traffic-cone
                  entity_picture: '[[[ return function(t){const e=t._config;if(t.shadowRoot.querySelector("hui-error-card")&&!t._u)return
                    t._u=!0,t.style.opacity=0,void setTimeout((function(){t.style.opacity=1,t.update()}),0);if(!t.__shouldUpdate){t._u=!1;const
                    i=/v=([^&]*)/,o=/index=([^&]*)/;t.__shouldUpdate=t.shouldUpdate,t.shouldUpdate=function(t){const
                    e=this;let o=e.__shouldUpdate(t);if(t&&t.has("_config"))return
                    e.shouldUpdate=e.__shouldUpdate,e.__shouldUpdate=null,e._s=null,!0;const
                    a=e._config,n=e._hass.states[a.entity],l=t.get("_hass"),s=l?l.states[a.entity]:null;if(o=l&&s!=n,!o)return!1;e._l&&(e._l.stateObj=n);let
                    r=e.__items(e._hass);const c=e.__items(l)[0].join(",")!==r[0].join(",");if(e._i&&n&&!c){if(!c&&e._i&&n&&e._a){const
                    t=n.attributes.access_token;if(t!=e._a&&(e._config.hold_action.url_path=e._i[1].replace(e._a,t),e._a=t,this._config.custom_fields))return!0}return
                    e.hass=e._hass,!1}let d=0;const u=e._s;if(n){const t=n.attributes.access_token;if(!c&&t!=e._a){let
                    i=n.attributes[a.picture_list+"_picture"];if(i)if("string"==typeof
                    i||i instanceof String)i=i.replace(e._a,t);else for(let o=0;o<r[0].length;o++)i[r[0][o]]=i[r[0][o]].replace(e._a,t)}if(e._a=t,d=u&&""===u.value?0:parseInt(u.value),d<0||d>=r[0].length)d=0;else
                    if(d>0&&r[0].length>0&&(d=0,e._i&&(d=r[0].indexOf(e._i[0]),-1===d))){d=0;let
                    t=e._i[1].match(i)[1];for(let e=0;e<r[1].length;e++)if(t==r[1][e].match(i)[1]){d=e;break}}}return
                    u.label=!(!a.label||!n)&&a.label,e.__populate(d,r[0],u),u.dispatchEvent(new
                    Event("change")),o},t.__items=function(t){if(t){const e=t.states[this._config.entity];if(e&&e.attributes){const
                    t=e.attributes[this._config.picture_list+"_picture"];if(t){if("string"==typeof
                    t||t instanceof String)return[[""],[t]];{const e=Object.values(t);if(e.length)return[Object.keys(t),e]}}}}return[[],[]]},t.__populate=function(t,e,i){const
                    o={"(Completed)":"✔️","(Interrupted)":"❌","(Manually Ignored)":"⛔","(Automatically
                    Ignored)":"⭕","(Edited)":"📝","(Original)":"✅","(Backup)":"💾"},a=new
                    RegExp(Object.keys(o).join("|").replaceAll(")","\\)").replaceAll("(","\\("),"g"),n=function(t){return
                    t&&t.length?t.replace(a,(t=>o[t])):""};(t<0||t>=e.length)&&(t=0);let
                    l="";for(let s=0;s<e.length;s++)l+=''<mwc-list-item value="''+s+''"''+(t==s?"
                    selected activated":"")+">"+n(e[s])+"</mwc-list-item>";i.innerHTML=l,i.value=t+"",i.selectedText=n(e[t])};const
                    a="picture-selector",n=t.shadowRoot.querySelector("ha-card#"+a);n&&n.remove();const
                    l=document.createElement("ha-card");let s;l.id=a,l.style.cssText="cursor:default;display:block;padding:12px
                    16px 16px;overflow:visible;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:none;",t.shadowRoot.children.length?t.shadowRoot.insertBefore(l,t.shadowRoot.children[0]):t.shadowRoot.appendChild(l),e.title&&e.title.length&&("
                    "!==e.title&&(s=document.createElement("h1"),s.className="card-header",s.style.padding="0
                    0 4px 0",s.innerHTML=''<div class="name">''+e.title+"</div>",l.appendChild(s)),e.styles.grid||(e.styles.grid=[]),e.styles.grid=e.styles.grid.concat([{cursor:"default"},{display:"block"},{margin:"0
                    16px 16px"},{overflow:"hidden"},{"border-radius":"var(--ha-card-border-radius,12px)"},{"border-width":"var(--ha-card-border-width,1px)"},{"border-style":"solid"},{"border-color":"var(--ha-card-border-color,var(--divider-color,#e0e0e0))"},{background:"var(--input-disabled-fill-color);"}]));const
                    r=t._hass.states[e.entity];t._a=r?r.attributes.access_token:"";const
                    c=t.__items(t._hass),d=document.createElement("ha-select");if(d.style.cssText="width:auto;display:block;",e.icon&&e.icon.length){d.style.cssText+="margin:4px
                    0 0 40px;";const i=document.createElement("state-badge");i.stateObj=r,i.overrideIcon=e.icon,i.style.cssText="float:left;margin-top:12px;",l.appendChild(i),t._l=i}d.label=!(!e.label||!r)&&e.label,d.value="0",d.naturalMenuWidth=!0,1==c[0].length&&0==c[0][0].length&&(s?(d.style.display="none",t._l&&(t._l.style.display="none"),s.style.padding="0"):l.style.display="none"),t.__populate(0,c[0],d),l.appendChild(d),t._s=d;const
                    u=function(e){const i=function(i){if(!i)return;const o=function(t){const
                    e=t.target.parentElement.querySelectorAll("ha-circular-progress").forEach((t=>t.remove()));e&&e.remove(),t.target.style.cursor=""};i.onload=function(t){i.style.height="",t.target.style.opacity=1,o(t),t.target.onload=null},i.onerror=function(e){t._i=!1,o(e),t.update()},i.style.opacity=0,i.style.cursor="wait",e&&0==i.naturalHeight&&i.width&&(i.style.height=i.width+"px");const
                    a=document.createElement("ha-circular-progress");a.active=!0,a.size="large",a.style.position="absolute",i.parentElement.appendChild(a)},o=t.shadowRoot.querySelector("#icon");o&&"IMG"==o.tagName?i(o):setTimeout((function(){const
                    e=t.shadowRoot.querySelector("#icon");e&&0==e.naturalHeight&&e.width&&(e.style.height=e.width+"px"),i(e)}),0)};d.addEventListener(''closed'',function(e){e.stopPropagation()});if(d.onchange=function(e){if(""!=e.target.value){const
                    a=t.__items(t._hass);if(0===a[1].length)return void(t._i=!1);const
                    n=parseInt(e.target.value);if(n>=0&&n<a[1].length&&(!t._i||t._i[0]!=a[0][n]&&t._i[1]!=a[1][n])){if(t._i){if(t._i[0]=a[0][n],t._i[1].match(i)[1]===a[1][n].match(i)[1])return;t._i[1]=a[1][n]}else
                    t._i=[a[0][n],a[1][n]];t._config.hold_action.url_path=t._i[1];const
                    e=t._i[1].match(o);t._x=e&&e.length>1?e[1]:"",u(),t.update()}}},t._i=!1,t._config.hold_action={action:"url"},c[0].length){t._config.hold_action.url_path=c[1][0];const
                    e=c[1][0].match(o);t._x=e&&e.length>1?e[1]:"";const i=t.shadowRoot.querySelector("#icon");i&&"IMG"==i.tagName?t._i=[c[0][0],c[1][0]]:(t.style.opacity=0,setTimeout((function(){t._i=[c[0][0],c[1][0]],u(!0),t.update(),t.style.opacity=1}),0))}}return
                    t._i?t._i[1]+(e.extra_params&&e.extra_params.length?"&"+e.extra_params:""):void
                    0}(this) ]]]

                    '
                  picture_list: obstacle
                  size: 100%
                  show_entity_picture: true
                  show_name: false
                  custom_fields:
                    buttons:
                      card:
                        type: custom:button-card
                        template: button
                        name: "[[[ return (!this.__c || this.__c(this.__o())\n  ?\
                          \ 'Cancel Ignore'\n  : 'Ignore Obstacle');\n]]]\n"
                        icon: "[[[ return (!this.__c || this.__c(this.__o())\n  ?\
                          \ 'mdi:eye'\n  : 'mdi:eye-off');\n]]]\n"
                        confirmation: '[[[ return this.__c && !this.__c(this.__o());
                          ]]]

                          '
                        tap_action:
                          action: call-service
                          service: dreame_vacuum.vacuum_set_obstacle_ignore
                          data: '[[[ return function(t){t.__o||(t.__o=function(){const
                            n=t._hass.states[t._config.entity];return n&&n.attributes.obstacles&&n.attributes.obstacles[t._i?t._x:""]},t.__c=function(t){return
                            t&&t.ignore_status&&"Not Ignored"!==t.ignore_status},t.__d=function(t){return
                            t&&t.ignore_status&&t.ignore_status.indexOf("Automatically")>=0});const
                            n=t.__o();if(n)return{entity_id:t._config.entity.replace("camera.","vacuum.").substring(0,t._config.entity.lastIndexOf("_map")),x:n.x,y:n.y,obstacle_ignored:!t.__c(n)}}(this);
                            ]]]

                            '
                        styles:
                          card:
                            - background-color: "[[[ return (!this.__d || this.__d(this.__o())\n\
                                \  ? 'color-mix(in srgb, var(--grey-color), transparent\
                                \ 85%)'\n  : 'color-mix(in srgb, var(--yellow-color),\
                                \ transparent 85%)');\n]]]\n"
                            - pointer-events: "[[[ return (!this.__d || this.__d(this.__o())\n\
                                \  ? 'none'\n  : 'auto');\n]]]\n"
                          name:
                            - color: "[[[ return (!this.__d || this.__d(this.__o())\n\
                                \  ? 'var(--state-icon-unavailable-color)'\n  : 'var(--primary-text-color)');\n\
                                ]]]\n"
                          icon:
                            - color: "[[[ return (!this.__d || this.__d(this.__o())\n\
                                \  ? 'var(--state-icon-unavailable-color)'\n  : 'var(--primary-text-color)');\n\
                                ]]]\n"
                        extra_styles: "[[[ return (!this.__d || this.__d(this.__o())\n\
                          \  ? \"@media (hover: hover) { ha-card:hover { background:\
                          \ color-mix(in srgb, var(--grey-color), transparent 80%)\
                          \ !important; } }\"\n  : \"@media (hover: hover) { ha-card:hover\
                          \ { background: color-mix(in srgb, var(--yellow-color),\
                          \ transparent 80%) !important; } }\");\n]]]\n"
                  styles:
                    custom_fields:
                      buttons:
                        - cursor: '[[[ return (!this.__d || this.__d(this.__o()) ?
                            ''not-allowed'' : ''default''); ]]]

                            '
                        - margin: 16px
                        - display: '[[[ const o = this.__o(); return (o && o.ignore_status
                            ? ''inline-block'': ''none''); ]]]

                            '
                        - width: auto
                    grid:
                      - display: block
                    icon:
                      - transition: opacity 180ms ease-in-out 0s
                    card:
                      - --mdc-ripple-color: rgba(0,0,0,0)
                      - padding: 0
                      - border-top-left-radius: 0
                      - border-top-right-radius: 0
                      - border-top: none
                attributes:
                  label: Obstacles
                  icon: mdi:cone
              - card:
                  type: custom:button-card
                  entity: camera.r2dee2_map
                  icon: mdi:wifi-marker
                  tap_action:
                    action: none
                  entity_picture: '[[[ return function(t){const e=t._config;if(t.shadowRoot.querySelector("hui-error-card")&&!t._u)return
                    t._u=!0,t.style.opacity=0,void setTimeout((function(){t.style.opacity=1,t.update()}),0);if(!t.__shouldUpdate){t._u=!1;const
                    i=/v=([^&]*)/,o=/index=([^&]*)/;t.__shouldUpdate=t.shouldUpdate,t.shouldUpdate=function(t){const
                    e=this;let o=e.__shouldUpdate(t);if(t&&t.has("_config"))return
                    e.shouldUpdate=e.__shouldUpdate,e.__shouldUpdate=null,e._s=null,!0;const
                    a=e._config,n=e._hass.states[a.entity],l=t.get("_hass"),s=l?l.states[a.entity]:null;if(o=l&&s!=n,!o)return!1;e._l&&(e._l.stateObj=n);let
                    r=e.__items(e._hass);const c=e.__items(l)[0].join(",")!==r[0].join(",");if(e._i&&n&&!c){if(!c&&e._i&&n&&e._a){const
                    t=n.attributes.access_token;if(t!=e._a&&(e._config.hold_action.url_path=e._i[1].replace(e._a,t),e._a=t,this._config.custom_fields))return!0}return
                    e.hass=e._hass,!1}let d=0;const u=e._s;if(n){const t=n.attributes.access_token;if(!c&&t!=e._a){let
                    i=n.attributes[a.picture_list+"_picture"];if(i)if("string"==typeof
                    i||i instanceof String)i=i.replace(e._a,t);else for(let o=0;o<r[0].length;o++)i[r[0][o]]=i[r[0][o]].replace(e._a,t)}if(e._a=t,d=u&&""===u.value?0:parseInt(u.value),d<0||d>=r[0].length)d=0;else
                    if(d>0&&r[0].length>0&&(d=0,e._i&&(d=r[0].indexOf(e._i[0]),-1===d))){d=0;let
                    t=e._i[1].match(i)[1];for(let e=0;e<r[1].length;e++)if(t==r[1][e].match(i)[1]){d=e;break}}}return
                    u.label=!(!a.label||!n)&&a.label,e.__populate(d,r[0],u),u.dispatchEvent(new
                    Event("change")),o},t.__items=function(t){if(t){const e=t.states[this._config.entity];if(e&&e.attributes){const
                    t=e.attributes[this._config.picture_list+"_picture"];if(t){if("string"==typeof
                    t||t instanceof String)return[[""],[t]];{const e=Object.values(t);if(e.length)return[Object.keys(t),e]}}}}return[[],[]]},t.__populate=function(t,e,i){const
                    o={"(Completed)":"✔️","(Interrupted)":"❌","(Manually Ignored)":"⛔","(Automatically
                    Ignored)":"⭕","(Edited)":"📝","(Original)":"✅","(Backup)":"💾"},a=new
                    RegExp(Object.keys(o).join("|").replaceAll(")","\\)").replaceAll("(","\\("),"g"),n=function(t){return
                    t&&t.length?t.replace(a,(t=>o[t])):""};(t<0||t>=e.length)&&(t=0);let
                    l="";for(let s=0;s<e.length;s++)l+=''<mwc-list-item value="''+s+''"''+(t==s?"
                    selected activated":"")+">"+n(e[s])+"</mwc-list-item>";i.innerHTML=l,i.value=t+"",i.selectedText=n(e[t])};const
                    a="picture-selector",n=t.shadowRoot.querySelector("ha-card#"+a);n&&n.remove();const
                    l=document.createElement("ha-card");let s;l.id=a,l.style.cssText="cursor:default;display:block;padding:12px
                    16px 16px;overflow:visible;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:none;",t.shadowRoot.children.length?t.shadowRoot.insertBefore(l,t.shadowRoot.children[0]):t.shadowRoot.appendChild(l),e.title&&e.title.length&&("
                    "!==e.title&&(s=document.createElement("h1"),s.className="card-header",s.style.padding="0
                    0 4px 0",s.innerHTML=''<div class="name">''+e.title+"</div>",l.appendChild(s)),e.styles.grid||(e.styles.grid=[]),e.styles.grid=e.styles.grid.concat([{cursor:"default"},{display:"block"},{margin:"0
                    16px 16px"},{overflow:"hidden"},{"border-radius":"var(--ha-card-border-radius,12px)"},{"border-width":"var(--ha-card-border-width,1px)"},{"border-style":"solid"},{"border-color":"var(--ha-card-border-color,var(--divider-color,#e0e0e0))"},{background:"var(--input-disabled-fill-color);"}]));const
                    r=t._hass.states[e.entity];t._a=r?r.attributes.access_token:"";const
                    c=t.__items(t._hass),d=document.createElement("ha-select");if(d.style.cssText="width:auto;display:block;",e.icon&&e.icon.length){d.style.cssText+="margin:4px
                    0 0 40px;";const i=document.createElement("state-badge");i.stateObj=r,i.overrideIcon=e.icon,i.style.cssText="float:left;margin-top:12px;",l.appendChild(i),t._l=i}d.label=!(!e.label||!r)&&e.label,d.value="0",d.naturalMenuWidth=!0,1==c[0].length&&0==c[0][0].length&&(s?(d.style.display="none",t._l&&(t._l.style.display="none"),s.style.padding="0"):l.style.display="none"),t.__populate(0,c[0],d),l.appendChild(d),t._s=d;const
                    u=function(e){const i=function(i){if(!i)return;const o=function(t){const
                    e=t.target.parentElement.querySelectorAll("ha-circular-progress").forEach((t=>t.remove()));e&&e.remove(),t.target.style.cursor=""};i.onload=function(t){i.style.height="",t.target.style.opacity=1,o(t),t.target.onload=null},i.onerror=function(e){t._i=!1,o(e),t.update()},i.style.opacity=0,i.style.cursor="wait",e&&0==i.naturalHeight&&i.width&&(i.style.height=i.width+"px");const
                    a=document.createElement("ha-circular-progress");a.active=!0,a.size="large",a.style.position="absolute",i.parentElement.appendChild(a)},o=t.shadowRoot.querySelector("#icon");o&&"IMG"==o.tagName?i(o):setTimeout((function(){const
                    e=t.shadowRoot.querySelector("#icon");e&&0==e.naturalHeight&&e.width&&(e.style.height=e.width+"px"),i(e)}),0)};d.addEventListener(''closed'',function(e){e.stopPropagation()});if(d.onchange=function(e){if(""!=e.target.value){const
                    a=t.__items(t._hass);if(0===a[1].length)return void(t._i=!1);const
                    n=parseInt(e.target.value);if(n>=0&&n<a[1].length&&(!t._i||t._i[0]!=a[0][n]&&t._i[1]!=a[1][n])){if(t._i){if(t._i[0]=a[0][n],t._i[1].match(i)[1]===a[1][n].match(i)[1])return;t._i[1]=a[1][n]}else
                    t._i=[a[0][n],a[1][n]];t._config.hold_action.url_path=t._i[1];const
                    e=t._i[1].match(o);t._x=e&&e.length>1?e[1]:"",u(),t.update()}}},t._i=!1,t._config.hold_action={action:"url"},c[0].length){t._config.hold_action.url_path=c[1][0];const
                    e=c[1][0].match(o);t._x=e&&e.length>1?e[1]:"";const i=t.shadowRoot.querySelector("#icon");i&&"IMG"==i.tagName?t._i=[c[0][0],c[1][0]]:(t.style.opacity=0,setTimeout((function(){t._i=[c[0][0],c[1][0]],u(!0),t.update(),t.style.opacity=1}),0))}}return
                    t._i?t._i[1]+(e.extra_params&&e.extra_params.length?"&"+e.extra_params:""):void
                    0}(this) ]]]

                    '
                  picture_list: wifi_map
                  size: 100%
                  show_name: false
                  show_entity_picture: true
                  styles:
                    icon:
                      - transition: opacity 180ms ease-in-out 0s
                    card:
                      - --mdc-ripple-color: rgba(0,0,0,0)
                      - padding: 0
                attributes:
                  label: WiFi Map
                  icon: mdi:wifi
          - type: heading
            heading: Maintenance
            heading_style: title
            icon: mdi:basket-fill
          - type: custom:mod-card
            style:
              hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                \ wrap;\n  justify-content: space-between;\n}\nmushroom-template-badge,\
                \ hui-conditional-card {\n  flex: 0 0 auto !important;\n}\n"
            card:
              type: grid
              square: false
              columns: 5
              cards:
                - type: custom:button-card
                  template: badge
                  entity: sensor.r2dee2_filter_time_left
                  name: Filter
                  icon: mdi:air-filter
                  label: '[[[ return helpers.localize(entity); ]]]

                    '
                  tap_action:
                    action: more-info
                  hold_action:
                    action: perform-action
                    perform_action: dreame_vacuum.vacuum_reset_consumable
                    target:
                      entity_id: vacuum.r2dee2
                    data:
                      consumable: filter
                  variables:
                    color: "[[[\n  if (entity.state <= 5) return 'var(--red-color)';\n\
                      \  else if (entity.state <= 10) return 'var(--orange-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: 5
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--red-color) 40%, var(--card-background-color)
                              100%)
                        icon:
                          - color: var(--white-color)
                    - value: 10
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--orange-color) 40%,
                              var(--card-background-color) 100%)
                        icon:
                          - color: var(--white-color)
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
                - type: custom:button-card
                  template: badge
                  entity: sensor.r2dee2_main_brush_time_left
                  name: Main brush
                  icon: mdi:car-turbocharger
                  label: '[[[ return helpers.localize(entity); ]]]

                    '
                  tap_action:
                    action: more-info
                  hold_action:
                    action: perform-action
                    perform_action: dreame_vacuum.vacuum_reset_consumable
                    target:
                      entity_id: vacuum.r2dee2
                    data:
                      consumable: main_brush
                  variables:
                    color: "[[[\n  if (entity.state <= 5) return 'var(--red-color)';\n\
                      \  else if (entity.state <= 10) return 'var(--orange-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: 5
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--red-color) 40%, var(--card-background-color)
                              100%)
                        icon:
                          - color: var(--white-color)
                    - value: 10
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--orange-color) 40%,
                              var(--card-background-color) 100%)
                        icon:
                          - color: var(--white-color)
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
                - type: custom:button-card
                  template: badge
                  entity: sensor.r2dee2_mop_pad_time_left
                  name: Mop pad
                  icon: mdi:hydro-power
                  label: '[[[ return helpers.localize(entity); ]]]

                    '
                  tap_action:
                    action: more-info
                  hold_action:
                    action: perform-action
                    perform_action: dreame_vacuum.vacuum_reset_consumable
                    target:
                      entity_id: vacuum.r2dee2
                    data:
                      consumable: mop_pad
                  variables:
                    color: "[[[\n  if (entity.state <= 5) return 'var(--red-color)';\n\
                      \  else if (entity.state <= 10) return 'var(--orange-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: 5
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--red-color) 40%, var(--card-background-color)
                              100%)
                        icon:
                          - color: var(--white-color)
                    - value: 10
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--orange-color) 40%,
                              var(--card-background-color) 100%)
                        icon:
                          - color: var(--white-color)
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
                - type: custom:button-card
                  template: badge
                  entity: sensor.r2dee2_sensor_dirty_time_left
                  name: Sensors
                  icon: mdi:radar
                  label: '[[[ return helpers.localize(entity); ]]]

                    '
                  tap_action:
                    action: more-info
                  hold_action:
                    action: perform-action
                    perform_action: dreame_vacuum.vacuum_reset_consumable
                    target:
                      entity_id: vacuum.r2dee2
                    data:
                      consumable: sensor
                  variables:
                    color: "[[[\n  if (entity.state <= 5) return 'var(--red-color)';\n\
                      \  else if (entity.state <= 10) return 'var(--orange-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: 5
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--red-color) 40%, var(--card-background-color)
                              100%)
                        icon:
                          - color: var(--white-color)
                    - value: 10
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--orange-color) 40%,
                              var(--card-background-color) 100%)
                        icon:
                          - color: var(--white-color)
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
                - type: custom:button-card
                  template: badge
                  entity: sensor.r2dee2_side_brush_time_left
                  name: Side brush
                  icon: mdi:pinwheel-outline
                  label: '[[[ return helpers.localize(entity); ]]]

                    '
                  tap_action:
                    action: more-info
                  hold_action:
                    action: perform-action
                    perform_action: dreame_vacuum.vacuum_reset_consumable
                    target:
                      entity_id: vacuum.r2dee2
                    data:
                      consumable: side_brush
                  variables:
                    color: "[[[\n  if (entity.state <= 5) return 'var(--red-color)';\n\
                      \  else if (entity.state <= 10) return 'var(--orange-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: 5
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--red-color) 40%, var(--card-background-color)
                              100%)
                        icon:
                          - color: var(--white-color)
                    - value: 10
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--orange-color) 40%,
                              var(--card-background-color) 100%)
                        icon:
                          - color: var(--white-color)
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
          - type: custom:mod-card
            style:
              hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                \ wrap;\n  justify-content: space-around;\n}\n"
            card:
              type: grid
              square: false
              cards:
                - type: custom:button-card
                  template: button
                  name: Clean Washboard
                  icon: mdi:wiper-wash
                  variables:
                    color: var(--pink-color)
                  tap_action:
                    action: none
                  hold_action:
                    action: perform-action
                    perform_action: vacuum.send_command
                    target:
                      entity_id: vacuum.r2dee2
                    data:
                      command: action
                      params:
                        siid: 4
                        aiid: 4
                        in:
                          - value: 5,1
                            piid: 10
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color},\
                    \ transparent 80%) !important;\n    }\n  }\n  `\n]]]\n"
    header:
      card:
        type: markdown
        content: '{% if not is_state("sensor.r2dee2_error", "no_error") %}

          ### <ha-icon icon="mdi:alert"></ha-icon> {{ state_translated("sensor.r2dee2_error")
          }}

          {% endif %}


          {% if not is_state("sensor.r2dee2_low_water_warning", "no_warning") %}

          ### <ha-icon icon="mdi:water-alert"></ha-icon> {{ state_translated("sensor.r2dee2_low_water_warning")
          }}

          {% endif %}'
        title: R2Dee2
        text_only: true
      layout: start
      badges_position: bottom
  - type: sections
    max_columns: 2
    title: Dustin Mopman
    path: dustin-mopman
    icon: mdi:robot-vacuum
    subview: true
    sections:
      - type: grid
        cards:
          - type: heading
            heading: Controls and History
            heading_style: title
            icon: mdi:map-marker-radius
          - type: custom:tabbed-card
            attributes:
              minWidth: true
            styles:
              --mdc-theme-primary: var(--state-active-color)
              --mdc-tab-color-default: var(--secondary-text-color)
              --mdc-tab-text-label-color-default: var(--secondary-text-color)
            tabs:
              - card:
                  type: custom:xiaomi-vacuum-map-card
                  map_source:
                    camera: camera.dustin_mopman_map
                  calibration_source:
                    camera: true
                  entity: vacuum.dustin_mopman
                  vacuum_platform: Tasshack/dreame-vacuum
                  tiles:
                    - tile_id: status
                      entity: vacuum.dustin_mopman
                      attribute: status
                      icon: mdi:robot-vacuum
                    - tile_id: drying_progress
                      entity: vacuum.dustin_mopman
                      attribute: drying_progress
                      icon: mdi:heat-wave
                      unit: '%'
                      conditions:
                        - entity: vacuum.dustin_mopman
                          attribute: drying_progress
                          value_not: '0'
                    - tile_id: cleaning_progress
                      entity: vacuum.dustin_mopman
                      attribute: cleaning_progress
                      icon: mdi:progress-helper
                      unit: '%'
                      conditions:
                        - entity: vacuum.dustin_mopman
                          attribute: cleaning_progress
                          value_not: '0'
                    - tile_id: battery_level
                      entity: vacuum.dustin_mopman
                      attribute: battery_level
                      icon_source: vacuum.dustin_mopman.attributes.battery_icon
                      unit: '%'
                    - tile_id: fan_speed
                      entity: vacuum.dustin_mopman
                      attribute: fan_speed
                      icon: mdi:fan
                    - tile_id: mop_pad_humidity
                      attribute: mop_pad_humidity
                      label: Mop pad
                      icon: mdi:water-percent
                      entity: vacuum.dustin_mopman
                      precision: 0
                    - tile_id: cleaned_area
                      attribute: cleaned_area
                      icon: mdi:ruler-square
                      multiplier: 10.764
                      unit: ft²
                      entity: vacuum.dustin_mopman
                      precision: 0
                    - tile_id: cleaning_time
                      attribute: cleaning_time
                      icon: mdi:timer-sand
                      unit: min
                      entity: vacuum.dustin_mopman
                      precision: 0
                    - tile_id: cleaning_mode
                      attribute: cleaning_mode
                      entity: vacuum.dustin_mopman
                    - tile_id: cleaning_count
                      attribute: cleaning_count
                      icon: mdi:counter
                      unit: x
                      entity: vacuum.dustin_mopman
                      precision: 0
                    - tile_id: total_cleaned_area
                      attribute: total_cleaned_area
                      icon: mdi:set-square
                      multiplier: 10.764
                      unit: ft²
                      entity: vacuum.dustin_mopman
                      precision: 0
                  map_modes:
                    - template: vacuum_clean_zone
                    - template: vacuum_clean_point
                    - template: vacuum_clean_segment
                      predefined_selections:
                        - id: '1'
                          icon:
                            name: mdi:walk
                            x: 2600
                            y: -7600
                          label:
                            text: Hallway
                            x: 2600
                            y: -7600
                            offset_y: 35
                          outline:
                            - - 1150
                              - -9700
                            - - 3300
                              - -9700
                            - - 3300
                              - -5650
                            - - 1150
                              - -5650
                        - id: '2'
                          icon:
                            name: mdi:bed-empty
                            x: 4800
                            y: -5150
                          label:
                            text: Ethan's Room
                            x: 4800
                            y: -5150
                            offset_y: 35
                          outline:
                            - - 3300
                              - -6900
                            - - 6300
                              - -6900
                            - - 6300
                              - -3100
                            - - 3300
                              - -3100
                        - id: '3'
                          icon:
                            name: mdi:stairs-box
                            x: 100
                            y: -7400
                          label:
                            text: Under Stairs
                            x: 100
                            y: -7400
                            offset_y: 35
                          outline:
                            - - -1250
                              - -7850
                            - - 1500
                              - -7850
                            - - 1500
                              - -6950
                            - - -1250
                              - -6950
                        - id: '4'
                          icon:
                            name: mdi:home-outline
                            x: -1700
                            y: -3450
                          label:
                            text: Family Room
                            x: -1700
                            y: -3450
                            offset_y: 35
                          outline:
                            - - -4800
                              - -7850
                            - - -1250
                              - -7850
                            - - -1250
                              - -6950
                            - - 1150
                              - -6950
                            - - 1150
                              - 700
                            - - -4800
                              - 700
                        - id: '5'
                          icon:
                            name: mdi:toilet
                            x: 4350
                            y: -8200
                          label:
                            text: Bathroom
                            x: 4350
                            y: -8200
                            offset_y: 35
                          outline:
                            - - 3200
                              - -9450
                            - - 5750
                              - -9450
                            - - 5750
                              - -7100
                            - - 3200
                              - -7100
                        - id: '7'
                          icon:
                            name: mdi:chair-rolling
                            x: 4100
                            y: -11800
                          label:
                            text: Josh's Office
                            x: 4100
                            y: -11800
                            offset_y: 35
                          outline:
                            - - 2000
                              - -13250
                            - - 6250
                              - -13250
                            - - 6250
                              - -9700
                            - - 2000
                              - -9700
                attributes:
                  label: Controls
                  icon: mdi:map-marker-radius
              - card:
                  type: custom:button-card
                  entity: camera.dustin_mopman_map
                  icon: mdi:clipboard-text-clock
                  tap_action:
                    action: none
                  entity_picture: '[[[ return function(t){const e=t._config;if(t.shadowRoot.querySelector("hui-error-card")&&!t._u)return
                    t._u=!0,t.style.opacity=0,void setTimeout((function(){t.style.opacity=1,t.update()}),0);if(!t.__shouldUpdate){t._u=!1;const
                    i=/v=([^&]*)/,o=/index=([^&]*)/;t.__shouldUpdate=t.shouldUpdate,t.shouldUpdate=function(t){const
                    e=this;let o=e.__shouldUpdate(t);if(t&&t.has("_config"))return
                    e.shouldUpdate=e.__shouldUpdate,e.__shouldUpdate=null,e._s=null,!0;const
                    a=e._config,n=e._hass.states[a.entity],l=t.get("_hass"),s=l?l.states[a.entity]:null;if(o=l&&s!=n,!o)return!1;e._l&&(e._l.stateObj=n);let
                    r=e.__items(e._hass);const c=e.__items(l)[0].join(",")!==r[0].join(",");if(e._i&&n&&!c){if(!c&&e._i&&n&&e._a){const
                    t=n.attributes.access_token;if(t!=e._a&&(e._config.hold_action.url_path=e._i[1].replace(e._a,t),e._a=t,this._config.custom_fields))return!0}return
                    e.hass=e._hass,!1}let d=0;const u=e._s;if(n){const t=n.attributes.access_token;if(!c&&t!=e._a){let
                    i=n.attributes[a.picture_list+"_picture"];if(i)if("string"==typeof
                    i||i instanceof String)i=i.replace(e._a,t);else for(let o=0;o<r[0].length;o++)i[r[0][o]]=i[r[0][o]].replace(e._a,t)}if(e._a=t,d=u&&""===u.value?0:parseInt(u.value),d<0||d>=r[0].length)d=0;else
                    if(d>0&&r[0].length>0&&(d=0,e._i&&(d=r[0].indexOf(e._i[0]),-1===d))){d=0;let
                    t=e._i[1].match(i)[1];for(let e=0;e<r[1].length;e++)if(t==r[1][e].match(i)[1]){d=e;break}}}return
                    u.label=!(!a.label||!n)&&a.label,e.__populate(d,r[0],u),u.dispatchEvent(new
                    Event("change")),o},t.__items=function(t){if(t){const e=t.states[this._config.entity];if(e&&e.attributes){const
                    t=e.attributes[this._config.picture_list+"_picture"];if(t){if("string"==typeof
                    t||t instanceof String)return[[""],[t]];{const e=Object.values(t);if(e.length)return[Object.keys(t),e]}}}}return[[],[]]},t.__populate=function(t,e,i){const
                    o={"(Completed)":"✔️","(Interrupted)":"❌","(Manually Ignored)":"⛔","(Automatically
                    Ignored)":"⭕","(Edited)":"📝","(Original)":"✅","(Backup)":"💾"},a=new
                    RegExp(Object.keys(o).join("|").replaceAll(")","\\)").replaceAll("(","\\("),"g"),n=function(t){return
                    t&&t.length?t.replace(a,(t=>o[t])):""};(t<0||t>=e.length)&&(t=0);let
                    l="";for(let s=0;s<e.length;s++)l+=''<mwc-list-item value="''+s+''"''+(t==s?"
                    selected activated":"")+">"+n(e[s])+"</mwc-list-item>";i.innerHTML=l,i.value=t+"",i.selectedText=n(e[t])};const
                    a="picture-selector",n=t.shadowRoot.querySelector("ha-card#"+a);n&&n.remove();const
                    l=document.createElement("ha-card");let s;l.id=a,l.style.cssText="cursor:default;display:block;padding:12px
                    16px 16px;overflow:visible;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:none;",t.shadowRoot.children.length?t.shadowRoot.insertBefore(l,t.shadowRoot.children[0]):t.shadowRoot.appendChild(l),e.title&&e.title.length&&("
                    "!==e.title&&(s=document.createElement("h1"),s.className="card-header",s.style.padding="0
                    0 4px 0",s.innerHTML=''<div class="name">''+e.title+"</div>",l.appendChild(s)),e.styles.grid||(e.styles.grid=[]),e.styles.grid=e.styles.grid.concat([{cursor:"default"},{display:"block"},{margin:"0
                    16px 16px"},{overflow:"hidden"},{"border-radius":"var(--ha-card-border-radius,12px)"},{"border-width":"var(--ha-card-border-width,1px)"},{"border-style":"solid"},{"border-color":"var(--ha-card-border-color,var(--divider-color,#e0e0e0))"},{background:"var(--input-disabled-fill-color);"}]));const
                    r=t._hass.states[e.entity];t._a=r?r.attributes.access_token:"";const
                    c=t.__items(t._hass),d=document.createElement("ha-select");if(d.style.cssText="width:auto;display:block;",e.icon&&e.icon.length){d.style.cssText+="margin:4px
                    0 0 40px;";const i=document.createElement("state-badge");i.stateObj=r,i.overrideIcon=e.icon,i.style.cssText="float:left;margin-top:12px;",l.appendChild(i),t._l=i}d.label=!(!e.label||!r)&&e.label,d.value="0",d.naturalMenuWidth=!0,1==c[0].length&&0==c[0][0].length&&(s?(d.style.display="none",t._l&&(t._l.style.display="none"),s.style.padding="0"):l.style.display="none"),t.__populate(0,c[0],d),l.appendChild(d),t._s=d;const
                    u=function(e){const i=function(i){if(!i)return;const o=function(t){const
                    e=t.target.parentElement.querySelectorAll("ha-circular-progress").forEach((t=>t.remove()));e&&e.remove(),t.target.style.cursor=""};i.onload=function(t){i.style.height="",t.target.style.opacity=1,o(t),t.target.onload=null},i.onerror=function(e){t._i=!1,o(e),t.update()},i.style.opacity=0,i.style.cursor="wait",e&&0==i.naturalHeight&&i.width&&(i.style.height=i.width+"px");const
                    a=document.createElement("ha-circular-progress");a.active=!0,a.size="large",a.style.position="absolute",i.parentElement.appendChild(a)},o=t.shadowRoot.querySelector("#icon");o&&"IMG"==o.tagName?i(o):setTimeout((function(){const
                    e=t.shadowRoot.querySelector("#icon");e&&0==e.naturalHeight&&e.width&&(e.style.height=e.width+"px"),i(e)}),0)};d.addEventListener(''closed'',function(e){e.stopPropagation()});if(d.onchange=function(e){if(""!=e.target.value){const
                    a=t.__items(t._hass);if(0===a[1].length)return void(t._i=!1);const
                    n=parseInt(e.target.value);if(n>=0&&n<a[1].length&&(!t._i||t._i[0]!=a[0][n]&&t._i[1]!=a[1][n])){if(t._i){if(t._i[0]=a[0][n],t._i[1].match(i)[1]===a[1][n].match(i)[1])return;t._i[1]=a[1][n]}else
                    t._i=[a[0][n],a[1][n]];t._config.hold_action.url_path=t._i[1];const
                    e=t._i[1].match(o);t._x=e&&e.length>1?e[1]:"",u(),t.update()}}},t._i=!1,t._config.hold_action={action:"url"},c[0].length){t._config.hold_action.url_path=c[1][0];const
                    e=c[1][0].match(o);t._x=e&&e.length>1?e[1]:"";const i=t.shadowRoot.querySelector("#icon");i&&"IMG"==i.tagName?t._i=[c[0][0],c[1][0]]:(t.style.opacity=0,setTimeout((function(){t._i=[c[0][0],c[1][0]],u(!0),t.update(),t.style.opacity=1}),0))}}return
                    t._i?t._i[1]+(e.extra_params&&e.extra_params.length?"&"+e.extra_params:""):void
                    0}(this) ]]]

                    '
                  picture_list: cleaning_history
                  size: 100%
                  show_name: false
                  show_entity_picture: true
                  styles:
                    icon:
                      - transition: opacity 180ms ease-in-out 0s
                    card:
                      - --mdc-ripple-color: rgba(0,0,0,0)
                      - padding: 0
                      - border-top-left-radius: 0
                      - border-top-right-radius: 0
                      - border-top: none
                attributes:
                  label: Cleaning History
                  icon: mdi:clock
      - type: grid
        cards:
          - type: custom:tabbed-card
            attributes:
              minWidth: true
            styles:
              --mdc-theme-primary: var(--state-active-color)
              --mdc-tab-color-default: var(--secondary-text-color)
              --mdc-tab-text-label-color-default: var(--secondary-text-color)
            tabs:
              - card:
                  type: custom:button-card
                  entity: camera.dustin_mopman_map
                  icon: mdi:traffic-cone
                  entity_picture: '[[[ return function(t){const e=t._config;if(t.shadowRoot.querySelector("hui-error-card")&&!t._u)return
                    t._u=!0,t.style.opacity=0,void setTimeout((function(){t.style.opacity=1,t.update()}),0);if(!t.__shouldUpdate){t._u=!1;const
                    i=/v=([^&]*)/,o=/index=([^&]*)/;t.__shouldUpdate=t.shouldUpdate,t.shouldUpdate=function(t){const
                    e=this;let o=e.__shouldUpdate(t);if(t&&t.has("_config"))return
                    e.shouldUpdate=e.__shouldUpdate,e.__shouldUpdate=null,e._s=null,!0;const
                    a=e._config,n=e._hass.states[a.entity],l=t.get("_hass"),s=l?l.states[a.entity]:null;if(o=l&&s!=n,!o)return!1;e._l&&(e._l.stateObj=n);let
                    r=e.__items(e._hass);const c=e.__items(l)[0].join(",")!==r[0].join(",");if(e._i&&n&&!c){if(!c&&e._i&&n&&e._a){const
                    t=n.attributes.access_token;if(t!=e._a&&(e._config.hold_action.url_path=e._i[1].replace(e._a,t),e._a=t,this._config.custom_fields))return!0}return
                    e.hass=e._hass,!1}let d=0;const u=e._s;if(n){const t=n.attributes.access_token;if(!c&&t!=e._a){let
                    i=n.attributes[a.picture_list+"_picture"];if(i)if("string"==typeof
                    i||i instanceof String)i=i.replace(e._a,t);else for(let o=0;o<r[0].length;o++)i[r[0][o]]=i[r[0][o]].replace(e._a,t)}if(e._a=t,d=u&&""===u.value?0:parseInt(u.value),d<0||d>=r[0].length)d=0;else
                    if(d>0&&r[0].length>0&&(d=0,e._i&&(d=r[0].indexOf(e._i[0]),-1===d))){d=0;let
                    t=e._i[1].match(i)[1];for(let e=0;e<r[1].length;e++)if(t==r[1][e].match(i)[1]){d=e;break}}}return
                    u.label=!(!a.label||!n)&&a.label,e.__populate(d,r[0],u),u.dispatchEvent(new
                    Event("change")),o},t.__items=function(t){if(t){const e=t.states[this._config.entity];if(e&&e.attributes){const
                    t=e.attributes[this._config.picture_list+"_picture"];if(t){if("string"==typeof
                    t||t instanceof String)return[[""],[t]];{const e=Object.values(t);if(e.length)return[Object.keys(t),e]}}}}return[[],[]]},t.__populate=function(t,e,i){const
                    o={"(Completed)":"✔️","(Interrupted)":"❌","(Manually Ignored)":"⛔","(Automatically
                    Ignored)":"⭕","(Edited)":"📝","(Original)":"✅","(Backup)":"💾"},a=new
                    RegExp(Object.keys(o).join("|").replaceAll(")","\\)").replaceAll("(","\\("),"g"),n=function(t){return
                    t&&t.length?t.replace(a,(t=>o[t])):""};(t<0||t>=e.length)&&(t=0);let
                    l="";for(let s=0;s<e.length;s++)l+=''<mwc-list-item value="''+s+''"''+(t==s?"
                    selected activated":"")+">"+n(e[s])+"</mwc-list-item>";i.innerHTML=l,i.value=t+"",i.selectedText=n(e[t])};const
                    a="picture-selector",n=t.shadowRoot.querySelector("ha-card#"+a);n&&n.remove();const
                    l=document.createElement("ha-card");let s;l.id=a,l.style.cssText="cursor:default;display:block;padding:12px
                    16px 16px;overflow:visible;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:none;",t.shadowRoot.children.length?t.shadowRoot.insertBefore(l,t.shadowRoot.children[0]):t.shadowRoot.appendChild(l),e.title&&e.title.length&&("
                    "!==e.title&&(s=document.createElement("h1"),s.className="card-header",s.style.padding="0
                    0 4px 0",s.innerHTML=''<div class="name">''+e.title+"</div>",l.appendChild(s)),e.styles.grid||(e.styles.grid=[]),e.styles.grid=e.styles.grid.concat([{cursor:"default"},{display:"block"},{margin:"0
                    16px 16px"},{overflow:"hidden"},{"border-radius":"var(--ha-card-border-radius,12px)"},{"border-width":"var(--ha-card-border-width,1px)"},{"border-style":"solid"},{"border-color":"var(--ha-card-border-color,var(--divider-color,#e0e0e0))"},{background:"var(--input-disabled-fill-color);"}]));const
                    r=t._hass.states[e.entity];t._a=r?r.attributes.access_token:"";const
                    c=t.__items(t._hass),d=document.createElement("ha-select");if(d.style.cssText="width:auto;display:block;",e.icon&&e.icon.length){d.style.cssText+="margin:4px
                    0 0 40px;";const i=document.createElement("state-badge");i.stateObj=r,i.overrideIcon=e.icon,i.style.cssText="float:left;margin-top:12px;",l.appendChild(i),t._l=i}d.label=!(!e.label||!r)&&e.label,d.value="0",d.naturalMenuWidth=!0,1==c[0].length&&0==c[0][0].length&&(s?(d.style.display="none",t._l&&(t._l.style.display="none"),s.style.padding="0"):l.style.display="none"),t.__populate(0,c[0],d),l.appendChild(d),t._s=d;const
                    u=function(e){const i=function(i){if(!i)return;const o=function(t){const
                    e=t.target.parentElement.querySelectorAll("ha-circular-progress").forEach((t=>t.remove()));e&&e.remove(),t.target.style.cursor=""};i.onload=function(t){i.style.height="",t.target.style.opacity=1,o(t),t.target.onload=null},i.onerror=function(e){t._i=!1,o(e),t.update()},i.style.opacity=0,i.style.cursor="wait",e&&0==i.naturalHeight&&i.width&&(i.style.height=i.width+"px");const
                    a=document.createElement("ha-circular-progress");a.active=!0,a.size="large",a.style.position="absolute",i.parentElement.appendChild(a)},o=t.shadowRoot.querySelector("#icon");o&&"IMG"==o.tagName?i(o):setTimeout((function(){const
                    e=t.shadowRoot.querySelector("#icon");e&&0==e.naturalHeight&&e.width&&(e.style.height=e.width+"px"),i(e)}),0)};d.addEventListener(''closed'',function(e){e.stopPropagation()});if(d.onchange=function(e){if(""!=e.target.value){const
                    a=t.__items(t._hass);if(0===a[1].length)return void(t._i=!1);const
                    n=parseInt(e.target.value);if(n>=0&&n<a[1].length&&(!t._i||t._i[0]!=a[0][n]&&t._i[1]!=a[1][n])){if(t._i){if(t._i[0]=a[0][n],t._i[1].match(i)[1]===a[1][n].match(i)[1])return;t._i[1]=a[1][n]}else
                    t._i=[a[0][n],a[1][n]];t._config.hold_action.url_path=t._i[1];const
                    e=t._i[1].match(o);t._x=e&&e.length>1?e[1]:"",u(),t.update()}}},t._i=!1,t._config.hold_action={action:"url"},c[0].length){t._config.hold_action.url_path=c[1][0];const
                    e=c[1][0].match(o);t._x=e&&e.length>1?e[1]:"";const i=t.shadowRoot.querySelector("#icon");i&&"IMG"==i.tagName?t._i=[c[0][0],c[1][0]]:(t.style.opacity=0,setTimeout((function(){t._i=[c[0][0],c[1][0]],u(!0),t.update(),t.style.opacity=1}),0))}}return
                    t._i?t._i[1]+(e.extra_params&&e.extra_params.length?"&"+e.extra_params:""):void
                    0}(this) ]]]

                    '
                  picture_list: obstacle
                  size: 100%
                  show_entity_picture: true
                  show_name: false
                  custom_fields:
                    buttons:
                      card:
                        type: custom:button-card
                        template: button
                        name: "[[[ return (!this.__c || this.__c(this.__o())\n  ?\
                          \ 'Cancel Ignore'\n  : 'Ignore Obstacle');\n]]]\n"
                        icon: "[[[ return (!this.__c || this.__c(this.__o())\n  ?\
                          \ 'mdi:eye'\n  : 'mdi:eye-off');\n]]]\n"
                        confirmation: '[[[ return this.__c && !this.__c(this.__o());
                          ]]]

                          '
                        tap_action:
                          action: call-service
                          service: dreame_vacuum.vacuum_set_obstacle_ignore
                          data: '[[[ return function(t){t.__o||(t.__o=function(){const
                            n=t._hass.states[t._config.entity];return n&&n.attributes.obstacles&&n.attributes.obstacles[t._i?t._x:""]},t.__c=function(t){return
                            t&&t.ignore_status&&"Not Ignored"!==t.ignore_status},t.__d=function(t){return
                            t&&t.ignore_status&&t.ignore_status.indexOf("Automatically")>=0});const
                            n=t.__o();if(n)return{entity_id:t._config.entity.replace("camera.","vacuum.").substring(0,t._config.entity.lastIndexOf("_map")),x:n.x,y:n.y,obstacle_ignored:!t.__c(n)}}(this);
                            ]]]

                            '
                        styles:
                          card:
                            - background-color: "[[[ return (!this.__d || this.__d(this.__o())\n\
                                \  ? 'color-mix(in srgb, var(--grey-color), transparent\
                                \ 85%)'\n  : 'color-mix(in srgb, var(--yellow-color),\
                                \ transparent 85%)');\n]]]\n"
                            - pointer-events: "[[[ return (!this.__d || this.__d(this.__o())\n\
                                \  ? 'none'\n  : 'auto');\n]]]\n"
                          name:
                            - color: "[[[ return (!this.__d || this.__d(this.__o())\n\
                                \  ? 'var(--state-icon-unavailable-color)'\n  : 'var(--primary-text-color)');\n\
                                ]]]\n"
                          icon:
                            - color: "[[[ return (!this.__d || this.__d(this.__o())\n\
                                \  ? 'var(--state-icon-unavailable-color)'\n  : 'var(--primary-text-color)');\n\
                                ]]]\n"
                        extra_styles: "[[[ return (!this.__d || this.__d(this.__o())\n\
                          \  ? \"@media (hover: hover) { ha-card:hover { background:\
                          \ color-mix(in srgb, var(--grey-color), transparent 80%)\
                          \ !important; } }\"\n  : \"@media (hover: hover) { ha-card:hover\
                          \ { background: color-mix(in srgb, var(--yellow-color),\
                          \ transparent 80%) !important; } }\");\n]]]\n"
                  styles:
                    custom_fields:
                      buttons:
                        - cursor: '[[[ return (!this.__d || this.__d(this.__o()) ?
                            ''not-allowed'' : ''default''); ]]]

                            '
                        - margin: 16px
                        - display: '[[[ const o = this.__o(); return (o && o.ignore_status
                            ? ''inline-block'': ''none''); ]]]

                            '
                        - width: auto
                    grid:
                      - display: block
                    icon:
                      - transition: opacity 180ms ease-in-out 0s
                    card:
                      - --mdc-ripple-color: rgba(0,0,0,0)
                      - padding: 0
                      - border-top-left-radius: 0
                      - border-top-right-radius: 0
                      - border-top: none
                attributes:
                  label: Obstacles
                  icon: mdi:cone
              - card:
                  type: custom:button-card
                  entity: camera.dustin_mopman_map
                  icon: mdi:wifi-marker
                  tap_action:
                    action: none
                  entity_picture: '[[[ return function(t){const e=t._config;if(t.shadowRoot.querySelector("hui-error-card")&&!t._u)return
                    t._u=!0,t.style.opacity=0,void setTimeout((function(){t.style.opacity=1,t.update()}),0);if(!t.__shouldUpdate){t._u=!1;const
                    i=/v=([^&]*)/,o=/index=([^&]*)/;t.__shouldUpdate=t.shouldUpdate,t.shouldUpdate=function(t){const
                    e=this;let o=e.__shouldUpdate(t);if(t&&t.has("_config"))return
                    e.shouldUpdate=e.__shouldUpdate,e.__shouldUpdate=null,e._s=null,!0;const
                    a=e._config,n=e._hass.states[a.entity],l=t.get("_hass"),s=l?l.states[a.entity]:null;if(o=l&&s!=n,!o)return!1;e._l&&(e._l.stateObj=n);let
                    r=e.__items(e._hass);const c=e.__items(l)[0].join(",")!==r[0].join(",");if(e._i&&n&&!c){if(!c&&e._i&&n&&e._a){const
                    t=n.attributes.access_token;if(t!=e._a&&(e._config.hold_action.url_path=e._i[1].replace(e._a,t),e._a=t,this._config.custom_fields))return!0}return
                    e.hass=e._hass,!1}let d=0;const u=e._s;if(n){const t=n.attributes.access_token;if(!c&&t!=e._a){let
                    i=n.attributes[a.picture_list+"_picture"];if(i)if("string"==typeof
                    i||i instanceof String)i=i.replace(e._a,t);else for(let o=0;o<r[0].length;o++)i[r[0][o]]=i[r[0][o]].replace(e._a,t)}if(e._a=t,d=u&&""===u.value?0:parseInt(u.value),d<0||d>=r[0].length)d=0;else
                    if(d>0&&r[0].length>0&&(d=0,e._i&&(d=r[0].indexOf(e._i[0]),-1===d))){d=0;let
                    t=e._i[1].match(i)[1];for(let e=0;e<r[1].length;e++)if(t==r[1][e].match(i)[1]){d=e;break}}}return
                    u.label=!(!a.label||!n)&&a.label,e.__populate(d,r[0],u),u.dispatchEvent(new
                    Event("change")),o},t.__items=function(t){if(t){const e=t.states[this._config.entity];if(e&&e.attributes){const
                    t=e.attributes[this._config.picture_list+"_picture"];if(t){if("string"==typeof
                    t||t instanceof String)return[[""],[t]];{const e=Object.values(t);if(e.length)return[Object.keys(t),e]}}}}return[[],[]]},t.__populate=function(t,e,i){const
                    o={"(Completed)":"✔️","(Interrupted)":"❌","(Manually Ignored)":"⛔","(Automatically
                    Ignored)":"⭕","(Edited)":"📝","(Original)":"✅","(Backup)":"💾"},a=new
                    RegExp(Object.keys(o).join("|").replaceAll(")","\\)").replaceAll("(","\\("),"g"),n=function(t){return
                    t&&t.length?t.replace(a,(t=>o[t])):""};(t<0||t>=e.length)&&(t=0);let
                    l="";for(let s=0;s<e.length;s++)l+=''<mwc-list-item value="''+s+''"''+(t==s?"
                    selected activated":"")+">"+n(e[s])+"</mwc-list-item>";i.innerHTML=l,i.value=t+"",i.selectedText=n(e[t])};const
                    a="picture-selector",n=t.shadowRoot.querySelector("ha-card#"+a);n&&n.remove();const
                    l=document.createElement("ha-card");let s;l.id=a,l.style.cssText="cursor:default;display:block;padding:12px
                    16px 16px;overflow:visible;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:none;",t.shadowRoot.children.length?t.shadowRoot.insertBefore(l,t.shadowRoot.children[0]):t.shadowRoot.appendChild(l),e.title&&e.title.length&&("
                    "!==e.title&&(s=document.createElement("h1"),s.className="card-header",s.style.padding="0
                    0 4px 0",s.innerHTML=''<div class="name">''+e.title+"</div>",l.appendChild(s)),e.styles.grid||(e.styles.grid=[]),e.styles.grid=e.styles.grid.concat([{cursor:"default"},{display:"block"},{margin:"0
                    16px 16px"},{overflow:"hidden"},{"border-radius":"var(--ha-card-border-radius,12px)"},{"border-width":"var(--ha-card-border-width,1px)"},{"border-style":"solid"},{"border-color":"var(--ha-card-border-color,var(--divider-color,#e0e0e0))"},{background:"var(--input-disabled-fill-color);"}]));const
                    r=t._hass.states[e.entity];t._a=r?r.attributes.access_token:"";const
                    c=t.__items(t._hass),d=document.createElement("ha-select");if(d.style.cssText="width:auto;display:block;",e.icon&&e.icon.length){d.style.cssText+="margin:4px
                    0 0 40px;";const i=document.createElement("state-badge");i.stateObj=r,i.overrideIcon=e.icon,i.style.cssText="float:left;margin-top:12px;",l.appendChild(i),t._l=i}d.label=!(!e.label||!r)&&e.label,d.value="0",d.naturalMenuWidth=!0,1==c[0].length&&0==c[0][0].length&&(s?(d.style.display="none",t._l&&(t._l.style.display="none"),s.style.padding="0"):l.style.display="none"),t.__populate(0,c[0],d),l.appendChild(d),t._s=d;const
                    u=function(e){const i=function(i){if(!i)return;const o=function(t){const
                    e=t.target.parentElement.querySelectorAll("ha-circular-progress").forEach((t=>t.remove()));e&&e.remove(),t.target.style.cursor=""};i.onload=function(t){i.style.height="",t.target.style.opacity=1,o(t),t.target.onload=null},i.onerror=function(e){t._i=!1,o(e),t.update()},i.style.opacity=0,i.style.cursor="wait",e&&0==i.naturalHeight&&i.width&&(i.style.height=i.width+"px");const
                    a=document.createElement("ha-circular-progress");a.active=!0,a.size="large",a.style.position="absolute",i.parentElement.appendChild(a)},o=t.shadowRoot.querySelector("#icon");o&&"IMG"==o.tagName?i(o):setTimeout((function(){const
                    e=t.shadowRoot.querySelector("#icon");e&&0==e.naturalHeight&&e.width&&(e.style.height=e.width+"px"),i(e)}),0)};d.addEventListener(''closed'',function(e){e.stopPropagation()});if(d.onchange=function(e){if(""!=e.target.value){const
                    a=t.__items(t._hass);if(0===a[1].length)return void(t._i=!1);const
                    n=parseInt(e.target.value);if(n>=0&&n<a[1].length&&(!t._i||t._i[0]!=a[0][n]&&t._i[1]!=a[1][n])){if(t._i){if(t._i[0]=a[0][n],t._i[1].match(i)[1]===a[1][n].match(i)[1])return;t._i[1]=a[1][n]}else
                    t._i=[a[0][n],a[1][n]];t._config.hold_action.url_path=t._i[1];const
                    e=t._i[1].match(o);t._x=e&&e.length>1?e[1]:"",u(),t.update()}}},t._i=!1,t._config.hold_action={action:"url"},c[0].length){t._config.hold_action.url_path=c[1][0];const
                    e=c[1][0].match(o);t._x=e&&e.length>1?e[1]:"";const i=t.shadowRoot.querySelector("#icon");i&&"IMG"==i.tagName?t._i=[c[0][0],c[1][0]]:(t.style.opacity=0,setTimeout((function(){t._i=[c[0][0],c[1][0]],u(!0),t.update(),t.style.opacity=1}),0))}}return
                    t._i?t._i[1]+(e.extra_params&&e.extra_params.length?"&"+e.extra_params:""):void
                    0}(this) ]]]

                    '
                  picture_list: wifi_map
                  size: 100%
                  show_name: false
                  show_entity_picture: true
                  styles:
                    icon:
                      - transition: opacity 180ms ease-in-out 0s
                    card:
                      - --mdc-ripple-color: rgba(0,0,0,0)
                      - padding: 0
                attributes:
                  label: WiFi Map
                  icon: mdi:wifi
          - type: heading
            heading: Maintenance
            heading_style: title
            icon: mdi:basket-fill
          - type: custom:mod-card
            style:
              hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                \ wrap;\n  justify-content: space-between;\n}\nmushroom-template-badge,\
                \ hui-conditional-card {\n  flex: 0 0 auto !important;\n}\n"
            card:
              type: grid
              square: false
              columns: 5
              cards:
                - type: custom:button-card
                  template: badge
                  entity: sensor.dustin_mopman_filter_time_left
                  name: Filter
                  icon: mdi:air-filter
                  label: '[[[ return helpers.localize(entity); ]]]

                    '
                  tap_action:
                    action: more-info
                  hold_action:
                    action: perform-action
                    perform_action: dreame_vacuum.vacuum_reset_consumable
                    target:
                      entity_id: vacuum.dustin_mopman
                    data:
                      consumable: filter
                  variables:
                    color: "[[[\n  if (entity.state <= 10) return 'var(--red-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: 5
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--red-color) 40%, var(--card-background-color)
                              100%)
                        icon:
                          - color: var(--white-color)
                    - value: 10
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--orange-color) 40%,
                              var(--card-background-color) 100%)
                        icon:
                          - color: var(--white-color)
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
                - type: custom:button-card
                  template: badge
                  entity: sensor.dustin_mopman_main_brush_time_left
                  name: Main brush
                  icon: mdi:car-turbocharger
                  label: '[[[ return helpers.localize(entity); ]]]

                    '
                  tap_action:
                    action: more-info
                  hold_action:
                    action: perform-action
                    perform_action: dreame_vacuum.vacuum_reset_consumable
                    target:
                      entity_id: vacuum.dustin_mopman
                    data:
                      consumable: main_brush
                  variables:
                    color: "[[[\n  if (entity.state <= 5) return 'var(--red-color)';\n\
                      \  else if (entity.state <= 10) return 'var(--orange-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: 5
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--red-color) 40%, var(--card-background-color)
                              100%)
                        icon:
                          - color: var(--white-color)
                    - value: 10
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--orange-color) 40%,
                              var(--card-background-color) 100%)
                        icon:
                          - color: var(--white-color)
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
                - type: custom:button-card
                  template: badge
                  entity: sensor.dustin_mopman_mop_pad_time_left
                  name: Mop pad
                  icon: mdi:hydro-power
                  label: '[[[ return helpers.localize(entity); ]]]

                    '
                  tap_action:
                    action: more-info
                  hold_action:
                    action: perform-action
                    perform_action: dreame_vacuum.vacuum_reset_consumable
                    target:
                      entity_id: vacuum.dustin_mopman
                    data:
                      consumable: mop_pad
                  variables:
                    color: "[[[\n  if (entity.state <= 5) return 'var(--red-color)';\n\
                      \  else if (entity.state <= 10) return 'var(--orange-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: 5
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--red-color) 40%, var(--card-background-color)
                              100%)
                        icon:
                          - color: var(--white-color)
                    - value: 10
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--orange-color) 40%,
                              var(--card-background-color) 100%)
                        icon:
                          - color: var(--white-color)
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
                - type: custom:button-card
                  template: badge
                  entity: sensor.dustin_mopman_sensor_dirty_time_left
                  name: Sensors
                  icon: mdi:radar
                  label: '[[[ return helpers.localize(entity); ]]]

                    '
                  tap_action:
                    action: more-info
                  hold_action:
                    action: perform-action
                    perform_action: dreame_vacuum.vacuum_reset_consumable
                    target:
                      entity_id: vacuum.dustin_mopman
                    data:
                      consumable: sensor
                  variables:
                    color: "[[[\n  if (entity.state <= 5) return 'var(--red-color)';\n\
                      \  else if (entity.state <= 10) return 'var(--orange-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: 5
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--red-color) 40%, var(--card-background-color)
                              100%)
                        icon:
                          - color: var(--white-color)
                    - value: 10
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--orange-color) 40%,
                              var(--card-background-color) 100%)
                        icon:
                          - color: var(--white-color)
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
                - type: custom:button-card
                  template: badge
                  entity: sensor.dustin_mopman_side_brush_time_left
                  name: Side brush
                  icon: mdi:pinwheel-outline
                  label: '[[[ return helpers.localize(entity); ]]]

                    '
                  tap_action:
                    action: more-info
                  hold_action:
                    action: perform-action
                    perform_action: dreame_vacuum.vacuum_reset_consumable
                    target:
                      entity_id: vacuum.dustin_mopman
                    data:
                      consumable: side_brush
                  variables:
                    color: "[[[\n  if (entity.state <= 5) return 'var(--red-color)';\n\
                      \  else if (entity.state <= 10) return 'var(--orange-color)';\n\
                      \  else return 'var(--grey-color)';\n]]]\n"
                  state:
                    - value: 5
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--red-color) 40%, var(--card-background-color)
                              100%)
                        icon:
                          - color: var(--white-color)
                    - value: 10
                      operator: <=
                      styles:
                        card:
                          - background: color-mix(in srgb, var(--orange-color) 40%,
                              var(--card-background-color) 100%)
                        icon:
                          - color: var(--white-color)
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color} 4%,\
                    \ var(--card-background-color) 100%);\n    }\n  }\n  `\n  ]]]\n"
          - type: custom:mod-card
            style:
              hui-grid-card$: "#root {\n  display: flex !important;\n  flex-wrap:\
                \ wrap;\n  justify-content: space-around;\n}\n"
            card:
              type: grid
              square: false
              cards:
                - type: custom:button-card
                  template: button
                  name: Clean Washboard
                  icon: mdi:wiper-wash
                  variables:
                    color: var(--pink-color)
                  tap_action:
                    action: none
                  hold_action:
                    action: perform-action
                    perform_action: vacuum.send_command
                    target:
                      entity_id: vacuum.dustin_mopman
                    data:
                      command: action
                      params:
                        siid: 4
                        aiid: 4
                        in:
                          - value: 5,1
                            piid: 10
                  extra_styles: "[[[\n  return `\n  @media (hover: hover) {\n    ha-card:hover\
                    \ {\n      background: color-mix(in srgb, ${variables.color},\
                    \ transparent 80%) !important;\n    }\n  }\n  `\n]]]\n"
    header:
      card:
        type: markdown
        content: '{% if not is_state("sensor.dustin_mopman_error", "no_error") %}

          ### <ha-icon icon="mdi:alert"></ha-icon> {{ state_translated("sensor.dustin_mopman_error")
          }}

          {% endif %}


          {% if not is_state("sensor.dustin_mopman_low_water_warning", "no_warning")
          %}

          ### <ha-icon icon="mdi:water-alert"></ha-icon> {{ state_translated("sensor.dustin_mopman_low_water_warning")
          }}

          {% endif %}'
        text_only: true
      layout: start
      badges_position: bottom
