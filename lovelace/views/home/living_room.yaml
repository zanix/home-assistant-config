---
type: custom:stack-in-card
cards:
  - type: custom:banner-card
    heading:
      - mdi:sofa
      - Living Room
    card_mod:
      style: |
        :host {
          --banner-card-heading-size: 1.5em;
          --banner-card-entity-value-size: 1.3em;
          --banner-card-media-title-size: 1em
        }
    entities:
      - entity: binary_sensor.home_occupancy
        name: Occupancy
        map_state:
          'on':
            value: 'mdi:home-variant'
            color: var(--paper-item-icon-active-color)
        value: 'mdi:home-outline'
      - entity: sensor.home_temperature
        name: Temperature
      - entity: sensor.home_humidity
        name: Humidity
      - switch.front_entry_light
      - switch.garage_entry_light
      - switch.hallway_light

  - type: entities
    show_header_toggle: false
    card_mod:
      style: |
        .card-content { padding-bottom: 0; }
    entities:
      - entity: light.living_room
        name: Light
        type: custom:slider-entity-row
        toggle: true
        step: 1
        min: 2
      - entity: light.living_room_floor_lamp
        type: custom:slider-entity-row
        name: Floor Lamp
        toggle: true
        step: 1
        min: 2
      - entity: light.living_room_floor_lamp
        type: custom:rgb-light-card
        justify: around
        colors:
          - color_temp: 370
            transition: 1
          - color_temp: 250
            transition: 1
          - color_temp: 181
            transition: 1
          - color_temp: 370
            brightness: 153
            transition: 1
            icon_color: 'center no-repeat url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20id%3D%22mdi-book-open-variant%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M17.5%2014.33C18.29%2014.33%2019.13%2014.41%2020%2014.57V16.07C19.38%2015.91%2018.54%2015.83%2017.5%2015.83C15.6%2015.83%2014.11%2016.16%2013%2016.82V15.13C14.17%2014.6%2015.67%2014.33%2017.5%2014.33M13%2012.46C14.29%2011.93%2015.79%2011.67%2017.5%2011.67C18.29%2011.67%2019.13%2011.74%2020%2011.9V13.4C19.38%2013.24%2018.54%2013.16%2017.5%2013.16C15.6%2013.16%2014.11%2013.5%2013%2014.15M17.5%2010.5C15.6%2010.5%2014.11%2010.82%2013%2011.5V9.84C14.23%209.28%2015.73%209%2017.5%209C18.29%209%2019.13%209.08%2020%209.23V10.78C19.26%2010.59%2018.41%2010.5%2017.5%2010.5M21%2018.5V7C19.96%206.67%2018.79%206.5%2017.5%206.5C15.45%206.5%2013.62%207%2012%208V19.5C13.62%2018.5%2015.45%2018%2017.5%2018C18.69%2018%2019.86%2018.16%2021%2018.5M17.5%204.5C19.85%204.5%2021.69%205%2023%206V20.56C23%2020.68%2022.95%2020.8%2022.84%2020.91C22.73%2021%2022.61%2021.08%2022.5%2021.08C22.39%2021.08%2022.31%2021.06%2022.25%2021.03C20.97%2020.34%2019.38%2020%2017.5%2020C15.45%2020%2013.62%2020.5%2012%2021.5C10.66%2020.5%208.83%2020%206.5%2020C4.84%2020%203.25%2020.36%201.75%2021.07C1.72%2021.08%201.68%2021.08%201.63%2021.1C1.59%2021.11%201.55%2021.12%201.5%2021.12C1.39%2021.12%201.27%2021.08%201.16%2021C1.05%2020.89%201%2020.78%201%2020.65V6C2.34%205%204.18%204.5%206.5%204.5C8.83%204.5%2010.66%205%2012%206C13.34%205%2015.17%204.5%2017.5%204.5Z%22%20%2F%3E%3C%2Fsvg%3E"), #EA888C'
      - type: section
      - entity: media_player.living_room_speaker
        type: custom:mini-media-player
        name: Google Home
        icon: mdi:speaker
        hide:
          power: true
        info: scroll
        artwork: material
        group: true

  - type: horizontal-stack
    cards:

      - type: conditional
        conditions:
          - entity: media_player.living_room_shield
            state_not: "off"
        card:
          type: custom:button-card
          template: common
          entity: media_player.living_room_shield
          icon: mdi:power
          name: Power
          tap_action:
            action: call-service
            service: media_player.turn_off
            service_data:
              entity_id: media_player.living_room_shield
          styles:
            icon:
              - color: var(--label-badge-red)

      - type: custom:button-card
        template: common
        entity: media_player.living_room_shield
        icon: mdi:android
        name: Shield TV
        tap_action:
          action: call-service
          service: media_player.turn_on
          service_data:
            entity_id: media_player.living_room_shield
        styles:
          icon:
            - color: var(--sidebar-icon-color)
        state:
          - operator: template
            value: >
              [[[
                return states['media_player.living_room_shield']
                && (states['media_player.living_room_shield'].state != 'off')
              ]]]
            styles:
              icon:
                - color: var(--paper-item-icon-active-color)

  - type: conditional
    conditions:
      - entity: media_player.living_room_shield
        state_not: "off"
    card:
      type: entities
      card_mod:
        style: |
          .card-content { padding-bottom: 0; }
      entities:
        - entity: media_player.living_room_shield
          type: custom:mini-media-player
          name: Shield
          icon: mdi:android
          hide:
            power: true
            volume: true
            mute: true
            source: true
          shortcuts:
            columns: 4
            hide_when_off: true
            attribute: app_id
            buttons:
              - id: com.plexapp.android
                type: source
                name: Plex
                icon: mdi:plex
              - id: com.netflix.ninja
                type: source
                name: Netflix
                icon: mdi:netflix
              - id: com.amazon.amazonvideo.livingroom
                type: source
                name: Prime Video
                icon: fab:amazon
              - id: com.hulu.livingroomplus
                type: source
                name: Hulu
                icon: mdi:hulu
              - id: com.google.android.youtube.tv
                type: source
                name: YouTube
                icon: mdi:youtube
              - id: com.google.android.youtube.tvkids
                type: source
                name: YouTube Kids
                icon: mdi:youtube-subscription
              - id: com.spotify.tv.android
                type: source
                name: Spotify
                icon: mdi:spotify
              - id: tv.twitch.android.viewer
                type: source
                name: Twitch
                icon: mdi:twitch
              - id: com.google.android.tvlauncher
                type: source
                name: Home
                icon: mdi:apps
          info: scroll
          artwork: material
          group: true

  - type: conditional
    conditions:
      - entity: sensor.living_room_shield_source
        state: "Plex"
    card:
      type: entities
      entities:
        - entity: media_player.plex_living_room
          type: custom:mini-media-player
          name: Plex
          hide:
            power: true
            volume: true
            mute: true
          info: scroll
          artwork: material
          group: true

  - type: conditional
    conditions:
      - entity: media_player.cast_living_room
        state: "playing"
    card:
      type: entities
      entities:
        - entity: media_player.cast_living_room
          type: custom:mini-media-player
          name: Cast
          hide:
            power: true
          info: scroll
          artwork: material
          group: true

  - type: conditional
    conditions:
      - entity: media_player.onkyo_receiver
        state_not: "off"
    card:
      type: entities
      entities:
        - entity: media_player.onkyo_receiver
          type: custom:mini-media-player
          hide:
            power: true
            controls: true
          group: true
