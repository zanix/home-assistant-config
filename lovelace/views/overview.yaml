---
title: Overview
path: overview
icon: mdi:cogs
panel: true
cards:
  - type: custom:layout-card
    layout_type: horizontal
    layout_options:
      max_cols: 3
    cards:

      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            subtitle: System Status

          - type: grid
            columns: 2
            square: false
            cards:
              - type: custom:mushroom-entity-card
                entity: sensor.date
                primary_info: state
                secondary_info: name
              - type: custom:mushroom-entity-card
                entity: sensor.time
                primary_info: state
                secondary_info: name
              - type: custom:mushroom-entity-card
                entity: sensor.current_version
                primary_info: state
                secondary_info: name
              - type: custom:mushroom-entity-card
                entity: sensor.available_version
                primary_info: state
                secondary_info: name

          - type: custom:mushroom-entity-card
            entity: sensor.ha_uptime
            primary_info: state
            secondary_info: name

          - type: custom:mushroom-entity-card
            entity: sensor.external_ip
            primary_info: state
            secondary_info: name

          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                show:
                  labels: false
                  labels_secondary: false
                entities:
                  - entity: sensor.processor_use
                    name: CPU
                line_color: blue
                line_width: 8
                font_size: 75
                points_per_hour: 2
              - type: custom:mini-graph-card
                show:
                  labels: false
                  labels_secondary: false
                entities:
                  - entity: sensor.memory_use_percent
                    name: RAM
                line_color: '#e74c3c'
                line_width: 8
                font_size: 75
                points_per_hour: 2
              - type: custom:mini-graph-card
                show:
                  labels: false
                  labels_secondary: false
                entities:
                  - entity: sensor.disk_use_percent_config
                    name: Disk
                line_color: var(--accent-color)
                line_width: 8
                font_size: 75
                points_per_hour: 2

      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            subtitle: Scripts

          - type: custom:mushroom-template-card
            primary: Generate Readme
            entity: script.readme_generate
            icon: mdi:page-next
            icon_color: |-
              {%- if is_state(entity, "on") -%}
                green
              {%- else -%}
                grey
              {%- endif -%}
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: script.turn_on
              service_data: {}
              target:
                entity_id: script.readme_generate

      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            subtitle: Battery Levels

          - type: custom:battery-state-card
            sort_by_level: "asc"
            secondary_info: last_updated
            bulk_rename:
              - from: ": Battery level"
              - from: " Battery Level"
            tap_action:
              action: more-info
            collapse:
              - name: "Computers [{count}] (min: {min}%)"
                secondary_info: "Battery levels {range}%"
                icon: mdi:desktop-tower
                entities:
                  - sensor.ardena_battery_remaining
                  - sensor.athos_battery_remaining
              - name: "Door Sensors [{count}] (min: {min}%)"
                secondary_info: "Battery levels {range}%"
                icon: mdi:door
                entities:
                  - sensor.front_door_battery_level
                  - sensor.sliding_door_battery_level
                  - sensor.garage_side_door_battery_level
                  - sensor.garage_entry_door_battery_level
              - name: "Leak Sensors [{count}] (min: {min}%)"
                secondary_info: "Battery levels {range}%"
                icon: mdi:water-off
                entities:
                  - sensor.bathroom_leak_sensor_battery_level
                  - sensor.master_bathroom_leak_sensor_battery_level
                  - sensor.basement_bathroom_leak_sensor_battery_level
                  - sensor.fridge_leak_sensor_battery_level
                  - sensor.laundry_leak_sensor_battery_level
                  - sensor.water_heater_leak_sensor_battery_level
              - name: "Mobile Devices [{count}] (min: {min}%)"
                secondary_info: "Battery levels {range}%"
                icon: mdi:cellphone
                entities:
                  - sensor.pixel_6_battery_level
                  - sensor.galaxy_s21_battery_level
                  - sensor.ipad_josh_battery_level
                  - sensor.quest_battery_level
            entities:
              - sensor.lock_front_battery_level
              - sensor.garage_multisensor_battery_level
              - entity: sensor.pixel_6_battery_level
                charging_state:
                  entity_id: binary_sensor.pixel_6_is_charging
                  state: "on"
              - entity: sensor.galaxy_s21_battery_level
                charging_state:
                  entity_id: binary_sensor.galaxy_s21_is_charging
                  state: "on"
              - entity: sensor.ipad_josh_battery_level
                charging_state:
                  entity_id: sensor.ipad_josh_battery_state
                  state: "Charging"
              - entity: sensor.quest_battery_level
                charging_state:
                  entity_id: binary_sensor.quest_is_charging
                  state: "on"

      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            subtitle: Configuration

          - type: grid
            columns: 2
            square: false
            cards:
              - type: custom:mushroom-entity-card
                entity: input_boolean.mobile_notifications
                tap_action:
                  action: toggle
              - type: custom:mushroom-entity-card
                entity: input_boolean.audio_notifications
                tap_action:
                  action: toggle

          - type: entities
            entities:
              - type: custom:fold-entity-row
                head:
                  type: section
                  label: Audio Notification Options
                entities:
                  - type: custom:time-picker-card
                    entity: input_datetime.audio_notifications_start
                    hour_mode: 12
                    layout:
                      name: inside
                      hour_mode: 'single'
                      align_controls: right
                      embedded: true
                  - type: custom:time-picker-card
                    entity: input_datetime.audio_notifications_end
                    hour_mode: 12
                    layout:
                      name: inside
                      hour_mode: 'single'
                      align_controls: right
                      embedded: true
                  - type: custom:time-picker-card
                    entity: input_datetime.nap_time_start
                    hour_mode: 12
                    layout:
                      name: inside
                      hour_mode: 'single'
                      align_controls: right
                      embedded: true
                  - type: custom:time-picker-card
                    entity: input_datetime.nap_time_end
                    hour_mode: 12
                    layout:
                      name: inside
                      hour_mode: 'single'
                      align_controls: right
                      embedded: true

              - type: custom:fold-entity-row
                head:
                  type: section
                  label: Energy Rates
                entities:
                  - select.monthly_energy
                  - input_text.tariff_summer_offpeak
                  - input_text.tariff_summer_peak
                  - input_text.tariff_winter_offpeak
                  - input_text.tariff_winter_peak

      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            subtitle: Database Info

          - type: grid
            columns: 2
            square: false
            cards:
              - type: custom:mushroom-entity-card
                entity: sensor.influxdb_database_size
                primary_info: state
                secondary_info: name
              - type: custom:mushroom-entity-card
                entity: sensor.database_size
                name: MariaDB Database Size
                primary_info: state
                secondary_info: name

              - type: custom:mushroom-entity-card
                entity: sensor.table_size_states
                name: Table 'states'
                primary_info: state
                secondary_info: name
              - type: custom:mushroom-entity-card
                entity: sensor.table_size_events
                name: Table 'events'
                primary_info: state
                secondary_info: name

              - type: custom:mushroom-entity-card
                entity: sensor.table_size_recorder_runs
                name: Table 'recorder_runs'
                primary_info: state
                secondary_info: name
              - type: custom:mushroom-entity-card
                entity: sensor.table_size_schema_changes
                name: Table 'schema_changes'
                primary_info: state
                secondary_info: name

          - type: custom:mushroom-template-card
            primary: Purge MariaDB
            secondary: Purge the Database Now
            entity: script.sql_purge
            icon: mdi:delete-variant
            icon_color: |-
              {%- if is_state(entity, "on") -%}
                green
              {%- else -%}
                grey
              {%- endif -%}
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: script.turn_on
              service_data: {}
              target:
                entity_id: script.sql_purge

          - type: entities
            entities:
              - type: custom:numberbox-card
                entity: input_number.sql_purge_keep

      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            subtitle: Map

          - type: map
            aspect_ratio: 16:9
            default_zoom: 12
            hours_to_show: 2
            dark_mode: true
            entities:
              - person.joshua
              - person.amy

      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            subtitle: Watchman

          - type: grid
            columns: 2
            square: false
            cards:
              - type: custom:mushroom-entity-card
                entity: sensor.watchman_missing_entities
                tap_action:
                  action: call-service
                  service: browser_mod.popup
                  service_data:
                    title: Entities Report
                    card:
                      type: vertical-stack
                      cards:
                        - type: markdown
                          content: >-
                            <h3>Missing Entities: {{ states.sensor.watchman_missing_entities.state }}</h3>
                            {%- for item in state_attr("sensor.watchman_missing_entities", "entities") %}
                              <hr><table><tr><td>
                              <ha-icon icon="mdi:{%- if item.state=="missing" -%}cloud-alert{%- elif item.state=="unavail" -%}cloud-off-outline{%- else -%}cloud-question{%- endif -%}"></ha-icon>
                              {{ item.id }} [{{ item.state }}] <a title="{{ item.occurrences }}">{{ item.occurrences.split('/')[-1].split(':')[0] }}</a>
                              </td></tr></table>
                            {%- endfor %}
                          card_mod:
                            style:
                              ha-markdown:
                                $: |
                                  ha-markdown-element:first-of-type hr {
                                    border-color: #303030;
                                  }

              - type: custom:mushroom-entity-card
                entity: sensor.watchman_missing_services
                tap_action:
                  action: call-service
                  service: browser_mod.popup
                  service_data:
                    title: Services Report
                    card:
                      type: vertical-stack
                      cards:
                        - type: markdown
                          content: >-
                            <h3>Missing Services: {{ states.sensor.watchman_missing_services.state }} </h3>
                            {%- for item in state_attr("sensor.watchman_missing_services", "services") %}
                              <hr><table><tr><td>
                              <ha-icon icon="mdi:cloud-alert"></ha-icon> {{ item.id }}
                              <a title="{{ item.occurrences }}">{{ item.occurrences.split('/')[-1].split(':')[0] }}</a>
                              </td></tr></table>
                            {%- endfor %}
                          card_mod:
                            style:
                              ha-markdown:
                                $: |
                                  ha-markdown-element:first-of-type hr {
                                    border-color: #303030;
                                  }
